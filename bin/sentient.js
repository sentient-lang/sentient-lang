(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var Compiler=require("./sentient/compiler");var Runtime=require("./sentient/runtime");module.exports.compile=function(program){return Compiler.compile(program)};module.exports.run=function(program,assignments,adapterName){return Runtime.run(program,assignments,adapterName)};if(typeof window!=="undefined"){window.Sentient=module.exports}},{"./sentient/compiler":2,"./sentient/runtime":31}],2:[function(require,module,exports){"use strict";var Level4Compiler=require("./compiler/level4Compiler");var Level3Compiler=require("./compiler/level3Compiler");var Level2Compiler=require("./compiler/level2Compiler");var Level1Compiler=require("./compiler/level1Compiler");var Compiler=function(program){var self=this;self.compile=function(){program=Level4Compiler.compile(program);program=Level3Compiler.compile(program);program=Level2Compiler.compile(program);program=Level1Compiler.compile(program);return program}};Compiler.compile=function(program){return new Compiler(program).compile()};module.exports=Compiler},{"./compiler/level1Compiler":5,"./compiler/level2Compiler":10,"./compiler/level3Compiler":15,"./compiler/level4Compiler":22}],3:[function(require,module,exports){"use strict";var Stack=function(){var self=this;var array=[];self.push=function(symbol){array.push(symbol)};self.pop=function(){var symbol=array.pop();if(typeof symbol==="undefined"){throw new Error("Cannot pop from an empty stack")}return symbol}};module.exports=Stack},{}],4:[function(require,module,exports){"use strict";var SymbolTable=function(){var self=this;var object={};self.set=function(symbol,type,symbols){object[symbol]={type:type,symbols:symbols}};self.type=function(symbol){throwIfMissing(symbol);return object[symbol].type};self.symbols=function(symbol){throwIfMissing(symbol);return object[symbol].symbols};self.contains=function(symbol){return typeof object[symbol]!=="undefined"};var throwIfMissing=function(symbol){if(!self.contains(symbol)){throw new Error("Symbol '"+symbol+"' is not in the SymbolTable")}}};module.exports=SymbolTable},{}],5:[function(require,module,exports){"use strict";var Stack=require("./common/stack");var SymbolTable=require("./level1Compiler/symbolTable");var Registry=require("./level1Compiler/registry");var CodeWriter=require("./level1Compiler/codeWriter");var InstructionSet=require("./level1Compiler/instructionSet");var _=require("underscore");var Compiler=function(input){var self=this;var stack=new Stack;var symbolTable=new SymbolTable;var registry=new Registry;var codeWriter=new CodeWriter;var instructionSet=new InstructionSet({stack:stack,symbolTable:symbolTable,registry:registry,codeWriter:codeWriter});self.compile=function(){if(input.metadata){codeWriter.metadata(input.metadata)}_.each(input.instructions,function(instruction){instructionSet.call(instruction)});return codeWriter.write()}};Compiler.compile=function(input){return new Compiler(input).compile()};module.exports=Compiler},{"./common/stack":3,"./level1Compiler/codeWriter":6,"./level1Compiler/instructionSet":7,"./level1Compiler/registry":8,"./level1Compiler/symbolTable":9,underscore:199}],6:[function(require,module,exports){"use strict";var _=require("underscore");var CodeWriter=function(){var self=this;var metadata={};var variables={};var clauses=[];var maxLiteral=0;self.metadata=function(object){metadata=object};self.variable=function(symbol,literal){variables[symbol]=literal};self.clause=function(){var clause=[];_.each(arguments,function(literal){clause.push(literal);var positiveLiteral=Math.abs(literal);if(positiveLiteral>maxLiteral){maxLiteral=positiveLiteral}});clauses.push(clause)};self.write=function(){var output="";output+=writeHeader();output+=writeMetadata();output+=writeProblemSize();output+=writeClauses();return output};var writeHeader=function(){return"c Sentient Machine Code, Version 1.0\n"};var writeMetadata=function(){metadata.level1Variables=variables;var json=JSON.stringify(metadata,null,2);var lines=json.split("\n");var output="";_.each(lines,function(line){output+="c "+line+"\n"});return output};var writeProblemSize=function(){var numberOfLiterals=maxLiteral;var numberOfClauses=clauses.length;return"p cnf "+numberOfLiterals+" "+numberOfClauses+"\n"};var writeClauses=function(){return _.map(clauses,function(clause){return clause.join(" ")+" 0\n"}).join("")}};module.exports=CodeWriter},{underscore:199}],7:[function(require,module,exports){"use strict";var InstructionSet=function(params){var self=this;var stack=params.stack;var symbolTable=params.symbolTable;var registry=params.registry;var codeWriter=params.codeWriter;self.call=function(instruction){switch(instruction.type){case"push":self.push(instruction.symbol);break;case"pop":self.pop(instruction.symbol);break;case"not":self.not();break;case"and":self.and();break;case"or":self.or();break;case"equal":self.equal();break;case"true":self._true();break;case"false":self._false();break;case"variable":self.variable(instruction.symbol);break;case"duplicate":self.duplicate();break;case"swap":self.swap();break;case"if":self._if();break;case"invariant":self.invariant();break;default:var message="Unrecognised instruction: "+instruction.type;throw new Error(message)}};self.push=function(symbol){stack.push(symbol);if(!symbolTable.contains(symbol)){var literal=registry.nextLiteral();symbolTable.set(symbol,literal);codeWriter.clause(literal,-literal)}};self.pop=function(symbol){var stackSymbol=stack.pop();var stackLiteral=symbolTable.get(stackSymbol);symbolTable.set(symbol,stackLiteral)};self.not=function(){var stackSymbol=stack.pop();var stackLiteral=symbolTable.get(stackSymbol);var symbol=registry.nextSymbol();var literal=registry.nextLiteral();stack.push(symbol);symbolTable.set(symbol,literal);codeWriter.clause(stackLiteral,literal);codeWriter.clause(-stackLiteral,-literal)};self.and=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightLiteral=symbolTable.get(rightSymbol);var leftLiteral=symbolTable.get(leftSymbol);var symbol=registry.nextSymbol();var literal=registry.nextLiteral();stack.push(symbol);symbolTable.set(symbol,literal);codeWriter.clause(-leftLiteral,-rightLiteral,literal);codeWriter.clause(leftLiteral,-literal);codeWriter.clause(rightLiteral,-literal)};self.or=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightLiteral=symbolTable.get(rightSymbol);var leftLiteral=symbolTable.get(leftSymbol);var symbol=registry.nextSymbol();var literal=registry.nextLiteral();stack.push(symbol);symbolTable.set(symbol,literal);codeWriter.clause(leftLiteral,rightLiteral,-literal);codeWriter.clause(-leftLiteral,literal);codeWriter.clause(-rightLiteral,literal)};self.equal=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightLiteral=symbolTable.get(rightSymbol);var leftLiteral=symbolTable.get(leftSymbol);var symbol=registry.nextSymbol();var literal=registry.nextLiteral();stack.push(symbol);symbolTable.set(symbol,literal);codeWriter.clause(leftLiteral,rightLiteral,literal);codeWriter.clause(leftLiteral,-rightLiteral,-literal);codeWriter.clause(-leftLiteral,rightLiteral,-literal);codeWriter.clause(-leftLiteral,-rightLiteral,literal)};self._true=function(){var symbol=registry.trueSymbol();stack.push(symbol);if(!symbolTable.contains(symbol)){var literal=registry.nextLiteral();symbolTable.set(symbol,literal);codeWriter.clause(literal)}};self._false=function(){var symbol=registry.falseSymbol();stack.push(symbol);if(!symbolTable.contains(symbol)){var literal=registry.nextLiteral();symbolTable.set(symbol,literal);codeWriter.clause(-literal)}};self.variable=function(symbol){var literal=symbolTable.get(symbol);codeWriter.variable(symbol,literal)};self.duplicate=function(){var symbol=stack.pop();stack.push(symbol);stack.push(symbol)};self.swap=function(){var topSymbol=stack.pop();var bottomSymbol=stack.pop();stack.push(topSymbol);stack.push(bottomSymbol)};self._if=function(){var alternateSymbol=stack.pop();var consequentSymbol=stack.pop();var conditionSymbol=stack.pop();stack.push(conditionSymbol);stack.push(consequentSymbol);self.and();stack.push(conditionSymbol);self.not();stack.push(alternateSymbol);self.and();self.or()};self.invariant=function(){var stackSymbol=stack.pop();var stackLiteral=symbolTable.get(stackSymbol);codeWriter.clause(stackLiteral)}};module.exports=InstructionSet},{}],8:[function(require,module,exports){"use strict";var Registry=function(){var self=this;var prefix="$$$_L1_";var suffix="_$$$";var literalNumber=0;var symbolNumber=0;self.nextLiteral=function(){literalNumber+=1;return literalNumber};self.nextSymbol=function(){symbolNumber+=1;return prefix+"TMP"+symbolNumber+suffix};self.trueSymbol=function(){return prefix+"TRUE"+suffix};self.falseSymbol=function(){return prefix+"FALSE"+suffix}};module.exports=Registry},{}],9:[function(require,module,exports){"use strict";var SymbolTable=function(){var self=this;var object={};self.set=function(symbol,literal){object[symbol]=literal};self.get=function(symbol){var literal=object[symbol];if(typeof literal==="undefined"){throw new Error("Symbol '"+symbol+"' is not in the SymbolTable")}return literal};self.contains=function(symbol){var literal=object[symbol];return typeof literal!=="undefined"}};module.exports=SymbolTable},{}],10:[function(require,module,exports){"use strict";var Stack=require("./common/stack");var SymbolTable=require("./common/symbolTable");var Registry=require("./level2Compiler/registry");var CodeWriter=require("./level2Compiler/codeWriter");var InstructionSet=require("./level2Compiler/instructionSet");var _=require("underscore");var Compiler=function(input){var self=this;var stack=new Stack;var symbolTable=new SymbolTable;var registry=new Registry;var codeWriter=new CodeWriter;var instructionSet=new InstructionSet({stack:stack,symbolTable:symbolTable,registry:registry,codeWriter:codeWriter});self.compile=function(){if(input.metadata){codeWriter.metadata(input.metadata)}_.each(input.instructions,function(instruction){instructionSet.call(instruction)});return codeWriter.write()}};Compiler.compile=function(input){return new Compiler(input).compile()};module.exports=Compiler},{"./common/stack":3,"./common/symbolTable":4,"./level2Compiler/codeWriter":11,"./level2Compiler/instructionSet":12,"./level2Compiler/registry":13,underscore:199}],11:[function(require,module,exports){"use strict";var CodeWriter=function(){var self=this;var instructions=[];var metadata={};var variables={};self.instruction=function(object){instructions.push(object)};self.metadata=function(object){metadata=object};self.variable=function(symbol,type,symbols){variables[symbol]={type:type,symbols:symbols}};self.write=function(){var output={};output.instructions=instructions;output.metadata=metadata;output.metadata.level2Variables=variables;return output}};module.exports=CodeWriter},{}],12:[function(require,module,exports){"use strict";var TwosComplement=require("./twosComplement");var _=require("underscore");var InstructionSet=function(params){var self=this;var stack=params.stack;var symbolTable=params.symbolTable;var registry=params.registry;var codeWriter=params.codeWriter;self.call=function(instruction){switch(instruction.type){case"boolean":self._boolean(instruction.symbol);break;case"integer":self._integer(instruction.symbol,instruction.width);break;case"push":self.push(instruction.symbol);break;case"pop":self.pop(instruction.symbol);break;case"constant":self.constant(instruction.value);break;case"and":self.and();break;case"or":self.or();break;case"not":self.not();break;case"equal":self.equal();break;case"add":self.add();break;case"negate":self.negate();break;case"absolute":self.absolute();break;case"subtract":self.subtract();break;case"lessthan":self.lessthan();break;case"greaterthan":self.greaterthan();break;case"lessequal":self.lessequal();break;case"greaterequal":self.greaterequal();break;case"multiply":self.multiply();break;case"divmod":self.divmod();break;case"divide":self.divide();break;case"modulo":self.modulo();break;case"variable":self.variable(instruction.symbol);break;case"duplicate":self.duplicate();break;case"swap":self.swap();break;case"if":self._if();break;case"invariant":self.invariant();break;default:var message="Unrecognised instruction: "+instruction.type;throw new Error(message)}};self._boolean=function(symbol){declare(symbol,"boolean",registry.nextBoolean())};self._integer=function(symbol,width){if(!width){throw new Error("No width provided when declaring integer")}declare(symbol,"integer",registry.nextInteger(width))};self.push=function(symbol){if(!symbolTable.contains(symbol)){var message="'"+symbol+"' must be declared before it can be used";throw new Error(message)}stack.push(symbol)};self.pop=function(symbol){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);if(symbolTable.contains(symbol)){var declaredType=symbolTable.type(symbol);if(stackType!==declaredType){var message="unable to assign "+stackType+" to ";message+=declaredType+" '"+symbol+"'";throw new Error(message)}}symbolTable.set(symbol,stackType,stackSymbols)};self.constant=function(value){var symbol=registry.nextSymbol();var type=typeName(value);var symbols;if(type==="boolean"){symbols=registry.nextBoolean();codeWriter.instruction({type:value.toString()});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else if(type==="integer"){var bitArray=TwosComplement.encode(value);symbols=registry.nextInteger(bitArray.length);_.each(bitArray,function(bit,index){codeWriter.instruction({type:bit.toString()});codeWriter.instruction({type:"pop",symbol:symbols[index]})})}stack.push(symbol);symbolTable.set(symbol,type,symbols)};self.and=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="boolean"&&leftType==="boolean"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for and: "+leftType+" && "+rightType;throw new Error(msg)}};self.or=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="boolean"&&leftType==="boolean"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"or"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for or: "+leftType+" || "+rightType;throw new Error(msg)}};self.not=function(){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(stackType==="boolean"){codeWriter.instruction({type:"push",symbol:stackSymbols[0]});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{throw new Error("Wrong type for not: "+stackType)}};self.equal=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="boolean"&&leftType==="boolean"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"equal"})}else if(rightType==="integer"&&leftType==="integer"){var padded=TwosComplement.pad(leftSymbols,rightSymbols);_.each(padded.rightSymbols,function(r,index){var l=padded.leftSymbols[index];codeWriter.instruction({type:"push",symbol:l});codeWriter.instruction({type:"push",symbol:r});codeWriter.instruction({type:"equal"})});for(var i=0;i<padded.rightSymbols.length-1;i+=1){codeWriter.instruction({type:"and"})}}else{var msg="Type mismatch for equals: "+leftType+" == "+rightType;throw new Error(msg)}codeWriter.instruction({type:"pop",symbol:symbols[0]})};self.add=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);if(rightType!=="integer"||leftType!=="integer"){throw new Error("Cannot add a "+rightType+" to a "+leftType)}var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var padded=TwosComplement.pad(leftSymbols,rightSymbols);var width=padded.leftSymbols.length+1;var symbol=registry.nextSymbol();var symbols=registry.nextInteger(width);stack.push(symbol);symbolTable.set(symbol,"integer",symbols);var carryIn=registry.nextBoolean();codeWriter.instruction({type:"false"});codeWriter.instruction({type:"pop",symbol:carryIn[0]});for(var i=width-2;i>=0;i-=1){var r=padded.rightSymbols[i];var l=padded.leftSymbols[i];codeWriter.instruction({type:"push",symbol:l});codeWriter.instruction({type:"push",symbol:r});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"duplicate"});codeWriter.instruction({type:"push",symbol:carryIn[0]});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"pop",symbol:symbols[i+1]});codeWriter.instruction({type:"push",symbol:carryIn[0]});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"push",symbol:l});codeWriter.instruction({type:"push",symbol:r});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"or"});carryIn=registry.nextBoolean();codeWriter.instruction({type:"pop",symbol:carryIn[0]})}codeWriter.instruction({type:"push",symbol:padded.leftSymbols[0]});codeWriter.instruction({type:"push",symbol:padded.rightSymbols[0]});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"duplicate"});codeWriter.instruction({type:"push",symbol:carryIn[0]});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"swap"});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"push",symbol:carryIn[0]});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"or"});codeWriter.instruction({type:"pop",symbol:symbols[0]})};self.negate=function(){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger(stackSymbols.length);symbolTable.set(symbol,"integer",symbols);if(stackType!=="integer"){throw new Error("Wrong type for negate: "+stackType)}for(var i=0;i<stackSymbols.length;i+=1){codeWriter.instruction({type:"push",symbol:stackSymbols[i]});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"pop",symbol:symbols[i]})}self.push(symbol);self.constant(1);self.add()};self.absolute=function(){self.duplicate();self.constant(0);self.greaterequal();self.swap();self.duplicate();self.negate();self._if()};self.subtract=function(){self.negate();self.add()};self.lessthan=function(){self.subtract();var stackSymbol=stack.pop();var stackSymbols=symbolTable.symbols(stackSymbol);var signSymbol=stackSymbols[0];var symbol=registry.nextSymbol();stack.push(symbol);symbolTable.set(symbol,"boolean",[signSymbol])};self.greaterthan=function(){self.swap();self.lessthan()};self.lessequal=function(){self.greaterthan();self.not()};self.greaterequal=function(){self.lessthan();self.not()};self.multiply=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);if(rightType!=="integer"||leftType!=="integer"){throw new Error("Cannot multiply a "+rightType+" by a "+leftType)}var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var width=rightSymbols.length+leftSymbols.length;var padded=TwosComplement.pad(leftSymbols,rightSymbols,width);rightSymbols=padded.rightSymbols;leftSymbols=padded.leftSymbols;var zero=registry.nextBoolean()[0];codeWriter.instruction({type:"false"});codeWriter.instruction({type:"pop",symbol:zero});for(var r=width-1;r>=0;r-=1){var partialSymbol=registry.nextSymbol();var partialSymbols=registry.nextInteger(width);for(var l=width-r-1;l<width;l+=1){var index=l+r+1-width;codeWriter.instruction({type:"push",symbol:rightSymbols[r]});codeWriter.instruction({type:"push",symbol:leftSymbols[l]});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"pop",symbol:partialSymbols[index]})}for(var i=r+1;i<width;i+=1){partialSymbols[i]=zero}symbolTable.set(partialSymbol,"integer",partialSymbols);stack.push(partialSymbol);if(r<width-1){self.add();var sumSymbol=stack.pop();var sumSymbols=symbolTable.symbols(sumSymbol);var tailSymbol=registry.nextSymbol();var tailSymbols=sumSymbols.slice(1);symbolTable.set(tailSymbol,"integer",tailSymbols);stack.push(tailSymbol)}}};self.divmod=function(){var divisorSymbol=stack.pop();var dividendSymbol=stack.pop();var divisorType=symbolTable.type(divisorSymbol);var dividendType=symbolTable.type(dividendSymbol);if(divisorType!=="integer"||dividendType!=="integer"){var msg="Cannot divide a "+dividendType+" by a "+divisorType;throw new Error(msg)}var width=symbolTable.symbols(dividendSymbol).length;var quotientSymbol=registry.nextSymbol();var remainderSymbol=registry.nextSymbol();var quotientSymbols=registry.nextInteger(width);var remainderSymbols=registry.nextInteger(width);symbolTable.set(quotientSymbol,"integer",quotientSymbols);symbolTable.set(remainderSymbol,"integer",remainderSymbols);self.push(divisorSymbol);self.push(quotientSymbol);self.multiply();self.push(remainderSymbol);self.add();self.push(dividendSymbol);self.equal();self.invariant();self.push(remainderSymbol);self.constant(0);self.greaterequal();self.invariant();self.push(remainderSymbol);self.push(divisorSymbol);self.absolute();self.lessthan();self.invariant();self.push(remainderSymbol);self.push(quotientSymbol)};self.divide=function(){self.divmod();self.swap();stack.pop()};self.modulo=function(){self.divmod();stack.pop()};self.variable=function(symbol){var type=symbolTable.type(symbol);var symbols=symbolTable.symbols(symbol);_.each(symbols,function(s){codeWriter.instruction({type:"variable",symbol:s})});codeWriter.variable(symbol,type,symbols)};self.duplicate=function(){var symbol=stack.pop();stack.push(symbol);stack.push(symbol)};self.swap=function(){var topSymbol=stack.pop();var bottomSymbol=stack.pop();stack.push(topSymbol);stack.push(bottomSymbol)};self._if=function(){var alternateSymbol=stack.pop();var consequentSymbol=stack.pop();var conditionSymbol=stack.pop();var alternateType=symbolTable.type(alternateSymbol);var consequentType=symbolTable.type(consequentSymbol);var conditionType=symbolTable.type(conditionSymbol);var msg;if(conditionType!=="boolean"){msg="The condition type must be a boolean but is "+conditionType;throw new Error(msg)}if(consequentType!==alternateType){msg="The consequent and alternate types must match: ";msg+=consequentType+" !== "+alternateType;throw new Error(msg)}var type=consequentType;var alternateSymbols=symbolTable.symbols(alternateSymbol);var consequentSymbols=symbolTable.symbols(consequentSymbol);var conditionSymbols=symbolTable.symbols(conditionSymbol);var symbols;if(type==="boolean"){symbols=registry.nextBoolean()}else if(type==="integer"){var padded=TwosComplement.pad(consequentSymbols,alternateSymbols);var width=padded.leftSymbols.length;consequentSymbols=padded.leftSymbols;alternateSymbols=padded.rightSymbols;symbols=registry.nextInteger(width)}var symbol=registry.nextSymbol();stack.push(symbol);symbolTable.set(symbol,type,symbols);for(var i=0;i<symbols.length;i+=1){codeWriter.instruction({type:"push",symbol:conditionSymbols[0]});codeWriter.instruction({type:"push",symbol:consequentSymbols[i]});codeWriter.instruction({type:"push",symbol:alternateSymbols[i]});codeWriter.instruction({type:"if"});codeWriter.instruction({type:"pop",symbol:symbols[i]})}};self.invariant=function(){var stackSymbol=stack.pop();var type=symbolTable.type(stackSymbol);var symbols=symbolTable.symbols(stackSymbol);if(type!=="boolean"){throw new Error("Wrong type for invariant: "+type)}codeWriter.instruction({type:"push",symbol:symbols[0]});codeWriter.instruction({type:"invariant"})};var declare=function(symbol,type,symbols){if(symbolTable.contains(symbol)){throw new Error(type+" '"+symbol+"' has already been declared")}else{_.each(symbols,function(s){codeWriter.instruction({type:"push",symbol:s})});var clone=symbols.slice(0);clone.reverse();_.each(clone,function(s){codeWriter.instruction({type:"pop",symbol:s})});symbolTable.set(symbol,type,symbols)}};var typeName=function(value){var t=typeof value;if(t==="boolean"){return"boolean"}else if(t==="number"&&value%1===0){return"integer"}else{throw new Error("Constants of type '"+t+"' are not supported")}}};module.exports=InstructionSet},{"./twosComplement":14,underscore:199}],13:[function(require,module,exports){"use strict";var Registry=function(){var self=this;var prefix="$$$_L2_";var suffix="_$$$";var symbolNumber=0;var booleanNumber=0;var integerNumber=0;self.nextSymbol=function(){symbolNumber+=1;return prefix+"TMP"+symbolNumber+suffix};self.nextBoolean=function(){booleanNumber+=1;return[prefix+"BOOLEAN"+booleanNumber+suffix]};self.nextInteger=function(width){if(!width){throw new Error("No width specified")}integerNumber+=1;var symbols=[];for(var i=0;i<width;i+=1){symbols.push(prefix+"INTEGER"+integerNumber+"_BIT"+i+suffix)}return symbols}};module.exports=Registry},{}],14:[function(require,module,exports){"use strict";var _=require("underscore");var TwosComplement={};TwosComplement.encode=function(n){var binary,array;if(n<0){binary=Number(Math.abs(n+1)).toString(2);array=_.map(binary,function(bit){return bit==="0"});if(array[0]!==true){array.unshift(true)}}else{binary=Number(n).toString(2);array=_.map(binary,function(bit){return bit==="1"});if(array[0]!==false){array.unshift(false)}}return array};TwosComplement.decode=function(array){var total=0;_.each(array,function(bit,index){if(bit){total+=Math.pow(2,array.length-index-1)}if(index===0){total=-total}});if(total===-0){total=0}return total};TwosComplement.pad=function(leftSymbols,rightSymbols,width){if(!width){width=Math.max(leftSymbols.length,rightSymbols.length)}var left=leftSymbols.slice(0);var right=rightSymbols.slice(0);for(var i=0;i<width-rightSymbols.length;i+=1){right.unshift(right[0])}for(i=0;i<width-leftSymbols.length;i+=1){left.unshift(left[0])}return{leftSymbols:left,rightSymbols:right}};module.exports=TwosComplement},{underscore:199}],15:[function(require,module,exports){"use strict";var Stack=require("./common/stack");var SymbolTable=require("./level3Compiler/symbolTable");var Registry=require("./level3Compiler/registry");var FunctionRegistry=require("./level3Compiler/functionRegistry");var CodeWriter=require("./level3Compiler/codeWriter");var InstructionSet=require("./level3Compiler/instructionSet");var _=require("underscore");var Compiler=function(input){var self=this;var stack=new Stack;var typedefStack=new Stack;var symbolTable=new SymbolTable;var registry=new Registry;var functionRegistry=new FunctionRegistry;var codeWriter=new CodeWriter;var callStack=[];var instructionSet=new InstructionSet({stack:stack,typedefStack:typedefStack,symbolTable:symbolTable,registry:registry,functionRegistry:functionRegistry,codeWriter:codeWriter,callStack:callStack});self.compile=function(){if(input.metadata){codeWriter.metadata(input.metadata)}_.each(input.instructions,function(instruction){instructionSet.call(instruction)});return codeWriter.write()}};Compiler.compile=function(input){return new Compiler(input).compile()};module.exports=Compiler},{"./common/stack":3,"./level3Compiler/codeWriter":16,"./level3Compiler/functionRegistry":18,"./level3Compiler/instructionSet":19,"./level3Compiler/registry":20,"./level3Compiler/symbolTable":21,underscore:199}],16:[function(require,module,exports){"use strict";var CodeWriter=function(){var self=this;var instructions=[];var metadata={};var variables={};self.instruction=function(object){instructions.push(object)};self.metadata=function(object){metadata=object};self.variable=function(symbol,type,symbols,supporting,nilDecider){var existing=variables[symbol];if(existing&&!existing.supporting){supporting=false}variables[symbol]={type:type,symbols:symbols};if(supporting){variables[symbol].supporting=true}if(nilDecider){variables[symbol].nilDecider=nilDecider}};self.write=function(){var output={};output.instructions=instructions;output.metadata=metadata;output.metadata.level3Variables=variables;return output}};module.exports=CodeWriter},{}],17:[function(require,module,exports){"use strict";var DynamicScope=function(contextTable,localTable){var self=this;self.reassignedArrays=[];self.set=function(symbol,type,symbols,forceLocal){updateReassignedArrays(symbol,type,forceLocal);return target(symbol,forceLocal).set(symbol,type,symbols)};self.type=function(symbol){return target(symbol).type(symbol)};self.symbols=function(symbol){return target(symbol).symbols(symbol)};self.contains=function(symbol){return target(symbol).contains(symbol)};self.setNilConditions=function(symbol,conditions){return target(symbol).setNilConditions(symbol,conditions)};self.getNilConditions=function(symbol){return target(symbol).getNilConditions(symbol)};var target=function(symbol,forceLocal){if(forceLocal||localTable.contains(symbol)){return localTable}else if(contextTable.contains(symbol)){return contextTable}else{return localTable}};var updateReassignedArrays=function(symbol,type,forceLocal){var symbolTable=target(symbol,forceLocal);if(symbolTable!==contextTable){return}if(self.reassignedArrays.indexOf(symbol)!==-1){return}self.reassignedArrays.push(symbol)}};module.exports=DynamicScope},{}],18:[function(require,module,exports){"use strict";var FunctionRegistry=function(){var self=this;var functions={};self.register=function(name,args,body,dynamic,immutable,returns){throwIfImmutable(name);functions[name]={name:name,args:args,body:body,dynamic:dynamic,immutable:immutable,returns:returns}};self.get=function(name){var fn=functions[name];if(typeof fn==="undefined"){throw new Error("Function '"+name+"' is not defined")}return fn};var throwIfImmutable=function(name){var existingFunction=functions[name];if(existingFunction&&existingFunction.immutable){throw new Error("Unable to redefine immutable function '"+name+"'")}}};module.exports=FunctionRegistry},{}],19:[function(require,module,exports){"use strict";var _=require("underscore");var Stack=require("../common/stack");var SymbolTable=require("../level3Compiler/symbolTable");var DynamicScope=require("./dynamicScope");var InstructionSet=function(params){var self=this;var recording;var stack=params.stack;var typedefStack=params.typedefStack;var symbolTable=params.symbolTable;
var registry=params.registry;var functionRegistry=params.functionRegistry;var codeWriter=params.codeWriter;var callStack=params.callStack;self.stack=stack;self.typedefStack=typedefStack;self.symbolTable=symbolTable;self.registry=registry;self.functionRegistry=functionRegistry;self.codeWriter=codeWriter;self.callStack=callStack;self.call=function(instruction){if(record(instruction)){return}switch(instruction.type){case"typedef":self.typedef(instruction.name,instruction.width);break;case"array":self.array(instruction.symbol,instruction.width);break;case"collect":self.collect(instruction.width);break;case"get":self.get(instruction.checkBounds);break;case"fetch":self.fetch(instruction.hasDefault);break;case"width":self.width();break;case"bounds":self.bounds();break;case"push":self.push(instruction.symbol);break;case"pop":self.pop(instruction.symbol);break;case"not":self.not();break;case"and":self.and();break;case"or":self.or();break;case"equal":self.equal();break;case"constant":self.constant(instruction.value);break;case"variable":self.variable(instruction.symbol);break;case"boolean":self._boolean(instruction.symbol);break;case"integer":self._integer(instruction.symbol,instruction.width);break;case"add":self.add();break;case"subtract":self.subtract();break;case"multiply":self.multiply();break;case"divmod":self.divmod();break;case"divide":self.divide();break;case"modulo":self.modulo();break;case"negate":self.negate();break;case"lessthan":self.lessthan();break;case"greaterthan":self.greaterthan();break;case"lessequal":self.lessequal();break;case"greaterequal":self.greaterequal();break;case"duplicate":self.duplicate();break;case"swap":self.swap();break;case"if":self._if();break;case"absolute":self.absolute();break;case"invariant":self.invariant();break;case"define":self.define(instruction.name,instruction.args,instruction.dynamic,instruction.immutable);break;case"return":self._return(instruction.width);break;case"call":self._call(instruction.name,instruction.width);break;default:var message="Unrecognised instruction: "+instruction.type;throw new Error(message)}};self._boolean=function(symbol){declare(symbol,"boolean",registry.nextBoolean())};self._integer=function(symbol,width){if(!width){throw new Error("No width provided when defining integer type")}if(width<=0){throw new Error("width must be a positive integer")}declare(symbol,"integer",registry.nextInteger(),width)};self.array=function(symbol,width,typedef){if(!width){throw new Error("No width provided when defining array type")}if(width<=0){throw new Error("width must be a positive integer")}declare(symbol,"array",registry.nextArray(width),undefined,typedef)};self.push=function(symbol){if(!symbolTable.contains(symbol)){var message="'"+symbol+"' must be declared before it can be used";throw new Error(message)}stack.push(symbol)};self.pop=function(symbol){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);var message;if(symbolTable.contains(symbol)){var declaredType=symbolTable.type(symbol);if(stackType!==declaredType){message="Unable to re-assign '"+symbol+"' to a "+stackType;message+=" because it was previously a "+declaredType;throw new Error(message)}if(stackType==="array"){var previousHierarchy=recursivelyExpandTypes(symbol);var newHierarchy=recursivelyExpandTypes(stackSymbol);previousHierarchy=JSON.stringify(previousHierarchy);newHierarchy=JSON.stringify(newHierarchy);if(previousHierarchy!==newHierarchy){message="Unable to re-assign '"+symbol+"' because its";message+=" type hierarchy has changed from "+previousHierarchy;message+=" to "+newHierarchy;throw new Error(message)}}}symbolTable.set(symbol,stackType,stackSymbols);var conditions=symbolTable.getNilConditions(stackSymbol);symbolTable.setNilConditions(symbol,conditions)};self.and=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="boolean"&&leftType==="boolean"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for and: "+leftType+" && "+rightType;throw new Error(msg)}};self.or=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="boolean"&&leftType==="boolean"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"or"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for or: "+leftType+" || "+rightType;throw new Error(msg)}};self.not=function(){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(stackType==="boolean"){codeWriter.instruction({type:"push",symbol:stackSymbols[0]});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{throw new Error("Wrong type for not: "+stackType)}};self.add=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"add"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for add: "+leftType+" + "+rightType;throw new Error(msg)}};self.subtract=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"subtract"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for subtract: "+leftType+" - "+rightType;throw new Error(msg)}};self.multiply=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"multiply"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for multiply: "+leftType+" * "+rightType;throw new Error(msg)}};self.divide=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"divide"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for divide: "+leftType+" / "+rightType;throw new Error(msg)}};self.modulo=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"modulo"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for modulo: "+leftType+" % "+rightType;throw new Error(msg)}};self.divmod=function(){var divisorSymbol=stack.pop();var dividendSymbol=stack.pop();var divisorType=symbolTable.type(divisorSymbol);var dividendType=symbolTable.type(dividendSymbol);var divisorSymbols=symbolTable.symbols(divisorSymbol);var dividendSymbols=symbolTable.symbols(dividendSymbol);var quotientSymbol=registry.nextSymbol();var remainderSymbol=registry.nextSymbol();var quotientSymbols=registry.nextInteger();var remainderSymbols=registry.nextInteger();stack.push(remainderSymbol);stack.push(quotientSymbol);symbolTable.set(quotientSymbol,"integer",quotientSymbols);symbolTable.set(remainderSymbol,"integer",remainderSymbols);if(divisorType==="integer"&&dividendType==="integer"){codeWriter.instruction({type:"push",symbol:dividendSymbols[0]});codeWriter.instruction({type:"push",symbol:divisorSymbols[0]});codeWriter.instruction({type:"divmod"});codeWriter.instruction({type:"pop",symbol:quotientSymbols[0]});codeWriter.instruction({type:"pop",symbol:remainderSymbols[0]})}else{var msg="Cannot divide a "+dividendType+" by a "+divisorType;throw new Error(msg)}};self.negate=function(){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(stackType==="integer"){codeWriter.instruction({type:"push",symbol:stackSymbols[0]});codeWriter.instruction({type:"negate"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{throw new Error("Wrong type for negate: "+stackType)}};self.absolute=function(){var stackSymbol=stack.pop();var stackType=symbolTable.type(stackSymbol);var stackSymbols=symbolTable.symbols(stackSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextInteger();stack.push(symbol);symbolTable.set(symbol,"integer",symbols);if(stackType==="integer"){codeWriter.instruction({type:"push",symbol:stackSymbols[0]});codeWriter.instruction({type:"absolute"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{throw new Error("Wrong type for absolute: "+stackType)}};self.lessthan=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"lessthan"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for lessthan: "+leftType+" < "+rightType;throw new Error(msg)}};self.greaterthan=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"greaterthan"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for greaterthan: ";msg+=leftType+" > "+rightType;throw new Error(msg)}};self.lessequal=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"lessequal"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for lessequal: "+leftType+" <= "+rightType;throw new Error(msg)}};self.greaterequal=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();stack.push(symbol);symbolTable.set(symbol,"boolean",symbols);if(rightType==="integer"&&leftType==="integer"){codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"greaterequal"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}else{var msg="Type mismatch for greaterequal: ";msg+=leftType+" >= "+rightType;throw new Error(msg)}};self.duplicate=function(){var symbol=stack.pop();stack.push(symbol);stack.push(symbol)};self.swap=function(){var topSymbol=stack.pop();var bottomSymbol=stack.pop();stack.push(topSymbol);stack.push(bottomSymbol)};self._if=function(){var alternateSymbol=stack.pop();var consequentSymbol=stack.pop();var conditionSymbol=stack.pop();var alternateType=symbolTable.type(alternateSymbol);var consequentType=symbolTable.type(consequentSymbol);var conditionType=symbolTable.type(conditionSymbol);var msg;if(conditionType!=="boolean"){msg="The condition type must be a boolean but is "+conditionType;throw new Error(msg)}if(consequentType!==alternateType){msg="The consequent and alternate types must match: ";msg+=consequentType+" !== "+alternateType;throw new Error(msg)}var type=consequentType;var alternateSymbols=symbolTable.symbols(alternateSymbol);var consequentSymbols=symbolTable.symbols(consequentSymbol);var conditionSymbols=symbolTable.symbols(conditionSymbol);var symbol=registry.nextSymbol();var symbols;var conditionsToSet=[];if(type==="array"){var maxLength;if(conditionSymbols.length>alternateSymbols.length){maxLength=conditionSymbols.length}else{maxLength=alternateSymbols.length}var firstElement=consequentSymbols[0];firstElement=firstElement||alternateSymbols[0];var firstElementType=symbolTable.type(firstElement);var fallbackSymbol=registry.nextSymbol();var fallbackSymbols;if(firstElementType==="boolean"){fallbackSymbols=registry.nextBoolean();codeWriter.instruction({type:"constant",value:false});codeWriter.instruction({type:"pop",symbol:fallbackSymbols[0]})}else if(firstElementType==="integer"){fallbackSymbols=registry.nextInteger();codeWriter.instruction({type:"constant",value:0});codeWriter.instruction({type:"pop",symbol:fallbackSymbols[0]})}else{fallbackSymbols=[]}symbolTable.set(fallbackSymbol,firstElementType,fallbackSymbols);var conditionIsTrueSymbol=conditionSymbols[0];var conditionIsFalseSymbol=registry.nextBoolean()[0];codeWriter.instruction({type:"push",symbol:conditionIsTrueSymbol});codeWriter.instruction({type:"not"});codeWriter.instruction({type:"pop",symbol:conditionIsFalseSymbol});symbols=[];for(var index=0;index<maxLength;index+=1){var c=consequentSymbols[index];var a=alternateSymbols[index];stack.push(conditionSymbol);if(c){stack.push(c)}else{stack.push(fallbackSymbol);conditionsToSet.push({conditionSymbol:conditionIsTrueSymbol,nilIndex:index})}if(a){stack.push(a)}else{stack.push(fallbackSymbol);conditionsToSet.push({conditionSymbol:conditionIsFalseSymbol,nilIndex:index})}self._if();symbols.push(stack.pop())}var consequentConditions=symbolTable.getNilConditions(consequentSymbol);_.each(consequentConditions,function(c){var conditionSymbol=registry.nextBoolean()[0];codeWriter.instruction({type:"push",symbol:conditionIsTrueSymbol});codeWriter.instruction({type:"push",symbol:c.conditionSymbol});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"pop",symbol:conditionSymbol});conditionsToSet.push({conditionSymbol:conditionSymbol,nilIndex:c.nilIndex})});var alternateConditions=symbolTable.getNilConditions(alternateSymbol);_.each(alternateConditions,function(c){var conditionSymbol=registry.nextBoolean()[0];codeWriter.instruction({type:"push",symbol:conditionIsFalseSymbol});codeWriter.instruction({type:"push",symbol:c.conditionSymbol});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"pop",symbol:conditionSymbol});conditionsToSet.push({conditionSymbol:conditionSymbol,nilIndex:c.nilIndex})})}else{if(type==="boolean"){symbols=registry.nextBoolean()}else if(type==="integer"){symbols=registry.nextInteger()}codeWriter.instruction({type:"push",symbol:conditionSymbols[0]});codeWriter.instruction({type:"push",symbol:consequentSymbols[0]});codeWriter.instruction({type:"push",symbol:alternateSymbols[0]});codeWriter.instruction({type:"if"});codeWriter.instruction({type:"pop",symbol:symbols[0]})}stack.push(symbol);symbolTable.set(symbol,type,symbols);if(conditionsToSet.length>0){symbolTable.setNilConditions(symbol,conditionsToSet)}};self.invariant=function(){var stackSymbol=stack.pop();var type=symbolTable.type(stackSymbol);var symbols=symbolTable.symbols(stackSymbol);if(type!=="boolean"){throw new Error("Wrong type for invariant: "+type)}codeWriter.instruction({type:"push",symbol:symbols[0]});codeWriter.instruction({type:"invariant"})};self.variable=function(symbol,supporting,nilDecider){supporting=supporting||false;var type=symbolTable.type(symbol);var symbols=symbolTable.symbols(symbol);if(type==="array"){_.each(symbols,function(s,index){var outOfBoundsSymbol=checkBoundsForIndex(symbol,index);if(outOfBoundsSymbol){self.variable(outOfBoundsSymbol,true)}self.variable(s,true,outOfBoundsSymbol)})}else{_.each(symbols,function(s){codeWriter.instruction({type:"variable",symbol:s})})}codeWriter.variable(symbol,type,symbols,supporting,nilDecider)};self.typedef=function(name,width){if(width<=0){throw new Error("width must be a positive integer")}switch(name){case"boolean":typedefStack.push({type:name});break;case"integer":if(!width){throw new Error("No width provided when defining integer type")}typedefStack.push({type:name,width:width});break;case"array":if(!width){throw new Error("No width provided when defining integer type")}var elements=typedefStack.pop();typedefStack.push({type:name,width:width,elements:elements});break;default:throw new Error("Unrecognised type: '"+name+"'")}};self.collect=function(width){if(!width){throw new Error("No width provided when collecting elements")}if(width<=0){throw new Error("width must be a positive integer")}var symbols=[];for(var i=0;i<width;i+=1){var symbol=stack.pop();symbols.unshift(symbol)}throwOnTypeMismatch(symbols);var arraySymbol=registry.nextSymbol();stack.push(arraySymbol);symbolTable.set(arraySymbol,"array",symbols)};self.get=function(checkBounds,keySymbol){keySymbol=keySymbol||stack.pop();var arraySymbol=stack.pop();var keyType=symbolTable.type(keySymbol);var arrayType=symbolTable.type(arraySymbol);var keySymbols=symbolTable.symbols(keySymbol);var arraySymbols=symbolTable.symbols(arraySymbol);if(keyType!=="integer"){throw new Error("Attempting to get with a non-integer key")}if(arrayType!=="array"){throw new Error("Attempting to get from a non-array")}var firstElement=arraySymbols[0];if(typeof firstElement==="undefined"){throw new Error("Attempting to get from an empty array")}var elementType=symbolTable.type(firstElement);var valueSymbol,valueSymbols,fallbackValue;var outOfBoundsSymbol,outOfBoundsSymbols,i;if(checkBounds||elementType==="array"){stack.push(arraySymbol);stack.push(keySymbol);self.bounds();self.not();outOfBoundsSymbol=stack.pop();outOfBoundsSymbols=symbolTable.symbols(outOfBoundsSymbol)}if(checkBounds){stack.push(outOfBoundsSymbol)}if(elementType==="array"){var nestedArrays=_.map(arraySymbols,function(symbol){return symbolTable.symbols(symbol)});var maxWidth=_.max(nestedArrays,"length").length;firstElement=_.flatten(nestedArrays)[0];var firstElementType=symbolTable.type(firstElement);var fallbackSymbol=registry.nextSymbol();var fallbackSymbols;if(firstElementType==="boolean"){fallbackSymbols=registry.nextBoolean();codeWriter.instruction({type:"constant",value:false});codeWriter.instruction({type:"pop",symbol:fallbackSymbols[0]})}else if(firstElementType==="integer"){fallbackSymbols=registry.nextInteger();codeWriter.instruction({type:"constant",value:0});codeWriter.instruction({type:"pop",symbol:fallbackSymbols[0]})}else{fallbackSymbols=[]}symbolTable.set(fallbackSymbol,firstElementType,fallbackSymbols);var conditionsToSet=[];for(i=0;i<maxWidth;i+=1){var transposedSymbol=registry.nextSymbol();var transposedSymbols=[];_.each(nestedArrays,function(nestedArray,arrayIndex){var nestedSymbol=nestedArray[i];if(nestedSymbol){transposedSymbols.push(nestedSymbol)}else{transposedSymbols.push(fallbackSymbol);var conditionSymbol=registry.nextBoolean()[0];codeWriter.instruction({type:"push",symbol:keySymbols[0]});codeWriter.instruction({type:"constant",value:arrayIndex});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"pop",symbol:conditionSymbol});conditionsToSet.push({conditionSymbol:conditionSymbol,nilIndex:i})}});stack.push(transposedSymbol);symbolTable.set(transposedSymbol,"array",transposedSymbols);self.get(false,keySymbol)}self.collect(maxWidth);valueSymbol=stack.pop();valueSymbols=symbolTable.symbols(valueSymbol);_.each(arraySymbols,function(arraySymbol,arrayIndex){var existingConditions=symbolTable.getNilConditions(arraySymbol);existingConditions=existingConditions||[];_.each(existingConditions,function(c){var conditionSymbol=c.conditionSymbol;codeWriter.instruction({type:"push",symbol:c.conditionSymbol});codeWriter.instruction({type:"push",symbol:keySymbols[0]});codeWriter.instruction({type:"constant",value:arrayIndex});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"and"});codeWriter.instruction({type:"pop",symbol:conditionSymbol});conditionsToSet.push({conditionSymbol:conditionSymbol,nilIndex:c.nilIndex})})});conditionsToSet.push({conditionSymbol:outOfBoundsSymbols[0]});symbolTable.setNilConditions(valueSymbol,conditionsToSet)}else{valueSymbol=registry.nextSymbol();if(elementType==="boolean"){valueSymbols=registry.nextBoolean();fallbackValue=false}else if(elementType==="integer"){valueSymbols=registry.nextInteger();fallbackValue=0}for(i=0;i<arraySymbols.length;i+=1){var elementSymbol=arraySymbols[i];var elementSymbols=symbolTable.symbols(elementSymbol);codeWriter.instruction({type:"push",symbol:keySymbols[0]});codeWriter.instruction({type:"constant",value:i});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"push",symbol:elementSymbols[0]})}codeWriter.instruction({type:"constant",value:fallbackValue});for(i=0;i<arraySymbols.length;i+=1){codeWriter.instruction({type:"if"})}codeWriter.instruction({type:"pop",symbol:valueSymbols[0]})}stack.push(valueSymbol);symbolTable.set(valueSymbol,elementType,valueSymbols)};self.fetch=function(hasDefault){var defaultSymbol;if(hasDefault){defaultSymbol=stack.pop()}self.get(true);self.swap();var outOfBoundsSymbol=stack.pop();var outOfBoundsSymbols=symbolTable.symbols(outOfBoundsSymbol);codeWriter.instruction({type:"push",symbol:outOfBoundsSymbols[0]});if(!hasDefault){codeWriter.instruction({type:"not"});codeWriter.instruction({type:"invariant"})}else{var defaultSymbols=symbolTable.symbols(defaultSymbol);var defaultType=symbolTable.type(defaultSymbol);var valueSymbol=stack.pop();var valueSymbols=symbolTable.symbols(valueSymbol);var valueType=symbolTable.type(valueSymbol);var message;if(valueType==="array"){message="Default values are not supported when fetching";message+=" from nested arrays";throw new Error(message)}if(defaultType!==valueType){message="Unable to set a default value with type '"+defaultType;message+="' for an array with elements of type '"+valueType+"'";throw new Error(message)}var outputSymbol=registry.nextSymbol();var outputSymbols;if(valueType==="integer"){outputSymbols=registry.nextInteger()}else if(valueType==="boolean"){outputSymbols=registry.nextBoolean()}codeWriter.instruction({type:"push",symbol:defaultSymbols[0]});codeWriter.instruction({type:"push",symbol:valueSymbols[0]});codeWriter.instruction({type:"if"});codeWriter.instruction({type:"pop",symbol:outputSymbols[0]});symbolTable.set(outputSymbol,valueType,outputSymbols);stack.push(outputSymbol)}};self.width=function(){var arraySymbol=stack.pop();var arrayType=symbolTable.type(arraySymbol);var arraySymbols=symbolTable.symbols(arraySymbol);if(arrayType!=="array"){throw new Error("Attempting to check bounds of a non-array")}var symbol=registry.nextSymbol();var symbols=registry.nextInteger();symbolTable.set(symbol,"integer",symbols);stack.push(symbol);var definiteWidth=0;var uncertainWidth=0;_.each(arraySymbols,function(symbol,index){var outOfBoundsSymbol=checkBoundsForIndex(arraySymbol,index);if(outOfBoundsSymbol){var outOfBoundsSymbols=symbolTable.symbols(outOfBoundsSymbol);codeWriter.instruction({type:"push",symbol:outOfBoundsSymbols[0]});codeWriter.instruction({type:"constant",value:0});codeWriter.instruction({type:"constant",value:1});codeWriter.instruction({type:"if"});uncertainWidth+=1}else{definiteWidth+=1}});codeWriter.instruction({type:"constant",value:definiteWidth});for(var i=0;i<uncertainWidth;i+=1){codeWriter.instruction({type:"add"})}codeWriter.instruction({type:"pop",symbol:symbols[0]})};self.bounds=function(skipBoundaries){var keySymbol=stack.pop();var arraySymbol=stack.pop();var keyType=symbolTable.type(keySymbol);var arrayType=symbolTable.type(arraySymbol);var keySymbols=symbolTable.symbols(keySymbol);var arraySymbols=symbolTable.symbols(arraySymbol);if(keyType!=="integer"){throw new Error("Attempting to check bounds a with a non-integer key")}if(arrayType!=="array"){throw new Error("Attempting to check bounds of a non-array")}var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();symbolTable.set(symbol,"boolean",symbols);stack.push(symbol);if(!skipBoundaries){codeWriter.instruction({type:"push",symbol:keySymbols[0]});codeWriter.instruction({type:"constant",value:0});codeWriter.instruction({type:"lessthan"});codeWriter.instruction({type:"push",symbol:keySymbols[0]});codeWriter.instruction({type:"constant",value:arraySymbols.length});codeWriter.instruction({type:"greaterequal"});codeWriter.instruction({type:"or"})}else{codeWriter.instruction({type:"constant",value:true})}var conditions=symbolTable.getNilConditions(arraySymbol);if(conditions){_.each(conditions,function(c){codeWriter.instruction({type:"push",symbol:c.conditionSymbol});if(typeof c.nilIndex!=="undefined"){codeWriter.instruction({type:"push",symbol:keySymbols[0]});codeWriter.instruction({type:"constant",value:c.nilIndex});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"and"})}codeWriter.instruction({type:"or"})})}codeWriter.instruction({type:"not"});codeWriter.instruction({type:"pop",symbol:symbols[0]})};self.constant=function(value){var symbol=registry.nextSymbol();var type=typeName(value);if(typeof type==="undefined"){var message="Constants are only supported for types";message+=" 'boolean' and 'integer'";throw new Error(message)}var symbols;if(type==="boolean"){symbols=registry.nextBoolean()}else if(type==="integer"){symbols=registry.nextInteger()}codeWriter.instruction({type:"constant",value:value});codeWriter.instruction({type:"pop",symbol:symbols[0]});stack.push(symbol);symbolTable.set(symbol,type,symbols)};self.equal=function(){var rightSymbol=stack.pop();var leftSymbol=stack.pop();var rightType=symbolTable.type(rightSymbol);var leftType=symbolTable.type(leftSymbol);if(rightType!==leftType){var msg="Type mismatch for equals: "+leftType+" == "+rightType;throw new Error(msg)}var rightSymbols=symbolTable.symbols(rightSymbol);var leftSymbols=symbolTable.symbols(leftSymbol);if(rightType==="array"){var maxLength;if(rightSymbols.length>leftSymbols.length){maxLength=rightSymbols.length}else{maxLength=leftSymbols.length}var definitelyNotEqual,rightOutOfBoundsSymbol,leftOutOfBoundsSymbol;var r,l,index;for(index=0;index<maxLength;index+=1){leftOutOfBoundsSymbol=checkBoundsForIndex(leftSymbol,index);rightOutOfBoundsSymbol=checkBoundsForIndex(rightSymbol,index);l=leftSymbols[index];r=rightSymbols[index];if(!l&&!rightOutOfBoundsSymbol){definitelyNotEqual=true}if(!r&&!leftOutOfBoundsSymbol){definitelyNotEqual=true}}if(definitelyNotEqual){self.constant(false);return}for(index=0;index<maxLength;index+=1){leftOutOfBoundsSymbol=checkBoundsForIndex(leftSymbol,index);rightOutOfBoundsSymbol=checkBoundsForIndex(rightSymbol,index);l=leftSymbols[index];r=rightSymbols[index];if(l&&r){stack.push(l);stack.push(r);self.equal()}else{self.constant(true)}if(leftOutOfBoundsSymbol&&rightOutOfBoundsSymbol){stack.push(leftOutOfBoundsSymbol);stack.push(rightOutOfBoundsSymbol);self.equal()}else if(leftOutOfBoundsSymbol){stack.push(leftOutOfBoundsSymbol);if(r){self.not()}}else if(rightOutOfBoundsSymbol){stack.push(rightOutOfBoundsSymbol);if(l){self.not()}}else{self.constant(true)}self.and()}for(var i=0;i<maxLength-1;i+=1){self.and()}}else{var symbol=registry.nextSymbol();var symbols=registry.nextBoolean();codeWriter.instruction({type:"push",symbol:leftSymbols[0]});codeWriter.instruction({type:"push",symbol:rightSymbols[0]});codeWriter.instruction({type:"equal"});codeWriter.instruction({type:"pop",symbol:symbols[0]});stack.push(symbol);symbolTable.set(symbol,"boolean",symbols)}};self.define=function(name,args,dynamic,immutable){if(typeof name==="undefined"){throw new Error("Cannot define a function without a name")}if(typeof args==="undefined"){throw new Error("Cannot define a function without an array of args")}recording={name:name,args:args,body:[],dynamic:dynamic,immutable:immutable,depth:1}};self._return=function(width){if(typeof width==="undefined"){throw new Error("Must specify the 'width' of arguments for return")}if(typeof recording==="undefined"){throw new Error("No function to return from")}functionRegistry.register(recording.name,recording.args,recording.body,recording.dynamic,recording.immutable,width);recording=undefined};self._call=function(name,width){if(typeof name==="undefined"){throw new Error("Cannot call a function without a name")}if(typeof width==="undefined"){throw new Error("Must specify argument width when calling function")}var fn=functionRegistry.get(name);
var message;if(width!==fn.args.length){message=name+": wrong number of arguments";message+=" (given "+width+", expected "+fn.args.length+")";throw new Error(message)}if(callStack.indexOf(fn.name)!==-1){message="Recursive function calls are not supported.";message+=' Tried to call "'+fn.name+'", but it already exists';message+=" on the call stack: "+JSON.stringify(callStack);throw new Error(message)}var instructionSet=scopedInstructionSet(fn);setupInstructionSet(instructionSet,fn);for(var i=0;i<fn.body.length;i+=1){var instruction=fn.body[i];instructionSet.call(instruction)}teardownInstructionSet(instructionSet,fn);return instructionSet};var scopedInstructionSet=function(fn){var scopedSymbolTable;var localTable=new SymbolTable;if(fn.dynamic){scopedSymbolTable=new DynamicScope(symbolTable,localTable)}else{scopedSymbolTable=localTable}var instructionSet=new InstructionSet({stack:new Stack,typedefStack:new Stack,symbolTable:scopedSymbolTable,registry:params.registry,functionRegistry:params.functionRegistry,codeWriter:params.codeWriter,callStack:callStack.concat(fn.name)});return instructionSet};var setupInstructionSet=function(instructionSet,fn){var symbols=[],i;for(i=0;i<fn.args.length;i+=1){symbols.push(stack.pop())}symbols.reverse();for(i=0;i<fn.args.length;i+=1){var symbol=symbols[i];var newSymbol=fn.args[i];copySymbol(symbol,newSymbol,self,instructionSet)}};var teardownInstructionSet=function(instructionSet,fn){var symbols=[],i,symbol;for(i=0;i<fn.returns;i+=1){symbols.push(instructionSet.stack.pop())}symbols.reverse();var newSymbols=[];for(i=0;i<fn.returns;i+=1){symbol=symbols[i];var newSymbol=registry.nextSymbol();copySymbol(symbol,newSymbol,instructionSet,self);newSymbols.push(newSymbol)}newSymbols.reverse();for(i=0;i<fn.returns;i+=1){stack.push(newSymbols[i])}var reassignedArrays=instructionSet.symbolTable.reassignedArrays;if(typeof reassignedArrays==="undefined"){return}for(i=0;i<reassignedArrays.length;i+=1){symbol=reassignedArrays[i];copySymbol(symbol,symbol,instructionSet,self)}};var copySymbol=function(symbol,newSymbol,from,to){var type=from.symbolTable.type(symbol);var symbols=from.symbolTable.symbols(symbol);if(type==="array"){var newElementSymbols=[];for(var i=0;i<symbols.length;i+=1){var elementSymbol=symbols[i];var newElementSymbol=registry.nextSymbol();copySymbol(elementSymbol,newElementSymbol,from,to);newElementSymbols.push(newElementSymbol)}symbols=newElementSymbols}to.symbolTable.set(newSymbol,type,symbols,true);var conditions=from.symbolTable.getNilConditions(symbol);if(conditions){to.symbolTable.setNilConditions(newSymbol,conditions)}};var declare=function(symbol,type,symbols,width,typedef){if(symbolTable.contains(symbol)){throw new Error(type+" '"+symbol+"' has already been declared")}else{switch(type){case"boolean":codeWriter.instruction({type:type,symbol:symbols[0]});break;case"integer":codeWriter.instruction({type:type,symbol:symbols[0],width:width});break;case"array":declareElements(symbols,typedef);break}symbolTable.set(symbol,type,symbols)}};var declareElements=function(symbols,typedef){typedef=typedef||typedefStack.pop();_.each(symbols,function(s){switch(typedef.type){case"boolean":self._boolean(s);break;case"integer":self._integer(s,typedef.width);break;case"array":self.array(s,typedef.width,typedef.elements);break}})};var throwOnTypeMismatch=function(symbols){var types=_.map(symbols,recursivelyExpandTypes);var uniqueTypes=_.uniq(types,function(t){return JSON.stringify(t)});if(uniqueTypes.length!==1){var message="Nested arrays must have the same type hierarchy";_.each(types,function(t,index){message+="\n"+symbols[index]+": "+JSON.stringify(t)});throw new Error(message)}};var recursivelyExpandTypes=function(symbol){var type=symbolTable.type(symbol);if(type==="array"){var symbols=symbolTable.symbols(symbol);var types=_.map(symbols,recursivelyExpandTypes);var uniqueTypes=_.uniq(types,function(t){return JSON.stringify(t)});return uniqueTypes}else{return type}};var typeName=function(value){var t=typeof value;if(t==="boolean"){return"boolean"}else if(t==="number"&&value%1===0){return"integer"}};var checkBoundsForIndex=function(arraySymbol,index){var conditions=symbolTable.getNilConditions(arraySymbol);var outOfBoundsSymbol;var conditionsForIndex=_.select(conditions,function(c){return!c.nilIndex||c.nilIndex===index});_.each(conditionsForIndex,function(c){codeWriter.instruction({type:"push",symbol:c.conditionSymbol})});for(var i=0;i<conditionsForIndex.length-1;i+=1){codeWriter.instruction({type:"or"})}if(_.any(conditionsForIndex)){outOfBoundsSymbol=registry.nextSymbol();var symbols=registry.nextBoolean();codeWriter.instruction({type:"pop",symbol:symbols[0]});symbolTable.set(outOfBoundsSymbol,"boolean",symbols)}return outOfBoundsSymbol};var record=function(instruction){if(typeof recording!=="undefined"){if(instruction.type==="define"){recording.depth+=1}else if(instruction.type==="return"){recording.depth-=1;if(recording.depth===0){return}}recording.body.push(instruction);return true}}};module.exports=InstructionSet},{"../common/stack":3,"../level3Compiler/symbolTable":21,"./dynamicScope":17,underscore:199}],20:[function(require,module,exports){"use strict";var Registry=function(){var self=this;var prefix="$$$_L3_";var suffix="_$$$";var symbolNumber=0;var booleanNumber=0;var integerNumber=0;var arrayNumber=0;self.nextSymbol=function(){symbolNumber+=1;return prefix+"TMP"+symbolNumber+suffix};self.nextBoolean=function(){booleanNumber+=1;return[prefix+"BOOLEAN"+booleanNumber+suffix]};self.nextInteger=function(){integerNumber+=1;return[prefix+"INTEGER"+integerNumber+suffix]};self.nextArray=function(width){if(!width){throw new Error("No width specified")}arrayNumber+=1;var symbols=[];for(var i=0;i<width;i+=1){symbols.push(prefix+"ARRAY"+arrayNumber+"_ELEMENT"+i+suffix)}return symbols}};module.exports=Registry},{}],21:[function(require,module,exports){"use strict";var SymbolTable=function(){var self=this;var object={};var nils={};self.set=function(symbol,type,symbols){object[symbol]={type:type,symbols:symbols}};self.type=function(symbol){throwIfMissing(symbol);return object[symbol].type};self.symbols=function(symbol){throwIfMissing(symbol);return object[symbol].symbols};self.contains=function(symbol){return typeof object[symbol]!=="undefined"};self.setNilConditions=function(symbol,conditions){throwIfMissing(symbol);nils[symbol]=conditions};self.getNilConditions=function(symbol){throwIfMissing(symbol);return nils[symbol]};var throwIfMissing=function(symbol){if(!self.contains(symbol)){throw new Error("Symbol '"+symbol+"' is not in the SymbolTable")}}};module.exports=SymbolTable},{}],22:[function(require,module,exports){"use strict";var SyntaxParser=require("./level4Compiler/syntaxParser");var ExpressionParser=require("./level4Compiler/expressionParser");var CodeWriter=require("./level4Compiler/codeWriter");var StandardLibrary=require("./level4Compiler/standardLibrary");var InstructionSet=require("./level4Compiler/instructionSet");var _=require("underscore");var Compiler=function(input){var self=this;var syntaxParser=SyntaxParser;var expressionParser=new ExpressionParser;var codeWriter=new CodeWriter;var standardLibrary=new StandardLibrary;var instructionSet=new InstructionSet({codeWriter:codeWriter,expressionParser:expressionParser});self.compile=function(){_.each(standardLibrary.instructions,codeWriter.instruction);_.each(syntaxParser.parse(input),instructionSet.call);return codeWriter.write()}};Compiler.compile=function(input){return new Compiler(input).compile()};module.exports=Compiler},{"./level4Compiler/codeWriter":23,"./level4Compiler/expressionParser":24,"./level4Compiler/instructionSet":25,"./level4Compiler/standardLibrary":26,"./level4Compiler/syntaxParser":27,underscore:199}],23:[function(require,module,exports){"use strict";var CodeWriter=function(){var self=this;var instructions=[];self.instruction=function(object){instructions.push(object)};self.write=function(){return{instructions:instructions}}};module.exports=CodeWriter},{}],24:[function(require,module,exports){"use strict";var _=require("underscore");var ExpressionParser=function(){var self=this;self.parse=function(expression){switch(typeof expression){case"boolean":case"number":return[{type:"constant",value:expression}];case"string":return[{type:"push",symbol:expression}];case"object":return parseFunctionCall(expression);default:throw new Error("Unexpected expression: "+expression)}};var parseFunctionCall=function(expression){var functionName=expression.shift();var argExpressions=expression;var width=argExpressions.length;var instructions=[];_.each(argExpressions,function(argExpression){instructions=instructions.concat(self.parse(argExpression))});if(functionName==="collect"){instructions.push({type:"collect",width:width})}else{instructions.push({type:"call",name:functionName,width:width})}return instructions}};ExpressionParser.parse=function(expression){return(new ExpressionParser).parse(expression)};module.exports=ExpressionParser},{underscore:199}],25:[function(require,module,exports){"use strict";var _=require("underscore");var InstructionSet=function(params){var self=this;var codeWriter=params.codeWriter;var expressionParser=params.expressionParser;self.call=function(instruction){switch(instruction.type){case"declaration":self.declaration(instruction.value);break;case"assignment":self.assignment(instruction.value);break;case"destructuredAssignment":self.destructuredAssignment(instruction.value);break;case"vary":self.vary(instruction.value);break;case"invariant":self.invariant(instruction.value);break;case"function":self._function(instruction.value);break;case"functionExpression":self.functionExpression(instruction.value);break;default:var message="Unrecognised instruction: "+instruction.type;throw new Error(message)}};self.declaration=function(value){var typedef=value[0];var symbols=value[1];var instructions=[];var name,width,instruction;for(var i=0;i<typedef.length;i+=2){name=typedef[i];width=typedef[i+1];instruction={type:"typedef"};if(name==="bool"){instruction.name="boolean"}else if(name==="int"){instruction.name="integer";instruction.width=width||8}else if(name==="array"){instruction.name="array";instruction.width=width}instructions.push(instruction)}var firstInstruction=instructions[0];firstInstruction.type=firstInstruction.name;delete firstInstruction.name;instructions.reverse();_.each(symbols,function(symbol){var lastInstruction=_.clone(instructions.pop());lastInstruction.symbol=symbol;instructions.push(lastInstruction);_.each(instructions,function(instruction){codeWriter.instruction(instruction)})})};self.assignment=function(value){var symbols=value[0];var expressions=value[1];for(var i=0;i<symbols.length;i+=1){var symbol=symbols[i];var expression=expressions[i];var instructions=expressionParser.parse(expression);_.each(instructions,function(instruction){codeWriter.instruction(instruction)});codeWriter.instruction({type:"pop",symbol:symbol})}};self.destructuredAssignment=function(value){var symbols=value[0];var expression=value[1];var instructions=expressionParser.parse(expression);_.each(instructions,function(instruction){codeWriter.instruction(instruction)});_.each(symbols,function(symbol){codeWriter.instruction({type:"pop",symbol:symbol})})};self.vary=function(value){_.each(value,function(symbol){codeWriter.instruction({type:"variable",symbol:symbol})})};self.invariant=function(value){_.each(value,function(expression){var instructions=expressionParser.parse(expression);_.each(instructions,function(instruction){codeWriter.instruction(instruction)});codeWriter.instruction({type:"invariant"})})};self._function=function(value){codeWriter.instruction({type:"define",name:value.name,dynamic:value.dynamic,args:value.args});_.each(value.body,self.call);var returnWidth=value.ret.shift();_.each(value.ret,function(expression){var instructions=expressionParser.parse(expression);_.each(instructions,function(instruction){codeWriter.instruction(instruction)})});codeWriter.instruction({type:"return",width:returnWidth})};self.functionExpression=function(value){var instructions=expressionParser.parse(value);_.each(instructions,function(instruction){codeWriter.instruction(instruction)})}};module.exports=InstructionSet},{underscore:199}],26:[function(require,module,exports){"use strict";var StandardLibrary=function(){var self=this;var instructions=[];var define=function(name,args,body,returns){instructions.push({type:"define",name:name,args:args,immutable:true});instructions=instructions.concat(body);instructions.push({type:"return",width:returns})};define("[]",["self","index"],[{type:"push",symbol:"self"},{type:"push",symbol:"index"},{type:"fetch"}],1);define("abs",["self"],[{type:"push",symbol:"self"},{type:"absolute"}],1);define("-@",["self"],[{type:"push",symbol:"self"},{type:"negate"}],1);define("!@",["self"],[{type:"push",symbol:"self"},{type:"not"}],1);define("length",["self"],[{type:"push",symbol:"self"},{type:"width"}],1);define("*",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"multiply"}],1);define("/",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"divide"}],1);define("%",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"modulo"}],1);define("+",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"add"}],1);define("-",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"subtract"}],1);define("<",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"lessthan"}],1);define(">",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"greaterthan"}],1);define("<=",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"lessequal"}],1);define(">=",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"greaterequal"}],1);define("==",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"equal"}],1);define("!=",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"equal"},{type:"not"}],1);define("&&",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"and"}],1);define("||",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"or"}],1);define("if",["self","consequent","alternate"],[{type:"push",symbol:"self"},{type:"push",symbol:"consequent"},{type:"push",symbol:"alternate"},{type:"if"}],1);define("divmod",["self","other"],[{type:"push",symbol:"self"},{type:"push",symbol:"other"},{type:"divmod"},{type:"swap"}],2);define("get",["self","index"],[{type:"push",symbol:"self"},{type:"push",symbol:"index"},{type:"get"}],2);self.instructions=instructions};module.exports=StandardLibrary},{}],27:[function(require,module,exports){module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={program:peg$parseprogram},peg$startRuleFunction=peg$parseprogram,peg$c0=";",peg$c1={type:"literal",value:";",description:'";"'},peg$c2=function(lines){return lines},peg$c3=function(statement){return statement},peg$c4=function(s){return{type:"declaration",value:s}},peg$c5=function(s){return{type:"assignment",value:s}},peg$c6=function(s){return{type:"destructuredAssignment",value:s}},peg$c7=function(s){return{type:"vary",value:s}},peg$c8=function(s){return{type:"invariant",value:s}},peg$c9=function(s){return{type:"function",value:s}},peg$c10=function(s){return{type:"functionExpression",value:s}},peg$c11=function(type,variableList){return[type,variableList]},peg$c12="=",peg$c13={type:"literal",value:"=",description:'"="'},peg$c14=function(variableList,exprList){return[variableList,exprList]},peg$c15="+",peg$c16={type:"literal",value:"+",description:'"+"'},peg$c17="-",peg$c18={type:"literal",value:"-",description:'"-"'},peg$c19="*",peg$c20={type:"literal",value:"*",description:'"*"'},peg$c21="/",peg$c22={type:"literal",value:"/",description:'"/"'},peg$c23="%",peg$c24={type:"literal",value:"%",description:'"%"'},peg$c25="&&",peg$c26={type:"literal",value:"&&",description:'"&&"'},peg$c27="||",peg$c28={type:"literal",value:"||",description:'"||"'},peg$c29=function(variable,operator,expr){return[[variable],[[operator,variable,expr]]]},peg$c30="=*",peg$c31={type:"literal",value:"=*",description:'"=*"'},peg$c32=function(variableList,expr){return[variableList,expr]},peg$c33="vary",peg$c34={type:"literal",value:"vary",description:'"vary"'},peg$c35=function(variableList){return variableList},peg$c36="invariant",peg$c37={type:"literal",value:"invariant",description:'"invariant"'},peg$c38=function(expressionList){return expressionList},peg$c39=function(signature,body){return{name:signature[0],dynamic:signature[1],args:signature[2],body:body[0],ret:body[1]}},peg$c40="function",peg$c41={type:"literal",value:"function",description:'"function"'},peg$c42="^",peg$c43={type:"literal",value:"^",description:'"^"'},peg$c44="(",peg$c45={type:"literal",value:"(",description:'"("'},peg$c46=")",peg$c47={type:"literal",value:")",description:'")"'},peg$c48=function(dynamic,name,args){dynamic=dynamic==="^";return[name,dynamic,args||[]]},peg$c49="{",peg$c50={type:"literal",value:"{",description:'"{"'},peg$c51="}",peg$c52={type:"literal",value:"}",description:'"}"'},peg$c53=function(body,returnStatement){return[body,returnStatement||[0]]},peg$c54="return",peg$c55={type:"literal",value:"return",description:'"return"'},peg$c56=function(returnList){return returnList||[0]},peg$c57=function(width,expressionList){var exprWidth=expressionList.length;if(width&&exprWidth>width){var message="'return"+width+"' was specified, but the function";message+=" returns (at least) "+exprWidth+" expressions";throw new Error(message)}width=width||exprWidth;expressionList.unshift(width);return expressionList},peg$c58=function(head,tail){if(tail){return[head].concat(tail)}else{return[head]}},peg$c59=",",peg$c60={type:"literal",value:",",description:'","'},peg$c61=function(tail){return tail},peg$c62=/^[a-zA-Z]/,peg$c63={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},peg$c64=/^[a-zA-Z0-9_]/,peg$c65={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},peg$c66=function(name){return name},peg$c67="?",peg$c68={type:"literal",value:"?",description:'"?"'},peg$c69="!",peg$c70={type:"literal",value:"!",description:'"!"'},peg$c71="[]",peg$c72={type:"literal",value:"[]",description:'"[]"'},peg$c73="-@",peg$c74={type:"literal",value:"-@",description:'"-@"'},peg$c75="!@",peg$c76={type:"literal",value:"!@",description:'"!@"'},peg$c77="<=",peg$c78={type:"literal",value:"<=",description:'"<="'},peg$c79=">=",peg$c80={type:"literal",value:">=",description:'">="'},peg$c81="==",peg$c82={type:"literal",value:"==",description:'"=="'},peg$c83="!=",peg$c84={type:"literal",value:"!=",description:'"!="'},peg$c85=/^[+\-*\/%<>]/,peg$c86={type:"class",value:"[+\\-*/%<>]",description:"[+\\-*/%<>]"},peg$c87="true",peg$c88={type:"literal",value:"true",description:'"true"'},peg$c89=function(){return true},peg$c90="false",peg$c91={type:"literal",value:"false",description:'"false"'},peg$c92=function(){return false},peg$c93=/^[0-9]/,peg$c94={type:"class",value:"[0-9]",description:"[0-9]"},peg$c95=function(){return parseInt(text(),10)},peg$c96="bool",peg$c97={type:"literal",value:"bool",description:'"bool"'},peg$c98=function(){return["bool"]},peg$c99="int",peg$c100={type:"literal",value:"int",description:'"int"'},peg$c101=function(width){if(width){return["int",width]}else{return["int"]}},peg$c102=/^[1-9]/,peg$c103={type:"class",value:"[1-9]",description:"[1-9]"},peg$c104="array",peg$c105={type:"literal",value:"array",description:'"array"'},peg$c106="<",peg$c107={type:"literal",value:"<",description:'"<"'},peg$c108=">",peg$c109={type:"literal",value:">",description:'">"'},peg$c110=function(width,subtype){return["array",width].concat(subtype)},peg$c111=":",peg$c112={type:"literal",value:":",description:'":"'},peg$c113=function(c,ifTrue,ifFalse){return["if",c,ifTrue,ifFalse]},peg$c114=function(head,tail){return leftAssociative(head,tail)},peg$c115=function(operator,expr){return{expr:[expr],operator:operator}},peg$c116=function(left,operator,right){return[operator,left,right]},peg$c117=".",peg$c118={type:"literal",value:".",description:'"."'},peg$c119=function(methodName,methodArgs){methodArgs=methodArgs||[];return{expr:methodArgs,operator:methodName}},peg$c120=function(operator,expr){return[operator+"@",expr]},peg$c121="[",peg$c122={type:"literal",value:"[",description:'"["'},peg$c123="]",peg$c124={type:"literal",value:"]",description:'"]"'},peg$c125=function(arg){return{expr:[arg],operator:"[]"}},peg$c126=function(expr){return expr},peg$c127=function(exprList){exprList.unshift("collect");return exprList},peg$c128=function(methodName,exprList){exprList=exprList||[];exprList.unshift(methodName);return exprList},peg$c129=/^[ \t\r\n]/,peg$c130={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},peg$c131=function(){return" "},peg$c132="#",peg$c133={type:"literal",value:"#",description:'"#"'},peg$c134=/^[^\r\n]/,peg$c135={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},peg$c136=function(){return""},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parseprogram(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];s2=peg$parsewhitespace();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s2=peg$c0;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}}while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsewhitespace();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s2=peg$c0;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}}}if(s1!==peg$FAILED){s2=[];s3=peg$parseprogramLine();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseprogramLine()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseprogramLine(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsestatement();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s3=peg$c0;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s3!==peg$FAILED){s4=[];s5=peg$parsewhitespace();if(s5===peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}}while(s5!==peg$FAILED){s4.push(s5);s5=peg$parsewhitespace();if(s5===peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsestatement(){var s0,s1;s0=peg$currPos;s1=peg$parsedeclaration();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c4(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseassignment();if(s1===peg$FAILED){s1=peg$parsecompositeAssignment()}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c5(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsedestructuredAssignment();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c6(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsevary();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c7(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseinvariant();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c8(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsefunction();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseexprFunction();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c10(s1)}s0=s1}}}}}}return s0}function peg$parsedeclaration(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsetype();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2!==peg$FAILED){s3=peg$parsevariableList();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c11(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseassignment(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsevariableList();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s3=peg$c12;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parseexpressionList();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsecompositeAssignment(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parsevariable();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===43){s3=peg$c15;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s3=peg$c17;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c18)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s3=peg$c19;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c20)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s3=peg$c21;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===37){s3=peg$c23;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24)}}if(s3===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c25){s3=peg$c25;peg$currPos+=2}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c26)}}if(s3===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c27){s3=peg$c27;peg$currPos+=2}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}}}}}}}if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s4=peg$c12;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s4!==peg$FAILED){s5=peg$parsewhitespace();if(s5===peg$FAILED){s5=null}if(s5!==peg$FAILED){s6=peg$parseexprTernary();if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c29(s1,s3,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsedestructuredAssignment(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsevariableList();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c30){s3=peg$c30;peg$currPos+=2}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parseexprTernary();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c32(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsevary(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c33){s1=peg$c33;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2!==peg$FAILED){s3=peg$parsevariableList();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c35(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseinvariant(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,9)===peg$c36){s1=peg$c36;peg$currPos+=9}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2!==peg$FAILED){s3=peg$parseexpressionList();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c38(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefunction(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsefunctionSignature();
if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parsefunctionBody();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c39(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefunctionSignature(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10;s0=peg$currPos;if(input.substr(peg$currPos,8)===peg$c40){s1=peg$c40;peg$currPos+=8}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c41)}}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s2=peg$c42;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3!==peg$FAILED){s4=peg$parsemethodName();if(s4!==peg$FAILED){s5=peg$parsewhitespace();if(s5===peg$FAILED){s5=null}if(s5!==peg$FAILED){if(input.charCodeAt(peg$currPos)===40){s6=peg$c44;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s6!==peg$FAILED){s7=peg$parsewhitespace();if(s7===peg$FAILED){s7=null}if(s7!==peg$FAILED){s8=peg$parsevariableList();if(s8===peg$FAILED){s8=null}if(s8!==peg$FAILED){s9=peg$parsewhitespace();if(s9===peg$FAILED){s9=null}if(s9!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s10=peg$c46;peg$currPos++}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s10!==peg$FAILED){peg$savedPos=s0;s1=peg$c48(s2,s4,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefunctionBody(){var s0,s1,s2,s3,s4;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c49;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s1!==peg$FAILED){s2=peg$parseprogram();if(s2!==peg$FAILED){s3=peg$parsereturnStatement();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s4=peg$c51;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c53(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsereturnStatement(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c54){s1=peg$c54;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s1!==peg$FAILED){s2=peg$parsereturnList();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s4=peg$c0;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s4!==peg$FAILED){s5=[];s6=peg$parsewhitespace();if(s6===peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s6=peg$c0;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}}while(s6!==peg$FAILED){s5.push(s6);s6=peg$parsewhitespace();if(s6===peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s6=peg$c0;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c56(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsereturnList(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsepositiveInteger();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2!==peg$FAILED){s3=peg$parseexpressionList();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c57(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsevariableList(){var s0,s1,s2;s0=peg$currPos;s1=peg$parsevariable();if(s1!==peg$FAILED){s2=peg$parsevariableListTail();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c58(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsevariableListTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s2=peg$c59;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c60)}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parsevariableList();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c61(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsevariable(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseconstant();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;s3=peg$currPos;if(peg$c62.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63)}}if(s4!==peg$FAILED){s5=[];if(peg$c64.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}while(s6!==peg$FAILED){s5.push(s6);if(peg$c64.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}}if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){s2=input.substring(s2,peg$currPos)}else{s2=s3}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c66(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsemethodName(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$currPos;s2=peg$parsevariable();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s3=peg$c67;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===33){s3=peg$c69;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}}if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s2=[s2,s3];s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}if(s0===peg$FAILED){s0=peg$parseoperator()}return s0}function peg$parseoperator(){var s0;if(input.substr(peg$currPos,2)===peg$c71){s0=peg$c71;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c72)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c73){s0=peg$c73;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c74)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c75){s0=peg$c75;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c77){s0=peg$c77;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c79){s0=peg$c79;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c81){s0=peg$c81;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c82)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c83){s0=peg$c83;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c84)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c25){s0=peg$c25;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c26)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c27){s0=peg$c27;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s0===peg$FAILED){if(peg$c85.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c86)}}}}}}}}}}}return s0}function peg$parseconstant(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c87){s1=peg$c87;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c88)}}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;if(peg$c64.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c89();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,5)===peg$c90){s1=peg$c90;peg$currPos+=5}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c91)}}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;if(peg$c64.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c92();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];if(peg$c93.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c93.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1}}return s0}function peg$parsetype(){var s0;s0=peg$parsetypeBool();if(s0===peg$FAILED){s0=peg$parsetypeInt();if(s0===peg$FAILED){s0=peg$parsetypeArray()}}return s0}function peg$parsetypeBool(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c96){s1=peg$c96;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c98()}s0=s1;return s0}function peg$parsetypeInt(){var s0,s1,s2;s0=peg$currPos;if(input.substr(peg$currPos,3)===peg$c99){s1=peg$c99;peg$currPos+=3}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c100)}}if(s1!==peg$FAILED){s2=peg$parsepositiveInteger();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c101(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsepositiveInteger(){var s0,s1,s2,s3;s0=peg$currPos;if(peg$c102.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s1!==peg$FAILED){s2=[];if(peg$c93.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c93.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c95();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsetypeArray(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,5)===peg$c104){s1=peg$c104;peg$currPos+=5}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c105)}}if(s1!==peg$FAILED){s2=peg$parsepositiveInteger();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===60){s3=peg$c106;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c107)}}if(s3!==peg$FAILED){s4=peg$parsetype();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s5=peg$c108;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c109)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c110(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexpressionList(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseexprTernary();if(s1!==peg$FAILED){s2=peg$parseexpressionListTail();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c58(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexpressionListTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s2=peg$c59;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c60)}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexpressionList();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c61(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprTernary(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;s0=peg$currPos;s1=peg$parseexprDisjunctive();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s3=peg$c67;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parseexprTernary();if(s5!==peg$FAILED){s6=peg$parsewhitespace();if(s6===peg$FAILED){s6=null}if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s7=peg$c111;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c112)}}if(s7!==peg$FAILED){s8=peg$parsewhitespace();if(s8===peg$FAILED){s8=null}if(s8!==peg$FAILED){s9=peg$parseexprTernary();if(s9!==peg$FAILED){peg$savedPos=s0;s1=peg$c113(s1,s5,s9);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseexprDisjunctive()}return s0}function peg$parseexprDisjunctive(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprConjunctive();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprDisjunctiveTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprDisjunctiveTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprDisjunctiveTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c27){s2=peg$c27;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexprConjunctive();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c115(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprConjunctive(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprEquality();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprConjunctiveTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprConjunctiveTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprConjunctiveTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c25){s2=peg$c25;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c26)}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexprEquality();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c115(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprEquality(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprComparative();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprEqualityTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprEqualityTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprEqualityTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c81){s2=peg$c81;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c82)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c83){s2=peg$c83;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c84)}}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexprComparative();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c115(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprComparative(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseexprAdditive();if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c77){s3=peg$c77;peg$currPos+=2}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s3===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c79){s3=peg$c79;peg$currPos+=2}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===60){s3=peg$c106;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c107)}}if(s3===peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s3=peg$c108;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c109)}}}}}if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parseexprAdditive();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c116(s1,s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseexprAdditive()}return s0}function peg$parseexprAdditive(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprMultiplicative();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprAdditiveTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprAdditiveTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprAdditiveTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===43){s2=peg$c15;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s2=peg$c17;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c18)}}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexprMultiplicative();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c115(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprMultiplicative(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprMethod();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprMultiplicativeTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprMultiplicativeTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprMultiplicativeTail(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsewhitespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c19;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c20)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s2=peg$c21;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===37){s2=peg$c23;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24)}}}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexprMethod();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c115(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprMethod(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprUnary();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprMethodTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprMethodTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprMethodTail(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===46){s1=peg$c117;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}if(s1!==peg$FAILED){s2=peg$parsemethodName();if(s2!==peg$FAILED){s3=peg$parseexprMethodArgs();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c119(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprMethodArgs(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c44;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseexpressionList();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c46;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c38(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprUnary(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===33){s1=peg$c69;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}if(s1===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s1=peg$c17;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c18)}}}if(s1!==peg$FAILED){s2=peg$parseexprFetch();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c120(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseexprFetch()}return s0}function peg$parseexprFetch(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseexprPrimary();if(s1!==peg$FAILED){s2=[];s3=peg$parseexprFetchTail();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseexprFetchTail()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c114(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprFetchTail(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c121;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c122)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseexprTernary();if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s5=peg$c123;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c124)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c125(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprPrimary(){var s0,s1,s2,s3,s4,s5;s0=peg$parseexprFunction();if(s0===peg$FAILED){s0=peg$parseexprCollect();if(s0===peg$FAILED){s0=peg$parseconstant();if(s0===peg$FAILED){s0=peg$parsevariable();if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c44;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseexprTernary();if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c46;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c126(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}}return s0}function peg$parseexprCollect(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c121;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c122)}}if(s1!==peg$FAILED){s2=peg$parsewhitespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseexpressionList();if(s3!==peg$FAILED){s4=peg$parsewhitespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s5=peg$c123;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c124)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c127(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseexprFunction(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parsemethodName();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===40){s2=peg$c44;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s2!==peg$FAILED){s3=peg$parsewhitespace();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseexpressionList();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parsewhitespace();if(s5===peg$FAILED){s5=null}if(s5!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s6=peg$c46;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c128(s1,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsewhitespace(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c129.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c130)}}if(s2===peg$FAILED){s2=peg$parsecomment()}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c129.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c130)}}if(s2===peg$FAILED){s2=peg$parsecomment()}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c131()}s0=s1;return s0}function peg$parsecomment(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===35){s1=peg$c132;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c133)}}if(s1!==peg$FAILED){s2=[];if(peg$c134.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c135)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c134.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c135)}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c136();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}var leftAssociative=function(head,tail){return tail.reduce(function(acc,element){return[element.operator,acc].concat(element.expr)},head)};peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},{}],28:[function(require,module,exports){"use strict";var MinisatAdapter=require("./machine/minisatAdapter");var _=require("underscore");var Machine=function(solver){var self=this;self.run=function(program,assignments){var constrainedProgram=encodeConstraints(program,assignments);var result=solver.solve(constrainedProgram);return decodeResult(result)};var encodeConstraints=function(program,assignments){var constraints=generateConstraints(assignments);var header=generateHeader(program,assignments);var constrainedProgram=program+constraints;return replaceHeader(constrainedProgram,header)};var decodeResult=function(result){var object={};_.each(result,function(literal){if(literal<0){object[-literal]=false}else{object[literal]=true}});return object};var generateConstraints=function(assignments){return _.map(assignments,function(value,key){if(!value){key=-key}return""+key+" 0"}).join("\n")};var generateHeader=function(program,assignments){var lines=program.split("\n");var problemSizeLine=_.detect(lines,function(line){return line.match(/p cnf/)});if(!problemSizeLine){var message="The line containing the problem size could not be found";throw new Error(message)}problemSizeLine=problemSizeLine.trim();var terms=problemSizeLine.split(" ");var numberOfLiterals=Number(terms[2]);var numberOfClauses=Number(terms[3]);var numberOfAssignments=_.size(assignments);var totalClauses=numberOfClauses+numberOfAssignments;return"p cnf "+numberOfLiterals+" "+totalClauses};var replaceHeader=function(program,header){var lines=program.split("\n");var problemSizeLine=_.detect(lines,function(line){return line.match(/p cnf/)});var index=lines.indexOf(problemSizeLine);lines.splice(index,1);lines.unshift(header);return lines.join("\n")}};Machine.run=function(program,assignments){return new Machine(MinisatAdapter).run(program,assignments)};module.exports=Machine},{"./machine/minisatAdapter":30,underscore:199}],29:[function(require,module,exports){"use strict";var spawnSync=require("child_process").spawnSync;var _=require("underscore");var LingelingAdapter=function(binary,dimacs){var self=this;self.solve=function(){var lingeling=spawnSync(binary,{input:dimacs,encoding:"utf-8"});var output=lingeling.stdout;if(!output){var message="The program 'lingeling' cannot be found in PATH";throw new Error(message)}var lines=output.split("\n");if(satisfiable(lines)){return parseSolution(lines)}else{return[]}};var satisfiable=function(lines){var satisfiableLine=_.detect(lines,function(line){return line.match(/^s /)});if(!satisfiableLine){var message="Lingeling output did not contain satisfiability line";throw new Error(message)}return satisfiableLine==="s SATISFIABLE"};var parseSolution=function(lines){var solutionLines=_.select(lines,function(line){return line.match(/^v /)});var literals=[];_.each(solutionLines,function(line){line=line.replace(/^v /,"");line=line.replace(/ 0$/,"");var terms=line.split(" ");_.each(terms,function(term){literals.push(Number(term))})});return literals}};LingelingAdapter.solve=function(dimacs){return new LingelingAdapter("lingeling",dimacs).solve()};module.exports=LingelingAdapter},{child_process:83,underscore:199}],30:[function(require,module,exports){
"use strict";var _=require("underscore");var Minisat=require("../../../vendor/minisat.js");var MinisatAdapter=function(dimacs){var self=this;var errors=[];self.solve=function(){captureErrors();var result=solve(dimacs);return parse(result)};var captureErrors=function(){Minisat.printErr=function(error){errors.push(error)}};var solve=function(dimacs){var functionName="solve_string";var parameterType="string";var returnType=["string","int"];var parameters=[dimacs,dimacs.length];return Minisat.ccall(functionName,parameterType,returnType,parameters)};var parse=function(result){if(_.any(errors)){throw new Error(errors)}else if(result==="UNSAT"){return[]}else{result=result.replace("SAT ","");result=result.split(" ");return _.map(result,function(literal){return parseInt(literal,10)})}}};MinisatAdapter.solve=function(dimacs){return new MinisatAdapter(dimacs).solve()};module.exports=MinisatAdapter},{"../../../vendor/minisat.js":224,underscore:199}],31:[function(require,module,exports){"use strict";var Level4Runtime=require("./runtime/level4Runtime");var Level3Runtime=require("./runtime/level3Runtime");var Level2Runtime=require("./runtime/level2Runtime");var Level1Runtime=require("./runtime/level1Runtime");var Machine=require("./machine");var MinisatAdapter=require("./machine/minisatAdapter");var LingelingAdapter=require("./machine/lingelingAdapter");var Runtime=function(program,assignments,adapterName){var self=this;self.run=function(){assignments=Level4Runtime.encode(program,assignments);assignments=Level3Runtime.encode(program,assignments);assignments=Level2Runtime.encode(program,assignments);assignments=Level1Runtime.encode(program,assignments);var machine=new Machine(adapter(adapterName));var results=machine.run(program,assignments);results=Level1Runtime.decode(program,results);results=Level2Runtime.decode(program,results);results=Level3Runtime.decode(program,results);results=Level4Runtime.decode(program,results);return results};var adapter=function(adapterName){adapterName=adapterName||"minisat";switch(adapterName){case"lingeling":return LingelingAdapter;case"minisat":return MinisatAdapter;default:throw new Error("Unknown adapter: '"+adapterName+"'")}}};Runtime.run=function(program,assignments,adapterName){return new Runtime(program,assignments,adapterName).run()};module.exports=Runtime},{"./machine":28,"./machine/lingelingAdapter":29,"./machine/minisatAdapter":30,"./runtime/level1Runtime":32,"./runtime/level2Runtime":33,"./runtime/level3Runtime":34,"./runtime/level4Runtime":35}],32:[function(require,module,exports){"use strict";var MetadataExtractor=require("./metadataExtractor");var _=require("underscore");var Level1Runtime=function(program){var self=this;var metadata=MetadataExtractor.extract(program);var variables=metadata.level1Variables;self.encode=function(assignments){var object={};_.each(assignments,function(value,key){if(!_.has(variables,key)){var message="Could not encode '"+key+"'";message+=" because it does not appear in the program metadata";throw new Error(message)}key=Number(variables[key]);object[key]=value});return object};self.decode=function(results){if(_.isEmpty(results)){return{}}var object={};_.each(variables,function(value,key){value=results[value];if(value===undefined){var message="Could not decode '"+key+"'";message+=" because it does not appear in the solution results";throw new Error(message)}object[key]=value});return object}};Level1Runtime.encode=function(program,assignments){return new Level1Runtime(program).encode(assignments)};Level1Runtime.decode=function(program,results){return new Level1Runtime(program).decode(results)};module.exports=Level1Runtime},{"./metadataExtractor":36,underscore:199}],33:[function(require,module,exports){"use strict";var MetadataExtractor=require("./metadataExtractor");var TwosComplement=require("../compiler/level2Compiler/twosComplement");var _=require("underscore");var Level2Runtime=function(program){var self=this;var metadata=MetadataExtractor.extract(program);var variables=metadata.level2Variables;self.encode=function(assignments){var object={};_.each(assignments,function(value,key){if(!_.has(variables,key)){var message="Could not encode '"+key+"'";message+=" because it does not appear in the program metadata";throw new Error(message)}var expectedType=variables[key].type;var actualType=typeName(value);if(expectedType!==actualType){throw new Error("Expected "+expectedType+" for "+key)}var symbols=variables[key].symbols;if(actualType==="boolean"){object[symbols[0]]=value}else if(actualType==="integer"){var bitArray=TwosComplement.encode(value);var max=symbols.length;if(bitArray.length>max){var msg="The value '"+value+"' for '"+key+"'";msg+=" requires "+bitArray.length+" bits, but the compiled";msg+=" program only supports a maximum of "+max+" bits";throw new Error(msg)}var padded=TwosComplement.pad(bitArray,symbols);for(var i=0;i<symbols.length;i+=1){object[symbols[i]]=padded.leftSymbols[i]}}});return object};self.decode=function(results){if(_.isEmpty(results)){return{}}var object={};_.each(variables,function(variable,key){var type=variable.type;var symbols=variable.symbols;var values=_.map(symbols,function(s){var value=results[s];if(value===undefined){var message="Could not decode '"+key+"'";message+=" because it is missing from the result";throw new Error(message)}return value});if(type==="boolean"){object[key]=values[0]}else if(type==="integer"){object[key]=TwosComplement.decode(values)}});return object};var typeName=function(value){var t=typeof value;if(t==="boolean"){return"boolean"}else if(t==="number"&&value%1===0){return"integer"}else{throw new Error("Unknown type '"+t+"'")}}};Level2Runtime.encode=function(program,assignments){return new Level2Runtime(program).encode(assignments)};Level2Runtime.decode=function(program,results){return new Level2Runtime(program).decode(results)};module.exports=Level2Runtime},{"../compiler/level2Compiler/twosComplement":14,"./metadataExtractor":36,underscore:199}],34:[function(require,module,exports){"use strict";var MetadataExtractor=require("./metadataExtractor");var _=require("underscore");var Level3Runtime=function(program){var self=this;var metadata=MetadataExtractor.extract(program);var variables=metadata.level3Variables;self.encode=function(assignments){var object={};_.each(assignments,function(value,key){encodeOne(key,value,object)});return object};var encodeOne=function(key,value,object,allowSupporting){var message;if(!_.has(variables,key)){message="Could not encode '"+key+"'";message+=" because it does not appear in the program metadata";throw new Error(message)}var specifiedType=variables[key].type;var actualType=typeName(value);var nilDecider=variables[key].nilDecider;if(!typeIsAllowed(specifiedType,actualType,nilDecider)){message="Expected an object of type '"+specifiedType;message+="' for key '"+key+"' but got '"+actualType+"'";throw new Error(message)}if(variables[key].supporting&&!allowSupporting){throw new Error(key+" is a supporting variable")}var symbols=variables[key].symbols;if(nilDecider&&actualType==="null"){encodeOne(nilDecider,true,object,true);return}else if(nilDecider&&actualType!=="null"){encodeOne(nilDecider,false,object,true)}if(nilDecider){encodeOne(nilDecider,actualType==="null",object,true)}if(specifiedType==="boolean"||specifiedType==="integer"){assignOnce(symbols[0],value,object)}else if(specifiedType==="array"){encodeArray(symbols,value,actualType,key,object)}};var encodeArray=function(keys,values,actualType,key,object){values=padWithNulls(keys,values);if(actualType==="array"&&_.size(keys)!==_.size(values)){var message="Size mismatch when assinging values to '"+key+"'.";message+=" Either set trailing elements to 'undefined'";message+=" or use the object syntax.";throw new Error(message)}_.each(values,function(value,index){if(value!==undefined){var key=keys[index];encodeOne(key,value,object,true)}})};self.decode=function(results){if(_.isEmpty(results)){return{}}var object={};decodePrimitives(results,object);nullifyValues(object);decodeArrays(object);removeNullsFromArrays(object);removeSupporting(object);return object};var decodePrimitives=function(results,object){_.each(variables,function(variable,key){if(variable.type==="boolean"||variable.type==="integer"){decodePrimitive(key,variable,results,object)}})};var decodePrimitive=function(key,variable,results,object){var type=variable.type;var symbols=variable.symbols;var values=_.map(symbols,function(s){var value=results[s];if(value===undefined){var message="Could not decode '"+key+"'";message+=" because '"+s+"' is missing from the result";throw new Error(message)}return value});if(type==="boolean"||type==="integer"){assignOnce(key,values[0],object)}};var decodeArrays=function(object){_.each(variables,function(variable,key){if(variable.type==="array"){decodeArray(variable,key,object)}})};var decodeArray=function(variable,key,object){var array=_.map(variable.symbols,function(symbol){return decodeElement(symbol,object)});if(object[key]!==null){assignOnce(key,array,object)}};var decodeElement=function(symbol,object){var variable=variables[symbol];if(variable.type==="array"){decodeArray(variable,symbol,object)}return object[symbol]};var assignOnce=function(key,value,object){var assignedValue=object[key];var equalValues=_.isEqual(value,assignedValue);if(typeof assignedValue!=="undefined"&&!equalValues){var message="The key '"+key+"' has conflicting assignments.";message+=" It has been set to '"+assignedValue+"'";message+=" and is now being set to '"+value+"'";throw new Error(message)}else{object[key]=value}};var nullifyValues=function(object){_.each(variables,function(variable,key){var nilDecider=variable.nilDecider;if(nilDecider){var isNil=object[nilDecider];if(typeof isNil==="undefined"){var message="Could not decode '"+key+"' because";message+=" the nilDecider '"+nilDecider+"' is missing";throw new Error(message)}if(isNil){object[key]=null}}})};var removeNullsFromArrays=function(object){_.each(object,function(value,key){if(typeName(value)==="array"){object[key]=removeNullsFromArray(value)}})};var removeNullsFromArray=function(array){var arrayCopy=_.map(array,function(element){if(typeName(element)==="array"){return removeNullsFromArray(element)}else{return element}});return _.without(arrayCopy,null)};var removeSupporting=function(object){_.each(variables,function(variable,key){if(variable.supporting){delete object[key]}})};var typeName=function(value){var t=typeof value;if(t==="boolean"){return"boolean"}else if(t==="number"&&value%1===0){return"integer"}else if(value&&value.constructor===Array){return"array"}else if(value===null){return"null"}else if(t==="object"){return"object"}else{throw new Error("Unknown type '"+t+"'")}};var typeIsAllowed=function(specifiedType,actualType,nilDecider){if(specifiedType===actualType){return true}else if(specifiedType==="array"&&actualType==="object"){return true}else if(actualType==="null"&&nilDecider){return true}else{return false}};var padWithNulls=function(keys,values){var valuesType=typeName(values);var valuesToPad;if(valuesType==="array"){valuesToPad=values.slice(0)}else{valuesToPad=_.clone(values)}_.each(keys,function(key,index){var value=values[index];if(value){return}var variable=variables[key];if(variable.nilDecider&&valuesType==="array"){valuesToPad.push(null)}else if(variable.nilDecider&&valuesType!=="array"){valuesToPad[index]=null}});return valuesToPad}};Level3Runtime.encode=function(program,assignments){return new Level3Runtime(program).encode(assignments)};Level3Runtime.decode=function(program,results){return new Level3Runtime(program).decode(results)};module.exports=Level3Runtime},{"./metadataExtractor":36,underscore:199}],35:[function(require,module,exports){"use strict";module.exports.encode=function(program,assignments){return assignments};module.exports.decode=function(program,results){return results}},{}],36:[function(require,module,exports){"use strict";var _=require("underscore");var MetadataExtractor=function(program){var self=this;self.extract=function(){var metadataLines=extractMetadataLines();return parseMetadata(metadataLines)};var extractMetadataLines=function(){var lines=program.trim().split("\n");var startCapturingMetadata=false;var metadataLines=[];for(var i=0;i<lines.length;i+=1){var line=lines[i].trim();if(startCapturingMetadata){if(line==="c }"){startCapturingMetadata=false;break}metadataLines.push(line)}else{if(line==="c {"){startCapturingMetadata=true}}}if(startCapturingMetadata){var message="Could not find the end of the metadata";throw new Error(message)}return metadataLines};var parseMetadata=function(lines){var json="";lines=_.map(lines,function(line){json+=line.replace(/^c/,"")});json="{"+json+"}";return JSON.parse(json)}};MetadataExtractor.extract=function(program){return new MetadataExtractor(program).extract()};module.exports=MetadataExtractor},{underscore:199}],37:[function(require,module,exports){var asn1=exports;asn1.bignum=require("bn.js");asn1.define=require("./asn1/api").define;asn1.base=require("./asn1/base");asn1.constants=require("./asn1/constants");asn1.decoders=require("./asn1/decoders");asn1.encoders=require("./asn1/encoders")},{"./asn1/api":38,"./asn1/base":40,"./asn1/constants":44,"./asn1/decoders":46,"./asn1/encoders":49,"bn.js":54}],38:[function(require,module,exports){var asn1=require("../asn1");var inherits=require("inherits");var api=exports;api.define=function define(name,body){return new Entity(name,body)};function Entity(name,body){this.name=name;this.body=body;this.decoders={};this.encoders={}}Entity.prototype._createNamed=function createNamed(base){var named;try{named=require("vm").runInThisContext("(function "+this.name+"(entity) {\n"+"  this._initNamed(entity);\n"+"})")}catch(e){named=function(entity){this._initNamed(entity)}}inherits(named,base);named.prototype._initNamed=function initnamed(entity){base.call(this,entity)};return new named(this)};Entity.prototype._getDecoder=function _getDecoder(enc){enc=enc||"der";if(!this.decoders.hasOwnProperty(enc))this.decoders[enc]=this._createNamed(asn1.decoders[enc]);return this.decoders[enc]};Entity.prototype.decode=function decode(data,enc,options){return this._getDecoder(enc).decode(data,options)};Entity.prototype._getEncoder=function _getEncoder(enc){enc=enc||"der";if(!this.encoders.hasOwnProperty(enc))this.encoders[enc]=this._createNamed(asn1.encoders[enc]);return this.encoders[enc]};Entity.prototype.encode=function encode(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter)}},{"../asn1":37,inherits:136,vm:207}],39:[function(require,module,exports){var inherits=require("inherits");var Reporter=require("../base").Reporter;var Buffer=require("buffer").Buffer;function DecoderBuffer(base,options){Reporter.call(this,options);if(!Buffer.isBuffer(base)){this.error("Input not Buffer");return}this.base=base;this.offset=0;this.length=base.length}inherits(DecoderBuffer,Reporter);exports.DecoderBuffer=DecoderBuffer;DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)}};DecoderBuffer.prototype.restore=function restore(save){var res=new DecoderBuffer(this.base);res.offset=save.offset;res.length=this.offset;this.offset=save.offset;Reporter.prototype.restore.call(this,save.reporter);return res};DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length};DecoderBuffer.prototype.readUInt8=function readUInt8(fail){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,true);else return this.error(fail||"DecoderBuffer overrun")};DecoderBuffer.prototype.skip=function skip(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||"DecoderBuffer overrun");var res=new DecoderBuffer(this.base);res._reporterState=this._reporterState;res.offset=this.offset;res.length=this.offset+bytes;this.offset+=bytes;return res};DecoderBuffer.prototype.raw=function raw(save){return this.base.slice(save?save.offset:this.offset,this.length)};function EncoderBuffer(value,reporter){if(Array.isArray(value)){this.length=0;this.value=value.map(function(item){if(!(item instanceof EncoderBuffer))item=new EncoderBuffer(item,reporter);this.length+=item.length;return item},this)}else if(typeof value==="number"){if(!(0<=value&&value<=255))return reporter.error("non-byte EncoderBuffer value");this.value=value;this.length=1}else if(typeof value==="string"){this.value=value;this.length=Buffer.byteLength(value)}else if(Buffer.isBuffer(value)){this.value=value;this.length=value.length}else{return reporter.error("Unsupported type: "+typeof value)}}exports.EncoderBuffer=EncoderBuffer;EncoderBuffer.prototype.join=function join(out,offset){if(!out)out=new Buffer(this.length);if(!offset)offset=0;if(this.length===0)return out;if(Array.isArray(this.value)){this.value.forEach(function(item){item.join(out,offset);offset+=item.length})}else{if(typeof this.value==="number")out[offset]=this.value;else if(typeof this.value==="string")out.write(this.value,offset);else if(Buffer.isBuffer(this.value))this.value.copy(out,offset);offset+=this.length}return out}},{"../base":40,buffer:85,inherits:136}],40:[function(require,module,exports){var base=exports;base.Reporter=require("./reporter").Reporter;base.DecoderBuffer=require("./buffer").DecoderBuffer;base.EncoderBuffer=require("./buffer").EncoderBuffer;base.Node=require("./node")},{"./buffer":39,"./node":41,"./reporter":42}],41:[function(require,module,exports){var Reporter=require("../base").Reporter;var EncoderBuffer=require("../base").EncoderBuffer;var DecoderBuffer=require("../base").DecoderBuffer;var assert=require("minimalistic-assert");var tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"];var methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags);var overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node(enc,parent){var state={};this._baseState=state;state.enc=enc;state.parent=parent||null;state.children=null;state.tag=null;state.args=null;state.reverseArgs=null;state.choice=null;state.optional=false;state.any=false;state.obj=false;state.use=null;state.useDecoder=null;state.key=null;state["default"]=null;state.explicit=null;state.implicit=null;state.contains=null;if(!state.parent){state.children=[];this._wrap()}}module.exports=Node;var stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];Node.prototype.clone=function clone(){var state=this._baseState;var cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop]});var res=new this.constructor(cstate.parent);res._baseState=cstate;return res};Node.prototype._wrap=function wrap(){var state=this._baseState;methods.forEach(function(method){this[method]=function _wrappedMethod(){var clone=new this.constructor(this);state.children.push(clone);return clone[method].apply(clone,arguments)}},this)};Node.prototype._init=function init(body){var state=this._baseState;assert(state.parent===null);body.call(this);state.children=state.children.filter(function(child){return child._baseState.parent===this},this);assert.equal(state.children.length,1,"Root node can have only one child")};Node.prototype._useArgs=function useArgs(args){var state=this._baseState;var children=args.filter(function(arg){return arg instanceof this.constructor},this);args=args.filter(function(arg){return!(arg instanceof this.constructor)},this);if(children.length!==0){assert(state.children===null);state.children=children;children.forEach(function(child){child._baseState.parent=this},this)}if(args.length!==0){assert(state.args===null);state.args=args;state.reverseArgs=args.map(function(arg){if(typeof arg!=="object"||arg.constructor!==Object)return arg;var res={};Object.keys(arg).forEach(function(key){if(key==(key|0))key|=0;var value=arg[key];res[value]=key});return res})}};overrided.forEach(function(method){Node.prototype[method]=function _overrided(){var state=this._baseState;throw new Error(method+" not implemented for encoding: "+state.enc)}});tags.forEach(function(tag){Node.prototype[tag]=function _tagMethod(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);assert(state.tag===null);state.tag=tag;this._useArgs(args);return this}});Node.prototype.use=function use(item){var state=this._baseState;assert(state.use===null);state.use=item;return this};Node.prototype.optional=function optional(){var state=this._baseState;state.optional=true;return this};Node.prototype.def=function def(val){var state=this._baseState;assert(state["default"]===null);state["default"]=val;state.optional=true;return this};Node.prototype.explicit=function explicit(num){var state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.explicit=num;return this};Node.prototype.implicit=function implicit(num){var state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.implicit=num;return this};Node.prototype.obj=function obj(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);state.obj=true;if(args.length!==0)this._useArgs(args);return this};Node.prototype.key=function key(newKey){var state=this._baseState;assert(state.key===null);state.key=newKey;return this};Node.prototype.any=function any(){var state=this._baseState;state.any=true;return this};Node.prototype.choice=function choice(obj){var state=this._baseState;assert(state.choice===null);state.choice=obj;this._useArgs(Object.keys(obj).map(function(key){return obj[key]}));return this};Node.prototype.contains=function contains(item){var state=this._baseState;assert(state.use===null);state.contains=item;return this};Node.prototype._decode=function decode(input){var state=this._baseState;if(state.parent===null)return input.wrapResult(state.children[0]._decode(input));var result=state["default"];var present=true;var prevKey;if(state.key!==null)prevKey=input.enterKey(state.key);if(state.optional){var tag=null;if(state.explicit!==null)tag=state.explicit;else if(state.implicit!==null)tag=state.implicit;else if(state.tag!==null)tag=state.tag;if(tag===null&&!state.any){var save=input.save();try{if(state.choice===null)this._decodeGeneric(state.tag,input);else this._decodeChoice(input);present=true}catch(e){present=false}input.restore(save)}else{present=this._peekTag(input,tag,state.any);if(input.isError(present))return present}}var prevObj;if(state.obj&&present)prevObj=input.enterObject();if(present){if(state.explicit!==null){var explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit}if(state.use===null&&state.choice===null){if(state.any)var save=input.save();var body=this._decodeTag(input,state.implicit!==null?state.implicit:state.tag,state.any);if(input.isError(body))return body;if(state.any)result=input.raw(save);else input=body}if(state.any)result=result;else if(state.choice===null)result=this._decodeGeneric(state.tag,input);else result=this._decodeChoice(input);if(input.isError(result))return result;if(!state.any&&state.choice===null&&state.children!==null){state.children.forEach(function decodeChildren(child){child._decode(input)})}if(state.contains&&(state.tag==="octstr"||state.tag==="bitstr")){var data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data)}}if(state.obj&&present)result=input.leaveObject(prevObj);if(state.key!==null&&(result!==null||present===true))input.leaveKey(prevKey,state.key,result);return result};Node.prototype._decodeGeneric=function decodeGeneric(tag,input){var state=this._baseState;if(tag==="seq"||tag==="set")return null;if(tag==="seqof"||tag==="setof")return this._decodeList(input,tag,state.args[0]);else if(/str$/.test(tag))return this._decodeStr(input,tag);else if(tag==="objid"&&state.args)return this._decodeObjid(input,state.args[0],state.args[1]);else if(tag==="objid")return this._decodeObjid(input,null,null);else if(tag==="gentime"||tag==="utctime")return this._decodeTime(input,tag);else if(tag==="null_")return this._decodeNull(input);else if(tag==="bool")return this._decodeBool(input);else if(tag==="int"||tag==="enum")return this._decodeInt(input,state.args&&state.args[0]);else if(state.use!==null)return this._getUse(state.use,input._reporterState.obj)._decode(input);else return input.error("unknown tag: "+tag)};Node.prototype._getUse=function _getUse(entity,obj){var state=this._baseState;state.useDecoder=this._use(entity,obj);assert(state.useDecoder._baseState.parent===null);state.useDecoder=state.useDecoder._baseState.children[0];if(state.implicit!==state.useDecoder._baseState.implicit){state.useDecoder=state.useDecoder.clone();state.useDecoder._baseState.implicit=state.implicit}return state.useDecoder};Node.prototype._decodeChoice=function decodeChoice(input){var state=this._baseState;var result=null;var match=false;Object.keys(state.choice).some(function(key){var save=input.save();var node=state.choice[key];try{var value=node._decode(input);if(input.isError(value))return false;result={type:key,value:value};match=true}catch(e){input.restore(save);return false}return true},this);if(!match)return input.error("Choice not matched");return result};Node.prototype._createEncoderBuffer=function createEncoderBuffer(data){return new EncoderBuffer(data,this.reporter)};Node.prototype._encode=function encode(data,reporter,parent){var state=this._baseState;if(state["default"]!==null&&state["default"]===data)return;var result=this._encodeValue(data,reporter,parent);if(result===undefined)return;if(this._skipDefault(result,reporter,parent))return;return result};Node.prototype._encodeValue=function encode(data,reporter,parent){var state=this._baseState;if(state.parent===null)return state.children[0]._encode(data,reporter||new Reporter);var result=null;this.reporter=reporter;if(state.optional&&data===undefined){if(state["default"]!==null)data=state["default"];else return}var content=null;var primitive=false;if(state.any){result=this._createEncoderBuffer(data)}else if(state.choice){result=this._encodeChoice(data,reporter)}else if(state.contains){content=this._getUse(state.contains,parent)._encode(data,reporter);primitive=true}else if(state.children){content=state.children.map(function(child){if(child._baseState.tag==="null_")return child._encode(null,reporter,data);if(child._baseState.key===null)return reporter.error("Child should have a key");var prevKey=reporter.enterKey(child._baseState.key);if(typeof data!=="object")return reporter.error("Child expected, but input is not object");var res=child._encode(data[child._baseState.key],reporter,data);reporter.leaveKey(prevKey);return res},this).filter(function(child){return child});content=this._createEncoderBuffer(content)}else{if(state.tag==="seqof"||state.tag==="setof"){if(!(state.args&&state.args.length===1))return reporter.error("Too many args for : "+state.tag);if(!Array.isArray(data))return reporter.error("seqof/setof, but data is not Array");var child=this.clone();child._baseState.implicit=null;content=this._createEncoderBuffer(data.map(function(item){var state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter)},child))}else if(state.use!==null){result=this._getUse(state.use,parent)._encode(data,reporter)}else{content=this._encodePrimitive(state.tag,data);primitive=true}}var result;if(!state.any&&state.choice===null){var tag=state.implicit!==null?state.implicit:state.tag;var cls=state.implicit===null?"universal":"context";if(tag===null){if(state.use===null)reporter.error("Tag could be ommited only for .use()")}else{if(state.use===null)result=this._encodeComposite(tag,primitive,cls,content)}}if(state.explicit!==null)result=this._encodeComposite(state.explicit,false,"context",result);return result};Node.prototype._encodeChoice=function encodeChoice(data,reporter){var state=this._baseState;var node=state.choice[data.type];if(!node){assert(false,data.type+" not found in "+JSON.stringify(Object.keys(state.choice)))}return node._encode(data.value,reporter)};Node.prototype._encodePrimitive=function encodePrimitive(tag,data){var state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);else if(tag==="objid"&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);else if(tag==="objid")return this._encodeObjid(data,null,null);else if(tag==="gentime"||tag==="utctime")return this._encodeTime(data,tag);else if(tag==="null_")return this._encodeNull();else if(tag==="int"||tag==="enum")return this._encodeInt(data,state.args&&state.reverseArgs[0]);else if(tag==="bool")return this._encodeBool(data);else throw new Error("Unsupported tag: "+tag)};Node.prototype._isNumstr=function isNumstr(str){return/^[0-9 ]*$/.test(str)};Node.prototype._isPrintstr=function isPrintstr(str){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(str)}},{"../base":40,"minimalistic-assert":139}],42:[function(require,module,exports){var inherits=require("inherits");function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]}}exports.Reporter=Reporter;Reporter.prototype.isError=function isError(obj){return obj instanceof ReporterError};Reporter.prototype.save=function save(){var state=this._reporterState;return{obj:state.obj,pathLen:state.path.length}};Reporter.prototype.restore=function restore(data){var state=this._reporterState;state.obj=data.obj;state.path=state.path.slice(0,data.pathLen)};Reporter.prototype.enterKey=function enterKey(key){return this._reporterState.path.push(key)};Reporter.prototype.leaveKey=function leaveKey(index,key,value){var state=this._reporterState;state.path=state.path.slice(0,index-1);if(state.obj!==null)state.obj[key]=value};Reporter.prototype.enterObject=function enterObject(){var state=this._reporterState;var prev=state.obj;state.obj={};return prev};Reporter.prototype.leaveObject=function leaveObject(prev){var state=this._reporterState;var now=state.obj;state.obj=prev;return now};Reporter.prototype.error=function error(msg){var err;var state=this._reporterState;var inherited=msg instanceof ReporterError;if(inherited){err=msg}else{err=new ReporterError(state.path.map(function(elem){return"["+JSON.stringify(elem)+"]"}).join(""),msg.message||msg,msg.stack)}if(!state.options.partial)throw err;if(!inherited)state.errors.push(err);return err};Reporter.prototype.wrapResult=function wrapResult(result){var state=this._reporterState;if(!state.options.partial)return result;return{result:this.isError(result)?null:result,errors:state.errors}};function ReporterError(path,msg){this.path=path;this.rethrow(msg)}inherits(ReporterError,Error);ReporterError.prototype.rethrow=function rethrow(msg){this.message=msg+" at: "+(this.path||"(shallow)");Error.captureStackTrace(this,ReporterError);return this}},{inherits:136}],43:[function(require,module,exports){var constants=require("../constants");exports.tagClass={0:"universal",1:"application",2:"context",3:"private"};exports.tagClassByName=constants._reverse(exports.tagClass);exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};exports.tagByName=constants._reverse(exports.tag)},{"../constants":44}],44:[function(require,module,exports){var constants=exports;constants._reverse=function reverse(map){var res={};Object.keys(map).forEach(function(key){if((key|0)==key)key=key|0;var value=map[key];res[value]=key});return res};constants.der=require("./der");
},{"./der":43}],45:[function(require,module,exports){var inherits=require("inherits");var asn1=require("../../asn1");var base=asn1.base;var bignum=asn1.bignum;var der=asn1.constants.der;function DERDecoder(entity){this.enc="der";this.name=entity.name;this.entity=entity;this.tree=new DERNode;this.tree._init(entity.body)}module.exports=DERDecoder;DERDecoder.prototype.decode=function decode(data,options){if(!(data instanceof base.DecoderBuffer))data=new base.DecoderBuffer(data,options);return this.tree._decode(data,options)};function DERNode(parent){base.Node.call(this,"der",parent)}inherits(DERNode,base.Node);DERNode.prototype._peekTag=function peekTag(buffer,tag,any){if(buffer.isEmpty())return false;var state=buffer.save();var decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;buffer.restore(state);return decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+"of"===tag||any};DERNode.prototype._decodeTag=function decodeTag(buffer,tag,any){var decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;var len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+"of"!==tag){return buffer.error('Failed to match tag: "'+tag+'"')}if(decodedTag.primitive||len!==null)return buffer.skip(len,'Failed to match body of: "'+tag+'"');var state=buffer.save();var res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');if(buffer.isError(res))return res;len=buffer.offset-state.offset;buffer.restore(state);return buffer.skip(len,'Failed to match body of: "'+tag+'"')};DERNode.prototype._skipUntilEnd=function skipUntilEnd(buffer,fail){while(true){var tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;var len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;var res;if(tag.primitive||len!==null)res=buffer.skip(len);else res=this._skipUntilEnd(buffer,fail);if(buffer.isError(res))return res;if(tag.tagStr==="end")break}};DERNode.prototype._decodeList=function decodeList(buffer,tag,decoder){var result=[];while(!buffer.isEmpty()){var possibleEnd=this._peekTag(buffer,"end");if(buffer.isError(possibleEnd))return possibleEnd;var res=decoder.decode(buffer,"der");if(buffer.isError(res)&&possibleEnd)break;result.push(res)}return result};DERNode.prototype._decodeStr=function decodeStr(buffer,tag){if(tag==="bitstr"){var unused=buffer.readUInt8();if(buffer.isError(unused))return unused;return{unused:unused,data:buffer.raw()}}else if(tag==="bmpstr"){var raw=buffer.raw();if(raw.length%2===1)return buffer.error("Decoding of string type: bmpstr length mismatch");var str="";for(var i=0;i<raw.length/2;i++){str+=String.fromCharCode(raw.readUInt16BE(i*2))}return str}else if(tag==="numstr"){var numstr=buffer.raw().toString("ascii");if(!this._isNumstr(numstr)){return buffer.error("Decoding of string type: "+"numstr unsupported characters")}return numstr}else if(tag==="octstr"){return buffer.raw()}else if(tag==="printstr"){var printstr=buffer.raw().toString("ascii");if(!this._isPrintstr(printstr)){return buffer.error("Decoding of string type: "+"printstr unsupported characters")}return printstr}else if(/str$/.test(tag)){return buffer.raw().toString()}else{return buffer.error("Decoding of string type: "+tag+" unsupported")}};DERNode.prototype._decodeObjid=function decodeObjid(buffer,values,relative){var result;var identifiers=[];var ident=0;while(!buffer.isEmpty()){var subident=buffer.readUInt8();ident<<=7;ident|=subident&127;if((subident&128)===0){identifiers.push(ident);ident=0}}if(subident&128)identifiers.push(ident);var first=identifiers[0]/40|0;var second=identifiers[0]%40;if(relative)result=identifiers;else result=[first,second].concat(identifiers.slice(1));if(values){var tmp=values[result.join(" ")];if(tmp===undefined)tmp=values[result.join(".")];if(tmp!==undefined)result=tmp}return result};DERNode.prototype._decodeTime=function decodeTime(buffer,tag){var str=buffer.raw().toString();if(tag==="gentime"){var year=str.slice(0,4)|0;var mon=str.slice(4,6)|0;var day=str.slice(6,8)|0;var hour=str.slice(8,10)|0;var min=str.slice(10,12)|0;var sec=str.slice(12,14)|0}else if(tag==="utctime"){var year=str.slice(0,2)|0;var mon=str.slice(2,4)|0;var day=str.slice(4,6)|0;var hour=str.slice(6,8)|0;var min=str.slice(8,10)|0;var sec=str.slice(10,12)|0;if(year<70)year=2e3+year;else year=1900+year}else{return buffer.error("Decoding "+tag+" time is not supported yet")}return Date.UTC(year,mon-1,day,hour,min,sec,0)};DERNode.prototype._decodeNull=function decodeNull(buffer){return null};DERNode.prototype._decodeBool=function decodeBool(buffer){var res=buffer.readUInt8();if(buffer.isError(res))return res;else return res!==0};DERNode.prototype._decodeInt=function decodeInt(buffer,values){var raw=buffer.raw();var res=new bignum(raw);if(values)res=values[res.toString(10)]||res;return res};DERNode.prototype._use=function use(entity,obj){if(typeof entity==="function")entity=entity(obj);return entity._getDecoder("der").tree};function derDecodeTag(buf,fail){var tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;var cls=der.tagClass[tag>>6];var primitive=(tag&32)===0;if((tag&31)===31){var oct=tag;tag=0;while((oct&128)===128){oct=buf.readUInt8(fail);if(buf.isError(oct))return oct;tag<<=7;tag|=oct&127}}else{tag&=31}var tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr}}function derDecodeLen(buf,primitive,fail){var len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&len===128)return null;if((len&128)===0){return len}var num=len&127;if(num>=4)return buf.error("length octect is too long");len=0;for(var i=0;i<num;i++){len<<=8;var j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j}return len}},{"../../asn1":37,inherits:136}],46:[function(require,module,exports){var decoders=exports;decoders.der=require("./der");decoders.pem=require("./pem")},{"./der":45,"./pem":47}],47:[function(require,module,exports){var inherits=require("inherits");var Buffer=require("buffer").Buffer;var DERDecoder=require("./der");function PEMDecoder(entity){DERDecoder.call(this,entity);this.enc="pem"}inherits(PEMDecoder,DERDecoder);module.exports=PEMDecoder;PEMDecoder.prototype.decode=function decode(data,options){var lines=data.toString().split(/[\r\n]+/g);var label=options.label.toUpperCase();var re=/^-----(BEGIN|END) ([^-]+)-----$/;var start=-1;var end=-1;for(var i=0;i<lines.length;i++){var match=lines[i].match(re);if(match===null)continue;if(match[2]!==label)continue;if(start===-1){if(match[1]!=="BEGIN")break;start=i}else{if(match[1]!=="END")break;end=i;break}}if(start===-1||end===-1)throw new Error("PEM section not found for: "+label);var base64=lines.slice(start+1,end).join("");base64.replace(/[^a-z0-9\+\/=]+/gi,"");var input=new Buffer(base64,"base64");return DERDecoder.prototype.decode.call(this,input,options)}},{"./der":45,buffer:85,inherits:136}],48:[function(require,module,exports){var inherits=require("inherits");var Buffer=require("buffer").Buffer;var asn1=require("../../asn1");var base=asn1.base;var der=asn1.constants.der;function DEREncoder(entity){this.enc="der";this.name=entity.name;this.entity=entity;this.tree=new DERNode;this.tree._init(entity.body)}module.exports=DEREncoder;DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join()};function DERNode(parent){base.Node.call(this,"der",parent)}inherits(DERNode,base.Node);DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){var encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<128){var header=new Buffer(2);header[0]=encodedTag;header[1]=content.length;return this._createEncoderBuffer([header,content])}var lenOctets=1;for(var i=content.length;i>=256;i>>=8)lenOctets++;var header=new Buffer(1+1+lenOctets);header[0]=encodedTag;header[1]=128|lenOctets;for(var i=1+lenOctets,j=content.length;j>0;i--,j>>=8)header[i]=j&255;return this._createEncoderBuffer([header,content])};DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==="bitstr"){return this._createEncoderBuffer([str.unused|0,str.data])}else if(tag==="bmpstr"){var buf=new Buffer(str.length*2);for(var i=0;i<str.length;i++){buf.writeUInt16BE(str.charCodeAt(i),i*2)}return this._createEncoderBuffer(buf)}else if(tag==="numstr"){if(!this._isNumstr(str)){return this.reporter.error("Encoding of string type: numstr supports "+"only digits and space")}return this._createEncoderBuffer(str)}else if(tag==="printstr"){if(!this._isPrintstr(str)){return this.reporter.error("Encoding of string type: printstr supports "+"only latin upper and lower case letters, "+"digits, space, apostrophe, left and rigth "+"parenthesis, plus sign, comma, hyphen, "+"dot, slash, colon, equal sign, "+"question mark")}return this._createEncoderBuffer(str)}else if(/str$/.test(tag)){return this._createEncoderBuffer(str)}else{return this.reporter.error("Encoding of string type: "+tag+" unsupported")}};DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==="string"){if(!values)return this.reporter.error("string objid given, but no values map found");if(!values.hasOwnProperty(id))return this.reporter.error("objid not found in values map");id=values[id].split(/[\s\.]+/g);for(var i=0;i<id.length;i++)id[i]|=0}else if(Array.isArray(id)){id=id.slice();for(var i=0;i<id.length;i++)id[i]|=0}if(!Array.isArray(id)){return this.reporter.error("objid() should be either array or string, "+"got: "+JSON.stringify(id))}if(!relative){if(id[1]>=40)return this.reporter.error("Second objid identifier OOB");id.splice(0,2,id[0]*40+id[1])}var size=0;for(var i=0;i<id.length;i++){var ident=id[i];for(size++;ident>=128;ident>>=7)size++}var objid=new Buffer(size);var offset=objid.length-1;for(var i=id.length-1;i>=0;i--){var ident=id[i];objid[offset--]=ident&127;while((ident>>=7)>0)objid[offset--]=128|ident&127}return this._createEncoderBuffer(objid)};function two(num){if(num<10)return"0"+num;else return num}DERNode.prototype._encodeTime=function encodeTime(time,tag){var str;var date=new Date(time);if(tag==="gentime"){str=[two(date.getFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join("")}else if(tag==="utctime"){str=[two(date.getFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join("")}else{this.reporter.error("Encoding "+tag+" time is not supported yet")}return this._encodeStr(str,"octstr")};DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer("")};DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==="string"){if(!values)return this.reporter.error("String int or enum given, but no values map");if(!values.hasOwnProperty(num)){return this.reporter.error("Values map doesn't contain: "+JSON.stringify(num))}num=values[num]}if(typeof num!=="number"&&!Buffer.isBuffer(num)){var numArray=num.toArray();if(!num.sign&&numArray[0]&128){numArray.unshift(0)}num=new Buffer(numArray)}if(Buffer.isBuffer(num)){var size=num.length;if(num.length===0)size++;var out=new Buffer(size);num.copy(out);if(num.length===0)out[0]=0;return this._createEncoderBuffer(out)}if(num<128)return this._createEncoderBuffer(num);if(num<256)return this._createEncoderBuffer([0,num]);var size=1;for(var i=num;i>=256;i>>=8)size++;var out=new Array(size);for(var i=out.length-1;i>=0;i--){out[i]=num&255;num>>=8}if(out[0]&128){out.unshift(0)}return this._createEncoderBuffer(new Buffer(out))};DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?255:0)};DERNode.prototype._use=function use(entity,obj){if(typeof entity==="function")entity=entity(obj);return entity._getEncoder("der").tree};DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){var state=this._baseState;var i;if(state["default"]===null)return false;var data=dataBuffer.join();if(state.defaultBuffer===undefined)state.defaultBuffer=this._encodeValue(state["default"],reporter,parent).join();if(data.length!==state.defaultBuffer.length)return false;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return false;return true};function encodeTag(tag,primitive,cls,reporter){var res;if(tag==="seqof")tag="seq";else if(tag==="setof")tag="set";if(der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else if(typeof tag==="number"&&(tag|0)===tag)res=tag;else return reporter.error("Unknown tag: "+tag);if(res>=31)return reporter.error("Multi-octet tag encoding unsupported");if(!primitive)res|=32;res|=der.tagClassByName[cls||"universal"]<<6;return res}},{"../../asn1":37,buffer:85,inherits:136}],49:[function(require,module,exports){var encoders=exports;encoders.der=require("./der");encoders.pem=require("./pem")},{"./der":48,"./pem":50}],50:[function(require,module,exports){var inherits=require("inherits");var DEREncoder=require("./der");function PEMEncoder(entity){DEREncoder.call(this,entity);this.enc="pem"}inherits(PEMEncoder,DEREncoder);module.exports=PEMEncoder;PEMEncoder.prototype.encode=function encode(data,options){var buf=DEREncoder.prototype.encode.call(this,data);var p=buf.toString("base64");var out=["-----BEGIN "+options.label+"-----"];for(var i=0;i<p.length;i+=64)out.push(p.slice(i,i+64));out.push("-----END "+options.label+"-----");return out.join("\n")}},{"./der":48,inherits:136}],51:[function(require,module,exports){var util=require("util/");var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return""+value}if(util.isNumber(value)&&!isFinite(value)){return value.toString()}if(util.isFunction(value)||util.isRegExp(value)){return value.toString()}return value}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n)}else{return s}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected}else{return objEquiv(actual,expected)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}},{"util/":206}],52:[function(require,module,exports){"use strict";exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;function init(){var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63}init();function toByteArray(b64){var i,j,l,tmp,placeHolders,arr;var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}placeHolders=b64[len-2]==="="?2:b64[len-1]==="="?1:0;arr=new Arr(len*3/4-placeHolders);l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=tmp>>16&255;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}if(placeHolders===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=tmp&255}else if(placeHolders===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var output="";var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];output+=lookup[tmp>>2];output+=lookup[tmp<<4&63];output+="=="}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];output+=lookup[tmp>>10];output+=lookup[tmp>>4&63];output+=lookup[tmp<<2&63];output+="="}parts.push(output);return parts.join("")}},{}],53:[function(require,module,exports){(function(process,__filename){var fs=require("fs"),path=require("path"),join=path.join,dirname=path.dirname,exists=fs.existsSync||path.existsSync,defaults={arrow:process.env.NODE_BINDINGS_ARROW||"  ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,version:process.versions.node,bindings:"bindings.node","try":[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};function bindings(opts){if(typeof opts=="string"){opts={bindings:opts}}else if(!opts){opts={}}opts.__proto__=defaults;if(!opts.module_root){opts.module_root=exports.getRoot(exports.getFileName())}if(path.extname(opts.bindings)!=".node"){opts.bindings+=".node"}var tries=[],i=0,l=opts.try.length,n,b,err;for(;i<l;i++){n=join.apply(null,opts.try[i].map(function(p){return opts[p]||p}));tries.push(n);try{b=opts.path?require.resolve(n):require(n);if(!opts.path){b.path=n}return b}catch(e){if(!/not find/i.test(e.message)){throw e}}}err=new Error("Could not locate the bindings file. Tried:\n"+tries.map(function(a){return opts.arrow+a}).join("\n"));err.tries=tries;throw err}module.exports=exports=bindings;exports.getFileName=function getFileName(calling_file){var origPST=Error.prepareStackTrace,origSTL=Error.stackTraceLimit,dummy={},fileName;Error.stackTraceLimit=10;Error.prepareStackTrace=function(e,st){for(var i=0,l=st.length;i<l;i++){fileName=st[i].getFileName();if(fileName!==__filename){if(calling_file){if(fileName!==calling_file){return}}else{return}}}};Error.captureStackTrace(dummy);dummy.stack;Error.prepareStackTrace=origPST;Error.stackTraceLimit=origSTL;return fileName};exports.getRoot=function getRoot(file){var dir=dirname(file),prev;while(true){if(dir==="."){dir=process.cwd()}if(exists(join(dir,"package.json"))||exists(join(dir,"node_modules"))){return dir}if(prev===dir){throw new Error('Could not find module root given file: "'+file+'". Do you have a `package.json` file? ')}prev=dir;dir=join(dir,"..")}}}).call(this,require("_process"),"/node_modules/bindings/bindings.js")},{_process:159,fs:83,path:156}],54:[function(require,module,exports){(function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number)){return number}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==="le"||base==="be"){endian=base;base=10}this._init(number||0,base||10,endian||"be")}}if(typeof module==="object"){module.exports=BN}else{exports.BN=BN}BN.BN=BN;BN.wordSize=26;var Buffer;try{Buffer=require("buf"+"fer").Buffer}catch(e){}BN.isBN=function isBN(num){return num!==null&&typeof num==="object"&&num.constructor.name==="BN"&&Array.isArray(num.words)};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right};BN.prototype._init=function init(number,base,endian){if(typeof number==="number"){return this._initNumber(number,base,endian)}if(typeof number==="object"){return this._initArray(number,base,endian)}if(base==="hex"){base=16}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,"");var start=0;if(number[0]==="-"){start++}if(base===16){this._parseHex(number,start)}else{this._parseBase(number,base,start)}if(number[0]==="-"){this.negative=1}this.strip();if(endian!=="le")return;this._initArray(this.toArray(),base,endian)};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number}if(number<67108864){this.words=[number&67108863];this.length=1}else if(number<4503599627370496){this.words=[number&67108863,number/67108864&67108863];this.length=2}else{assert(number<9007199254740992);this.words=[number&67108863,number/67108864&67108863,1];this.length=3}if(endian!=="le")return;this._initArray(this.toArray(),base,endian)};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==="number");if(number.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var j,w;var off=0;if(endian==="be"){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}else if(endian==="le"){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}return this.strip()};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54){r|=c-49+10}else if(c>=17&&c<=22){r|=c-17+10}else{r|=c&15}}return r}BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6){w=parseHex(number,i,i+6);this.words[j]|=w<<off&67108863;this.words[j+1]|=w>>>26-off&4194303;off+=24;if(off>=26){off-=26;j++}}if(i+6!==start){w=parseHex(number,start,i+6);this.words[j]|=w<<off&67108863;this.words[j+1]|=w>>>26-off&4194303}this.strip()};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+10}else if(c>=17){r+=c-17+10}else{r+=c}}return r}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base){limbLen++}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base}this.imuln(pow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i]}dest.length=this.length;dest.negative=this.negative;dest.red=this.red};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0}return this};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==="hex"){out="";var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&16777215).toString(16);carry=w>>>24-off&16777215;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out}else{out=word+out}off+=2;if(off>=26){off-=26;i--}}if(carry!==0){out=carry.toString(16)+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out="";var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out}else{out=r+out}}if(this.isZero()){out="0"+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}assert(false,"Base should be between 2 and 36")};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){ret+=4503599627370496+this.words[1]*67108864}else if(this.length>2){assert(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-ret:ret};BN.prototype.toJSON=function toJSON(){return this.toString(16)};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=="undefined");return this.toArrayLike(Buffer,endian,length)};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length)};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length");assert(reqLength>0,"Requested array length <= 0");this.strip();var littleEndian=endian==="le";var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0}for(i=0;!q.isZero();i++){b=q.andln(255);q.iushrn(8);res[reqLength-i-1]=b}}else{for(i=0;!q.isZero();i++){b=q.andln(255);q.iushrn(8);res[i]=b}for(;i<reqLength;i++){res[i]=0}}return res};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w)}}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=4096){r+=13;t>>>=13}if(t>=64){r+=7;t>>>=7}if(t>=8){r+=4;t>>>=4}if(t>=2){r+=2;t>>>=2}return r+t}}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&8191)===0){r+=13;t>>>=13}if((t&127)===0){r+=7;t>>>=7}if((t&15)===0){r+=4;t>>>=4}if((t&3)===0){r+=2;t>>>=2}if((t&1)===0){r++}return r};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);
return(this.length-1)*26+hi};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break}return r};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1)}return this.clone()};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg()}return this.clone()};BN.prototype.isNeg=function isNeg(){return this.negative!==0};BN.prototype.neg=function neg(){return this.clone().ineg()};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1}return this};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i]}return this.strip()};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num)};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this)};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this)};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num}else{b=this}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i]}this.length=b.length;return this.strip()};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num)};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this)};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this)};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i]}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=a.length;return this.strip()};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num)};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this)};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this)};BN.prototype.inotn=function inotn(width){assert(typeof width==="number"&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&67108863}if(bitsLeft>0){this.words[i]=~this.words[i]&67108863>>26-bitsLeft}return this.strip()};BN.prototype.notn=function notn(width){return this.clone().inotn(width)};BN.prototype.setn=function setn(bit,val){assert(typeof bit==="number"&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit}else{this.words[off]=this.words[off]&~(1<<wbit)}return this.strip()};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign()}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign()}var a,b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}return this};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this)};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign()}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this}var a,b;if(cmp>0){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1}return this.strip()};BN.prototype.sub=function sub(num){return this.clone().isub(num)};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&67108863;var carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/67108864|0;rword=r&67108863}out.words[k]=rword|0;carry=ncarry|0}if(carry!==0){out.words[k]=carry|0}else{out.length--}return out.strip()}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&8191;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&8191;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&8191;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&8191;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&8191;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&8191;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&8191;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&8191;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&8191;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&8191;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&8191;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&8191;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&8191;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&8191;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&8191;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&8191;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&8191;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&8191;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&8191;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&8191;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid+=Math.imul(ah0,bl0);hi=Math.imul(ah0,bh0);var w0=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w0>>>26);w0&=67108863;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid+=Math.imul(ah1,bl0);hi=Math.imul(ah1,bh0);lo+=Math.imul(al0,bl1);mid+=Math.imul(al0,bh1);mid+=Math.imul(ah0,bl1);hi+=Math.imul(ah0,bh1);var w1=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w1>>>26);w1&=67108863;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid+=Math.imul(ah2,bl0);hi=Math.imul(ah2,bh0);lo+=Math.imul(al1,bl1);mid+=Math.imul(al1,bh1);mid+=Math.imul(ah1,bl1);hi+=Math.imul(ah1,bh1);lo+=Math.imul(al0,bl2);mid+=Math.imul(al0,bh2);mid+=Math.imul(ah0,bl2);hi+=Math.imul(ah0,bh2);var w2=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w2>>>26);w2&=67108863;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid+=Math.imul(ah3,bl0);hi=Math.imul(ah3,bh0);lo+=Math.imul(al2,bl1);mid+=Math.imul(al2,bh1);mid+=Math.imul(ah2,bl1);hi+=Math.imul(ah2,bh1);lo+=Math.imul(al1,bl2);mid+=Math.imul(al1,bh2);mid+=Math.imul(ah1,bl2);hi+=Math.imul(ah1,bh2);lo+=Math.imul(al0,bl3);mid+=Math.imul(al0,bh3);mid+=Math.imul(ah0,bl3);hi+=Math.imul(ah0,bh3);var w3=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w3>>>26);w3&=67108863;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid+=Math.imul(ah4,bl0);hi=Math.imul(ah4,bh0);lo+=Math.imul(al3,bl1);mid+=Math.imul(al3,bh1);mid+=Math.imul(ah3,bl1);hi+=Math.imul(ah3,bh1);lo+=Math.imul(al2,bl2);mid+=Math.imul(al2,bh2);mid+=Math.imul(ah2,bl2);hi+=Math.imul(ah2,bh2);lo+=Math.imul(al1,bl3);mid+=Math.imul(al1,bh3);mid+=Math.imul(ah1,bl3);hi+=Math.imul(ah1,bh3);lo+=Math.imul(al0,bl4);mid+=Math.imul(al0,bh4);mid+=Math.imul(ah0,bl4);hi+=Math.imul(ah0,bh4);var w4=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w4>>>26);w4&=67108863;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid+=Math.imul(ah5,bl0);hi=Math.imul(ah5,bh0);lo+=Math.imul(al4,bl1);mid+=Math.imul(al4,bh1);mid+=Math.imul(ah4,bl1);hi+=Math.imul(ah4,bh1);lo+=Math.imul(al3,bl2);mid+=Math.imul(al3,bh2);mid+=Math.imul(ah3,bl2);hi+=Math.imul(ah3,bh2);lo+=Math.imul(al2,bl3);mid+=Math.imul(al2,bh3);mid+=Math.imul(ah2,bl3);hi+=Math.imul(ah2,bh3);lo+=Math.imul(al1,bl4);mid+=Math.imul(al1,bh4);mid+=Math.imul(ah1,bl4);hi+=Math.imul(ah1,bh4);lo+=Math.imul(al0,bl5);mid+=Math.imul(al0,bh5);mid+=Math.imul(ah0,bl5);hi+=Math.imul(ah0,bh5);var w5=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w5>>>26);w5&=67108863;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid+=Math.imul(ah6,bl0);hi=Math.imul(ah6,bh0);lo+=Math.imul(al5,bl1);mid+=Math.imul(al5,bh1);mid+=Math.imul(ah5,bl1);hi+=Math.imul(ah5,bh1);lo+=Math.imul(al4,bl2);mid+=Math.imul(al4,bh2);mid+=Math.imul(ah4,bl2);hi+=Math.imul(ah4,bh2);lo+=Math.imul(al3,bl3);mid+=Math.imul(al3,bh3);mid+=Math.imul(ah3,bl3);hi+=Math.imul(ah3,bh3);lo+=Math.imul(al2,bl4);mid+=Math.imul(al2,bh4);mid+=Math.imul(ah2,bl4);hi+=Math.imul(ah2,bh4);lo+=Math.imul(al1,bl5);mid+=Math.imul(al1,bh5);mid+=Math.imul(ah1,bl5);hi+=Math.imul(ah1,bh5);lo+=Math.imul(al0,bl6);mid+=Math.imul(al0,bh6);mid+=Math.imul(ah0,bl6);hi+=Math.imul(ah0,bh6);var w6=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w6>>>26);w6&=67108863;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid+=Math.imul(ah7,bl0);hi=Math.imul(ah7,bh0);lo+=Math.imul(al6,bl1);mid+=Math.imul(al6,bh1);mid+=Math.imul(ah6,bl1);hi+=Math.imul(ah6,bh1);lo+=Math.imul(al5,bl2);mid+=Math.imul(al5,bh2);mid+=Math.imul(ah5,bl2);hi+=Math.imul(ah5,bh2);lo+=Math.imul(al4,bl3);mid+=Math.imul(al4,bh3);mid+=Math.imul(ah4,bl3);hi+=Math.imul(ah4,bh3);lo+=Math.imul(al3,bl4);mid+=Math.imul(al3,bh4);mid+=Math.imul(ah3,bl4);hi+=Math.imul(ah3,bh4);lo+=Math.imul(al2,bl5);mid+=Math.imul(al2,bh5);mid+=Math.imul(ah2,bl5);hi+=Math.imul(ah2,bh5);lo+=Math.imul(al1,bl6);mid+=Math.imul(al1,bh6);mid+=Math.imul(ah1,bl6);hi+=Math.imul(ah1,bh6);lo+=Math.imul(al0,bl7);mid+=Math.imul(al0,bh7);mid+=Math.imul(ah0,bl7);hi+=Math.imul(ah0,bh7);var w7=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w7>>>26);w7&=67108863;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid+=Math.imul(ah8,bl0);hi=Math.imul(ah8,bh0);lo+=Math.imul(al7,bl1);mid+=Math.imul(al7,bh1);mid+=Math.imul(ah7,bl1);hi+=Math.imul(ah7,bh1);lo+=Math.imul(al6,bl2);mid+=Math.imul(al6,bh2);mid+=Math.imul(ah6,bl2);hi+=Math.imul(ah6,bh2);lo+=Math.imul(al5,bl3);mid+=Math.imul(al5,bh3);mid+=Math.imul(ah5,bl3);hi+=Math.imul(ah5,bh3);lo+=Math.imul(al4,bl4);mid+=Math.imul(al4,bh4);mid+=Math.imul(ah4,bl4);hi+=Math.imul(ah4,bh4);lo+=Math.imul(al3,bl5);mid+=Math.imul(al3,bh5);mid+=Math.imul(ah3,bl5);hi+=Math.imul(ah3,bh5);lo+=Math.imul(al2,bl6);mid+=Math.imul(al2,bh6);mid+=Math.imul(ah2,bl6);hi+=Math.imul(ah2,bh6);lo+=Math.imul(al1,bl7);mid+=Math.imul(al1,bh7);mid+=Math.imul(ah1,bl7);hi+=Math.imul(ah1,bh7);lo+=Math.imul(al0,bl8);mid+=Math.imul(al0,bh8);mid+=Math.imul(ah0,bl8);hi+=Math.imul(ah0,bh8);var w8=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w8>>>26);w8&=67108863;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid+=Math.imul(ah9,bl0);hi=Math.imul(ah9,bh0);lo+=Math.imul(al8,bl1);mid+=Math.imul(al8,bh1);mid+=Math.imul(ah8,bl1);hi+=Math.imul(ah8,bh1);lo+=Math.imul(al7,bl2);mid+=Math.imul(al7,bh2);mid+=Math.imul(ah7,bl2);hi+=Math.imul(ah7,bh2);lo+=Math.imul(al6,bl3);mid+=Math.imul(al6,bh3);mid+=Math.imul(ah6,bl3);hi+=Math.imul(ah6,bh3);lo+=Math.imul(al5,bl4);mid+=Math.imul(al5,bh4);mid+=Math.imul(ah5,bl4);hi+=Math.imul(ah5,bh4);lo+=Math.imul(al4,bl5);mid+=Math.imul(al4,bh5);mid+=Math.imul(ah4,bl5);hi+=Math.imul(ah4,bh5);lo+=Math.imul(al3,bl6);mid+=Math.imul(al3,bh6);mid+=Math.imul(ah3,bl6);hi+=Math.imul(ah3,bh6);lo+=Math.imul(al2,bl7);mid+=Math.imul(al2,bh7);mid+=Math.imul(ah2,bl7);hi+=Math.imul(ah2,bh7);lo+=Math.imul(al1,bl8);mid+=Math.imul(al1,bh8);mid+=Math.imul(ah1,bl8);hi+=Math.imul(ah1,bh8);lo+=Math.imul(al0,bl9);mid+=Math.imul(al0,bh9);mid+=Math.imul(ah0,bl9);hi+=Math.imul(ah0,bh9);var w9=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w9>>>26);w9&=67108863;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid+=Math.imul(ah9,bl1);hi=Math.imul(ah9,bh1);lo+=Math.imul(al8,bl2);mid+=Math.imul(al8,bh2);mid+=Math.imul(ah8,bl2);hi+=Math.imul(ah8,bh2);lo+=Math.imul(al7,bl3);mid+=Math.imul(al7,bh3);mid+=Math.imul(ah7,bl3);hi+=Math.imul(ah7,bh3);lo+=Math.imul(al6,bl4);mid+=Math.imul(al6,bh4);mid+=Math.imul(ah6,bl4);hi+=Math.imul(ah6,bh4);lo+=Math.imul(al5,bl5);mid+=Math.imul(al5,bh5);mid+=Math.imul(ah5,bl5);hi+=Math.imul(ah5,bh5);lo+=Math.imul(al4,bl6);mid+=Math.imul(al4,bh6);mid+=Math.imul(ah4,bl6);hi+=Math.imul(ah4,bh6);lo+=Math.imul(al3,bl7);mid+=Math.imul(al3,bh7);mid+=Math.imul(ah3,bl7);hi+=Math.imul(ah3,bh7);lo+=Math.imul(al2,bl8);mid+=Math.imul(al2,bh8);mid+=Math.imul(ah2,bl8);hi+=Math.imul(ah2,bh8);lo+=Math.imul(al1,bl9);mid+=Math.imul(al1,bh9);mid+=Math.imul(ah1,bl9);hi+=Math.imul(ah1,bh9);var w10=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w10>>>26);w10&=67108863;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid+=Math.imul(ah9,bl2);hi=Math.imul(ah9,bh2);lo+=Math.imul(al8,bl3);mid+=Math.imul(al8,bh3);mid+=Math.imul(ah8,bl3);hi+=Math.imul(ah8,bh3);lo+=Math.imul(al7,bl4);mid+=Math.imul(al7,bh4);mid+=Math.imul(ah7,bl4);hi+=Math.imul(ah7,bh4);lo+=Math.imul(al6,bl5);mid+=Math.imul(al6,bh5);mid+=Math.imul(ah6,bl5);hi+=Math.imul(ah6,bh5);lo+=Math.imul(al5,bl6);mid+=Math.imul(al5,bh6);mid+=Math.imul(ah5,bl6);hi+=Math.imul(ah5,bh6);lo+=Math.imul(al4,bl7);mid+=Math.imul(al4,bh7);mid+=Math.imul(ah4,bl7);hi+=Math.imul(ah4,bh7);lo+=Math.imul(al3,bl8);mid+=Math.imul(al3,bh8);mid+=Math.imul(ah3,bl8);hi+=Math.imul(ah3,bh8);lo+=Math.imul(al2,bl9);mid+=Math.imul(al2,bh9);mid+=Math.imul(ah2,bl9);hi+=Math.imul(ah2,bh9);var w11=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w11>>>26);w11&=67108863;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid+=Math.imul(ah9,bl3);hi=Math.imul(ah9,bh3);lo+=Math.imul(al8,bl4);mid+=Math.imul(al8,bh4);mid+=Math.imul(ah8,bl4);hi+=Math.imul(ah8,bh4);lo+=Math.imul(al7,bl5);mid+=Math.imul(al7,bh5);mid+=Math.imul(ah7,bl5);hi+=Math.imul(ah7,bh5);lo+=Math.imul(al6,bl6);mid+=Math.imul(al6,bh6);mid+=Math.imul(ah6,bl6);hi+=Math.imul(ah6,bh6);lo+=Math.imul(al5,bl7);mid+=Math.imul(al5,bh7);mid+=Math.imul(ah5,bl7);hi+=Math.imul(ah5,bh7);lo+=Math.imul(al4,bl8);mid+=Math.imul(al4,bh8);mid+=Math.imul(ah4,bl8);hi+=Math.imul(ah4,bh8);lo+=Math.imul(al3,bl9);mid+=Math.imul(al3,bh9);mid+=Math.imul(ah3,bl9);hi+=Math.imul(ah3,bh9);var w12=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w12>>>26);w12&=67108863;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid+=Math.imul(ah9,bl4);hi=Math.imul(ah9,bh4);lo+=Math.imul(al8,bl5);mid+=Math.imul(al8,bh5);mid+=Math.imul(ah8,bl5);hi+=Math.imul(ah8,bh5);lo+=Math.imul(al7,bl6);mid+=Math.imul(al7,bh6);mid+=Math.imul(ah7,bl6);hi+=Math.imul(ah7,bh6);lo+=Math.imul(al6,bl7);mid+=Math.imul(al6,bh7);mid+=Math.imul(ah6,bl7);hi+=Math.imul(ah6,bh7);lo+=Math.imul(al5,bl8);mid+=Math.imul(al5,bh8);mid+=Math.imul(ah5,bl8);hi+=Math.imul(ah5,bh8);lo+=Math.imul(al4,bl9);mid+=Math.imul(al4,bh9);mid+=Math.imul(ah4,bl9);hi+=Math.imul(ah4,bh9);var w13=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w13>>>26);w13&=67108863;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid+=Math.imul(ah9,bl5);hi=Math.imul(ah9,bh5);lo+=Math.imul(al8,bl6);mid+=Math.imul(al8,bh6);mid+=Math.imul(ah8,bl6);hi+=Math.imul(ah8,bh6);lo+=Math.imul(al7,bl7);mid+=Math.imul(al7,bh7);mid+=Math.imul(ah7,bl7);hi+=Math.imul(ah7,bh7);lo+=Math.imul(al6,bl8);mid+=Math.imul(al6,bh8);mid+=Math.imul(ah6,bl8);hi+=Math.imul(ah6,bh8);lo+=Math.imul(al5,bl9);mid+=Math.imul(al5,bh9);mid+=Math.imul(ah5,bl9);hi+=Math.imul(ah5,bh9);var w14=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w14>>>26);w14&=67108863;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid+=Math.imul(ah9,bl6);hi=Math.imul(ah9,bh6);lo+=Math.imul(al8,bl7);mid+=Math.imul(al8,bh7);mid+=Math.imul(ah8,bl7);hi+=Math.imul(ah8,bh7);lo+=Math.imul(al7,bl8);mid+=Math.imul(al7,bh8);mid+=Math.imul(ah7,bl8);hi+=Math.imul(ah7,bh8);lo+=Math.imul(al6,bl9);mid+=Math.imul(al6,bh9);mid+=Math.imul(ah6,bl9);hi+=Math.imul(ah6,bh9);var w15=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w15>>>26);w15&=67108863;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid+=Math.imul(ah9,bl7);hi=Math.imul(ah9,bh7);lo+=Math.imul(al8,bl8);mid+=Math.imul(al8,bh8);mid+=Math.imul(ah8,bl8);hi+=Math.imul(ah8,bh8);lo+=Math.imul(al7,bl9);mid+=Math.imul(al7,bh9);mid+=Math.imul(ah7,bl9);hi+=Math.imul(ah7,bh9);var w16=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w16>>>26);w16&=67108863;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid+=Math.imul(ah9,bl8);hi=Math.imul(ah9,bh8);lo+=Math.imul(al8,bl9);mid+=Math.imul(al8,bh9);mid+=Math.imul(ah8,bl9);hi+=Math.imul(ah8,bh9);var w17=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w17>>>26);w17&=67108863;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid+=Math.imul(ah9,bl9);hi=Math.imul(ah9,bh9);var w18=c+lo+((mid&8191)<<13);c=hi+(mid>>>13)+(w18>>>26);w18&=67108863;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++}return out};if(!Math.imul){comb10MulTo=smallMulTo}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&67108863;ncarry=ncarry+(r/67108864|0)|0;lo=lo+rword|0;rword=lo&67108863;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=67108863}out.words[k]=rword;carry=ncarry;ncarry=hncarry}if(carry!==0){out.words[k]=carry}else{out.length--}return out.strip()}function jumboMulTo(self,num,out){var fftm=new FFTM;return fftm.mulp(self,num,out)}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out)}else if(len<63){res=smallMulTo(this,num,out)}else if(len<1024){res=bigMulTo(this,num,out)}else{res=jumboMulTo(this,num,out)}return res};function FFTM(x,y){this.x=x;this.y=y}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N)}return t};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1}return rb};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]]}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++}return 1<<i+1+odd};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*8192+Math.round(ws[2*i]/N)+carry;ws[i]=w&67108863;if(w<67108864){carry=0}else{carry=w/67108864|0}}return ws};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&8191;carry=carry>>>13;rws[2*i+1]=carry&8191;carry=carry>>>13}for(i=2*len;i<N;++i){rws[i]=0}assert(carry===0);assert((carry&~8191)===0)};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0}return ph};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip()};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out)};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out)};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this)};BN.prototype.imuln=function imuln(num){assert(typeof num==="number");assert(num<67108864);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&67108863)+(carry&67108863);carry>>=26;carry+=w/67108864|0;carry+=lo>>>26;this.words[i]=lo&67108863}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.muln=function muln(num){return this.clone().imuln(num)};BN.prototype.sqr=function sqr(){return this.mul(this)};BN.prototype.isqr=function isqr(){return this.imul(this.clone())};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q)}}return res};BN.prototype.iushln=function iushln(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=67108863>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r}if(carry){this.words[i]=carry;this.length++}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i]}for(i=0;i<s;i++){this.words[i]=0}this.length+=s}return this.strip()};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits)};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==="number"&&bits>=0);var h;if(hint){h=(hint-hint%26)/26}else{h=0}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=67108863^67108863>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i]}maskedWords.length=s}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s]}}else{this.words[0]=0;this.length=1}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended)};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits)};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits)};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits)};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits)};BN.prototype.testn=function testn(bit){assert(typeof bit==="number"&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q)};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,"imaskn works only with positive numbers");if(r!==0){s++}this.length=Math.min(s,this.length);if(r!==0){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits)};BN.prototype.iaddn=function iaddn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(num);this.negative=1;return this}return this._iaddn(num)};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++){this.words[i]-=67108864;if(i===this.length-1){this.words[i+1]=1}else{this.words[i+1]++}}this.length=Math.max(this.length,i+1);return this};BN.prototype.isubn=function isubn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=67108864;this.words[i+1]-=1}}return this.strip()};BN.prototype.addn=function addn(num){return this.clone().iaddn(num)};BN.prototype.subn=function subn(num){return this.clone().isubn(num)};BN.prototype.iabs=function iabs(){this.negative=0;return this};BN.prototype.abs=function abs(){return this.clone().iabs()};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&67108863;carry=(w>>26)-(right/67108864|0);this.words[i+shift]=w&67108863}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&67108863}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&67108863}this.negative=1;return this.strip()};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0}var m=a.length-b.length;var q;if(mode!=="mod"){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*67108864+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,67108863);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1}}if(q){q.words[j]=qj}}if(q){q.strip()}a.strip();if(mode!=="div"&&shift!==0){a.iushrn(shift)}return{div:q||null,mod:a}};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)}}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=="mod"){div=res.div.neg()}if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num)}}return{div:div,mod:mod}}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=="mod"){div=res.div.neg()}return{div:div,mod:res.mod}}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num)}}return{div:res.div,mod:mod}}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this}}if(num.length===1){if(mode==="div"){return{div:this.divn(num.words[0]),mod:null}}if(mode==="mod"){return{div:null,mod:new BN(this.modn(num.words[0]))}}return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}}return this._wordDiv(num,mode)};BN.prototype.div=function div(num){return this.divmod(num,"div",false).div};BN.prototype.mod=function mod(num){return this.divmod(num,"mod",false).mod};BN.prototype.umod=function umod(num){return this.divmod(num,"mod",true).mod};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1)};BN.prototype.modn=function modn(num){assert(num<=67108863);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num}return acc};BN.prototype.idivn=function idivn(num){assert(num<=67108863);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*67108864;this.words[i]=w/num|0;carry=w%num}return this.strip()};BN.prototype.divn=function divn(num){return this.clone().idivn(num)};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p)}else{x=x.clone()}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){x.iushrn(i);while(i-- >0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp)}A.iushrn(1);B.iushrn(1)}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){y.iushrn(j);while(j-- >0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp)}C.iushrn(1);D.iushrn(1)}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D)}else{y.isub(x);C.isub(A);D.isub(B)}}return{a:C,b:D,gcd:y.iushln(g)}};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p)}else{a=a.clone()}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){a.iushrn(i);while(i-- >0){if(x1.isOdd()){x1.iadd(delta)}x1.iushrn(1)}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){b.iushrn(j);while(j-- >0){if(x2.isOdd()){x2.iadd(delta)}x2.iushrn(1)}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2)}else{b.isub(a);x2.isub(x1)}}var res;if(a.cmpn(1)===0){res=x1}else{res=x2}if(res.cmpn(0)<0){res.iadd(p)}return res};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1)}do{while(a.isEven()){a.iushrn(1)}while(b.isEven()){b.iushrn(1)}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t}else if(r===0||b.cmpn(1)===0){break}a.isub(b)}while(true);return b.iushln(shift)};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num)};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1};BN.prototype.andln=function andln(num){return this.words[0]&num};BN.prototype.bincn=function bincn(bit){assert(typeof bit==="number");var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this;
}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=67108863;this.words[i]=w}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1}else{if(negative){num=-num}assert(num<=67108863,"Number is too big");var w=this.words[0]|0;res=w===num?0:w<num?-1:1}if(this.negative!==0)return-res|0;return res};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1}else if(a>b){res=1}break}return res};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1};BN.prototype.gt=function gt(num){return this.cmp(num)===1};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0};BN.prototype.gte=function gte(num){return this.cmp(num)>=0};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1};BN.prototype.lt=function lt(num){return this.cmp(num)===-1};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0};BN.prototype.lte=function lte(num){return this.cmp(num)<=0};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0};BN.prototype.eq=function eq(num){return this.cmp(num)===0};BN.red=function red(num){return new Red(num)};BN.prototype.toRed=function toRed(ctx){assert(!this.red,"Already a number in reduction context");assert(this.negative===0,"red works only with positives");return ctx.convertTo(this)._forceRed(ctx)};BN.prototype.fromRed=function fromRed(){assert(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,"Already a number in reduction context");return this._forceRed(ctx)};BN.prototype.redAdd=function redAdd(num){assert(this.red,"redAdd works only with red numbers");return this.red.add(this,num)};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,num)};BN.prototype.redSub=function redSub(num){assert(this.red,"redSub works only with red numbers");return this.red.sub(this,num)};BN.prototype.redISub=function redISub(num){assert(this.red,"redISub works only with red numbers");return this.red.isub(this,num)};BN.prototype.redShl=function redShl(num){assert(this.red,"redShl works only with red numbers");return this.red.shl(this,num)};BN.prototype.redMul=function redMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.mul(this,num)};BN.prototype.redIMul=function redIMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.imul(this,num)};BN.prototype.redSqr=function redSqr(){assert(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};BN.prototype.redISqr=function redISqr(){assert(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};BN.prototype.redSqrt=function redSqrt(){assert(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};BN.prototype.redInvm=function redInvm(){assert(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};BN.prototype.redNeg=function redNeg(){assert(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1}else if(cmp>0){r.isub(this.p)}else{r.strip()}return r};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out)};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k)};function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=4194303;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i]}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10}else{input.length-=9}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*977;num.words[i]=lo&67108863;lo=w*64+(lo/67108864|0)}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--}}return num};function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}inherits(P224,MPrime);function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}inherits(P192,MPrime);function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*19+carry;var lo=hi&67108863;hi>>>=26;num.words[i]=lo;carry=hi}if(carry!==0){num.words[num.length++]=carry}return num};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==="k256"){prime=new K256}else if(name==="p224"){prime=new P224}else if(name==="p192"){prime=new P192}else if(name==="p25519"){prime=new P25519}else{throw new Error("Unknown prime "+name)}primes[name]=prime;return prime};function Red(m){if(typeof m==="string"){var prime=BN._prime(m);this.m=prime.p;this.prime=prime}else{assert(m.gtn(1),"modulus must be greater than 1");this.m=m;this.prime=null}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,"red works only with positives");assert(a.red,"red works only with red numbers")};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,"red works only with positives");assert(a.red&&a.red===b.red,"red works only with red numbers")};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this)};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone()}return this.m.sub(a)._forceRed(this)};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res._forceRed(this)};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res._forceRed(this)};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num))};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b))};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b))};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone())};Red.prototype.sqr=function sqr(a){return this.mul(a,a)};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1)}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne)}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr()}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i}return r};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg()}else{return this.imod(inv)}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a)}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res)}if(bit===0&&current===0){currentLen=0;continue}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0}start=26}return res};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res};BN.mont=function mont(num){return new Mont(num)};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift))};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this)}})(typeof module==="undefined"||module,this)},{}],55:[function(require,module,exports){var r;module.exports=function rand(len){if(!r)r=new Rand(null);return r.generate(len)};function Rand(rand){this.rand=rand}module.exports.Rand=Rand;Rand.prototype.generate=function generate(len){return this._rand(len)};if(typeof window==="object"){if(window.crypto&&window.crypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);window.crypto.getRandomValues(arr);return arr}}else if(window.msCrypto&&window.msCrypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);window.msCrypto.getRandomValues(arr);return arr}}else{Rand.prototype._rand=function(){throw new Error("Not implemented yet")}}}else{try{var crypto=require("cry"+"pto");Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n)}}catch(e){Rand.prototype._rand=function _rand(n){var res=new Uint8Array(n);for(var i=0;i<res.length;i++)res[i]=this.rand.getByte();return res}}}},{}],56:[function(require,module,exports){},{}],57:[function(require,module,exports){(function(Buffer){var uint_max=Math.pow(2,32);function fixup_uint32(x){var ret,x_pos;ret=x>uint_max||x<0?(x_pos=Math.abs(x)%uint_max,x<0?uint_max-x_pos:x_pos):x;return ret}function scrub_vec(v){for(var i=0;i<v.length;v++){v[i]=0}return false}function Global(){this.SBOX=[];this.INV_SBOX=[];this.SUB_MIX=[[],[],[],[]];this.INV_SUB_MIX=[[],[],[],[]];this.init();this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}Global.prototype.init=function(){var d,i,sx,t,x,x2,x4,x8,xi,_i;d=function(){var _i,_results;_results=[];for(i=_i=0;_i<256;i=++_i){if(i<128){_results.push(i<<1)}else{_results.push(i<<1^283)}}return _results}();x=0;xi=0;for(i=_i=0;_i<256;i=++_i){sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&255^99;this.SBOX[x]=sx;this.INV_SBOX[sx]=x;x2=d[x];x4=d[x2];x8=d[x4];t=d[sx]*257^sx*16843008;this.SUB_MIX[0][x]=t<<24|t>>>8;this.SUB_MIX[1][x]=t<<16|t>>>16;this.SUB_MIX[2][x]=t<<8|t>>>24;this.SUB_MIX[3][x]=t;t=x8*16843009^x4*65537^x2*257^x*16843008;this.INV_SUB_MIX[0][sx]=t<<24|t>>>8;this.INV_SUB_MIX[1][sx]=t<<16|t>>>16;this.INV_SUB_MIX[2][sx]=t<<8|t>>>24;this.INV_SUB_MIX[3][sx]=t;if(x===0){x=xi=1}else{x=x2^d[d[d[x8^x2]]];xi^=d[d[xi]]}}return true};var G=new Global;AES.blockSize=4*4;AES.prototype.blockSize=AES.blockSize;AES.keySize=256/8;AES.prototype.keySize=AES.keySize;function bufferToArray(buf){var len=buf.length/4;var out=new Array(len);var i=-1;while(++i<len){out[i]=buf.readUInt32BE(i*4)}return out}function AES(key){this._key=bufferToArray(key);this._doReset()}AES.prototype._doReset=function(){var invKsRow,keySize,keyWords,ksRow,ksRows,t;keyWords=this._key;keySize=keyWords.length;this._nRounds=keySize+6;ksRows=(this._nRounds+1)*4;this._keySchedule=[];for(ksRow=0;ksRow<ksRows;ksRow++){this._keySchedule[ksRow]=ksRow<keySize?keyWords[ksRow]:(t=this._keySchedule[ksRow-1],ksRow%keySize===0?(t=t<<8|t>>>24,t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255],t^=G.RCON[ksRow/keySize|0]<<24):keySize>6&&ksRow%keySize===4?t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255]:void 0,this._keySchedule[ksRow-keySize]^t)}this._invKeySchedule=[];for(invKsRow=0;invKsRow<ksRows;invKsRow++){ksRow=ksRows-invKsRow;t=this._keySchedule[ksRow-(invKsRow%4?0:4)];this._invKeySchedule[invKsRow]=invKsRow<4||ksRow<=4?t:G.INV_SUB_MIX[0][G.SBOX[t>>>24]]^G.INV_SUB_MIX[1][G.SBOX[t>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[t>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[t&255]]}return true};AES.prototype.encryptBlock=function(M){M=bufferToArray(new Buffer(M));var out=this._doCryptBlock(M,this._keySchedule,G.SUB_MIX,G.SBOX);var buf=new Buffer(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[1],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[3],12);return buf};AES.prototype.decryptBlock=function(M){M=bufferToArray(new Buffer(M));var temp=[M[3],M[1]];M[1]=temp[0];M[3]=temp[1];var out=this._doCryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX);var buf=new Buffer(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[3],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[1],12);return buf};AES.prototype.scrub=function(){scrub_vec(this._keySchedule);scrub_vec(this._invKeySchedule);scrub_vec(this._key)};AES.prototype._doCryptBlock=function(M,keySchedule,SUB_MIX,SBOX){var ksRow,s0,s1,s2,s3,t0,t1,t2,t3;s0=M[0]^keySchedule[0];s1=M[1]^keySchedule[1];s2=M[2]^keySchedule[2];s3=M[3]^keySchedule[3];ksRow=4;for(var round=1;round<this._nRounds;round++){t0=SUB_MIX[0][s0>>>24]^SUB_MIX[1][s1>>>16&255]^SUB_MIX[2][s2>>>8&255]^SUB_MIX[3][s3&255]^keySchedule[ksRow++];t1=SUB_MIX[0][s1>>>24]^SUB_MIX[1][s2>>>16&255]^SUB_MIX[2][s3>>>8&255]^SUB_MIX[3][s0&255]^keySchedule[ksRow++];t2=SUB_MIX[0][s2>>>24]^SUB_MIX[1][s3>>>16&255]^SUB_MIX[2][s0>>>8&255]^SUB_MIX[3][s1&255]^keySchedule[ksRow++];t3=SUB_MIX[0][s3>>>24]^SUB_MIX[1][s0>>>16&255]^SUB_MIX[2][s1>>>8&255]^SUB_MIX[3][s2&255]^keySchedule[ksRow++];s0=t0;s1=t1;s2=t2;s3=t3}t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[s3&255])^keySchedule[ksRow++];t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[s0&255])^keySchedule[ksRow++];t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[s1&255])^keySchedule[ksRow++];t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[s2&255])^keySchedule[ksRow++];return[fixup_uint32(t0),fixup_uint32(t1),fixup_uint32(t2),fixup_uint32(t3)]};exports.AES=AES}).call(this,require("buffer").Buffer)},{buffer:85}],58:[function(require,module,exports){(function(Buffer){var aes=require("./aes");var Transform=require("cipher-base");var inherits=require("inherits");var GHASH=require("./ghash");var xor=require("buffer-xor");inherits(StreamCipher,Transform);module.exports=StreamCipher;function StreamCipher(mode,key,iv,decrypt){if(!(this instanceof StreamCipher)){return new StreamCipher(mode,key,iv)}Transform.call(this);this._finID=Buffer.concat([iv,new Buffer([0,0,0,1])]);iv=Buffer.concat([iv,new Buffer([0,0,0,2])]);this._cipher=new aes.AES(key);this._prev=new Buffer(iv.length);this._cache=new Buffer("");this._secCache=new Buffer("");this._decrypt=decrypt;this._alen=0;this._len=0;iv.copy(this._prev);this._mode=mode;var h=new Buffer(4);h.fill(0);this._ghash=new GHASH(this._cipher.encryptBlock(h));this._authTag=null;this._called=false}StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-this._alen%16;if(rump<16){rump=new Buffer(rump);rump.fill(0);this._ghash.update(rump)}}this._called=true;var out=this._mode.encrypt(this,chunk);if(this._decrypt){this._ghash.update(chunk)}else{this._ghash.update(out)}this._len+=chunk.length;return out};StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag){throw new Error("Unsupported state or unable to authenticate data")}var tag=xor(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(xorTest(tag,this._authTag)){throw new Error("Unsupported state or unable to authenticate data")}}else{this._authTag=tag}this._cipher.scrub()};StreamCipher.prototype.getAuthTag=function getAuthTag(){if(!this._decrypt&&Buffer.isBuffer(this._authTag)){return this._authTag}else{throw new Error("Attempting to get auth tag in unsupported state")}};StreamCipher.prototype.setAuthTag=function setAuthTag(tag){if(this._decrypt){this._authTag=tag}else{throw new Error("Attempting to set auth tag in unsupported state")}};StreamCipher.prototype.setAAD=function setAAD(buf){if(!this._called){this._ghash.update(buf);this._alen+=buf.length}else{throw new Error("Attempting to set AAD in unsupported state")}};function xorTest(a,b){var out=0;if(a.length!==b.length){out++}var len=Math.min(a.length,b.length);var i=-1;while(++i<len){out+=a[i]^b[i]}return out}}).call(this,require("buffer").Buffer)},{"./aes":57,"./ghash":62,buffer:85,"buffer-xor":84,"cipher-base":90,inherits:136}],59:[function(require,module,exports){var ciphers=require("./encrypter");exports.createCipher=exports.Cipher=ciphers.createCipher;exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv;var deciphers=require("./decrypter");exports.createDecipher=exports.Decipher=deciphers.createDecipher;exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv;var modes=require("./modes");function getCiphers(){return Object.keys(modes)}exports.listCiphers=exports.getCiphers=getCiphers},{"./decrypter":60,"./encrypter":61,"./modes":63}],60:[function(require,module,exports){(function(Buffer){var aes=require("./aes");var Transform=require("cipher-base");var inherits=require("inherits");var modes=require("./modes");var StreamCipher=require("./streamCipher");var AuthCipher=require("./authCipher");var ebtk=require("evp_bytestokey");inherits(Decipher,Transform);function Decipher(mode,key,iv){if(!(this instanceof Decipher)){return new Decipher(mode,key,iv)}Transform.call(this);this._cache=new Splitter;this._last=void 0;this._cipher=new aes.AES(key);this._prev=new Buffer(iv.length);iv.copy(this._prev);this._mode=mode;this._autopadding=true}Decipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;var out=[];while(chunk=this._cache.get(this._autopadding)){thing=this._mode.decrypt(this,chunk);out.push(thing)}return Buffer.concat(out)};Decipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding){return unpad(this._mode.decrypt(this,chunk))}else if(chunk){throw new Error("data not multiple of block length")}};Decipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo;return this};function Splitter(){if(!(this instanceof Splitter)){return new Splitter}this.cache=new Buffer("")}Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])};Splitter.prototype.get=function(autoPadding){var out;if(autoPadding){if(this.cache.length>16){out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out}}else{if(this.cache.length>=16){out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out}}return null};Splitter.prototype.flush=function(){if(this.cache.length){return this.cache}};function unpad(last){var padded=last[15];var i=-1;while(++i<padded){if(last[i+(16-padded)]!==padded){throw new Error("unable to decrypt data")}}if(padded===16){return}return last.slice(0,16-padded)}var modelist={ECB:require("./modes/ecb"),CBC:require("./modes/cbc"),CFB:require("./modes/cfb"),CFB8:require("./modes/cfb8"),CFB1:require("./modes/cfb1"),OFB:require("./modes/ofb"),CTR:require("./modes/ctr"),GCM:require("./modes/ctr")};function createDecipheriv(suite,password,iv){var config=modes[suite.toLowerCase()];if(!config){throw new TypeError("invalid suite type")}if(typeof iv==="string"){iv=new Buffer(iv)}if(typeof password==="string"){password=new Buffer(password)}if(password.length!==config.key/8){throw new TypeError("invalid key length "+password.length)}if(iv.length!==config.iv){throw new TypeError("invalid iv length "+iv.length)}if(config.type==="stream"){return new StreamCipher(modelist[config.mode],password,iv,true)}else if(config.type==="auth"){return new AuthCipher(modelist[config.mode],password,iv,true)}return new Decipher(modelist[config.mode],password,iv)}function createDecipher(suite,password){var config=modes[suite.toLowerCase()];if(!config){throw new TypeError("invalid suite type")}var keys=ebtk(password,false,config.key,config.iv);return createDecipheriv(suite,keys.key,keys.iv)}exports.createDecipher=createDecipher;exports.createDecipheriv=createDecipheriv}).call(this,require("buffer").Buffer)},{"./aes":57,"./authCipher":58,"./modes":63,"./modes/cbc":64,"./modes/cfb":65,"./modes/cfb1":66,"./modes/cfb8":67,"./modes/ctr":68,"./modes/ecb":69,"./modes/ofb":70,"./streamCipher":71,buffer:85,"cipher-base":90,evp_bytestokey:126,inherits:136}],61:[function(require,module,exports){(function(Buffer){var aes=require("./aes");var Transform=require("cipher-base");var inherits=require("inherits");var modes=require("./modes");var ebtk=require("evp_bytestokey");var StreamCipher=require("./streamCipher");var AuthCipher=require("./authCipher");inherits(Cipher,Transform);function Cipher(mode,key,iv){if(!(this instanceof Cipher)){return new Cipher(mode,key,iv)}Transform.call(this);this._cache=new Splitter;this._cipher=new aes.AES(key);this._prev=new Buffer(iv.length);iv.copy(this._prev);this._mode=mode;this._autopadding=true}Cipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;var out=[];while(chunk=this._cache.get()){thing=this._mode.encrypt(this,chunk);out.push(thing)}return Buffer.concat(out)};Cipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding){chunk=this._mode.encrypt(this,chunk);this._cipher.scrub();return chunk}else if(chunk.toString("hex")!=="10101010101010101010101010101010"){this._cipher.scrub();throw new Error("data not multiple of block length")}};Cipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo;return this};function Splitter(){if(!(this instanceof Splitter)){return new Splitter}this.cache=new Buffer("")}Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])};Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out}return null};Splitter.prototype.flush=function(){var len=16-this.cache.length;var padBuff=new Buffer(len);var i=-1;while(++i<len){padBuff.writeUInt8(len,i)}var out=Buffer.concat([this.cache,padBuff]);return out};var modelist={ECB:require("./modes/ecb"),CBC:require("./modes/cbc"),CFB:require("./modes/cfb"),CFB8:require("./modes/cfb8"),CFB1:require("./modes/cfb1"),OFB:require("./modes/ofb"),CTR:require("./modes/ctr"),GCM:require("./modes/ctr")};function createCipheriv(suite,password,iv){var config=modes[suite.toLowerCase()];if(!config){throw new TypeError("invalid suite type")}if(typeof iv==="string"){iv=new Buffer(iv)}if(typeof password==="string"){password=new Buffer(password)}if(password.length!==config.key/8){throw new TypeError("invalid key length "+password.length)}if(iv.length!==config.iv){throw new TypeError("invalid iv length "+iv.length)}if(config.type==="stream"){return new StreamCipher(modelist[config.mode],password,iv)}else if(config.type==="auth"){return new AuthCipher(modelist[config.mode],password,iv)}return new Cipher(modelist[config.mode],password,iv)}function createCipher(suite,password){var config=modes[suite.toLowerCase()];if(!config){throw new TypeError("invalid suite type")}var keys=ebtk(password,false,config.key,config.iv);return createCipheriv(suite,keys.key,keys.iv)}exports.createCipheriv=createCipheriv;exports.createCipher=createCipher}).call(this,require("buffer").Buffer)},{"./aes":57,"./authCipher":58,"./modes":63,"./modes/cbc":64,"./modes/cfb":65,"./modes/cfb1":66,"./modes/cfb8":67,"./modes/ctr":68,"./modes/ecb":69,"./modes/ofb":70,"./streamCipher":71,buffer:85,"cipher-base":90,evp_bytestokey:126,inherits:136}],62:[function(require,module,exports){(function(Buffer){var zeros=new Buffer(16);zeros.fill(0);module.exports=GHASH;function GHASH(key){this.h=key;this.state=new Buffer(16);this.state.fill(0);this.cache=new Buffer("")}GHASH.prototype.ghash=function(block){var i=-1;while(++i<block.length){this.state[i]^=block[i]}this._multiply()};GHASH.prototype._multiply=function(){var Vi=toArray(this.h);var Zi=[0,0,0,0];var j,xi,lsb_Vi;var i=-1;while(++i<128){xi=(this.state[~~(i/8)]&1<<7-i%8)!==0;if(xi){Zi=xor(Zi,Vi)}lsb_Vi=(Vi[3]&1)!==0;for(j=3;j>0;j--){Vi[j]=Vi[j]>>>1|(Vi[j-1]&1)<<31}Vi[0]=Vi[0]>>>1;if(lsb_Vi){Vi[0]=Vi[0]^225<<24}}this.state=fromArray(Zi)};GHASH.prototype.update=function(buf){this.cache=Buffer.concat([this.cache,buf]);var chunk;while(this.cache.length>=16){chunk=this.cache.slice(0,16);this.cache=this.cache.slice(16);this.ghash(chunk)}};GHASH.prototype.final=function(abl,bl){if(this.cache.length){this.ghash(Buffer.concat([this.cache,zeros],16))}this.ghash(fromArray([0,abl,0,bl]));return this.state};function toArray(buf){return[buf.readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)]}function fromArray(out){out=out.map(fixup_uint32);var buf=new Buffer(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[1],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[3],12);return buf}var uint_max=Math.pow(2,32);function fixup_uint32(x){var ret,x_pos;ret=x>uint_max||x<0?(x_pos=Math.abs(x)%uint_max,x<0?uint_max-x_pos:x_pos):x;return ret}function xor(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}}).call(this,require("buffer").Buffer)},{buffer:85}],63:[function(require,module,exports){exports["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"};exports["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"};exports["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"};exports["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"};exports["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"};exports["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"};exports["aes128"]=exports["aes-128-cbc"];exports["aes192"]=exports["aes-192-cbc"];exports["aes256"]=exports["aes-256-cbc"];exports["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"};exports["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"};exports["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"};exports["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"};exports["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"};exports["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"};exports["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"};exports["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"};exports["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"};exports["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"};exports["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"};exports["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"};exports["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"};exports["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"};exports["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"};exports["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"};exports["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"};exports["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],64:[function(require,module,exports){var xor=require("buffer-xor");exports.encrypt=function(self,block){var data=xor(block,self._prev);self._prev=self._cipher.encryptBlock(data);return self._prev};exports.decrypt=function(self,block){var pad=self._prev;self._prev=block;var out=self._cipher.decryptBlock(block);return xor(out,pad)}},{"buffer-xor":84}],65:[function(require,module,exports){(function(Buffer){var xor=require("buffer-xor");exports.encrypt=function(self,data,decrypt){var out=new Buffer("");var len;while(data.length){if(self._cache.length===0){self._cache=self._cipher.encryptBlock(self._prev);self._prev=new Buffer("")}if(self._cache.length<=data.length){len=self._cache.length;out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)]);data=data.slice(len)}else{out=Buffer.concat([out,encryptStart(self,data,decrypt)]);break}}return out};function encryptStart(self,data,decrypt){var len=data.length;var out=xor(data,self._cache);self._cache=self._cache.slice(len);self._prev=Buffer.concat([self._prev,decrypt?data:out]);return out}}).call(this,require("buffer").Buffer)},{buffer:85,"buffer-xor":84}],66:[function(require,module,exports){(function(Buffer){function encryptByte(self,byteParam,decrypt){var pad;var i=-1;var len=8;var out=0;var bit,value;while(++i<len){pad=self._cipher.encryptBlock(self._prev);bit=byteParam&1<<7-i?128:0;value=pad[0]^bit;out+=(value&128)>>i%8;self._prev=shiftIn(self._prev,decrypt?bit:value)}return out}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=new Buffer(len);var i=-1;while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt)}return out};function shiftIn(buffer,value){var len=buffer.length;var i=-1;var out=new Buffer(buffer.length);buffer=Buffer.concat([buffer,new Buffer([value])]);while(++i<len){out[i]=buffer[i]<<1|buffer[i+1]>>7}return out}}).call(this,require("buffer").Buffer)},{
buffer:85}],67:[function(require,module,exports){(function(Buffer){function encryptByte(self,byteParam,decrypt){var pad=self._cipher.encryptBlock(self._prev);var out=pad[0]^byteParam;self._prev=Buffer.concat([self._prev.slice(1),new Buffer([decrypt?byteParam:out])]);return out}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=new Buffer(len);var i=-1;while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt)}return out}}).call(this,require("buffer").Buffer)},{buffer:85}],68:[function(require,module,exports){(function(Buffer){var xor=require("buffer-xor");function incr32(iv){var len=iv.length;var item;while(len--){item=iv.readUInt8(len);if(item===255){iv.writeUInt8(0,len)}else{item++;iv.writeUInt8(item,len);break}}}function getBlock(self){var out=self._cipher.encryptBlock(self._prev);incr32(self._prev);return out}exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)])}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad)}}).call(this,require("buffer").Buffer)},{buffer:85,"buffer-xor":84}],69:[function(require,module,exports){exports.encrypt=function(self,block){return self._cipher.encryptBlock(block)};exports.decrypt=function(self,block){return self._cipher.decryptBlock(block)}},{}],70:[function(require,module,exports){(function(Buffer){var xor=require("buffer-xor");function getBlock(self){self._prev=self._cipher.encryptBlock(self._prev);return self._prev}exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)])}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad)}}).call(this,require("buffer").Buffer)},{buffer:85,"buffer-xor":84}],71:[function(require,module,exports){(function(Buffer){var aes=require("./aes");var Transform=require("cipher-base");var inherits=require("inherits");inherits(StreamCipher,Transform);module.exports=StreamCipher;function StreamCipher(mode,key,iv,decrypt){if(!(this instanceof StreamCipher)){return new StreamCipher(mode,key,iv)}Transform.call(this);this._cipher=new aes.AES(key);this._prev=new Buffer(iv.length);this._cache=new Buffer("");this._secCache=new Buffer("");this._decrypt=decrypt;iv.copy(this._prev);this._mode=mode}StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt)};StreamCipher.prototype._final=function(){this._cipher.scrub()}}).call(this,require("buffer").Buffer)},{"./aes":57,buffer:85,"cipher-base":90,inherits:136}],72:[function(require,module,exports){var ebtk=require("evp_bytestokey");var aes=require("browserify-aes/browser");var DES=require("browserify-des");var desModes=require("browserify-des/modes");var aesModes=require("browserify-aes/modes");function createCipher(suite,password){var keyLen,ivLen;suite=suite.toLowerCase();if(aesModes[suite]){keyLen=aesModes[suite].key;ivLen=aesModes[suite].iv}else if(desModes[suite]){keyLen=desModes[suite].key*8;ivLen=desModes[suite].iv}else{throw new TypeError("invalid suite type")}var keys=ebtk(password,false,keyLen,ivLen);return createCipheriv(suite,keys.key,keys.iv)}function createDecipher(suite,password){var keyLen,ivLen;suite=suite.toLowerCase();if(aesModes[suite]){keyLen=aesModes[suite].key;ivLen=aesModes[suite].iv}else if(desModes[suite]){keyLen=desModes[suite].key*8;ivLen=desModes[suite].iv}else{throw new TypeError("invalid suite type")}var keys=ebtk(password,false,keyLen,ivLen);return createDecipheriv(suite,keys.key,keys.iv)}function createCipheriv(suite,key,iv){suite=suite.toLowerCase();if(aesModes[suite]){return aes.createCipheriv(suite,key,iv)}else if(desModes[suite]){return new DES({key:key,iv:iv,mode:suite})}else{throw new TypeError("invalid suite type")}}function createDecipheriv(suite,key,iv){suite=suite.toLowerCase();if(aesModes[suite]){return aes.createDecipheriv(suite,key,iv)}else if(desModes[suite]){return new DES({key:key,iv:iv,mode:suite,decrypt:true})}else{throw new TypeError("invalid suite type")}}exports.createCipher=exports.Cipher=createCipher;exports.createCipheriv=exports.Cipheriv=createCipheriv;exports.createDecipher=exports.Decipher=createDecipher;exports.createDecipheriv=exports.Decipheriv=createDecipheriv;function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}exports.listCiphers=exports.getCiphers=getCiphers},{"browserify-aes/browser":59,"browserify-aes/modes":63,"browserify-des":73,"browserify-des/modes":74,evp_bytestokey:126}],73:[function(require,module,exports){(function(Buffer){var CipherBase=require("cipher-base");var des=require("des.js");var inherits=require("inherits");var modes={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes.des=modes["des-cbc"];modes.des3=modes["des-ede3-cbc"];module.exports=DES;inherits(DES,CipherBase);function DES(opts){CipherBase.call(this);var modeName=opts.mode.toLowerCase();var mode=modes[modeName];var type;if(opts.decrypt){type="decrypt"}else{type="encrypt"}var key=opts.key;if(modeName==="des-ede"||modeName==="des-ede-cbc"){key=Buffer.concat([key,key.slice(0,8)])}var iv=opts.iv;this._des=mode.create({key:key,iv:iv,type:type})}DES.prototype._update=function(data){return new Buffer(this._des.update(data))};DES.prototype._final=function(){return new Buffer(this._des.final())}}).call(this,require("buffer").Buffer)},{buffer:85,"cipher-base":90,"des.js":98,inherits:136}],74:[function(require,module,exports){exports["des-ecb"]={key:8,iv:0};exports["des-cbc"]=exports.des={key:8,iv:8};exports["des-ede3-cbc"]=exports.des3={key:24,iv:8};exports["des-ede3"]={key:24,iv:0};exports["des-ede-cbc"]={key:16,iv:8};exports["des-ede"]={key:16,iv:0}},{}],75:[function(require,module,exports){(function(Buffer){var bn=require("bn.js");var randomBytes=require("randombytes");module.exports=crt;function blind(priv){var r=getr(priv);var blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)}}function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var mod=bn.mont(priv.modulus);var blinded=new bn(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(bn.mont(priv.prime1));var c2=blinded.toRed(bn.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1);var m2=c2.redPow(priv.exponent2);m1=m1.fromRed();m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);h.imul(q);m2.iadd(h);return new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(false,len))}crt.getr=getr;function getr(priv){var len=priv.modulus.byteLength();var r=new bn(randomBytes(len));while(r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2)){r=new bn(randomBytes(len))}return r}}).call(this,require("buffer").Buffer)},{"bn.js":54,buffer:85,randombytes:170}],76:[function(require,module,exports){(function(Buffer){"use strict";exports["RSA-SHA224"]=exports.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new Buffer("302d300d06096086480165030402040500041c","hex")};exports["RSA-SHA256"]=exports.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new Buffer("3031300d060960864801650304020105000420","hex")};exports["RSA-SHA384"]=exports.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new Buffer("3041300d060960864801650304020205000430","hex")};exports["RSA-SHA512"]=exports.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new Buffer("3051300d060960864801650304020305000440","hex")};exports["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new Buffer("3021300906052b0e03021a05000414","hex")};exports["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new Buffer("","hex")};exports.DSA=exports["DSA-SHA1"]=exports["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new Buffer("","hex")};exports["DSA-SHA224"]=exports["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new Buffer("","hex")};exports["DSA-SHA256"]=exports["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new Buffer("","hex")};exports["DSA-SHA384"]=exports["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new Buffer("","hex")};exports["DSA-SHA512"]=exports["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new Buffer("","hex")};exports["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new Buffer("","hex")};exports["RSA-RIPEMD160"]=exports.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new Buffer("3021300906052b2403020105000414","hex")};exports["RSA-MD5"]=exports.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new Buffer("3020300c06082a864886f70d020505000410","hex")}}).call(this,require("buffer").Buffer)},{buffer:85}],77:[function(require,module,exports){(function(Buffer){var _algos=require("./algos");var createHash=require("create-hash");var inherits=require("inherits");var sign=require("./sign");var stream=require("stream");var verify=require("./verify");var algos={};Object.keys(_algos).forEach(function(key){algos[key]=algos[key.toLowerCase()]=_algos[key]});function Sign(algorithm){stream.Writable.call(this);var data=algos[algorithm];if(!data){throw new Error("Unknown message digest")}this._hashType=data.hash;this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign}inherits(Sign,stream.Writable);Sign.prototype._write=function _write(data,_,done){this._hash.update(data);done()};Sign.prototype.update=function update(data,enc){if(typeof data==="string"){data=new Buffer(data,enc)}this._hash.update(data);return this};Sign.prototype.sign=function signMethod(key,enc){this.end();var hash=this._hash.digest();var sig=sign(Buffer.concat([this._tag,hash]),key,this._hashType,this._signType);return enc?sig.toString(enc):sig};function Verify(algorithm){stream.Writable.call(this);var data=algos[algorithm];if(!data){throw new Error("Unknown message digest")}this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign}inherits(Verify,stream.Writable);Verify.prototype._write=function _write(data,_,done){this._hash.update(data);done()};Verify.prototype.update=function update(data,enc){if(typeof data==="string"){data=new Buffer(data,enc)}this._hash.update(data);return this};Verify.prototype.verify=function verifyMethod(key,sig,enc){if(typeof sig==="string"){sig=new Buffer(sig,enc)}this.end();var hash=this._hash.digest();return verify(sig,Buffer.concat([this._tag,hash]),key,this._signType)};function createSign(algorithm){return new Sign(algorithm)}function createVerify(algorithm){return new Verify(algorithm)}module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}}).call(this,require("buffer").Buffer)},{"./algos":76,"./sign":79,"./verify":80,buffer:85,"create-hash":93,inherits:136,stream:191}],78:[function(require,module,exports){"use strict";exports["1.3.132.0.10"]="secp256k1";exports["1.3.132.0.33"]="p224";exports["1.2.840.10045.3.1.1"]="p192";exports["1.2.840.10045.3.1.7"]="p256";exports["1.3.132.0.34"]="p384";exports["1.3.132.0.35"]="p521"},{}],79:[function(require,module,exports){(function(Buffer){var createHmac=require("create-hmac");var crt=require("browserify-rsa");var curves=require("./curves");var elliptic=require("elliptic");var parseKeys=require("parse-asn1");var BN=require("bn.js");var EC=elliptic.ec;function sign(hash,key,hashType,signType){var priv=parseKeys(key);if(priv.curve){if(signType!=="ecdsa")throw new Error("wrong private key type");return ecSign(hash,priv)}else if(priv.type==="dsa"){if(signType!=="dsa"){throw new Error("wrong private key type")}return dsaSign(hash,priv,hashType)}else{if(signType!=="rsa")throw new Error("wrong private key type")}var len=priv.modulus.byteLength();var pad=[0,1];while(hash.length+pad.length+1<len){pad.push(255)}pad.push(0);var i=-1;while(++i<hash.length){pad.push(hash[i])}var out=crt(pad,priv);return out}function ecSign(hash,priv){var curveId=curves[priv.curve.join(".")];if(!curveId)throw new Error("unknown curve "+priv.curve.join("."));var curve=new EC(curveId);var key=curve.genKeyPair();key._importPrivate(priv.privateKey);var out=key.sign(hash);return new Buffer(out.toDER())}function dsaSign(hash,priv,algo){var x=priv.params.priv_key;var p=priv.params.p;var q=priv.params.q;var g=priv.params.g;var r=new BN(0);var k;var H=bits2int(hash,q).mod(q);var s=false;var kv=getKey(x,q,hash,algo);while(s===false){k=makeKey(q,kv,algo);r=makeR(g,k,p,q);s=k.invm(q).imul(H.add(x.mul(r))).mod(q);if(!s.cmpn(0)){s=false;r=new BN(0)}}return toDER(r,s)}function toDER(r,s){r=r.toArray();s=s.toArray();if(r[0]&128){r=[0].concat(r)}if(s[0]&128){s=[0].concat(s)}var total=r.length+s.length+4;var res=[48,total,2,r.length];res=res.concat(r,[2,s.length],s);return new Buffer(res)}function getKey(x,q,hash,algo){x=new Buffer(x.toArray());if(x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0);x=Buffer.concat([zeros,x])}var hlen=hash.length;var hbits=bits2octets(hash,q);var v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);k.fill(0);k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();return{k:k,v:v}}function bits2int(obits,q){var bits=new BN(obits);var shift=(obits.length<<3)-q.bitLength();if(shift>0){bits.ishrn(shift)}return bits}function bits2octets(bits,q){bits=bits2int(bits,q);bits=bits.mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0);out=Buffer.concat([zeros,out])}return out}function makeKey(q,kv,algo){var t,k;do{t=new Buffer("");while(t.length*8<q.bitLength()){kv.v=createHmac(algo,kv.k).update(kv.v).digest();t=Buffer.concat([t,kv.v])}k=bits2int(t,q);kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest();kv.v=createHmac(algo,kv.k).update(kv.v).digest()}while(k.cmp(q)!==-1);return k}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)}module.exports=sign;module.exports.getKey=getKey;module.exports.makeKey=makeKey}).call(this,require("buffer").Buffer)},{"./curves":78,"bn.js":54,"browserify-rsa":75,buffer:85,"create-hmac":96,elliptic:108,"parse-asn1":155}],80:[function(require,module,exports){(function(Buffer){var curves=require("./curves");var elliptic=require("elliptic");var parseKeys=require("parse-asn1");var BN=require("bn.js");var EC=elliptic.ec;function verify(sig,hash,key,signType){var pub=parseKeys(key);if(pub.type==="ec"){if(signType!=="ecdsa"){throw new Error("wrong public key type")}return ecVerify(sig,hash,pub)}else if(pub.type==="dsa"){if(signType!=="dsa"){throw new Error("wrong public key type")}return dsaVerify(sig,hash,pub)}else{if(signType!=="rsa"){throw new Error("wrong public key type")}}var len=pub.modulus.byteLength();var pad=[1];var padNum=0;while(hash.length+pad.length+2<len){pad.push(255);padNum++}pad.push(0);var i=-1;while(++i<hash.length){pad.push(hash[i])}pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red);sig=sig.redPow(new BN(pub.publicExponent));sig=new Buffer(sig.fromRed().toArray());var out=0;if(padNum<8){out=1}len=Math.min(sig.length,pad.length);if(sig.length!==pad.length){out=1}i=-1;while(++i<len){out|=sig[i]^pad[i]}return out===0}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join(".")];if(!curveId)throw new Error("unknown curve "+pub.data.algorithm.curve.join("."));var curve=new EC(curveId);var pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey)}function dsaVerify(sig,hash,pub){var p=pub.data.p;var q=pub.data.q;var g=pub.data.g;var y=pub.data.pub_key;var unpacked=parseKeys.signature.decode(sig,"der");var s=unpacked.s;var r=unpacked.r;checkValue(s,q);checkValue(r,q);var montp=BN.mont(p);var w=s.invm(q);var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return!v.cmp(r)}function checkValue(b,q){if(b.cmpn(0)<=0){throw new Error("invalid sig")}if(b.cmp(q)>=q){throw new Error("invalid sig")}}module.exports=verify}).call(this,require("buffer").Buffer)},{"./curves":78,"bn.js":54,buffer:85,elliptic:108,"parse-asn1":155}],81:[function(require,module,exports){(function(process,Buffer){var msg=require("pako/lib/zlib/messages");var zstream=require("pako/lib/zlib/zstream");var zlib_deflate=require("pako/lib/zlib/deflate.js");var zlib_inflate=require("pako/lib/zlib/inflate.js");var constants=require("pako/lib/zlib/constants");for(var key in constants){exports[key]=constants[key]}exports.NONE=0;exports.DEFLATE=1;exports.INFLATE=2;exports.GZIP=3;exports.GUNZIP=4;exports.DEFLATERAW=5;exports.INFLATERAW=6;exports.UNZIP=7;function Zlib(mode){if(mode<exports.DEFLATE||mode>exports.UNZIP)throw new TypeError("Bad argument");this.mode=mode;this.init_done=false;this.write_in_progress=false;this.pending_close=false;this.windowBits=0;this.level=0;this.memLevel=0;this.strategy=0;this.dictionary=null}Zlib.prototype.init=function(windowBits,level,memLevel,strategy,dictionary){this.windowBits=windowBits;this.level=level;this.memLevel=memLevel;this.strategy=strategy;if(this.mode===exports.GZIP||this.mode===exports.GUNZIP)this.windowBits+=16;if(this.mode===exports.UNZIP)this.windowBits+=32;if(this.mode===exports.DEFLATERAW||this.mode===exports.INFLATERAW)this.windowBits=-this.windowBits;this.strm=new zstream;switch(this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var status=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:var status=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(status!==exports.Z_OK){this._error(status);return}this.write_in_progress=false;this.init_done=true};Zlib.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===exports.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib.prototype.write=function(flush,input,in_off,in_len,out,out_off,out_len){this._writeCheck();this.write_in_progress=true;var self=this;process.nextTick(function(){self.write_in_progress=false;var res=self._write(flush,input,in_off,in_len,out,out_off,out_len);self.callback(res[0],res[1]);if(self.pending_close)self.close()});return this};function bufferSet(data,offset){for(var i=0;i<data.length;i++){this[offset+i]=data[i]}}Zlib.prototype.writeSync=function(flush,input,in_off,in_len,out,out_off,out_len){this._writeCheck();return this._write(flush,input,in_off,in_len,out,out_off,out_len)};Zlib.prototype._write=function(flush,input,in_off,in_len,out,out_off,out_len){this.write_in_progress=true;if(flush!==exports.Z_NO_FLUSH&&flush!==exports.Z_PARTIAL_FLUSH&&flush!==exports.Z_SYNC_FLUSH&&flush!==exports.Z_FULL_FLUSH&&flush!==exports.Z_FINISH&&flush!==exports.Z_BLOCK){throw new Error("Invalid flush value")}if(input==null){input=new Buffer(0);in_len=0;in_off=0}if(out._set)out.set=out._set;else out.set=bufferSet;var strm=this.strm;strm.avail_in=in_len;strm.input=input;strm.next_in=in_off;strm.avail_out=out_len;strm.output=out;strm.next_out=out_off;switch(this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var status=zlib_deflate.deflate(strm,flush);break;case exports.UNZIP:case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:var status=zlib_inflate.inflate(strm,flush);break;default:throw new Error("Unknown mode "+this.mode)}if(status!==exports.Z_STREAM_END&&status!==exports.Z_OK){this._error(status)}this.write_in_progress=false;return[strm.avail_in,strm.avail_out]};Zlib.prototype.close=function(){if(this.write_in_progress){this.pending_close=true;return}this.pending_close=false;if(this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW){zlib_deflate.deflateEnd(this.strm)}else{zlib_inflate.inflateEnd(this.strm)}this.mode=exports.NONE};Zlib.prototype.reset=function(){switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:var status=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:var status=zlib_inflate.inflateReset(this.strm);break}if(status!==exports.Z_OK){this._error(status)}};Zlib.prototype._error=function(status){this.onerror(msg[status]+": "+this.strm.msg,status);this.write_in_progress=false;if(this.pending_close)this.close()};exports.Zlib=Zlib}).call(this,require("_process"),require("buffer").Buffer)},{_process:159,buffer:85,"pako/lib/zlib/constants":143,"pako/lib/zlib/deflate.js":145,"pako/lib/zlib/inflate.js":147,"pako/lib/zlib/messages":149,"pako/lib/zlib/zstream":151}],82:[function(require,module,exports){(function(process,Buffer){var Transform=require("_stream_transform");var binding=require("./binding");var util=require("util");var assert=require("assert").ok;binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=Infinity;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;Object.keys(binding).forEach(function(k){if(k.match(/^Z/))exports[k]=binding[k]});exports.codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(exports.codes).forEach(function(k){exports.codes[exports.codes[k]]=k});exports.Deflate=Deflate;exports.Inflate=Inflate;exports.Gzip=Gzip;exports.Gunzip=Gunzip;exports.DeflateRaw=DeflateRaw;exports.InflateRaw=InflateRaw;exports.Unzip=Unzip;exports.createDeflate=function(o){return new Deflate(o)};exports.createInflate=function(o){return new Inflate(o)};exports.createDeflateRaw=function(o){return new DeflateRaw(o)};exports.createInflateRaw=function(o){return new InflateRaw(o)};exports.createGzip=function(o){return new Gzip(o)};exports.createGunzip=function(o){return new Gunzip(o)};exports.createUnzip=function(o){return new Unzip(o)};exports.deflate=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new Deflate(opts),buffer,callback)};exports.deflateSync=function(buffer,opts){return zlibBufferSync(new Deflate(opts),buffer)};exports.gzip=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new Gzip(opts),buffer,callback)};exports.gzipSync=function(buffer,opts){return zlibBufferSync(new Gzip(opts),buffer)};exports.deflateRaw=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new DeflateRaw(opts),buffer,callback)};exports.deflateRawSync=function(buffer,opts){return zlibBufferSync(new DeflateRaw(opts),buffer)};exports.unzip=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new Unzip(opts),buffer,callback)};exports.unzipSync=function(buffer,opts){return zlibBufferSync(new Unzip(opts),buffer)};exports.inflate=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new Inflate(opts),buffer,callback)};exports.inflateSync=function(buffer,opts){return zlibBufferSync(new Inflate(opts),buffer)};exports.gunzip=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new Gunzip(opts),buffer,callback)};exports.gunzipSync=function(buffer,opts){return zlibBufferSync(new Gunzip(opts),buffer)};exports.inflateRaw=function(buffer,opts,callback){if(typeof opts==="function"){callback=opts;opts={}}return zlibBuffer(new InflateRaw(opts),buffer,callback)};exports.inflateRawSync=function(buffer,opts){return zlibBufferSync(new InflateRaw(opts),buffer)};function zlibBuffer(engine,buffer,callback){var buffers=[];var nread=0;engine.on("error",onError);engine.on("end",onEnd);engine.end(buffer);flow();function flow(){var chunk;while(null!==(chunk=engine.read())){buffers.push(chunk);nread+=chunk.length}engine.once("readable",flow)}function onError(err){engine.removeListener("end",onEnd);engine.removeListener("readable",flow);callback(err)}function onEnd(){var buf=Buffer.concat(buffers,nread);buffers=[];callback(null,buf);engine.close()}}function zlibBufferSync(engine,buffer){if(typeof buffer==="string")buffer=new Buffer(buffer);if(!Buffer.isBuffer(buffer))throw new TypeError("Not a string or buffer");var flushFlag=binding.Z_FINISH;return engine._processChunk(buffer,flushFlag)}function Deflate(opts){if(!(this instanceof Deflate))return new Deflate(opts);Zlib.call(this,opts,binding.DEFLATE)}function Inflate(opts){if(!(this instanceof Inflate))return new Inflate(opts);Zlib.call(this,opts,binding.INFLATE)}function Gzip(opts){if(!(this instanceof Gzip))return new Gzip(opts);Zlib.call(this,opts,binding.GZIP)}function Gunzip(opts){if(!(this instanceof Gunzip))return new Gunzip(opts);Zlib.call(this,opts,binding.GUNZIP)}function DeflateRaw(opts){if(!(this instanceof DeflateRaw))return new DeflateRaw(opts);Zlib.call(this,opts,binding.DEFLATERAW)}function InflateRaw(opts){if(!(this instanceof InflateRaw))return new InflateRaw(opts);Zlib.call(this,opts,binding.INFLATERAW)}function Unzip(opts){if(!(this instanceof Unzip))return new Unzip(opts);Zlib.call(this,opts,binding.UNZIP)}function Zlib(opts,mode){this._opts=opts=opts||{};this._chunkSize=opts.chunkSize||exports.Z_DEFAULT_CHUNK;Transform.call(this,opts);if(opts.flush){if(opts.flush!==binding.Z_NO_FLUSH&&opts.flush!==binding.Z_PARTIAL_FLUSH&&opts.flush!==binding.Z_SYNC_FLUSH&&opts.flush!==binding.Z_FULL_FLUSH&&opts.flush!==binding.Z_FINISH&&opts.flush!==binding.Z_BLOCK){throw new Error("Invalid flush flag: "+opts.flush)}}this._flushFlag=opts.flush||binding.Z_NO_FLUSH;if(opts.chunkSize){if(opts.chunkSize<exports.Z_MIN_CHUNK||opts.chunkSize>exports.Z_MAX_CHUNK){throw new Error("Invalid chunk size: "+opts.chunkSize)}}if(opts.windowBits){if(opts.windowBits<exports.Z_MIN_WINDOWBITS||opts.windowBits>exports.Z_MAX_WINDOWBITS){throw new Error("Invalid windowBits: "+opts.windowBits)}}if(opts.level){if(opts.level<exports.Z_MIN_LEVEL||opts.level>exports.Z_MAX_LEVEL){throw new Error("Invalid compression level: "+opts.level)}}if(opts.memLevel){if(opts.memLevel<exports.Z_MIN_MEMLEVEL||opts.memLevel>exports.Z_MAX_MEMLEVEL){throw new Error("Invalid memLevel: "+opts.memLevel)}}if(opts.strategy){if(opts.strategy!=exports.Z_FILTERED&&opts.strategy!=exports.Z_HUFFMAN_ONLY&&opts.strategy!=exports.Z_RLE&&opts.strategy!=exports.Z_FIXED&&opts.strategy!=exports.Z_DEFAULT_STRATEGY){throw new Error("Invalid strategy: "+opts.strategy)}}if(opts.dictionary){if(!Buffer.isBuffer(opts.dictionary)){throw new Error("Invalid dictionary: it should be a Buffer instance")}}this._binding=new binding.Zlib(mode);var self=this;this._hadError=false;this._binding.onerror=function(message,errno){self._binding=null;self._hadError=true;var error=new Error(message);error.errno=errno;error.code=exports.codes[errno];self.emit("error",error)};var level=exports.Z_DEFAULT_COMPRESSION;if(typeof opts.level==="number")level=opts.level;var strategy=exports.Z_DEFAULT_STRATEGY;if(typeof opts.strategy==="number")strategy=opts.strategy;this._binding.init(opts.windowBits||exports.Z_DEFAULT_WINDOWBITS,level,opts.memLevel||exports.Z_DEFAULT_MEMLEVEL,strategy,opts.dictionary);this._buffer=new Buffer(this._chunkSize);this._offset=0;this._closed=false;this._level=level;this._strategy=strategy;this.once("end",this.close)}util.inherits(Zlib,Transform);Zlib.prototype.params=function(level,strategy,callback){if(level<exports.Z_MIN_LEVEL||level>exports.Z_MAX_LEVEL){throw new RangeError("Invalid compression level: "+level)}if(strategy!=exports.Z_FILTERED&&strategy!=exports.Z_HUFFMAN_ONLY&&strategy!=exports.Z_RLE&&strategy!=exports.Z_FIXED&&strategy!=exports.Z_DEFAULT_STRATEGY){throw new TypeError("Invalid strategy: "+strategy)}if(this._level!==level||this._strategy!==strategy){var self=this;this.flush(binding.Z_SYNC_FLUSH,function(){self._binding.params(level,strategy);if(!self._hadError){self._level=level;self._strategy=strategy;if(callback)callback()}})}else{process.nextTick(callback)}};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(callback){this._transform(new Buffer(0),"",callback)};Zlib.prototype.flush=function(kind,callback){var ws=this._writableState;if(typeof kind==="function"||kind===void 0&&!callback){callback=kind;kind=binding.Z_FULL_FLUSH}if(ws.ended){if(callback)process.nextTick(callback)}else if(ws.ending){if(callback)this.once("end",callback)}else if(ws.needDrain){var self=this;this.once("drain",function(){self.flush(callback)})}else{this._flushFlag=kind;this.write(new Buffer(0),"",callback)}};Zlib.prototype.close=function(callback){if(callback)process.nextTick(callback);if(this._closed)return;this._closed=true;this._binding.close();var self=this;process.nextTick(function(){self.emit("close")})};Zlib.prototype._transform=function(chunk,encoding,cb){var flushFlag;var ws=this._writableState;var ending=ws.ending||ws.ended;var last=ending&&(!chunk||ws.length===chunk.length);if(!chunk===null&&!Buffer.isBuffer(chunk))return cb(new Error("invalid input"));if(last)flushFlag=binding.Z_FINISH;else{flushFlag=this._flushFlag;if(chunk.length>=ws.length){this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH}}var self=this;this._processChunk(chunk,flushFlag,cb)};Zlib.prototype._processChunk=function(chunk,flushFlag,cb){var availInBefore=chunk&&chunk.length;var availOutBefore=this._chunkSize-this._offset;var inOff=0;var self=this;var async=typeof cb==="function";if(!async){var buffers=[];var nread=0;var error;this.on("error",function(er){error=er});do{var res=this._binding.writeSync(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore)}while(!this._hadError&&callback(res[0],res[1]));if(this._hadError){throw error}var buf=Buffer.concat(buffers,nread);this.close();return buf}var req=this._binding.write(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);req.buffer=chunk;req.callback=callback;function callback(availInAfter,availOutAfter){if(self._hadError)return;var have=availOutBefore-availOutAfter;assert(have>=0,"have should not go down");if(have>0){var out=self._buffer.slice(self._offset,self._offset+have);self._offset+=have;if(async){self.push(out)}else{buffers.push(out);nread+=out.length}}if(availOutAfter===0||self._offset>=self._chunkSize){availOutBefore=self._chunkSize;self._offset=0;self._buffer=new Buffer(self._chunkSize)}if(availOutAfter===0){inOff+=availInBefore-availInAfter;availInBefore=availInAfter;if(!async)return true;var newReq=self._binding.write(flushFlag,chunk,inOff,availInBefore,self._buffer,self._offset,self._chunkSize);newReq.callback=callback;newReq.buffer=chunk;return}if(!async)return false;cb()}};util.inherits(Deflate,Zlib);util.inherits(Inflate,Zlib);util.inherits(Gzip,Zlib);util.inherits(Gunzip,Zlib);util.inherits(DeflateRaw,Zlib);util.inherits(InflateRaw,Zlib);util.inherits(Unzip,Zlib)}).call(this,require("_process"),require("buffer").Buffer)},{"./binding":81,_process:159,_stream_transform:180,assert:51,buffer:85,util:206}],83:[function(require,module,exports){arguments[4][56][0].apply(exports,arguments)},{dup:56}],84:[function(require,module,exports){(function(Buffer){module.exports=function xor(a,b){var length=Math.min(a.length,b.length);var buffer=new Buffer(length);for(var i=0;i<length;++i){buffer[i]=a[i]^b[i]}return buffer}}).call(this,require("buffer").Buffer);
},{buffer:85}],85:[function(require,module,exports){(function(global){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("isarray");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength=kMaxLength();function typedArraySupport(){try{var arr=new Uint8Array(1);arr.foo=function(){return 42};return arr.foo()===42&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError("Invalid typed array length")}if(Buffer.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length);that.__proto__=Buffer.prototype}else{if(that===null){that=new Buffer(length)}that.length=length}return that}function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length)}if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}Buffer.poolSize=8192;Buffer._augment=function(arr){arr.__proto__=Buffer.prototype;return arr};function from(that,value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length)}if(typeof value==="string"){return fromString(that,value,encodingOrOffset)}return fromObject(that,value)}Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)};if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true})}}function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be a number')}}function alloc(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}return createBuffer(that,size)}Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;i++){that[i]=0}}return that}Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)};function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding')}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);that.write(string,encoding);return that}function fromArrayLike(that,array){var length=checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError("'offset' is out of bounds")}if(array.byteLength<byteOffset+(length||0)){throw new RangeError("'length' is out of bounds")}if(length===undefined){array=new Uint8Array(array,byteOffset)}else{array=new Uint8Array(array,byteOffset,length)}if(Buffer.TYPED_ARRAY_SUPPORT){that=array;that.__proto__=Buffer.prototype}else{that=fromArrayLike(that,array)}return that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that}obj.copy(that,0,0,len);return that}if(obj){if(typeof ArrayBuffer!=="undefined"&&obj.buffer instanceof ArrayBuffer||"length"in obj){if(typeof obj.length!=="number"||isnan(obj.length)){return createBuffer(that,0)}return fromArrayLike(that,obj)}if(obj.type==="Buffer"&&isArray(obj.data)){return fromArrayLike(that,obj.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;i++){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;i++){var buf=list[i];if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){string=""+string}var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":case undefined:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target)){throw new TypeError("Argument must be a Buffer")}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function arrayIndexOf(arr,val,byteOffset,encoding){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var foundIndex=-1;for(var i=0;byteOffset+i<arrLength;i++){if(read(arr,byteOffset+i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return(byteOffset+foundIndex)*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}return-1}Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset>>=0;if(this.length===0)return-1;if(byteOffset>=this.length)return-1;if(byteOffset<0)byteOffset=Math.max(this.length+byteOffset,0);if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(this,val,byteOffset,encoding)}if(typeof val==="number"){if(Buffer.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,val,byteOffset)}return arrayIndexOf(this,[val],byteOffset,encoding)}throw new TypeError("val must be string, number or Buffer")};Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&127)}return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}}return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;i--){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;i++){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code}}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;i++){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;i++){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isnan(val){return val!==val}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":52,ieee754:134,isarray:86}],86:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},{}],87:[function(require,module,exports){"use strict";module.exports.BufferUtil={merge:function(mergedBuffer,buffers){for(var i=0,offset=0,l=buffers.length;i<l;++i){var buf=buffers[i];buf.copy(mergedBuffer,offset);offset+=buf.length}},mask:function(source,mask,output,offset,length){var maskNum=mask.readUInt32LE(0,true),i=0,num;for(;i<length-3;i+=4){num=maskNum^source.readUInt32LE(i,true);if(num<0)num=4294967296+num;output.writeUInt32LE(num,offset+i,true)}switch(length%4){case 3:output[offset+i+2]=source[i+2]^mask[2];case 2:output[offset+i+1]=source[i+1]^mask[1];case 1:output[offset+i]=source[i]^mask[0]}},unmask:function(data,mask){var maskNum=mask.readUInt32LE(0,true),length=data.length,i=0,num;for(;i<length-3;i+=4){num=maskNum^data.readUInt32LE(i,true);if(num<0)num=4294967296+num;data.writeUInt32LE(num,i,true);
}switch(length%4){case 3:data[i+2]=data[i+2]^mask[2];case 2:data[i+1]=data[i+1]^mask[1];case 1:data[i]=data[i]^mask[0]}}}},{}],88:[function(require,module,exports){"use strict";try{module.exports=require("bindings")("bufferutil")}catch(e){module.exports=require("./fallback")}},{"./fallback":87,bindings:53}],89:[function(require,module,exports){module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],90:[function(require,module,exports){(function(Buffer){var Transform=require("stream").Transform;var inherits=require("inherits");var StringDecoder=require("string_decoder").StringDecoder;module.exports=CipherBase;inherits(CipherBase,Transform);function CipherBase(hashMode){Transform.call(this);this.hashMode=typeof hashMode==="string";if(this.hashMode){this[hashMode]=this._finalOrDigest}else{this.final=this._finalOrDigest}this._decoder=null;this._encoding=null}CipherBase.prototype.update=function(data,inputEnc,outputEnc){if(typeof data==="string"){data=new Buffer(data,inputEnc)}var outData=this._update(data);if(this.hashMode){return this}if(outputEnc){outData=this._toString(outData,outputEnc)}return outData};CipherBase.prototype.setAutoPadding=function(){};CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase.prototype._transform=function(data,_,next){var err;try{if(this.hashMode){this._update(data)}else{this.push(this._update(data))}}catch(e){err=e}finally{next(err)}};CipherBase.prototype._flush=function(done){var err;try{this.push(this._final())}catch(e){err=e}finally{done(err)}};CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this._final()||new Buffer("");if(outputEnc){outData=this._toString(outData,outputEnc,true)}return outData};CipherBase.prototype._toString=function(value,enc,final){if(!this._decoder){this._decoder=new StringDecoder(enc);this._encoding=enc}if(this._encoding!==enc){throw new Error("can't switch encodings")}var out=this._decoder.write(value);if(final){out+=this._decoder.end()}return out}}).call(this,require("buffer").Buffer)},{buffer:85,inherits:136,stream:191,string_decoder:196}],91:[function(require,module,exports){(function(Buffer){function isArray(arg){if(Array.isArray){return Array.isArray(arg)}return objectToString(arg)==="[object Array]"}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(this,{isBuffer:require("../../is-buffer/index.js")})},{"../../is-buffer/index.js":137}],92:[function(require,module,exports){(function(Buffer){var elliptic=require("elliptic");var BN=require("bn.js");module.exports=function createECDH(curve){return new ECDH(curve)};var aliases={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};aliases.p224=aliases.secp224r1;aliases.p256=aliases.secp256r1=aliases.prime256v1;aliases.p192=aliases.secp192r1=aliases.prime192v1;aliases.p384=aliases.secp384r1;aliases.p521=aliases.secp521r1;function ECDH(curve){this.curveType=aliases[curve];if(!this.curveType){this.curveType={name:curve}}this.curve=new elliptic.ec(this.curveType.name);this.keys=void 0}ECDH.prototype.generateKeys=function(enc,format){this.keys=this.curve.genKeyPair();return this.getPublicKey(enc,format)};ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||"utf8";if(!Buffer.isBuffer(other)){other=new Buffer(other,inenc)}var otherPub=this.curve.keyFromPublic(other).getPublic();var out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength)};ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==="compressed",true);if(format==="hybrid"){if(key[key.length-1]%2){key[0]=7}else{key[0]=6}}return formatReturnValue(key,enc)};ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc)};ECDH.prototype.setPublicKey=function(pub,enc){enc=enc||"utf8";if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc)}this.keys._importPublic(pub);return this};ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||"utf8";if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc)}var _priv=new BN(priv);_priv=_priv.toString(16);this.keys._importPrivate(_priv);return this};function formatReturnValue(bn,enc,len){if(!Array.isArray(bn)){bn=bn.toArray()}var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0);buf=Buffer.concat([zeros,buf])}if(!enc){return buf}else{return buf.toString(enc)}}}).call(this,require("buffer").Buffer)},{"bn.js":54,buffer:85,elliptic:108}],93:[function(require,module,exports){(function(Buffer){"use strict";var inherits=require("inherits");var md5=require("./md5");var rmd160=require("ripemd160");var sha=require("sha.js");var Base=require("cipher-base");function HashNoConstructor(hash){Base.call(this,"digest");this._hash=hash;this.buffers=[]}inherits(HashNoConstructor,Base);HashNoConstructor.prototype._update=function(data){this.buffers.push(data)};HashNoConstructor.prototype._final=function(){var buf=Buffer.concat(this.buffers);var r=this._hash(buf);this.buffers=null;return r};function Hash(hash){Base.call(this,"digest");this._hash=hash}inherits(Hash,Base);Hash.prototype._update=function(data){this._hash.update(data)};Hash.prototype._final=function(){return this._hash.digest()};module.exports=function createHash(alg){alg=alg.toLowerCase();if("md5"===alg)return new HashNoConstructor(md5);if("rmd160"===alg||"ripemd160"===alg)return new HashNoConstructor(rmd160);return new Hash(sha(alg))}}).call(this,require("buffer").Buffer)},{"./md5":95,buffer:85,"cipher-base":90,inherits:136,ripemd160:182,"sha.js":184}],94:[function(require,module,exports){(function(Buffer){"use strict";var intSize=4;var zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;function toArray(buf,bigEndian){if(buf.length%intSize!==0){var len=buf.length+(intSize-buf.length%intSize);buf=Buffer.concat([buf,zeroBuffer],len)}var arr=[];var fn=bigEndian?buf.readInt32BE:buf.readInt32LE;for(var i=0;i<buf.length;i+=intSize){arr.push(fn.call(buf,i))}return arr}function toBuffer(arr,size,bigEndian){var buf=new Buffer(size);var fn=bigEndian?buf.writeInt32BE:buf.writeInt32LE;for(var i=0;i<arr.length;i++){fn.call(buf,arr[i],i*4,true)}return buf}function hash(buf,fn,hashSize,bigEndian){if(!Buffer.isBuffer(buf))buf=new Buffer(buf);var arr=fn(toArray(buf,bigEndian),buf.length*chrsz);return toBuffer(arr,hashSize,bigEndian)}exports.hash=hash}).call(this,require("buffer").Buffer)},{buffer:85}],95:[function(require,module,exports){"use strict";var helpers=require("./helpers");function core_md5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}module.exports=function md5(buf){return helpers.hash(buf,core_md5,16)}},{"./helpers":94}],96:[function(require,module,exports){(function(Buffer){"use strict";var createHash=require("create-hash/browser");var inherits=require("inherits");var Transform=require("stream").Transform;var ZEROS=new Buffer(128);ZEROS.fill(0);function Hmac(alg,key){Transform.call(this);alg=alg.toLowerCase();if(typeof key==="string"){key=new Buffer(key)}var blocksize=alg==="sha512"||alg==="sha384"?128:64;this._alg=alg;this._key=key;if(key.length>blocksize){key=createHash(alg).update(key).digest()}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}var ipad=this._ipad=new Buffer(blocksize);var opad=this._opad=new Buffer(blocksize);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^54;opad[i]=key[i]^92}this._hash=createHash(alg).update(ipad)}inherits(Hmac,Transform);Hmac.prototype.update=function(data,enc){this._hash.update(data,enc);return this};Hmac.prototype._transform=function(data,_,next){this._hash.update(data);next()};Hmac.prototype._flush=function(next){this.push(this.digest());next()};Hmac.prototype.digest=function(enc){var h=this._hash.digest();return createHash(this._alg).update(this._opad).update(h).digest(enc)};module.exports=function createHmac(alg,key){return new Hmac(alg,key)}}).call(this,require("buffer").Buffer)},{buffer:85,"create-hash/browser":93,inherits:136,stream:191}],97:[function(require,module,exports){"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require("randombytes");exports.createHash=exports.Hash=require("create-hash");exports.createHmac=exports.Hmac=require("create-hmac");var hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(require("browserify-sign/algos")));exports.getHashes=function(){return hashes};var p=require("pbkdf2");exports.pbkdf2=p.pbkdf2;exports.pbkdf2Sync=p.pbkdf2Sync;var aes=require("browserify-cipher");["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(key){exports[key]=aes[key]});var dh=require("diffie-hellman");["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(key){exports[key]=dh[key]});var sign=require("browserify-sign");["createSign","Sign","createVerify","Verify"].forEach(function(key){exports[key]=sign[key]});exports.createECDH=require("create-ecdh");var publicEncrypt=require("public-encrypt");["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(key){exports[key]=publicEncrypt[key]});["createCredentials"].forEach(function(name){exports[name]=function(){throw new Error(["sorry, "+name+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))}})},{"browserify-cipher":72,"browserify-sign":77,"browserify-sign/algos":76,"create-ecdh":92,"create-hash":93,"create-hmac":96,"diffie-hellman":104,pbkdf2:157,"public-encrypt":160,randombytes:170}],98:[function(require,module,exports){"use strict";exports.utils=require("./des/utils");exports.Cipher=require("./des/cipher");exports.DES=require("./des/des");exports.CBC=require("./des/cbc");exports.EDE=require("./des/ede")},{"./des/cbc":99,"./des/cipher":100,"./des/des":101,"./des/ede":102,"./des/utils":103}],99:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");var proto={};function CBCState(iv){assert.equal(iv.length,8,"Invalid IV length");this.iv=new Array(8);for(var i=0;i<this.iv.length;i++)this.iv[i]=iv[i]}function instantiate(Base){function CBC(options){Base.call(this,options);this._cbcInit()}inherits(CBC,Base);var keys=Object.keys(proto);for(var i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key]}CBC.create=function create(options){return new CBC(options)};return CBC}exports.instantiate=instantiate;proto._cbcInit=function _cbcInit(){var state=new CBCState(this.options.iv);this._cbcState=state};proto._update=function _update(inp,inOff,out,outOff){var state=this._cbcState;var superProto=this.constructor.super_.prototype;var iv=state.iv;if(this.type==="encrypt"){for(var i=0;i<this.blockSize;i++)iv[i]^=inp[inOff+i];superProto._update.call(this,iv,0,out,outOff);for(var i=0;i<this.blockSize;i++)iv[i]=out[outOff+i]}else{superProto._update.call(this,inp,inOff,out,outOff);for(var i=0;i<this.blockSize;i++)out[outOff+i]^=iv[i];for(var i=0;i<this.blockSize;i++)iv[i]=inp[inOff+i]}}},{inherits:136,"minimalistic-assert":139}],100:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");function Cipher(options){this.options=options;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0}module.exports=Cipher;Cipher.prototype._init=function _init(){};Cipher.prototype.update=function update(data){if(data.length===0)return[];if(this.type==="decrypt")return this._updateDecrypt(data);else return this._updateEncrypt(data)};Cipher.prototype._buffer=function _buffer(data,off){var min=Math.min(this.buffer.length-this.bufferOff,data.length-off);for(var i=0;i<min;i++)this.buffer[this.bufferOff+i]=data[off+i];this.bufferOff+=min;return min};Cipher.prototype._flushBuffer=function _flushBuffer(out,off){this._update(this.buffer,0,out,off);this.bufferOff=0;return this.blockSize};Cipher.prototype._updateEncrypt=function _updateEncrypt(data){var inputOff=0;var outputOff=0;var count=(this.bufferOff+data.length)/this.blockSize|0;var out=new Array(count*this.blockSize);if(this.bufferOff!==0){inputOff+=this._buffer(data,inputOff);if(this.bufferOff===this.buffer.length)outputOff+=this._flushBuffer(out,outputOff)}var max=data.length-(data.length-inputOff)%this.blockSize;for(;inputOff<max;inputOff+=this.blockSize){this._update(data,inputOff,out,outputOff);outputOff+=this.blockSize}for(;inputOff<data.length;inputOff++,this.bufferOff++)this.buffer[this.bufferOff]=data[inputOff];return out};Cipher.prototype._updateDecrypt=function _updateDecrypt(data){var inputOff=0;var outputOff=0;var count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1;var out=new Array(count*this.blockSize);for(;count>0;count--){inputOff+=this._buffer(data,inputOff);outputOff+=this._flushBuffer(out,outputOff)}inputOff+=this._buffer(data,inputOff);return out};Cipher.prototype.final=function final(buffer){var first;if(buffer)first=this.update(buffer);var last;if(this.type==="encrypt")last=this._finalEncrypt();else last=this._finalDecrypt();if(first)return first.concat(last);else return last};Cipher.prototype._pad=function _pad(buffer,off){if(off===0)return false;while(off<buffer.length)buffer[off++]=0;return true};Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=new Array(this.blockSize);this._update(this.buffer,0,out,0);return out};Cipher.prototype._unpad=function _unpad(buffer){return buffer};Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var out=new Array(this.blockSize);this._flushBuffer(out,0);return this._unpad(out)}},{"minimalistic-assert":139}],101:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");var des=require("../des");var utils=des.utils;var Cipher=des.Cipher;function DESState(){this.tmp=new Array(2);this.keys=null}function DES(options){Cipher.call(this,options);var state=new DESState;this._desState=state;this.deriveKeys(state,options.key)}inherits(DES,Cipher);module.exports=DES;DES.create=function create(options){return new DES(options)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(state,key){state.keys=new Array(16*2);assert.equal(key.length,this.blockSize,"Invalid key length");var kL=utils.readUInt32BE(key,0);var kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0);kL=state.tmp[0];kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift);kR=utils.r28shl(kR,shift);utils.pc2(kL,kR,state.keys,i)}};DES.prototype._update=function _update(inp,inOff,out,outOff){var state=this._desState;var l=utils.readUInt32BE(inp,inOff);var r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];if(this.type==="encrypt")this._encrypt(state,l,r,state.tmp,0);else this._decrypt(state,l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];utils.writeUInt32BE(out,l,outOff);utils.writeUInt32BE(out,r,outOff+4)};DES.prototype._pad=function _pad(buffer,off){var value=buffer.length-off;for(var i=off;i<buffer.length;i++)buffer[i]=value;return true};DES.prototype._unpad=function _unpad(buffer){var pad=buffer[buffer.length-1];for(var i=buffer.length-pad;i<buffer.length;i++)assert.equal(buffer[i],pad);return buffer.slice(0,buffer.length-pad)};DES.prototype._encrypt=function _encrypt(state,lStart,rStart,out,off){var l=lStart;var r=rStart;for(var i=0;i<state.keys.length;i+=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(r,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=r;r=(l^f)>>>0;l=t}utils.rip(r,l,out,off)};DES.prototype._decrypt=function _decrypt(state,lStart,rStart,out,off){var l=rStart;var r=lStart;for(var i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(l,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=l;l=(r^f)>>>0;r=t}utils.rip(l,r,out,off)}},{"../des":98,inherits:136,"minimalistic-assert":139}],102:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");var des=require("../des");var Cipher=des.Cipher;var DES=des.DES;function EDEState(type,key){assert.equal(key.length,24,"Invalid key length");var k1=key.slice(0,8);var k2=key.slice(8,16);var k3=key.slice(16,24);if(type==="encrypt"){this.ciphers=[DES.create({type:"encrypt",key:k1}),DES.create({type:"decrypt",key:k2}),DES.create({type:"encrypt",key:k3})]}else{this.ciphers=[DES.create({type:"decrypt",key:k3}),DES.create({type:"encrypt",key:k2}),DES.create({type:"decrypt",key:k1})]}}function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state}inherits(EDE,Cipher);module.exports=EDE;EDE.create=function create(options){return new EDE(options)};EDE.prototype._update=function _update(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff);state.ciphers[1]._update(out,outOff,out,outOff);state.ciphers[2]._update(out,outOff,out,outOff)};EDE.prototype._pad=DES.prototype._pad;EDE.prototype._unpad=DES.prototype._unpad},{"../des":98,inherits:136,"minimalistic-assert":139}],103:[function(require,module,exports){"use strict";exports.readUInt32BE=function readUInt32BE(bytes,off){var res=bytes[0+off]<<24|bytes[1+off]<<16|bytes[2+off]<<8|bytes[3+off];return res>>>0};exports.writeUInt32BE=function writeUInt32BE(bytes,value,off){bytes[0+off]=value>>>24;bytes[1+off]=value>>>16&255;bytes[2+off]=value>>>8&255;bytes[3+off]=value&255};exports.ip=function ip(inL,inR,out,off){var outL=0;var outR=0;for(var i=6;i>=0;i-=2){for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>>j+i&1}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inL>>>j+i&1}}for(var i=6;i>=0;i-=2){for(var j=1;j<=25;j+=8){outR<<=1;outR|=inR>>>j+i&1}for(var j=1;j<=25;j+=8){outR<<=1;outR|=inL>>>j+i&1}}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.rip=function rip(inL,inR,out,off){var outL=0;var outR=0;for(var i=0;i<4;i++){for(var j=24;j>=0;j-=8){outL<<=1;outL|=inR>>>j+i&1;outL<<=1;outL|=inL>>>j+i&1}}for(var i=4;i<8;i++){for(var j=24;j>=0;j-=8){outR<<=1;outR|=inR>>>j+i&1;outR<<=1;outR|=inL>>>j+i&1}}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.pc1=function pc1(inL,inR,out,off){var outL=0;var outR=0;for(var i=7;i>=5;i--){for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>j+i&1}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inL>>j+i&1}}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>j+i&1}for(var i=1;i<=3;i++){for(var j=0;j<=24;j+=8){outR<<=1;outR|=inR>>j+i&1}for(var j=0;j<=24;j+=8){outR<<=1;outR|=inL>>j+i&1}}for(var j=0;j<=24;j+=8){outR<<=1;outR|=inL>>j+i&1}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.r28shl=function r28shl(num,shift){return num<<shift&268435455|num>>>28-shift};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function pc2(inL,inR,out,off){var outL=0;var outR=0;var len=pc2table.length>>>1;for(var i=0;i<len;i++){outL<<=1;outL|=inL>>>pc2table[i]&1}for(var i=len;i<pc2table.length;i++){outR<<=1;outR|=inR>>>pc2table[i]&1}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.expand=function expand(r,out,off){var outL=0;var outR=0;outL=(r&1)<<5|r>>>27;for(var i=23;i>=15;i-=4){outL<<=6;outL|=r>>>i&63}for(var i=11;i>=3;i-=4){outR|=r>>>i&63;outR<<=6}outR|=(r&31)<<1|r>>>31;out[off+0]=outL>>>0;out[off+1]=outR>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function substitute(inL,inR){var out=0;for(var i=0;i<4;i++){var b=inL>>>18-i*6&63;var sb=sTable[i*64+b];out<<=4;out|=sb}for(var i=0;i<4;i++){var b=inR>>>18-i*6&63;var sb=sTable[4*64+i*64+b];out<<=4;out|=sb}return out>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function permute(num){var out=0;for(var i=0;i<permuteTable.length;i++){out<<=1;out|=num>>>permuteTable[i]&1}return out>>>0};exports.padSplit=function padSplit(num,size,group){var str=num.toString(2);while(str.length<size)str="0"+str;var out=[];for(var i=0;i<size;i+=group)out.push(str.slice(i,i+group));return out.join(" ")}},{}],104:[function(require,module,exports){(function(Buffer){var generatePrime=require("./lib/generatePrime");var primes=require("./lib/primes.json");var DH=require("./lib/dh");function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,"hex");var gen=new Buffer(primes[mod].gen,"hex");return new DH(prime,gen)}var ENCODINGS={binary:true,hex:true,base64:true};function createDiffieHellman(prime,enc,generator,genc){if(Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined){return createDiffieHellman(prime,"binary",enc,generator)}enc=enc||"binary";genc=genc||"binary";generator=generator||new Buffer([2]);if(!Buffer.isBuffer(generator)){generator=new Buffer(generator,genc)}if(typeof prime==="number"){return new DH(generatePrime(prime,generator),generator,true)}if(!Buffer.isBuffer(prime)){prime=new Buffer(prime,enc)}return new DH(prime,generator,true)}exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman;exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman}).call(this,require("buffer").Buffer)},{"./lib/dh":105,"./lib/generatePrime":106,"./lib/primes.json":107,buffer:85}],105:[function(require,module,exports){(function(Buffer){var BN=require("bn.js");var MillerRabin=require("miller-rabin");var millerRabin=new MillerRabin;var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=require("./generatePrime");var randomBytes=require("randombytes");module.exports=DH;function setPublicKey(pub,enc){enc=enc||"utf8";if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc)}this._pub=new BN(pub);return this}function setPrivateKey(priv,enc){enc=enc||"utf8";if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc)}this._priv=new BN(priv);return this}var primeCache={};function checkPrime(prime,generator){var gen=generator.toString("hex");var hex=[gen,prime.toString(16)].join("_");if(hex in primeCache){return primeCache[hex]}var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime)){error+=1;if(gen==="02"||gen==="05"){error+=8}else{error+=4}primeCache[hex]=error;return error}if(!millerRabin.test(prime.shrn(1))){error+=2}var rem;switch(gen){case"02":if(prime.mod(TWENTYFOUR).cmp(ELEVEN)){error+=8}break;case"05":rem=prime.mod(TEN);if(rem.cmp(THREE)&&rem.cmp(SEVEN)){error+=8}break;default:error+=4}primeCache[hex]=error;return error}function DH(prime,generator,malleable){this.setGenerator(generator);this.__prime=new BN(prime);this._prime=BN.mont(this.__prime);this._primeLen=prime.length;this._pub=undefined;this._priv=undefined;this._primeCode=undefined;if(malleable){this.setPublicKey=setPublicKey;this.setPrivateKey=setPrivateKey}else{this._primeCode=8}}Object.defineProperty(DH.prototype,"verifyError",{enumerable:true,get:function(){if(typeof this._primeCode!=="number"){this._primeCode=checkPrime(this.__prime,this.__gen)}return this._primeCode}});DH.prototype.generateKeys=function(){if(!this._priv){this._priv=new BN(randomBytes(this._primeLen))}this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed();return this.getPublicKey()};DH.prototype.computeSecret=function(other){other=new BN(other);other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0);out=Buffer.concat([front,out])}return out};DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc)};DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc)};DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc)};DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc)};DH.prototype.setGenerator=function(gen,enc){enc=enc||"utf8";if(!Buffer.isBuffer(gen)){gen=new Buffer(gen,enc)}this.__gen=gen;this._gen=new BN(gen);return this};function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());if(!enc){return buf}else{return buf.toString(enc)}}}).call(this,require("buffer").Buffer);
},{"./generatePrime":106,"bn.js":54,buffer:85,"miller-rabin":138,randombytes:170}],106:[function(require,module,exports){var randomBytes=require("randombytes");module.exports=findPrime;findPrime.simpleSieve=simpleSieve;findPrime.fermatTest=fermatTest;var BN=require("bn.js");var TWENTYFOUR=new BN(24);var MillerRabin=require("miller-rabin");var millerRabin=new MillerRabin;var ONE=new BN(1);var TWO=new BN(2);var FIVE=new BN(5);var SIXTEEN=new BN(16);var EIGHT=new BN(8);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var ELEVEN=new BN(11);var FOUR=new BN(4);var TWELVE=new BN(12);var primes=null;function _getPrimes(){if(primes!==null)return primes;var limit=1048576;var res=[];res[0]=2;for(var i=1,k=3;k<limit;k+=2){var sqrt=Math.ceil(Math.sqrt(k));for(var j=0;j<i&&res[j]<=sqrt;j++)if(k%res[j]===0)break;if(i!==j&&res[j]<=sqrt)continue;res[i++]=k}primes=res;return res}function simpleSieve(p){var primes=_getPrimes();for(var i=0;i<primes.length;i++)if(p.modn(primes[i])===0){if(p.cmpn(primes[i])===0){return true}else{return false}}return true}function fermatTest(p){var red=BN.mont(p);return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)===0}function findPrime(bits,gen){if(bits<16){if(gen===2||gen===5){return new BN([140,123])}else{return new BN([140,39])}}gen=new BN(gen);var num,n2;while(true){num=new BN(randomBytes(Math.ceil(bits/8)));while(num.bitLength()>bits){num.ishrn(1)}if(num.isEven()){num.iadd(ONE)}if(!num.testn(1)){num.iadd(TWO)}if(!gen.cmp(TWO)){while(num.mod(TWENTYFOUR).cmp(ELEVEN)){num.iadd(FOUR)}}else if(!gen.cmp(FIVE)){while(num.mod(TEN).cmp(THREE)){num.iadd(FOUR)}}n2=num.shrn(1);if(simpleSieve(n2)&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num)){return num}}}},{"bn.js":54,"miller-rabin":138,randombytes:170}],107:[function(require,module,exports){module.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],108:[function(require,module,exports){"use strict";var elliptic=exports;elliptic.version=require("../package.json").version;elliptic.utils=require("./elliptic/utils");elliptic.rand=require("brorand");elliptic.hmacDRBG=require("./elliptic/hmac-drbg");elliptic.curve=require("./elliptic/curve");elliptic.curves=require("./elliptic/curves");elliptic.ec=require("./elliptic/ec");elliptic.eddsa=require("./elliptic/eddsa")},{"../package.json":124,"./elliptic/curve":111,"./elliptic/curves":114,"./elliptic/ec":115,"./elliptic/eddsa":118,"./elliptic/hmac-drbg":121,"./elliptic/utils":123,brorand:55}],109:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4)}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW)}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg())}a=a.add(b)}return a.toP()};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--)k++;if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==="affine"){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg())}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg())}}return p.type==="affine"?acc.toP():acc};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]);naf[b]=getNAF(coeffs[b],wndWidth[b]);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg())}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg())}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg())}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false}if(!zero)break;k++;i--}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==="affine")acc=acc.mixedAdd(p);else acc=acc.add(p)}}for(var i=0;i<len;i++)wnd[i]=null;return acc.toP()};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")};BasePoint.prototype.validate=function validate(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if(bytes[0]===4&&bytes.length-1===2*len){return this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len))}else if((bytes[0]===2||bytes[0]===3)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===3)}throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true)};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray("be",len);if(compact)return[this.getY().isEven()?2:3].concat(x);return[4].concat(x,this.getY().toArray("be",len))};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc)};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return false;var doubles=this.precomputed.doubles;if(!doubles)return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}};BasePoint.prototype._getBeta=function _getBeta(){return null};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)r=r.dbl();return r}},{"../../elliptic":108,"bn.js":54}],110:[function(require,module,exports){"use strict";var curve=require("../curve");var elliptic=require("../../elliptic");var BN=require("bn.js");var inherits=require("inherits");var Base=curve.base;var assert=elliptic.utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,"edwards",conf);this.a=new BN(conf.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1}inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)return num.redNeg();else return this.a.redMul(num)};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)return num;else return this.c.redMul(num)};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t)};EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error("invalid point");var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y)};EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16);if(!y.red)y=y.toRed(this.red);var y2=y.redSqr();var lhs=y2.redSub(this.one);var rhs=y2.redMul(this.d).redAdd(this.one);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0){if(odd)throw new Error("invalid point");else return this.point(this.zero,y)}var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)throw new Error("invalid point");if(x.isOdd()!==odd)x=x.redNeg();return this.point(x,y)};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,"projective");if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=z?new BN(z,16):this.curve.one;this.t=t&&new BN(t,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj)};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t)};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2])};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&this.y.cmp(this.z)===0};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f)}else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j)}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.c.redMul(this.z)).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j)}return this.curve.point(nx,ny,nz)};Point.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g)}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g)}return this.curve.point(nx,ny,nz)};Point.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;if(this.curve.extended)return this._extAdd(p);else return this._projAdd(p)};Point.prototype.mul=function mul(k){if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else return this.curve._wnafMul(this,k)};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2)};Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed()};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed()};Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add},{"../../elliptic":108,"../curve":111,"bn.js":54,inherits:136}],111:[function(require,module,exports){"use strict";var curve=exports;curve.base=require("./base");curve.short=require("./short");curve.mont=require("./mont");curve.edwards=require("./edwards")},{"./base":109,"./edwards":110,"./mont":112,"./short":113}],112:[function(require,module,exports){"use strict";var curve=require("../curve");var BN=require("bn.js");var inherits=require("inherits");var Base=curve.base;var elliptic=require("../../elliptic");var utils=elliptic.utils;function MontCurve(conf){Base.call(this,"mont",conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.i4=new BN(4).toRed(this.red).redInvm();this.two=new BN(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0};function Point(curve,x,z){Base.BasePoint.call(this,curve,"projective");if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero}else{this.x=new BN(x,16);this.z=new BN(z,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}inherits(Point,Base.BasePoint);MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1)};MontCurve.prototype.point=function point(x,z){return new Point(this,x,z)};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj)};Point.prototype.precompute=function precompute(){};Point.prototype._encode=function _encode(){return this.getX().toArray("be",this.curve.p.byteLength())};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one)};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz)};Point.prototype.add=function add(){throw new Error("Not supported on Montgomery curve")};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz)};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl()}else{b=a.diffAdd(b,c);a=a.dbl()}}return b};Point.prototype.mulAdd=function mulAdd(){throw new Error("Not supported on Montgomery curve")};Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed()}},{"../../elliptic":108,"../curve":111,"bn.js":54,inherits:136}],113:[function(require,module,exports){"use strict";var curve=require("../curve");var elliptic=require("../../elliptic");var BN=require("bn.js");var inherits=require("inherits");var Base=curve.base;var assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,"short",conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red)}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red)}if(conf.lambda){lambda=new BN(conf.lambda,16)}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0]}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0)}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}})}else{basis=this._getEndoBasis(lambda)}return{beta:beta,lambda:lambda,basis:basis}};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2]};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x}else if(a1&&++i===2){break}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0}if(a1.negative){a1=a1.neg();b1=b1.neg()}if(a2.negative){a2=a2.neg();b2=b2.neg()}return[{a:a1,b:b1},{a:a2,b:b2}]};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2}};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error("invalid point");var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y)};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true)}if(split.k2.negative){split.k2.ineg();beta=beta.neg(true)}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null}return res};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,"affine");if(x===null&&y===null){this.x=null;this.y=null;this.inf=true}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed)};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red)};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==="string")obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red)}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.inf};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;
if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)};Point.prototype.getX=function getX(){return this.x.fromRed()};Point.prototype.getY=function getY(){return this.y.fromRed()};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k)};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2)};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,"jacobian");if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0)}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z)};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k)};JPoint.prototype.eq=function eq(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0}},{"../../elliptic":108,"../curve":111,"bn.js":54,inherits:136}],114:[function(require,module,exports){"use strict";var curves=exports;var hash=require("hash.js");var elliptic=require("../elliptic");var assert=elliptic.utils.assert;function PresetCurve(options){if(options.type==="short")this.curve=new elliptic.curve.short(options);else if(options.type==="edwards")this.curve=new elliptic.curve.edwards(options);else this.curve=new elliptic.curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),"Invalid curve");assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve}})}defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:false,g:["9"]});defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var pre;try{pre=require("./precomputed/secp256k1")}catch(e){pre=undefined}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})},{"../elliptic":108,"./precomputed/secp256k1":122,"hash.js":127}],115:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;var KeyPair=require("./key");var Signature=require("./signature");function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==="string"){assert(elliptic.curves.hasOwnProperty(options),"Unknown curve "+options);options=elliptic.curves[options]}if(options instanceof elliptic.curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options)};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc)};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc)};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new elliptic.hmacDRBG({hash:this.hash,pers:options.pers,entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv)}while(true)};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg};EC.prototype.sign=function sign(msg,key,enc,options){if(typeof enc==="object"){options=enc;enc=null}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray("be",bytes);var nonce=msg.toArray("be",bytes);var drbg=new elliptic.hmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc});var ns1=this.n.sub(new BN(1));for(var iter=0;true;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1}return new Signature({r:r,s:s,recoveryParam:recoveryParam})}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,"hex");var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().umod(this.n).cmp(r)===0};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,"The recovery param is more than two bits");signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");if(isSecondKey)r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else r=this.curve.pointFromX(r,isYOdd);var eNeg=n.sub(e);var rInv=signature.r.invm(n);return this.g.mulAdd(eNeg,r,s).mul(rInv)};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")}},{"../../elliptic":108,"./key":116,"./signature":117,"bn.js":54}],116:[function(require,module,exports){"use strict";var BN=require("bn.js");function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc)}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc})};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc})};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:"Invalid public key"};if(!pub.validate())return{result:false,reason:"Public key is not a point"};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==="string"){enc=compact;compact=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!enc)return this.pub;return this.pub.encode(enc,compact)};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){this.pub=this.ec.curve.point(key.x,key.y);return}this.pub=this.ec.curve.decodePoint(key,enc)};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX()};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options)};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this)};KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"bn.js":54}],117:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,"Signature without r or s");this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=options.recoveryParam}module.exports=Signature;function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&128)){return initial}var octetLen=initial&15;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off]}p.place=off;return val}function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&128)&&i<len){i++}if(i===0){return buf}return buf.slice(i)}Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position;if(data[p.place++]!==48){return false}var len=getLength(data,p);if(len+p.place!==data.length){return false}if(data[p.place++]!==2){return false}var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==2){return false}var slen=getLength(data,p);if(data.length!==slen+p.place){return false}var s=data.slice(p.place,slen+p.place);if(r[0]===0&&r[1]&128){r=r.slice(1)}if(s[0]===0&&s[1]&128){s=s.slice(1)}this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true};function constructLength(arr,len){if(len<128){arr.push(len);return}var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|128);while(--octets){arr.push(len>>>(octets<<3)&255)}arr.push(len)}Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(s[0]&128)s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&128)){s=s.slice(1)}var arr=[2];constructLength(arr,r.length);arr=arr.concat(r);arr.push(2);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[48];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc)}},{"../../elliptic":108,"bn.js":54}],118:[function(require,module,exports){"use strict";var hash=require("hash.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=require("./key");var Signature=require("./signature");function EDDSA(curve){assert(curve==="ed25519","only tested with ed25519 so far");if(!(this instanceof EDDSA))return new EDDSA(curve);var curve=elliptic.curves[curve].curve;this.curve=curve;this.g=curve.g;this.g.precompute(curve.n.bitLength()+1);this.pointClass=curve.point().constructor;this.encodingLength=Math.ceil(curve.n.bitLength()/8);this.hash=hash.sha512}module.exports=EDDSA;EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded})};EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message);sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG)};EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub)};EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret)};EDDSA.prototype.makeSignature=function makeSignature(sig){if(sig instanceof Signature)return sig;return new Signature(this,sig)};EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray("le",this.encodingLength);enc[this.encodingLength-1]|=point.getX().isOdd()?128:0;return enc};EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~128);var xIsOdd=(bytes[lastIx]&128)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd)};EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes)};EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass}},{"../../elliptic":108,"./key":119,"./signature":120,"hash.js":127}],119:[function(require,module,exports){"use strict";var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa;this._secret=parseBytes(params.secret);if(eddsa.isPoint(params.pub))this._pub=params.pub;else this._pubBytes=parseBytes(params.pub)}KeyPair.fromPublic=function fromPublic(eddsa,pub){if(pub instanceof KeyPair)return pub;return new KeyPair(eddsa,{pub:pub})};KeyPair.fromSecret=function fromSecret(eddsa,secret){if(secret instanceof KeyPair)return secret;return new KeyPair(eddsa,{secret:secret})};KeyPair.prototype.secret=function secret(){return this._secret};cachedProperty(KeyPair,function pubBytes(){return this.eddsa.encodePoint(this.pub())});cachedProperty(KeyPair,function pub(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())});cachedProperty(KeyPair,function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);a[0]&=248;a[lastIx]&=127;a[lastIx]|=64;return a});cachedProperty(KeyPair,function priv(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty(KeyPair,function hash(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty(KeyPair,function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair.prototype.sign=function sign(message){assert(this._secret,"KeyPair can only verify");return this.eddsa.sign(message,this)};KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this)};KeyPair.prototype.getSecret=function getSecret(enc){assert(this._secret,"KeyPair is public only");return utils.encode(this.secret(),enc)};KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc)};module.exports=KeyPair},{"../../elliptic":108}],120:[function(require,module,exports){"use strict";var BN=require("bn.js");var elliptic=require("../../elliptic");var utils=elliptic.utils;var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa;if(typeof sig!=="object")sig=parseBytes(sig);if(Array.isArray(sig)){sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)}}assert(sig.R&&sig.S,"Signature without R or S");if(eddsa.isPoint(sig.R))this._R=sig.R;if(sig.S instanceof BN)this._S=sig.S;this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded;this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded}cachedProperty(Signature,function S(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature,function R(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature,function Rencoded(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature,function Sencoded(){return this.eddsa.encodeInt(this.S())});Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded())};Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),"hex").toUpperCase()};module.exports=Signature},{"../../elliptic":108,"bn.js":54}],121:[function(require,module,exports){"use strict";var hash=require("hash.js");var elliptic=require("../elliptic");var utils=elliptic.utils;var assert=utils.assert;function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this.reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc);var nonce=utils.toArray(options.nonce,options.nonceEnc);var pers=utils.toArray(options.pers,options.persEnc);assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(entropy,nonce,pers)}module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0;this.V[i]=1}this._update(seed);this.reseed=1;this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0]);if(seed)kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)return;this.K=this._hmac().update(this.V).update([1]).update(seed).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=="string"){addEnc=add;add=entropyEnc;entropyEnc=null}entropy=utils.toBuffer(entropy,entropyEnc);add=utils.toBuffer(add,addEnc);assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(entropy.concat(add||[]));this.reseed=1};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof enc!=="string"){addEnc=add;add=enc;enc=null}if(add){add=utils.toArray(add,addEnc);this._update(add)}var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V)}var res=temp.slice(0,len);this._update(add);this.reseed++;return utils.encode(res,enc)}},{"../elliptic":108,"hash.js":127}],122:[function(require,module,exports){module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]
},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],123:[function(require,module,exports){"use strict";var utils=exports;var BN=require("bn.js");utils.assert=function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")};function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=="string"){for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;return res}if(!enc){for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;if(hi)res.push(hi,lo);else res.push(lo)}}else if(enc==="hex"){msg=msg.replace(/[^a-z0-9]+/gi,"");if(msg.length%2!==0)msg="0"+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}return res}utils.toArray=toArray;function zero2(word){if(word.length===1)return"0"+word;else return word}utils.zero2=zero2;function toHex(msg){var res="";for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==="hex")return toHex(arr);else return arr};function getNAF(num,w){var naf=[];var ws=1<<w+1;var k=num.clone();while(k.cmpn(1)>=0){var z;if(k.isOdd()){var mod=k.andln(ws-1);if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z)}else{z=0}naf.push(z);var shift=k.cmpn(0)!==0&&k.andln(ws-1)===0?w+1:1;for(var i=1;i<shift;i++)naf.push(0);k.iushrn(shift)}return naf}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0}else{var m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0}else{var m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.iushrn(1);k2.iushrn(1)}return jsf}utils.getJSF=getJSF;function cachedProperty(obj,computer){var name=computer.name;var key="_"+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this)}}utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==="string"?utils.toArray(bytes,"hex"):bytes}utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,"hex","le")}utils.intFromLE=intFromLE},{"bn.js":54}],124:[function(require,module,exports){module.exports={_args:[["elliptic@^6.0.0","/Users/chris/code/sentient.js/node_modules/browserify-sign"]],_from:"elliptic@>=6.0.0 <7.0.0",_id:"elliptic@6.2.3",_inCache:true,_installable:true,_location:"/elliptic",_nodeVersion:"5.4.1",_npmUser:{email:"fedor@indutny.com",name:"indutny"},_npmVersion:"3.3.12",_phantomChildren:{},_requested:{name:"elliptic",raw:"elliptic@^6.0.0",rawSpec:"^6.0.0",scope:null,spec:">=6.0.0 <7.0.0",type:"range"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.2.3.tgz",_shasum:"18e46d7306b0951275a2d42063270a14b74ebe99",_shrinkwrap:null,_spec:"elliptic@^6.0.0",_where:"/Users/chris/code/sentient.js/node_modules/browserify-sign",author:{email:"fedor@indutny.com",name:"Fedor Indutny"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},description:"EC cryptography",devDependencies:{coveralls:"^2.11.3",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},directories:{},dist:{shasum:"18e46d7306b0951275a2d42063270a14b74ebe99",tarball:"https://registry.npmjs.org/elliptic/-/elliptic-6.2.3.tgz"},files:["lib"],gitHead:"c32f20b22b420eb6af3c6dda28963deb7facf823",homepage:"https://github.com/indutny/elliptic",keywords:["Cryptography","EC","Elliptic","curve"],license:"MIT",main:"lib/elliptic.js",maintainers:[{name:"indutny",email:"fedor@indutny.com"}],name:"elliptic",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{coverage:"npm run unit --coverage",coveralls:"npm run coverage && cat ./coverage/lcov.info | coveralls",jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/*.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/*.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/*-test.js"},version:"6.2.3"}},{}],125:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],126:[function(require,module,exports){(function(Buffer){var md5=require("create-hash/md5");module.exports=EVP_BytesToKey;function EVP_BytesToKey(password,salt,keyLen,ivLen){if(!Buffer.isBuffer(password)){password=new Buffer(password,"binary")}if(salt&&!Buffer.isBuffer(salt)){salt=new Buffer(salt,"binary")}keyLen=keyLen/8;ivLen=ivLen||0;var ki=0;var ii=0;var key=new Buffer(keyLen);var iv=new Buffer(ivLen);var addmd=0;var md_buf;var i;var bufs=[];while(true){if(addmd++>0){bufs.push(md_buf)}bufs.push(password);if(salt){bufs.push(salt)}md_buf=md5(Buffer.concat(bufs));bufs=[];i=0;if(keyLen>0){while(true){if(keyLen===0){break}if(i===md_buf.length){break}key[ki++]=md_buf[i];keyLen--;i++}}if(ivLen>0&&i!==md_buf.length){while(true){if(ivLen===0){break}if(i===md_buf.length){break}iv[ii++]=md_buf[i];ivLen--;i++}}if(keyLen===0&&ivLen===0){break}}for(i=0;i<md_buf.length;i++){md_buf[i]=0}return{key:key,iv:iv}}}).call(this,require("buffer").Buffer)},{buffer:85,"create-hash/md5":95}],127:[function(require,module,exports){var hash=exports;hash.utils=require("./hash/utils");hash.common=require("./hash/common");hash.sha=require("./hash/sha");hash.ripemd=require("./hash/ripemd");hash.hmac=require("./hash/hmac");hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160},{"./hash/common":128,"./hash/hmac":129,"./hash/ripemd":130,"./hash/sha":131,"./hash/utils":132}],128:[function(require,module,exports){var hash=require("../hash");var utils=hash.utils;var assert=utils.assert;function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)this.pending=msg;else this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc)};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=new Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;len<<=3;if(this.endian==="big"){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=len>>>24&255;res[i++]=len>>>16&255;res[i++]=len>>>8&255;res[i++]=len&255}else{res[i++]=len&255;res[i++]=len>>>8&255;res[i++]=len>>>16&255;res[i++]=len>>>24&255;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(var t=8;t<this.padLength;t++)res[i++]=0}return res}},{"../hash":127}],129:[function(require,module,exports){var hmac=exports;var hash=require("../hash");var utils=hash.utils;var assert=utils.assert;function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc))}module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)key=(new this.Hash).update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(var i=0;i<key.length;i++)key[i]^=54;this.inner=(new this.Hash).update(key);for(var i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc)}},{"../hash":127}],130:[function(require,module,exports){var hash=require("../hash");var utils=hash.utils;var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=hash.common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}utils.inherits(RIPEMD160,BlockHash);exports.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E;E=D;D=rotl32(C,10);C=B;B=T;T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh);Ah=Eh;Eh=Dh;Dh=rotl32(Ch,10);Ch=Bh;Bh=T}T=sum32_3(this.h[1],C,Dh);this.h[1]=sum32_3(this.h[2],D,Eh);this.h[2]=sum32_3(this.h[3],E,Ah);this.h[3]=sum32_3(this.h[4],A,Bh);this.h[4]=sum32_3(this.h[0],B,Ch);this.h[0]=T};RIPEMD160.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"little");else return utils.split32(this.h,"little")};function f(j,x,y,z){if(j<=15)return x^y^z;else if(j<=31)return x&y|~x&z;else if(j<=47)return(x|~y)^z;else if(j<=63)return x&z|y&~z;else return x^(y|~z)}function K(j){if(j<=15)return 0;else if(j<=31)return 1518500249;else if(j<=47)return 1859775393;else if(j<=63)return 2400959708;else return 2840853838;
}function Kh(j){if(j<=15)return 1352829926;else if(j<=31)return 1548603684;else if(j<=47)return 1836072691;else if(j<=63)return 2053994217;else return 0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":127}],131:[function(require,module,exports){var hash=require("../hash");var utils=hash.utils;var assert=utils.assert;var rotr32=utils.rotr32;var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=hash.common.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K;this.W=new Array(64)}utils.inherits(SHA256,BlockHash);exports.sha256=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(var i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h)};SHA256.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")};function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils.inherits(SHA224,SHA256);exports.sha224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h.slice(0,7),"big");else return utils.split32(this.h.slice(0,7),"big")};function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K;this.W=new Array(160)}utils.inherits(SHA512,BlockHash);exports.sha512=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var c0_hi=s0_512_hi(ah,al);var c0_lo=s0_512_lo(ah,al);var c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);var c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl)};SHA512.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")};function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils.inherits(SHA384,SHA512);exports.sha384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h.slice(0,12),"big");else return utils.split32(this.h.slice(0,12),"big")};function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}utils.inherits(SHA1,BlockHash);exports.sha1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(var i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d;d=c;c=rotl32(b,30);b=a;a=t}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e)};SHA1.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")};function ch32(x,y,z){return x&y^~x&z}function maj32(x,y,z){return x&y^x&z^y&z}function p32(x,y,z){return x^y^z}function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)}function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)}function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3}function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}function ft_1(s,x,y,z){if(s===0)return ch32(x,y,z);if(s===1||s===3)return p32(x,y,z);if(s===2)return maj32(x,y,z)}function ch64_hi(xh,xl,yh,yl,zh,zl){var r=xh&yh^~xh&zh;if(r<0)r+=4294967296;return r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;if(r<0)r+=4294967296;return r}function maj64_hi(xh,xl,yh,yl,zh,zl){var r=xh&yh^xh&zh^yh&zh;if(r<0)r+=4294967296;return r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;if(r<0)r+=4294967296;return r}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}},{"../hash":127}],132:[function(require,module,exports){var utils=exports;var inherits=require("inherits");function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg==="string"){if(!enc){for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;if(hi)res.push(hi,lo);else res.push(lo)}}else if(enc==="hex"){msg=msg.replace(/[^a-z0-9]+/gi,"");if(msg.length%2!==0)msg="0"+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}}else{for(var i=0;i<msg.length;i++)res[i]=msg[i]|0}return res}utils.toArray=toArray;function toHex(msg){var res="";for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toHex=toHex;function htonl(w){var res=w>>>24|w>>>8&65280|w<<8&16711680|(w&255)<<24;return res>>>0}utils.htonl=htonl;function toHex32(msg,endian){var res="";for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==="little")w=htonl(w);res+=zero8(w.toString(16))}return res}utils.toHex32=toHex32;function zero2(word){if(word.length===1)return"0"+word;else return word}utils.zero2=zero2;function zero8(word){if(word.length===7)return"0"+word;else if(word.length===6)return"00"+word;else if(word.length===5)return"000"+word;else if(word.length===4)return"0000"+word;else if(word.length===3)return"00000"+word;else if(word.length===2)return"000000"+word;else if(word.length===1)return"0000000"+word;else return word}utils.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==="big")w=msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3];else w=msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k];res[i]=w>>>0}return res}utils.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==="big"){res[k]=m>>>24;res[k+1]=m>>>16&255;res[k+2]=m>>>8&255;res[k+3]=m&255}else{res[k+3]=m>>>24;res[k+2]=m>>>16&255;res[k+1]=m>>>8&255;res[k]=m&255}}return res}utils.split32=split32;function rotr32(w,b){return w>>>b|w<<32-b}utils.rotr32=rotr32;function rotl32(w,b){return w<<b|w>>>32-b}utils.rotl32=rotl32;function sum32(a,b){return a+b>>>0}utils.sum32=sum32;function sum32_3(a,b,c){return a+b+c>>>0}utils.sum32_3=sum32_3;function sum32_4(a,b,c,d){return a+b+c+d>>>0}utils.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0}utils.sum32_5=sum32_5;function assert(cond,msg){if(!cond)throw new Error(msg||"Assertion failed")}utils.assert=assert;utils.inherits=inherits;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo}exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0}exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0}exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0}exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0}exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;lo=lo+el>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0}exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0}exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0}exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num}exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}exports.shr64_lo=shr64_lo},{inherits:136}],133:[function(require,module,exports){var http=require("http");var https=module.exports;for(var key in http){if(http.hasOwnProperty(key))https[key]=http[key]}https.request=function(params,cb){if(!params)params={};params.scheme="https";params.protocol="https:";return http.request.call(this,params,cb)}},{http:192}],134:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],135:[function(require,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],136:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],137:[function(require,module,exports){module.exports=function(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],138:[function(require,module,exports){var bn=require("bn.js");var brorand=require("brorand");function MillerRabin(rand){this.rand=rand||new brorand.Rand}module.exports=MillerRabin;MillerRabin.create=function create(rand){return new MillerRabin(rand)};MillerRabin.prototype._rand=function _rand(n){var len=n.bitLength();var buf=this.rand.generate(Math.ceil(len/8));buf[0]|=3;var mask=len&7;if(mask!==0)buf[buf.length-1]>>=7-mask;return new bn(buf)};MillerRabin.prototype.test=function test(n,k,cb){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)k=Math.max(1,len/48|0);var n1=n.subn(1);var n2=n1.subn(1);for(var s=0;!n1.testn(s);s++){}var d=n.shrn(s);var rn1=n1.toRed(red);var prime=true;for(;k>0;k--){var a=this._rand(n2);if(cb)cb(a);var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)return false;if(x.cmp(rn1)===0)break}if(i===s)return false}return prime};MillerRabin.prototype.getDivisor=function getDivisor(n,k){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)k=Math.max(1,len/48|0);var n1=n.subn(1);var n2=n1.subn(1);for(var s=0;!n1.testn(s);s++){}var d=n.shrn(s);var rn1=n1.toRed(red);for(;k>0;k--){var a=this._rand(n2);var g=n.gcd(a);if(g.cmpn(1)!==0)return g;var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)return x.fromRed().subn(1).gcd(n);if(x.cmp(rn1)===0)break}if(i===s){x=x.redSqr();return x.fromRed().subn(1).gcd(n)}}return false}},{"bn.js":54,brorand:55}],139:[function(require,module,exports){module.exports=assert;function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)}},{}],140:[function(require,module,exports){var fs=require("fs");function Options(defaults){var internalValues={};var values=this.value={};Object.keys(defaults).forEach(function(key){internalValues[key]=defaults[key];Object.defineProperty(values,key,{get:function(){return internalValues[key]},configurable:false,enumerable:true})});this.reset=function(){Object.keys(defaults).forEach(function(key){internalValues[key]=defaults[key]});return this};this.merge=function(options,required){options=options||{};if(Object.prototype.toString.call(required)==="[object Array]"){var missing=[];for(var i=0,l=required.length;i<l;++i){var key=required[i];if(!(key in options)){missing.push(key)}}if(missing.length>0){if(missing.length>1){throw new Error("options "+missing.slice(0,missing.length-1).join(", ")+" and "+missing[missing.length-1]+" must be defined")}else throw new Error("option "+missing[0]+" must be defined")}}Object.keys(options).forEach(function(key){if(key in internalValues){internalValues[key]=options[key]}});return this};this.copy=function(keys){var obj={};Object.keys(defaults).forEach(function(key){if(keys.indexOf(key)!==-1){obj[key]=values[key]}});return obj};this.read=function(filename,cb){if(typeof cb=="function"){var self=this;fs.readFile(filename,function(error,data){if(error)return cb(error);var conf=JSON.parse(data);self.merge(conf);cb()})}else{var conf=JSON.parse(fs.readFileSync(filename));this.merge(conf)}return this};this.isDefined=function(key){return typeof values[key]!="undefined"};this.isDefinedAndNonNull=function(key){return typeof values[key]!="undefined"&&values[key]!==null};Object.freeze(values);Object.freeze(this)}module.exports=Options},{fs:83}],141:[function(require,module,exports){"use strict";var TYPED_OK=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";exports.assign=function(obj){var sources=Array.prototype.slice.call(arguments,1);while(sources.length){var source=sources.shift();if(!source){continue}if(typeof source!=="object"){throw new TypeError(source+"must be non-object")}for(var p in source){if(source.hasOwnProperty(p)){obj[p]=source[p]}}}return obj};exports.shrinkBuf=function(buf,size){if(buf.length===size){return buf}if(buf.subarray){return buf.subarray(0,size)}buf.length=size;return buf};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray){dest.set(src.subarray(src_offs,src_offs+len),dest_offs);return}for(var i=0;i<len;i++){dest[dest_offs+i]=src[src_offs+i]}},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;len=0;for(i=0,l=chunks.length;i<l;i++){len+=chunks[i].length}result=new Uint8Array(len);pos=0;for(i=0,l=chunks.length;i<l;i++){chunk=chunks[i];result.set(chunk,pos);pos+=chunk.length}return result}};var fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++){dest[dest_offs+i]=src[src_offs+i]}},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){if(on){exports.Buf8=Uint8Array;exports.Buf16=Uint16Array;exports.Buf32=Int32Array;exports.assign(exports,fnTyped)}else{exports.Buf8=Array;exports.Buf16=Array;exports.Buf32=Array;exports.assign(exports,fnUntyped)}};exports.setTyped(TYPED_OK)},{}],142:[function(require,module,exports){"use strict";function adler32(adler,buf,len,pos){var s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;while(len!==0){n=len>2e3?2e3:len;len-=n;do{s1=s1+buf[pos++]|0;s2=s2+s1|0}while(--n);s1%=65521;s2%=65521}return s1|s2<<16|0}module.exports=adler32},{}],143:[function(require,module,exports){module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],144:[function(require,module,exports){"use strict";function makeTable(){var c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++){c=c&1?3988292384^c>>>1:c>>>1}table[n]=c}return table}var crcTable=makeTable();function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc=crc^-1;for(var i=pos;i<end;i++){crc=crc>>>8^t[(crc^buf[i])&255]}return crc^-1}module.exports=crc32},{}],145:[function(require,module,exports){"use strict";var utils=require("../utils/common");var trees=require("./trees");var adler32=require("./adler32");var crc32=require("./crc32");var msg=require("./messages");var Z_NO_FLUSH=0;var Z_PARTIAL_FLUSH=1;var Z_FULL_FLUSH=3;var Z_FINISH=4;var Z_BLOCK=5;var Z_OK=0;var Z_STREAM_END=1;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_BUF_ERROR=-5;var Z_DEFAULT_COMPRESSION=-1;var Z_FILTERED=1;var Z_HUFFMAN_ONLY=2;var Z_RLE=3;var Z_FIXED=4;var Z_DEFAULT_STRATEGY=0;var Z_UNKNOWN=2;var Z_DEFLATED=8;var MAX_MEM_LEVEL=9;var MAX_WBITS=15;var DEF_MEM_LEVEL=8;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var MIN_MATCH=3;var MAX_MATCH=258;var MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;var PRESET_DICT=32;var INIT_STATE=42;var EXTRA_STATE=69;var NAME_STATE=73;var COMMENT_STATE=91;var HCRC_STATE=103;var BUSY_STATE=113;var FINISH_STATE=666;var BS_NEED_MORE=1;var BS_BLOCK_DONE=2;var BS_FINISH_STARTED=3;var BS_FINISH_DONE=4;var OS_CODE=3;function err(strm,errorCode){strm.msg=msg[errorCode];return errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){var len=buf.length;while(--len>=0){buf[len]=0}}function flush_pending(strm){var s=strm.state;var len=s.pending;if(len>strm.avail_out){len=strm.avail_out}if(len===0){return}utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out);strm.next_out+=len;s.pending_out+=len;strm.total_out+=len;strm.avail_out-=len;s.pending-=len;if(s.pending===0){s.pending_out=0}}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last);s.block_start=s.strstart;flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255;s.pending_buf[s.pending++]=b&255}function read_buf(strm,buf,start,size){var len=strm.avail_in;if(len>size){len=size}if(len===0){return 0}strm.avail_in-=len;utils.arraySet(buf,strm.input,strm.next_in,len,start);if(strm.state.wrap===1){strm.adler=adler32(strm.adler,buf,len,start)}else if(strm.state.wrap===2){strm.adler=crc32(strm.adler,buf,len,start)}strm.next_in+=len;strm.total_in+=len;return len}function longest_match(s,cur_match){var chain_length=s.max_chain_length;var scan=s.strstart;var match;var len;var best_len=s.prev_length;var nice_match=s.nice_match;var limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0;var _win=s.window;var wmask=s.w_mask;var prev=s.prev;var strend=s.strstart+MAX_MATCH;var scan_end1=_win[scan+best_len-1];var scan_end=_win[scan+best_len];if(s.prev_length>=s.good_match){chain_length>>=2}if(nice_match>s.lookahead){nice_match=s.lookahead}do{match=cur_match;if(_win[match+best_len]!==scan_end||_win[match+best_len-1]!==scan_end1||_win[match]!==_win[scan]||_win[++match]!==_win[scan+1]){continue}scan+=2;match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);len=MAX_MATCH-(strend-scan);scan=strend-MAX_MATCH;if(len>best_len){s.match_start=cur_match;best_len=len;if(len>=nice_match){break}scan_end1=_win[scan+best_len-1];scan_end=_win[scan+best_len]}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);if(best_len<=s.lookahead){return best_len}return s.lookahead}function fill_window(s){var _w_size=s.w_size;var p,n,m,more,str;do{more=s.window_size-s.lookahead-s.strstart;if(s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0);s.match_start-=_w_size;s.strstart-=_w_size;s.block_start-=_w_size;n=s.hash_size;p=n;do{m=s.head[--p];s.head[p]=m>=_w_size?m-_w_size:0}while(--n);n=_w_size;p=n;do{m=s.prev[--p];s.prev[p]=m>=_w_size?m-_w_size:0}while(--n);more+=_w_size}if(s.strm.avail_in===0){break}n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more);s.lookahead+=n;if(s.lookahead+s.insert>=MIN_MATCH){str=s.strstart-s.insert;s.ins_h=s.window[str];s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;while(s.insert){s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask;s.prev[str&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=str;str++;s.insert--;if(s.lookahead+s.insert<MIN_MATCH){break}}}}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)}function deflate_stored(s,flush){var max_block_size=65535;if(max_block_size>s.pending_buf_size-5){max_block_size=s.pending_buf_size-5}for(;;){if(s.lookahead<=1){fill_window(s);if(s.lookahead===0&&flush===Z_NO_FLUSH){return BS_NEED_MORE}if(s.lookahead===0){break}}s.strstart+=s.lookahead;s.lookahead=0;var max_start=s.block_start+max_block_size;if(s.strstart===0||s.strstart>=max_start){s.lookahead=s.strstart-max_start;s.strstart=max_start;flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}if(s.strstart-s.block_start>=s.w_size-MIN_LOOKAHEAD){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.strstart>s.block_start){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_NEED_MORE}function deflate_fast(s,flush){var hash_head;var bflush;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH){return BS_NEED_MORE}if(s.lookahead===0){break}}hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}if(hash_head!==0&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD){s.match_length=longest_match(s,hash_head)}if(s.match_length>=MIN_MATCH){bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;if(s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do{s.strstart++;s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}while(--s.match_length!==0);s.strstart++}else{s.strstart+=s.match_length;s.match_length=0;s.ins_h=s.window[s.strstart];s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask}}else{bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++}if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE}function deflate_slow(s,flush){var hash_head;var bflush;var max_insert;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH){return BS_NEED_MORE}if(s.lookahead===0){break}}hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];
s.head[s.ins_h]=s.strstart}s.prev_length=s.match_length;s.prev_match=s.match_start;s.match_length=MIN_MATCH-1;if(hash_head!==0&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD){s.match_length=longest_match(s,hash_head);if(s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)){s.match_length=MIN_MATCH-1}}if(s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH;bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH);s.lookahead-=s.prev_length-1;s.prev_length-=2;do{if(++s.strstart<=max_insert){s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}}while(--s.prev_length!==0);s.match_available=0;s.match_length=MIN_MATCH-1;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}else if(s.match_available){bflush=trees._tr_tally(s,0,s.window[s.strstart-1]);if(bflush){flush_block_only(s,false)}s.strstart++;s.lookahead--;if(s.strm.avail_out===0){return BS_NEED_MORE}}else{s.match_available=1;s.strstart++;s.lookahead--}}if(s.match_available){bflush=trees._tr_tally(s,0,s.window[s.strstart-1]);s.match_available=0}s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE}function deflate_rle(s,flush){var bflush;var prev;var scan,strend;var _win=s.window;for(;;){if(s.lookahead<=MAX_MATCH){fill_window(s);if(s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH){return BS_NEED_MORE}if(s.lookahead===0){break}}s.match_length=0;if(s.lookahead>=MIN_MATCH&&s.strstart>0){scan=s.strstart-1;prev=_win[scan];if(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]){strend=s.strstart+MAX_MATCH;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan);if(s.match_length>s.lookahead){s.match_length=s.lookahead}}}if(s.match_length>=MIN_MATCH){bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;s.strstart+=s.match_length;s.match_length=0}else{bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++}if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE}function deflate_huff(s,flush){var bflush;for(;;){if(s.lookahead===0){fill_window(s);if(s.lookahead===0){if(flush===Z_NO_FLUSH){return BS_NEED_MORE}break}}s.match_length=0;bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE}var Config=function(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length;this.max_lazy=max_lazy;this.nice_length=nice_length;this.max_chain=max_chain;this.func=func};var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(s){s.window_size=2*s.w_size;zero(s.head);s.max_lazy_match=configuration_table[s.level].max_lazy;s.good_match=configuration_table[s.level].good_length;s.nice_match=configuration_table[s.level].nice_length;s.max_chain_length=configuration_table[s.level].max_chain;s.strstart=0;s.block_start=0;s.lookahead=0;s.insert=0;s.match_length=s.prev_length=MIN_MATCH-1;s.match_available=0;s.ins_h=0}function DeflateState(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z_DEFLATED;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new utils.Buf16(HEAP_SIZE*2);this.dyn_dtree=new utils.Buf16((2*D_CODES+1)*2);this.bl_tree=new utils.Buf16((2*BL_CODES+1)*2);zero(this.dyn_ltree);zero(this.dyn_dtree);zero(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new utils.Buf16(MAX_BITS+1);this.heap=new utils.Buf16(2*L_CODES+1);zero(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new utils.Buf16(2*L_CODES+1);zero(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function deflateResetKeep(strm){var s;if(!strm||!strm.state){return err(strm,Z_STREAM_ERROR)}strm.total_in=strm.total_out=0;strm.data_type=Z_UNKNOWN;s=strm.state;s.pending=0;s.pending_out=0;if(s.wrap<0){s.wrap=-s.wrap}s.status=s.wrap?INIT_STATE:BUSY_STATE;strm.adler=s.wrap===2?0:1;s.last_flush=Z_NO_FLUSH;trees._tr_init(s);return Z_OK}function deflateReset(strm){var ret=deflateResetKeep(strm);if(ret===Z_OK){lm_init(strm.state)}return ret}function deflateSetHeader(strm,head){if(!strm||!strm.state){return Z_STREAM_ERROR}if(strm.state.wrap!==2){return Z_STREAM_ERROR}strm.state.gzhead=head;return Z_OK}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm){return Z_STREAM_ERROR}var wrap=1;if(level===Z_DEFAULT_COMPRESSION){level=6}if(windowBits<0){wrap=0;windowBits=-windowBits}else if(windowBits>15){wrap=2;windowBits-=16}if(memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED){return err(strm,Z_STREAM_ERROR)}if(windowBits===8){windowBits=9}var s=new DeflateState;strm.state=s;s.strm=strm;s.wrap=wrap;s.gzhead=null;s.w_bits=windowBits;s.w_size=1<<s.w_bits;s.w_mask=s.w_size-1;s.hash_bits=memLevel+7;s.hash_size=1<<s.hash_bits;s.hash_mask=s.hash_size-1;s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH);s.window=new utils.Buf8(s.w_size*2);s.head=new utils.Buf16(s.hash_size);s.prev=new utils.Buf16(s.w_size);s.lit_bufsize=1<<memLevel+6;s.pending_buf_size=s.lit_bufsize*4;s.pending_buf=new utils.Buf8(s.pending_buf_size);s.d_buf=s.lit_bufsize>>1;s.l_buf=(1+2)*s.lit_bufsize;s.level=level;s.strategy=strategy;s.method=method;return deflateReset(strm)}function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(strm,flush){var old_flush,s;var beg,val;if(!strm||!strm.state||flush>Z_BLOCK||flush<0){return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR}s=strm.state;if(!strm.output||!strm.input&&strm.avail_in!==0||s.status===FINISH_STATE&&flush!==Z_FINISH){return err(strm,strm.avail_out===0?Z_BUF_ERROR:Z_STREAM_ERROR)}s.strm=strm;old_flush=s.last_flush;s.last_flush=flush;if(s.status===INIT_STATE){if(s.wrap===2){strm.adler=0;put_byte(s,31);put_byte(s,139);put_byte(s,8);if(!s.gzhead){put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0);put_byte(s,OS_CODE);s.status=BUSY_STATE}else{put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(!s.gzhead.extra?0:4)+(!s.gzhead.name?0:8)+(!s.gzhead.comment?0:16));put_byte(s,s.gzhead.time&255);put_byte(s,s.gzhead.time>>8&255);put_byte(s,s.gzhead.time>>16&255);put_byte(s,s.gzhead.time>>24&255);put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0);put_byte(s,s.gzhead.os&255);if(s.gzhead.extra&&s.gzhead.extra.length){put_byte(s,s.gzhead.extra.length&255);put_byte(s,s.gzhead.extra.length>>8&255)}if(s.gzhead.hcrc){strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)}s.gzindex=0;s.status=EXTRA_STATE}}else{var header=Z_DEFLATED+(s.w_bits-8<<4)<<8;var level_flags=-1;if(s.strategy>=Z_HUFFMAN_ONLY||s.level<2){level_flags=0}else if(s.level<6){level_flags=1}else if(s.level===6){level_flags=2}else{level_flags=3}header|=level_flags<<6;if(s.strstart!==0){header|=PRESET_DICT}header+=31-header%31;s.status=BUSY_STATE;putShortMSB(s,header);if(s.strstart!==0){putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&65535)}strm.adler=1}}if(s.status===EXTRA_STATE){if(s.gzhead.extra){beg=s.pending;while(s.gzindex<(s.gzhead.extra.length&65535)){if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)}flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){break}}put_byte(s,s.gzhead.extra[s.gzindex]&255);s.gzindex++}if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)}if(s.gzindex===s.gzhead.extra.length){s.gzindex=0;s.status=NAME_STATE}}else{s.status=NAME_STATE}}if(s.status===NAME_STATE){if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)}flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){val=1;break}}if(s.gzindex<s.gzhead.name.length){val=s.gzhead.name.charCodeAt(s.gzindex++)&255}else{val=0}put_byte(s,val)}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)}if(val===0){s.gzindex=0;s.status=COMMENT_STATE}}else{s.status=COMMENT_STATE}}if(s.status===COMMENT_STATE){if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)}flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){val=1;break}}if(s.gzindex<s.gzhead.comment.length){val=s.gzhead.comment.charCodeAt(s.gzindex++)&255}else{val=0}put_byte(s,val)}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)}if(val===0){s.status=HCRC_STATE}}else{s.status=HCRC_STATE}}if(s.status===HCRC_STATE){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size){flush_pending(strm)}if(s.pending+2<=s.pending_buf_size){put_byte(s,strm.adler&255);put_byte(s,strm.adler>>8&255);strm.adler=0;s.status=BUSY_STATE}}else{s.status=BUSY_STATE}}if(s.pending!==0){flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK}}else if(strm.avail_in===0&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH){return err(strm,Z_BUF_ERROR)}if(s.status===FINISH_STATE&&strm.avail_in!==0){return err(strm,Z_BUF_ERROR)}if(strm.avail_in!==0||s.lookahead!==0||flush!==Z_NO_FLUSH&&s.status!==FINISH_STATE){var bstate=s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if(bstate===BS_FINISH_STARTED||bstate===BS_FINISH_DONE){s.status=FINISH_STATE}if(bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED){if(strm.avail_out===0){s.last_flush=-1}return Z_OK}if(bstate===BS_BLOCK_DONE){if(flush===Z_PARTIAL_FLUSH){trees._tr_align(s)}else if(flush!==Z_BLOCK){trees._tr_stored_block(s,0,0,false);if(flush===Z_FULL_FLUSH){zero(s.head);if(s.lookahead===0){s.strstart=0;s.block_start=0;s.insert=0}}}flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK}}}if(flush!==Z_FINISH){return Z_OK}if(s.wrap<=0){return Z_STREAM_END}if(s.wrap===2){put_byte(s,strm.adler&255);put_byte(s,strm.adler>>8&255);put_byte(s,strm.adler>>16&255);put_byte(s,strm.adler>>24&255);put_byte(s,strm.total_in&255);put_byte(s,strm.total_in>>8&255);put_byte(s,strm.total_in>>16&255);put_byte(s,strm.total_in>>24&255)}else{putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&65535)}flush_pending(strm);if(s.wrap>0){s.wrap=-s.wrap}return s.pending!==0?Z_OK:Z_STREAM_END}function deflateEnd(strm){var status;if(!strm||!strm.state){return Z_STREAM_ERROR}status=strm.state.status;if(status!==INIT_STATE&&status!==EXTRA_STATE&&status!==NAME_STATE&&status!==COMMENT_STATE&&status!==HCRC_STATE&&status!==BUSY_STATE&&status!==FINISH_STATE){return err(strm,Z_STREAM_ERROR)}strm.state=null;return status===BUSY_STATE?err(strm,Z_DATA_ERROR):Z_OK}exports.deflateInit=deflateInit;exports.deflateInit2=deflateInit2;exports.deflateReset=deflateReset;exports.deflateResetKeep=deflateResetKeep;exports.deflateSetHeader=deflateSetHeader;exports.deflate=deflate;exports.deflateEnd=deflateEnd;exports.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":141,"./adler32":142,"./crc32":144,"./messages":149,"./trees":150}],146:[function(require,module,exports){"use strict";var BAD=30;var TYPE=12;module.exports=function inflate_fast(strm,start){var state;var _in;var last;var _out;var beg;var end;var dmax;var wsize;var whave;var wnext;var s_window;var hold;var bits;var lcode;var dcode;var lmask;var dmask;var here;var op;var len;var dist;var from;var from_source;var input,output;state=strm.state;_in=strm.next_in;input=strm.input;last=_in+(strm.avail_in-5);_out=strm.next_out;output=strm.output;beg=_out-(start-strm.avail_out);end=_out+(strm.avail_out-257);dmax=state.dmax;wsize=state.wsize;whave=state.whave;wnext=state.wnext;s_window=state.window;hold=state.hold;bits=state.bits;lcode=state.lencode;dcode=state.distcode;lmask=(1<<state.lenbits)-1;dmask=(1<<state.distbits)-1;top:do{if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8}here=lcode[hold&lmask];dolen:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=here>>>16&255;if(op===0){output[_out++]=here&65535}else if(op&16){len=here&65535;op&=15;if(op){if(bits<op){hold+=input[_in++]<<bits;bits+=8}len+=hold&(1<<op)-1;hold>>>=op;bits-=op}if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8}here=dcode[hold&dmask];dodist:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=here>>>16&255;if(op&16){dist=here&65535;op&=15;if(bits<op){hold+=input[_in++]<<bits;bits+=8;if(bits<op){hold+=input[_in++]<<bits;bits+=8}}dist+=hold&(1<<op)-1;if(dist>dmax){strm.msg="invalid distance too far back";state.mode=BAD;break top}hold>>>=op;bits-=op;op=_out-beg;if(dist>op){op=dist-op;if(op>whave){if(state.sane){strm.msg="invalid distance too far back";state.mode=BAD;break top}}from=0;from_source=s_window;if(wnext===0){from+=wsize-op;if(op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist;from_source=output}}else if(wnext<op){from+=wsize+wnext-op;op-=wnext;if(op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=0;if(wnext<len){op=wnext;len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist;from_source=output}}}else{from+=wnext-op;if(op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist;from_source=output}}while(len>2){output[_out++]=from_source[from++];output[_out++]=from_source[from++];output[_out++]=from_source[from++];len-=3}if(len){output[_out++]=from_source[from++];if(len>1){output[_out++]=from_source[from++]}}}else{from=_out-dist;do{output[_out++]=output[from++];output[_out++]=output[from++];output[_out++]=output[from++];len-=3}while(len>2);if(len){output[_out++]=output[from++];if(len>1){output[_out++]=output[from++]}}}}else if((op&64)===0){here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}else{strm.msg="invalid distance code";state.mode=BAD;break top}break}}else if((op&64)===0){here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}else if(op&32){state.mode=TYPE;break top}else{strm.msg="invalid literal/length code";state.mode=BAD;break top}break}}while(_in<last&&_out<end);len=bits>>3;_in-=len;bits-=len<<3;hold&=(1<<bits)-1;strm.next_in=_in;strm.next_out=_out;strm.avail_in=_in<last?5+(last-_in):5-(_in-last);strm.avail_out=_out<end?257+(end-_out):257-(_out-end);state.hold=hold;state.bits=bits;return}},{}],147:[function(require,module,exports){"use strict";var utils=require("../utils/common");var adler32=require("./adler32");var crc32=require("./crc32");var inflate_fast=require("./inffast");var inflate_table=require("./inftrees");var CODES=0;var LENS=1;var DISTS=2;var Z_FINISH=4;var Z_BLOCK=5;var Z_TREES=6;var Z_OK=0;var Z_STREAM_END=1;var Z_NEED_DICT=2;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_MEM_ERROR=-4;var Z_BUF_ERROR=-5;var Z_DEFLATED=8;var HEAD=1;var FLAGS=2;var TIME=3;var OS=4;var EXLEN=5;var EXTRA=6;var NAME=7;var COMMENT=8;var HCRC=9;var DICTID=10;var DICT=11;var TYPE=12;var TYPEDO=13;var STORED=14;var COPY_=15;var COPY=16;var TABLE=17;var LENLENS=18;var CODELENS=19;var LEN_=20;var LEN=21;var LENEXT=22;var DIST=23;var DISTEXT=24;var MATCH=25;var LIT=26;var CHECK=27;var LENGTH=28;var DONE=29;var BAD=30;var MEM=31;var SYNC=32;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var MAX_WBITS=15;var DEF_WBITS=MAX_WBITS;function ZSWAP32(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}function InflateState(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new utils.Buf16(320);this.work=new utils.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function inflateResetKeep(strm){var state;if(!strm||!strm.state){return Z_STREAM_ERROR}state=strm.state;strm.total_in=strm.total_out=state.total=0;strm.msg="";if(state.wrap){strm.adler=state.wrap&1}state.mode=HEAD;state.last=0;state.havedict=0;state.dmax=32768;state.head=null;state.hold=0;state.bits=0;state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS);state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS);state.sane=1;state.back=-1;return Z_OK}function inflateReset(strm){var state;if(!strm||!strm.state){return Z_STREAM_ERROR}state=strm.state;state.wsize=0;state.whave=0;state.wnext=0;return inflateResetKeep(strm)}function inflateReset2(strm,windowBits){var wrap;var state;if(!strm||!strm.state){return Z_STREAM_ERROR}state=strm.state;if(windowBits<0){wrap=0;windowBits=-windowBits}else{wrap=(windowBits>>4)+1;if(windowBits<48){windowBits&=15}}if(windowBits&&(windowBits<8||windowBits>15)){return Z_STREAM_ERROR}if(state.window!==null&&state.wbits!==windowBits){state.window=null}state.wrap=wrap;state.wbits=windowBits;return inflateReset(strm)}function inflateInit2(strm,windowBits){var ret;var state;if(!strm){return Z_STREAM_ERROR}state=new InflateState;strm.state=state;state.window=null;ret=inflateReset2(strm,windowBits);if(ret!==Z_OK){strm.state=null}return ret}function inflateInit(strm){return inflateInit2(strm,DEF_WBITS)}var virgin=true;var lenfix,distfix;function fixedtables(state){if(virgin){var sym;lenfix=new utils.Buf32(512);distfix=new utils.Buf32(32);sym=0;while(sym<144){state.lens[sym++]=8}while(sym<256){state.lens[sym++]=9}while(sym<280){state.lens[sym++]=7}while(sym<288){state.lens[sym++]=8}inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9});sym=0;while(sym<32){state.lens[sym++]=5}inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5});virgin=false}state.lencode=lenfix;state.lenbits=9;state.distcode=distfix;state.distbits=5}function updatewindow(strm,src,end,copy){var dist;var state=strm.state;if(state.window===null){state.wsize=1<<state.wbits;state.wnext=0;state.whave=0;state.window=new utils.Buf8(state.wsize)}if(copy>=state.wsize){utils.arraySet(state.window,src,end-state.wsize,state.wsize,0);state.wnext=0;state.whave=state.wsize}else{dist=state.wsize-state.wnext;if(dist>copy){dist=copy}utils.arraySet(state.window,src,end-copy,dist,state.wnext);copy-=dist;if(copy){utils.arraySet(state.window,src,end-copy,copy,0);state.wnext=copy;state.whave=state.wsize}else{state.wnext+=dist;if(state.wnext===state.wsize){state.wnext=0}if(state.whave<state.wsize){state.whave+=dist}}}return 0}function inflate(strm,flush){var state;var input,output;var next;var put;var have,left;var hold;var bits;var _in,_out;var copy;var from;var from_source;var here=0;var here_bits,here_op,here_val;var last_bits,last_op,last_val;var len;var ret;var hbuf=new utils.Buf8(4);var opts;var n;var order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&strm.avail_in!==0){return Z_STREAM_ERROR}state=strm.state;if(state.mode===TYPE){state.mode=TYPEDO}put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;_in=have;_out=left;ret=Z_OK;inf_leave:for(;;){switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.wrap&2&&hold===35615){state.check=0;hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0);hold=0;bits=0;state.mode=FLAGS;break}state.flags=0;if(state.head){state.head.done=false}if(!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg="incorrect header check";state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg="unknown compression method";state.mode=BAD;break}hold>>>=4;bits-=4;len=(hold&15)+8;if(state.wbits===0){state.wbits=len}else if(len>state.wbits){strm.msg="invalid window size";state.mode=BAD;break}state.dmax=1<<len;strm.adler=state.check=1;state.mode=hold&512?DICTID:TYPE;hold=0;bits=0;break;case FLAGS:while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.flags=hold;if((state.flags&255)!==Z_DEFLATED){strm.msg="unknown compression method";state.mode=BAD;break}if(state.flags&57344){strm.msg="unknown header flags set";state.mode=BAD;break}if(state.head){state.head.text=hold>>8&1}if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0)}hold=0;bits=0;state.mode=TIME;case TIME:while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.head){state.head.time=hold}if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;hbuf[2]=hold>>>16&255;hbuf[3]=hold>>>24&255;state.check=crc32(state.check,hbuf,4,0)}hold=0;bits=0;state.mode=OS;case OS:while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.head){state.head.xflags=hold&255;state.head.os=hold>>8}if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0)}hold=0;bits=0;state.mode=EXLEN;case EXLEN:if(state.flags&1024){while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.length=hold;if(state.head){state.head.extra_len=hold}if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0)}hold=0;bits=0}else if(state.head){state.head.extra=null}state.mode=EXTRA;case EXTRA:if(state.flags&1024){copy=state.length;if(copy>have){copy=have}if(copy){if(state.head){len=state.head.extra_len-state.length;if(!state.head.extra){state.head.extra=new Array(state.head.extra_len)}utils.arraySet(state.head.extra,input,next,copy,len)}if(state.flags&512){state.check=crc32(state.check,input,copy,next)}have-=copy;next+=copy;state.length-=copy}if(state.length){break inf_leave}}state.length=0;state.mode=NAME;case NAME:if(state.flags&2048){if(have===0){break inf_leave}copy=0;do{len=input[next+copy++];if(state.head&&len&&state.length<65536){state.head.name+=String.fromCharCode(len)}}while(len&&copy<have);if(state.flags&512){state.check=crc32(state.check,input,copy,next)}have-=copy;next+=copy;if(len){break inf_leave}}else if(state.head){state.head.name=null}state.length=0;state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0){break inf_leave}copy=0;do{len=input[next+copy++];if(state.head&&len&&state.length<65536){state.head.comment+=String.fromCharCode(len)}}while(len&&copy<have);if(state.flags&512){state.check=crc32(state.check,input,copy,next)}have-=copy;next+=copy;if(len){break inf_leave}}else if(state.head){state.head.comment=null}state.mode=HCRC;case HCRC:if(state.flags&512){while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(hold!==(state.check&65535)){strm.msg="header crc mismatch";state.mode=BAD;break}hold=0;bits=0}if(state.head){state.head.hcrc=state.flags>>9&1;state.head.done=true}strm.adler=state.check=0;state.mode=TYPE;break;case DICTID:while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}strm.adler=state.check=ZSWAP32(hold);hold=0;bits=0;state.mode=DICT;case DICT:if(state.havedict===0){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;return Z_NEED_DICT}strm.adler=state.check=1;state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES){break inf_leave}case TYPEDO:if(state.last){hold>>>=bits&7;bits-=bits&7;state.mode=CHECK;break}while(bits<3){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.last=hold&1;hold>>>=1;bits-=1;switch(hold&3){case 0:state.mode=STORED;break;case 1:fixedtables(state);state.mode=LEN_;if(flush===Z_TREES){hold>>>=2;bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg="invalid block type";state.mode=BAD}hold>>>=2;bits-=2;break;case STORED:hold>>>=bits&7;bits-=bits&7;while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if((hold&65535)!==(hold>>>16^65535)){strm.msg="invalid stored block lengths";state.mode=BAD;break}state.length=hold&65535;hold=0;bits=0;state.mode=COPY_;if(flush===Z_TREES){break inf_leave}case COPY_:state.mode=COPY;case COPY:copy=state.length;if(copy){if(copy>have){copy=have}if(copy>left){copy=left}if(copy===0){break inf_leave}utils.arraySet(output,input,next,copy,put);have-=copy;next+=copy;left-=copy;put+=copy;state.length-=copy;break}state.mode=TYPE;break;case TABLE:while(bits<14){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.nlen=(hold&31)+257;hold>>>=5;bits-=5;state.ndist=(hold&31)+1;hold>>>=5;bits-=5;state.ncode=(hold&15)+4;hold>>>=4;bits-=4;if(state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols";state.mode=BAD;break}state.have=0;state.mode=LENLENS;case LENLENS:while(state.have<state.ncode){while(bits<3){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.lens[order[state.have++]]=hold&7;hold>>>=3;bits-=3}while(state.have<19){state.lens[order[state.have++]]=0}state.lencode=state.lendyn;state.lenbits=7;opts={bits:state.lenbits};ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg="invalid code lengths set";state.mode=BAD;break}state.have=0;state.mode=CODELENS;case CODELENS:while(state.have<state.nlen+state.ndist){for(;;){here=state.lencode[hold&(1<<state.lenbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(here_val<16){hold>>>=here_bits;bits-=here_bits;state.lens[state.have++]=here_val}else{if(here_val===16){n=here_bits+2;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;if(state.have===0){strm.msg="invalid bit length repeat";state.mode=BAD;break}len=state.lens[state.have-1];copy=3+(hold&3);hold>>>=2;bits-=2}else if(here_val===17){n=here_bits+3;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;len=0;copy=3+(hold&7);hold>>>=3;bits-=3}else{n=here_bits+7;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;len=0;copy=11+(hold&127);hold>>>=7;bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat";state.mode=BAD;break}while(copy--){state.lens[state.have++]=len}}}if(state.mode===BAD){break}if(state.lens[256]===0){strm.msg="invalid code -- missing end-of-block";state.mode=BAD;break}state.lenbits=9;opts={bits:state.lenbits};ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg="invalid literal/lengths set";state.mode=BAD;break}state.distbits=6;state.distcode=state.distdyn;opts={bits:state.distbits};ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts);state.distbits=opts.bits;if(ret){strm.msg="invalid distances set";state.mode=BAD;break}state.mode=LEN_;if(flush===Z_TREES){break inf_leave}case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;inflate_fast(strm,_out);put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;if(state.mode===TYPE){state.back=-1}break}state.back=0;for(;;){here=state.lencode[hold&(1<<state.lenbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(here_op&&(here_op&240)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(last_bits+here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=last_bits;bits-=last_bits;state.back+=last_bits}hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;state.length=here_val;if(here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1;state.mode=TYPE;break}if(here_op&64){strm.msg="invalid literal/length code";state.mode=BAD;break}state.extra=here_op&15;state.mode=LENEXT;case LENEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.length+=hold&(1<<state.extra)-1;hold>>>=state.extra;bits-=state.extra;state.back+=state.extra}state.was=state.length;state.mode=DIST;case DIST:for(;;){here=state.distcode[hold&(1<<state.distbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if((here_op&240)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(last_bits+here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=last_bits;bits-=last_bits;state.back+=last_bits}hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;if(here_op&64){strm.msg="invalid distance code";state.mode=BAD;break}state.offset=here_val;state.extra=here_op&15;state.mode=DISTEXT;case DISTEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.offset+=hold&(1<<state.extra)-1;hold>>>=state.extra;bits-=state.extra;state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back";state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0){break inf_leave}copy=_out-left;if(state.offset>copy){copy=state.offset-copy;if(copy>state.whave){if(state.sane){strm.msg="invalid distance too far back";state.mode=BAD;break;
}}if(copy>state.wnext){copy-=state.wnext;from=state.wsize-copy}else{from=state.wnext-copy}if(copy>state.length){copy=state.length}from_source=state.window}else{from_source=output;from=put-state.offset;copy=state.length}if(copy>left){copy=left}left-=copy;state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);if(state.length===0){state.mode=LEN}break;case LIT:if(left===0){break inf_leave}output[put++]=state.length;left--;state.mode=LEN;break;case CHECK:if(state.wrap){while(bits<32){if(have===0){break inf_leave}have--;hold|=input[next++]<<bits;bits+=8}_out-=left;strm.total_out+=_out;state.total+=_out;if(_out){strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)}_out=left;if((state.flags?hold:ZSWAP32(hold))!==state.check){strm.msg="incorrect data check";state.mode=BAD;break}hold=0;bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(hold!==(state.total&4294967295)){strm.msg="incorrect length check";state.mode=BAD;break}hold=0;bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}}strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;if(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH)){if(updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)){state.mode=MEM;return Z_MEM_ERROR}}_in-=strm.avail_in;_out-=strm.avail_out;strm.total_in+=_in;strm.total_out+=_out;state.total+=_out;if(state.wrap&&_out){strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)}strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0);if((_in===0&&_out===0||flush===Z_FINISH)&&ret===Z_OK){ret=Z_BUF_ERROR}return ret}function inflateEnd(strm){if(!strm||!strm.state){return Z_STREAM_ERROR}var state=strm.state;if(state.window){state.window=null}strm.state=null;return Z_OK}function inflateGetHeader(strm,head){var state;if(!strm||!strm.state){return Z_STREAM_ERROR}state=strm.state;if((state.wrap&2)===0){return Z_STREAM_ERROR}state.head=head;head.done=false;return Z_OK}exports.inflateReset=inflateReset;exports.inflateReset2=inflateReset2;exports.inflateResetKeep=inflateResetKeep;exports.inflateInit=inflateInit;exports.inflateInit2=inflateInit2;exports.inflate=inflate;exports.inflateEnd=inflateEnd;exports.inflateGetHeader=inflateGetHeader;exports.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":141,"./adler32":142,"./crc32":144,"./inffast":146,"./inftrees":148}],148:[function(require,module,exports){"use strict";var utils=require("../utils/common");var MAXBITS=15;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var CODES=0;var LENS=1;var DISTS=2;var lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(type,lens,lens_index,codes,table,table_index,work,opts){var bits=opts.bits;var len=0;var sym=0;var min=0,max=0;var root=0;var curr=0;var drop=0;var left=0;var used=0;var huff=0;var incr;var fill;var low;var mask;var next;var base=null;var base_index=0;var end;var count=new utils.Buf16(MAXBITS+1);var offs=new utils.Buf16(MAXBITS+1);var extra=null;var extra_index=0;var here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++){count[len]=0}for(sym=0;sym<codes;sym++){count[lens[lens_index+sym]]++}root=bits;for(max=MAXBITS;max>=1;max--){if(count[max]!==0){break}}if(root>max){root=max}if(max===0){table[table_index++]=1<<24|64<<16|0;table[table_index++]=1<<24|64<<16|0;opts.bits=1;return 0}for(min=1;min<max;min++){if(count[min]!==0){break}}if(root<min){root=min}left=1;for(len=1;len<=MAXBITS;len++){left<<=1;left-=count[len];if(left<0){return-1}}if(left>0&&(type===CODES||max!==1)){return-1}offs[1]=0;for(len=1;len<MAXBITS;len++){offs[len+1]=offs[len]+count[len]}for(sym=0;sym<codes;sym++){if(lens[lens_index+sym]!==0){work[offs[lens[lens_index+sym]]++]=sym}}if(type===CODES){base=extra=work;end=19}else if(type===LENS){base=lbase;base_index-=257;extra=lext;extra_index-=257;end=256}else{base=dbase;extra=dext;end=-1}huff=0;sym=0;len=min;next=table_index;curr=root;drop=0;low=-1;used=1<<root;mask=used-1;if(type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS){return 1}var i=0;for(;;){i++;here_bits=len-drop;if(work[sym]<end){here_op=0;here_val=work[sym]}else if(work[sym]>end){here_op=extra[extra_index+work[sym]];here_val=base[base_index+work[sym]]}else{here_op=32+64;here_val=0}incr=1<<len-drop;fill=1<<curr;min=fill;do{fill-=incr;table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(fill!==0);incr=1<<len-1;while(huff&incr){incr>>=1}if(incr!==0){huff&=incr-1;huff+=incr}else{huff=0}sym++;if(--count[len]===0){if(len===max){break}len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){if(drop===0){drop=root}next+=min;curr=len-drop;left=1<<curr;while(curr+drop<max){left-=count[curr+drop];if(left<=0){break}curr++;left<<=1}used+=1<<curr;if(type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS){return 1}low=huff&mask;table[low]=root<<24|curr<<16|next-table_index|0}}if(huff!==0){table[next+huff]=len-drop<<24|64<<16|0}opts.bits=root;return 0}},{"../utils/common":141}],149:[function(require,module,exports){"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],150:[function(require,module,exports){"use strict";var utils=require("../utils/common");var Z_FIXED=4;var Z_BINARY=0;var Z_TEXT=1;var Z_UNKNOWN=2;function zero(buf){var len=buf.length;while(--len>=0){buf[len]=0}}var STORED_BLOCK=0;var STATIC_TREES=1;var DYN_TREES=2;var MIN_MATCH=3;var MAX_MATCH=258;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var Buf_size=16;var MAX_BL_BITS=7;var END_BLOCK=256;var REP_3_6=16;var REPZ_3_10=17;var REPZ_11_138=18;var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var DIST_CODE_LEN=512;var static_ltree=new Array((L_CODES+2)*2);zero(static_ltree);var static_dtree=new Array(D_CODES*2);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);var StaticTreeDesc=function(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree;this.extra_bits=extra_bits;this.extra_base=extra_base;this.elems=elems;this.max_length=max_length;this.has_stree=static_tree&&static_tree.length};var static_l_desc;var static_d_desc;var static_bl_desc;var TreeDesc=function(dyn_tree,stat_desc){this.dyn_tree=dyn_tree;this.max_code=0;this.stat_desc=stat_desc};function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=w&255;s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){if(s.bi_valid>Buf_size-length){s.bi_buf|=value<<s.bi_valid&65535;put_short(s,s.bi_buf);s.bi_buf=value>>Buf_size-s.bi_valid;s.bi_valid+=length-Buf_size}else{s.bi_buf|=value<<s.bi_valid&65535;s.bi_valid+=length}}function send_code(s,c,tree){send_bits(s,tree[c*2],tree[c*2+1])}function bi_reverse(code,len){var res=0;do{res|=code&1;code>>>=1;res<<=1}while(--len>0);return res>>>1}function bi_flush(s){if(s.bi_valid===16){put_short(s,s.bi_buf);s.bi_buf=0;s.bi_valid=0}else if(s.bi_valid>=8){s.pending_buf[s.pending++]=s.bi_buf&255;s.bi_buf>>=8;s.bi_valid-=8}}function gen_bitlen(s,desc){var tree=desc.dyn_tree;var max_code=desc.max_code;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var extra=desc.stat_desc.extra_bits;var base=desc.stat_desc.extra_base;var max_length=desc.stat_desc.max_length;var h;var n,m;var bits;var xbits;var f;var overflow=0;for(bits=0;bits<=MAX_BITS;bits++){s.bl_count[bits]=0}tree[s.heap[s.heap_max]*2+1]=0;for(h=s.heap_max+1;h<HEAP_SIZE;h++){n=s.heap[h];bits=tree[tree[n*2+1]*2+1]+1;if(bits>max_length){bits=max_length;overflow++}tree[n*2+1]=bits;if(n>max_code){continue}s.bl_count[bits]++;xbits=0;if(n>=base){xbits=extra[n-base]}f=tree[n*2];s.opt_len+=f*(bits+xbits);if(has_stree){s.static_len+=f*(stree[n*2+1]+xbits)}}if(overflow===0){return}do{bits=max_length-1;while(s.bl_count[bits]===0){bits--}s.bl_count[bits]--;s.bl_count[bits+1]+=2;s.bl_count[max_length]--;overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits--){n=s.bl_count[bits];while(n!==0){m=s.heap[--h];if(m>max_code){continue}if(tree[m*2+1]!==bits){s.opt_len+=(bits-tree[m*2+1])*tree[m*2];tree[m*2+1]=bits}n--}}}function gen_codes(tree,max_code,bl_count){var next_code=new Array(MAX_BITS+1);var code=0;var bits;var n;for(bits=1;bits<=MAX_BITS;bits++){next_code[bits]=code=code+bl_count[bits-1]<<1}for(n=0;n<=max_code;n++){var len=tree[n*2+1];if(len===0){continue}tree[n*2]=bi_reverse(next_code[len]++,len)}}function tr_static_init(){var n;var bits;var length;var code;var dist;var bl_count=new Array(MAX_BITS+1);length=0;for(code=0;code<LENGTH_CODES-1;code++){base_length[code]=length;for(n=0;n<1<<extra_lbits[code];n++){_length_code[length++]=code}}_length_code[length-1]=code;dist=0;for(code=0;code<16;code++){base_dist[code]=dist;for(n=0;n<1<<extra_dbits[code];n++){_dist_code[dist++]=code}}dist>>=7;for(;code<D_CODES;code++){base_dist[code]=dist<<7;for(n=0;n<1<<extra_dbits[code]-7;n++){_dist_code[256+dist++]=code}}for(bits=0;bits<=MAX_BITS;bits++){bl_count[bits]=0}n=0;while(n<=143){static_ltree[n*2+1]=8;n++;bl_count[8]++}while(n<=255){static_ltree[n*2+1]=9;n++;bl_count[9]++}while(n<=279){static_ltree[n*2+1]=7;n++;bl_count[7]++}while(n<=287){static_ltree[n*2+1]=8;n++;bl_count[8]++}gen_codes(static_ltree,L_CODES+1,bl_count);for(n=0;n<D_CODES;n++){static_dtree[n*2+1]=5;static_dtree[n*2]=bi_reverse(n,5)}static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS);static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS);static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(s){var n;for(n=0;n<L_CODES;n++){s.dyn_ltree[n*2]=0}for(n=0;n<D_CODES;n++){s.dyn_dtree[n*2]=0}for(n=0;n<BL_CODES;n++){s.bl_tree[n*2]=0}s.dyn_ltree[END_BLOCK*2]=1;s.opt_len=s.static_len=0;s.last_lit=s.matches=0}function bi_windup(s){if(s.bi_valid>8){put_short(s,s.bi_buf)}else if(s.bi_valid>0){s.pending_buf[s.pending++]=s.bi_buf}s.bi_buf=0;s.bi_valid=0}function copy_block(s,buf,len,header){bi_windup(s);if(header){put_short(s,len);put_short(s,~len)}utils.arraySet(s.pending_buf,s.window,buf,len,s.pending);s.pending+=len}function smaller(tree,n,m,depth){var _n2=n*2;var _m2=m*2;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){var v=s.heap[k];var j=k<<1;while(j<=s.heap_len){if(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)){j++}if(smaller(tree,v,s.heap[j],s.depth)){break}s.heap[k]=s.heap[j];k=j;j<<=1}s.heap[k]=v}function compress_block(s,ltree,dtree){var dist;var lc;var lx=0;var code;var extra;if(s.last_lit!==0){do{dist=s.pending_buf[s.d_buf+lx*2]<<8|s.pending_buf[s.d_buf+lx*2+1];lc=s.pending_buf[s.l_buf+lx];lx++;if(dist===0){send_code(s,lc,ltree)}else{code=_length_code[lc];send_code(s,code+LITERALS+1,ltree);extra=extra_lbits[code];if(extra!==0){lc-=base_length[code];send_bits(s,lc,extra)}dist--;code=d_code(dist);send_code(s,code,dtree);extra=extra_dbits[code];if(extra!==0){dist-=base_dist[code];send_bits(s,dist,extra)}}}while(lx<s.last_lit)}send_code(s,END_BLOCK,ltree)}function build_tree(s,desc){var tree=desc.dyn_tree;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var elems=desc.stat_desc.elems;var n,m;var max_code=-1;var node;s.heap_len=0;s.heap_max=HEAP_SIZE;for(n=0;n<elems;n++){if(tree[n*2]!==0){s.heap[++s.heap_len]=max_code=n;s.depth[n]=0}else{tree[n*2+1]=0}}while(s.heap_len<2){node=s.heap[++s.heap_len]=max_code<2?++max_code:0;tree[node*2]=1;s.depth[node]=0;s.opt_len--;if(has_stree){s.static_len-=stree[node*2+1]}}desc.max_code=max_code;for(n=s.heap_len>>1;n>=1;n--){pqdownheap(s,tree,n)}node=elems;do{n=s.heap[1];s.heap[1]=s.heap[s.heap_len--];pqdownheap(s,tree,1);m=s.heap[1];s.heap[--s.heap_max]=n;s.heap[--s.heap_max]=m;tree[node*2]=tree[n*2]+tree[m*2];s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1;tree[n*2+1]=tree[m*2+1]=node;s.heap[1]=node++;pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1];gen_bitlen(s,desc);gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3}tree[(max_code+1)*2+1]=65535;for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen){continue}else if(count<min_count){s.bl_tree[curlen*2]+=count}else if(curlen!==0){if(curlen!==prevlen){s.bl_tree[curlen*2]++}s.bl_tree[REP_3_6*2]++}else if(count<=10){s.bl_tree[REPZ_3_10*2]++}else{s.bl_tree[REPZ_11_138*2]++}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}}function send_tree(s,tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3}for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen){continue}else if(count<min_count){do{send_code(s,curlen,s.bl_tree)}while(--count!==0)}else if(curlen!==0){if(curlen!==prevlen){send_code(s,curlen,s.bl_tree);count--}send_code(s,REP_3_6,s.bl_tree);send_bits(s,count-3,2)}else if(count<=10){send_code(s,REPZ_3_10,s.bl_tree);send_bits(s,count-3,3)}else{send_code(s,REPZ_11_138,s.bl_tree);send_bits(s,count-11,7)}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}}function build_bl_tree(s){var max_blindex;scan_tree(s,s.dyn_ltree,s.l_desc.max_code);scan_tree(s,s.dyn_dtree,s.d_desc.max_code);build_tree(s,s.bl_desc);for(max_blindex=BL_CODES-1;max_blindex>=3;max_blindex--){if(s.bl_tree[bl_order[max_blindex]*2+1]!==0){break}}s.opt_len+=3*(max_blindex+1)+5+5+4;return max_blindex}function send_all_trees(s,lcodes,dcodes,blcodes){var rank;send_bits(s,lcodes-257,5);send_bits(s,dcodes-1,5);send_bits(s,blcodes-4,4);for(rank=0;rank<blcodes;rank++){send_bits(s,s.bl_tree[bl_order[rank]*2+1],3)}send_tree(s,s.dyn_ltree,lcodes-1);send_tree(s,s.dyn_dtree,dcodes-1)}function detect_data_type(s){var black_mask=4093624447;var n;for(n=0;n<=31;n++,black_mask>>>=1){if(black_mask&1&&s.dyn_ltree[n*2]!==0){return Z_BINARY}}if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0){return Z_TEXT}for(n=32;n<LITERALS;n++){if(s.dyn_ltree[n*2]!==0){return Z_TEXT}}return Z_BINARY}var static_init_done=false;function _tr_init(s){if(!static_init_done){tr_static_init();static_init_done=true}s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc);s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc);s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc);s.bi_buf=0;s.bi_valid=0;init_block(s)}function _tr_stored_block(s,buf,stored_len,last){send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3);copy_block(s,buf,stored_len,true)}function _tr_align(s){send_bits(s,STATIC_TREES<<1,3);send_code(s,END_BLOCK,static_ltree);bi_flush(s)}function _tr_flush_block(s,buf,stored_len,last){var opt_lenb,static_lenb;var max_blindex=0;if(s.level>0){if(s.strm.data_type===Z_UNKNOWN){s.strm.data_type=detect_data_type(s)}build_tree(s,s.l_desc);build_tree(s,s.d_desc);max_blindex=build_bl_tree(s);opt_lenb=s.opt_len+3+7>>>3;static_lenb=s.static_len+3+7>>>3;if(static_lenb<=opt_lenb){opt_lenb=static_lenb}}else{opt_lenb=static_lenb=stored_len+5}if(stored_len+4<=opt_lenb&&buf!==-1){_tr_stored_block(s,buf,stored_len,last)}else if(s.strategy===Z_FIXED||static_lenb===opt_lenb){send_bits(s,(STATIC_TREES<<1)+(last?1:0),3);compress_block(s,static_ltree,static_dtree)}else{send_bits(s,(DYN_TREES<<1)+(last?1:0),3);send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1);compress_block(s,s.dyn_ltree,s.dyn_dtree)}init_block(s);if(last){bi_windup(s)}}function _tr_tally(s,dist,lc){s.pending_buf[s.d_buf+s.last_lit*2]=dist>>>8&255;s.pending_buf[s.d_buf+s.last_lit*2+1]=dist&255;s.pending_buf[s.l_buf+s.last_lit]=lc&255;s.last_lit++;if(dist===0){s.dyn_ltree[lc*2]++}else{s.matches++;dist--;s.dyn_ltree[(_length_code[lc]+LITERALS+1)*2]++;s.dyn_dtree[d_code(dist)*2]++}return s.last_lit===s.lit_bufsize-1}exports._tr_init=_tr_init;exports._tr_stored_block=_tr_stored_block;exports._tr_flush_block=_tr_flush_block;exports._tr_tally=_tr_tally;exports._tr_align=_tr_align},{"../utils/common":141}],151:[function(require,module,exports){"use strict";function ZStream(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}module.exports=ZStream},{}],152:[function(require,module,exports){module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],153:[function(require,module,exports){var asn1=require("asn1.js");var RSAPrivateKey=asn1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())});var PrivateKeyInfo=asn1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});exports.DSAPrivateKey=DSAPrivateKey;exports.DSAparam=asn1.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});exports.signature=asn1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"asn1.js":37}],154:[function(require,module,exports){(function(Buffer){var findProc=/Proc-Type: 4,ENCRYPTED\r?\nDEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\r?\n\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n/m;var startRegex=/^-----BEGIN (.*) KEY-----\r?\n/m;var fullRegex=/^-----BEGIN (.*) KEY-----\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n-----END \1 KEY-----$/m;var evp=require("evp_bytestokey");var ciphers=require("browserify-aes");module.exports=function(okey,password){var key=okey.toString();var match=key.match(findProc);var decrypted;if(!match){var match2=key.match(fullRegex);decrypted=new Buffer(match2[2].replace(/\r?\n/g,""),"base64")}else{var suite="aes"+match[1];var iv=new Buffer(match[2],"hex");var cipherText=new Buffer(match[3].replace(/\r?\n/g,""),"base64");var cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key;var out=[];var cipher=ciphers.createDecipheriv(suite,cipherKey,iv);out.push(cipher.update(cipherText));out.push(cipher.final());decrypted=Buffer.concat(out)}var tag=key.match(startRegex)[1]+" KEY";return{tag:tag,data:decrypted}}}).call(this,require("buffer").Buffer)},{"browserify-aes":59,buffer:85,evp_bytestokey:126}],155:[function(require,module,exports){(function(Buffer){var asn1=require("./asn1");var aesid=require("./aesid.json");var fixProc=require("./fixProc");var ciphers=require("browserify-aes");var compat=require("pbkdf2");module.exports=parseKeys;function parseKeys(buffer){var password;if(typeof buffer==="object"&&!Buffer.isBuffer(buffer)){password=buffer.passphrase;buffer=buffer.key}if(typeof buffer==="string"){buffer=new Buffer(buffer)}var stripped=fixProc(buffer,password);var type=stripped.tag;var data=stripped.data;var subtype,ndata;switch(type){case"PUBLIC KEY":ndata=asn1.PublicKey.decode(data,"der");subtype=ndata.algorithm.algorithm.join(".");switch(subtype){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":ndata.subjectPrivateKey=ndata.subjectPublicKey;return{type:"ec",data:ndata};case"1.2.840.10040.4.1":ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,"der");return{type:"dsa",data:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}throw new Error("unknown key type "+type);case"ENCRYPTED PRIVATE KEY":data=asn1.EncryptedPrivateKey.decode(data,"der");data=decrypt(data,password);case"PRIVATE KEY":ndata=asn1.PrivateKey.decode(data,"der");subtype=ndata.algorithm.algorithm.join(".");switch(subtype){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,"der");return{type:"dsa",params:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}throw new Error("unknown key type "+type);case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(data,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(data,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(data,"der")};case"EC PRIVATE KEY":data=asn1.ECPrivateKey.decode(data,"der");return{curve:data.parameters.value,privateKey:data.privateKey};default:throw new Error("unknown key type "+type)}}parseKeys.signature=asn1.signature;function decrypt(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt;var iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10);var algo=aesid[data.algorithm.decrypt.cipher.algo.join(".")];var iv=data.algorithm.decrypt.cipher.iv;var cipherText=data.subjectPrivateKey;var keylen=parseInt(algo.split("-")[1],10)/8;var key=compat.pbkdf2Sync(password,salt,iters,keylen);var cipher=ciphers.createDecipheriv(algo,key,iv);var out=[];out.push(cipher.update(cipherText));out.push(cipher.final());return Buffer.concat(out)}}).call(this,require("buffer").Buffer)},{"./aesid.json":152,"./asn1":153,"./fixProc":154,"browserify-aes":59,buffer:85,pbkdf2:157}],156:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:159}],157:[function(require,module,exports){(function(Buffer){var createHmac=require("create-hmac");var MAX_ALLOC=Math.pow(2,30)-1;exports.pbkdf2=pbkdf2;function pbkdf2(password,salt,iterations,keylen,digest,callback){if(typeof digest==="function"){callback=digest;digest=undefined}if(typeof callback!=="function"){throw new Error("No callback provided to pbkdf2")}var result=pbkdf2Sync(password,salt,iterations,keylen,digest);setTimeout(function(){callback(undefined,result)})}exports.pbkdf2Sync=pbkdf2Sync;function pbkdf2Sync(password,salt,iterations,keylen,digest){if(typeof iterations!=="number"){throw new TypeError("Iterations not a number")}if(iterations<0){throw new TypeError("Bad iterations")}if(typeof keylen!=="number"){throw new TypeError("Key length not a number")}if(keylen<0||keylen>MAX_ALLOC){throw new TypeError("Bad key length")}digest=digest||"sha1";if(!Buffer.isBuffer(password))password=new Buffer(password,"binary");if(!Buffer.isBuffer(salt))salt=new Buffer(salt,"binary");var hLen;var l=1;var DK=new Buffer(keylen);var block1=new Buffer(salt.length+4);salt.copy(block1,0,0,salt.length);var r;var T;for(var i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);var U=createHmac(digest,password).update(block1).digest();if(!hLen){hLen=U.length;T=new Buffer(hLen);l=Math.ceil(keylen/hLen);r=keylen-(l-1)*hLen}U.copy(T,0,0,hLen);for(var j=1;j<iterations;j++){U=createHmac(digest,password).update(U).digest();for(var k=0;k<hLen;k++){T[k]^=U[k]}}var destPos=(i-1)*hLen;var len=i===l?r:hLen;T.copy(DK,destPos,0,len)}return DK}}).call(this,require("buffer").Buffer)},{buffer:85,"create-hmac":96}],158:[function(require,module,exports){(function(process){"use strict";if(!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0){module.exports=nextTick}else{module.exports=process.nextTick}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=="function"){throw new TypeError('"callback" argument must be a function')}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1)});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3)});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i]}return process.nextTick(function afterTick(){fn.apply(null,args)})}}}).call(this,require("_process"))},{_process:159}],159:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;
process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],160:[function(require,module,exports){exports.publicEncrypt=require("./publicEncrypt");exports.privateDecrypt=require("./privateDecrypt");exports.privateEncrypt=function privateEncrypt(key,buf){return exports.publicEncrypt(key,buf,true)};exports.publicDecrypt=function publicDecrypt(key,buf){return exports.privateDecrypt(key,buf,true)}},{"./privateDecrypt":162,"./publicEncrypt":163}],161:[function(require,module,exports){(function(Buffer){var createHash=require("create-hash");module.exports=function(seed,len){var t=new Buffer("");var i=0,c;while(t.length<len){c=i2ops(i++);t=Buffer.concat([t,createHash("sha1").update(seed).update(c).digest()])}return t.slice(0,len)};function i2ops(c){var out=new Buffer(4);out.writeUInt32BE(c,0);return out}}).call(this,require("buffer").Buffer)},{buffer:85,"create-hash":93}],162:[function(require,module,exports){(function(Buffer){var parseKeys=require("parse-asn1");var mgf=require("./mgf");var xor=require("./xor");var bn=require("bn.js");var crt=require("browserify-rsa");var createHash=require("create-hash");var withPublic=require("./withPublic");module.exports=function privateDecrypt(private_key,enc,reverse){var padding;if(private_key.padding){padding=private_key.padding}else if(reverse){padding=1}else{padding=4}var key=parseKeys(private_key);var k=key.modulus.byteLength();if(enc.length>k||new bn(enc).cmp(key.modulus)>=0){throw new Error("decryption error")}var msg;if(reverse){msg=withPublic(new bn(enc),key)}else{msg=crt(enc,key)}var zBuffer=new Buffer(k-msg.length);zBuffer.fill(0);msg=Buffer.concat([zBuffer,msg],k);if(padding===4){return oaep(key,msg)}else if(padding===1){return pkcs1(key,msg,reverse)}else if(padding===3){return msg}else{throw new Error("unknown padding")}};function oaep(key,msg){var n=key.modulus;var k=key.modulus.byteLength();var mLen=msg.length;var iHash=createHash("sha1").update(new Buffer("")).digest();var hLen=iHash.length;var hLen2=2*hLen;if(msg[0]!==0){throw new Error("decryption error")}var maskedSeed=msg.slice(1,hLen+1);var maskedDb=msg.slice(hLen+1);var seed=xor(maskedSeed,mgf(maskedDb,hLen));var db=xor(maskedDb,mgf(seed,k-hLen-1));if(compare(iHash,db.slice(0,hLen))){throw new Error("decryption error")}var i=hLen;while(db[i]===0){i++}if(db[i++]!==1){throw new Error("decryption error")}return db.slice(i)}function pkcs1(key,msg,reverse){var p1=msg.slice(0,2);var i=2;var status=0;while(msg[i++]!==0){if(i>=msg.length){status++;break}}var ps=msg.slice(2,i-1);var p2=msg.slice(i-1,i);if(p1.toString("hex")!=="0002"&&!reverse||p1.toString("hex")!=="0001"&&reverse){status++}if(ps.length<8){status++}if(status){throw new Error("decryption error")}return msg.slice(i)}function compare(a,b){a=new Buffer(a);b=new Buffer(b);var dif=0;var len=a.length;if(a.length!==b.length){dif++;len=Math.min(a.length,b.length)}var i=-1;while(++i<len){dif+=a[i]^b[i]}return dif}}).call(this,require("buffer").Buffer)},{"./mgf":161,"./withPublic":164,"./xor":165,"bn.js":54,"browserify-rsa":75,buffer:85,"create-hash":93,"parse-asn1":155}],163:[function(require,module,exports){(function(Buffer){var parseKeys=require("parse-asn1");var randomBytes=require("randombytes");var createHash=require("create-hash");var mgf=require("./mgf");var xor=require("./xor");var bn=require("bn.js");var withPublic=require("./withPublic");var crt=require("browserify-rsa");var constants={RSA_PKCS1_OAEP_PADDING:4,RSA_PKCS1_PADDIN:1,RSA_NO_PADDING:3};module.exports=function publicEncrypt(public_key,msg,reverse){var padding;if(public_key.padding){padding=public_key.padding}else if(reverse){padding=1}else{padding=4}var key=parseKeys(public_key);var paddedMsg;if(padding===4){paddedMsg=oaep(key,msg)}else if(padding===1){paddedMsg=pkcs1(key,msg,reverse)}else if(padding===3){paddedMsg=new bn(msg);if(paddedMsg.cmp(key.modulus)>=0){throw new Error("data too long for modulus")}}else{throw new Error("unknown padding")}if(reverse){return crt(paddedMsg,key)}else{return withPublic(paddedMsg,key)}};function oaep(key,msg){var k=key.modulus.byteLength();var mLen=msg.length;var iHash=createHash("sha1").update(new Buffer("")).digest();var hLen=iHash.length;var hLen2=2*hLen;if(mLen>k-hLen2-2){throw new Error("message too long")}var ps=new Buffer(k-mLen-hLen2-2);ps.fill(0);var dblen=k-hLen-1;var seed=randomBytes(hLen);var maskedDb=xor(Buffer.concat([iHash,ps,new Buffer([1]),msg],dblen),mgf(seed,dblen));var maskedSeed=xor(seed,mgf(maskedDb,hLen));return new bn(Buffer.concat([new Buffer([0]),maskedSeed,maskedDb],k))}function pkcs1(key,msg,reverse){var mLen=msg.length;var k=key.modulus.byteLength();if(mLen>k-11){throw new Error("message too long")}var ps;if(reverse){ps=new Buffer(k-mLen-3);ps.fill(255)}else{ps=nonZero(k-mLen-3)}return new bn(Buffer.concat([new Buffer([0,reverse?1:2]),ps,new Buffer([0]),msg],k))}function nonZero(len,crypto){var out=new Buffer(len);var i=0;var cache=randomBytes(len*2);var cur=0;var num;while(i<len){if(cur===cache.length){cache=randomBytes(len*2);cur=0}num=cache[cur++];if(num){out[i++]=num}}return out}}).call(this,require("buffer").Buffer)},{"./mgf":161,"./withPublic":164,"./xor":165,"bn.js":54,"browserify-rsa":75,buffer:85,"create-hash":93,"parse-asn1":155,randombytes:170}],164:[function(require,module,exports){(function(Buffer){var bn=require("bn.js");function withPublic(paddedMsg,key){return new Buffer(paddedMsg.toRed(bn.mont(key.modulus)).redPow(new bn(key.publicExponent)).fromRed().toArray())}module.exports=withPublic}).call(this,require("buffer").Buffer)},{"bn.js":54,buffer:85}],165:[function(require,module,exports){module.exports=function xor(a,b){var len=a.length;var i=-1;while(++i<len){a[i]^=b[i]}return a}},{}],166:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],167:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],168:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],169:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":167,"./encode":168}],170:[function(require,module,exports){(function(process,global,Buffer){"use strict";function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){module.exports=randomBytes}else{module.exports=oldBrowser}function randomBytes(size,cb){if(size>65536)throw new Error("requested too many random bytes");var rawBytes=new global.Uint8Array(size);if(size>0){crypto.getRandomValues(rawBytes)}var bytes=new Buffer(rawBytes.buffer);if(typeof cb==="function"){return process.nextTick(function(){cb(null,bytes)})}return bytes}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{_process:159,buffer:85}],171:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":172}],172:[function(require,module,exports){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key)}return keys};module.exports=Duplex;var processNextTick=require("process-nextick-args");var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");util.inherits(Duplex,Readable);var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;processNextTick(onEndNT,this)}function onEndNT(self){self.end()}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}},{"./_stream_readable":174,"./_stream_writable":176,"core-util-is":91,inherits:136,"process-nextick-args":158}],173:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":175,"core-util-is":91,inherits:136}],174:[function(require,module,exports){(function(process){"use strict";module.exports=Readable;var processNextTick=require("process-nextick-args");var isArray=require("isarray");var Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events");var EElistenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream;(function(){try{Stream=require("st"+"ream")}catch(_){}finally{if(!Stream)Stream=require("events").EventEmitter}})();var Buffer=require("buffer").Buffer;var util=require("core-util-is");util.inherits=require("inherits");var debugUtil=require("util");var debug=undefined;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function(){}}var StringDecoder;util.inherits(Readable,Stream);var Duplex;function ReadableState(options,stream){Duplex=Duplex||require("./_stream_duplex");options=options||{};this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}var Duplex;function Readable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options&&typeof options.read==="function")this._read=options.read;Stream.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(!state.objectMode&&typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=new Buffer(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};Readable.prototype.isPaused=function(){return this._readableState.flowing===false};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(chunk===null){state.reading=false;onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{var skipAdd;if(state.decoder&&!addToFront&&!encoding){chunk=state.decoder.write(chunk);skipAdd=!state.objectMode&&chunk.length===0}if(!addToFront)state.reading=false;if(!skipAdd){if(state.flowing&&state.length===0&&!state.sync){stream.emit("data",chunk);stream.read(0)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}}maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(n===null||isNaN(n)){if(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length}if(n<=0)return 0;if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n>state.length){if(!state.ended){state.needReadable=true;return 0}else{return state.length}}return n}Readable.prototype.read=function(n){debug("read",n);var state=this._readableState;var nOrig=n;if(typeof n!=="number"||n>0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false}if(doRead&&!state.reading)n=howMuchToRead(nOrig,state);var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}state.length-=n;if(state.length===0&&!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended&&state.length===0)endReadable(this);if(ret!==null)this.emit("data",ret);return ret};function chunkInvalid(state,chunk){var er=null;if(!Buffer.isBuffer(chunk)&&typeof chunk!=="string"&&chunk!==null&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;if(state.sync)processNextTick(emitReadable_,stream);else emitReadable_(stream)}}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;processNextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)processNextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){debug("onunpipe");if(readable===src){cleanup()}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);if(false===ret){if(state.pipesCount===1&&state.pipes[0]===dest&&src.listenerCount("data")===1&&!cleanedUp){debug("false write response, pause",src._readableState.awaitDrain);src._readableState.awaitDrain++}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)dest.emit("error",er)}if(!dest._events||!dest._events.error)dest.on("error",onerror);else if(isArray(dest._events.error))dest._events.error.unshift(onerror);else dest._events.error=[onerror,dest._events.error];function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var _i=0;_i<len;_i++){dests[_i].emit("unpipe",this)}return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"&&false!==this._readableState.flowing){this.resume()}if(ev==="readable"&&!this._readableState.endEmitted){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){processNextTick(nReadingNextTick,this)}else if(state.length){emitReadable(this,state)}}}return res};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=true;resume(this,state)}return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;processNextTick(resume_,stream,state)}}function resume_(stream,state){if(!state.reading){debug("resume read 0");stream.read(0)}state.resumeScheduled=false;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){debug("pause");this._readableState.flowing=false;this.emit("pause")}return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);if(state.flowing){do{var chunk=stream.read()}while(null!==chunk&&state.flowing)}}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){if(stringMode)ret=list.join("");else if(list.length===1)ret=list[0];else ret=Buffer.concat(list,length);list.length=0}else{if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n)}else if(n===list[0].length){ret=list.shift()}else{if(stringMode)ret="";else ret=new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=Math.min(n-c,buf.length);if(stringMode)ret+=buf.slice(0,cpy);else buf.copy(ret,c,0,cpy);if(cpy<buf.length)list[0]=buf.slice(cpy);else list.shift();c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");if(!state.endEmitted){state.ended=true;processNextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this,require("_process"))},{"./_stream_duplex":172,_process:159,buffer:85,"core-util-is":91,events:125,inherits:136,isarray:177,"process-nextick-args":158,"string_decoder/":196,util:56}],175:[function(require,module,exports){"use strict";module.exports=Transform;var Duplex=require("./_stream_duplex");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(Transform,Duplex);function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(data!==null&&data!==undefined)stream.push(data);cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(er){done(stream,er)});else done(stream)})}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;
if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}},{"./_stream_duplex":172,"core-util-is":91,inherits:136}],176:[function(require,module,exports){(function(process){"use strict";module.exports=Writable;var processNextTick=require("process-nextick-args");var asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var internalUtil={deprecate:require("util-deprecate")};var Stream;(function(){try{Stream=require("st"+"ream")}catch(_){}finally{if(!Stream)Stream=require("events").EventEmitter}})();var Buffer=require("buffer").Buffer;util.inherits(Writable,Stream);function nop(){}function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}var Duplex;function WritableState(options,stream){Duplex=Duplex||require("./_stream_duplex");options=options||{};this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);this.corkedRequestsFree.next=new CorkedRequest(this)}WritableState.prototype.getBuffer=function writableStateGetBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")})}catch(_){}})();var Duplex;function Writable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev}Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er);processNextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=true;if(!Buffer.isBuffer(chunk)&&typeof chunk!=="string"&&chunk!==null&&chunk!==undefined&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er);processNextTick(cb,er);valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(typeof encoding==="function"){cb=encoding;encoding=null}if(Buffer.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){var state=this._writableState;state.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=new Buffer(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest=new WriteReq(chunk,encoding,cb);if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync)processNextTick(cb,er);else cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){asyncWrite(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;while(entry){buffer[count]=entry;entry=entry.next;count+=1}doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;state.corkedRequestsFree=holder.next;holder.next=null}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequestCount=0;state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function prefinish(stream,state){if(!state.prefinished){state.prefinished=true;stream.emit("prefinish")}}function finishMaybe(stream,state){var need=needFinish(state);if(need){if(state.pendingcb===0){prefinish(stream,state);state.finished=true;stream.emit("finish")}else{prefinish(stream,state)}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)processNextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(err){var entry=_this.entry;_this.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}if(state.corkedRequestsFree){state.corkedRequestsFree.next=_this}else{state.corkedRequestsFree=_this}}}}).call(this,require("_process"))},{"./_stream_duplex":172,_process:159,buffer:85,"core-util-is":91,events:125,inherits:136,"process-nextick-args":158,"util-deprecate":204}],177:[function(require,module,exports){arguments[4][86][0].apply(exports,arguments)},{dup:86}],178:[function(require,module,exports){module.exports=require("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":173}],179:[function(require,module,exports){(function(process){var Stream=function(){try{return require("st"+"ream")}catch(_){}}();exports=module.exports=require("./lib/_stream_readable.js");exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js");if(!process.browser&&process.env.READABLE_STREAM==="disable"&&Stream){module.exports=Stream}}).call(this,require("_process"))},{"./lib/_stream_duplex.js":172,"./lib/_stream_passthrough.js":173,"./lib/_stream_readable.js":174,"./lib/_stream_transform.js":175,"./lib/_stream_writable.js":176,_process:159}],180:[function(require,module,exports){module.exports=require("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":175}],181:[function(require,module,exports){module.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":176}],182:[function(require,module,exports){(function(Buffer){var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var hl=[0,1518500249,1859775393,2400959708,2840853838];var hr=[1352829926,1548603684,1836072691,2053994217,0];function bytesToWords(bytes){var words=[];for(var i=0,b=0;i<bytes.length;i++,b+=8){words[b>>>5]|=bytes[i]<<24-b%32}return words}function wordsToBytes(words){var bytes=[];for(var b=0;b<words.length*32;b+=8){bytes.push(words[b>>>5]>>>24-b%32&255)}return bytes}function processBlock(H,M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var al,bl,cl,dl,el;var ar,br,cr,dr,er;ar=al=H[0];br=bl=H[1];cr=cl=H[2];dr=dl=H[3];er=el=H[4];var t;for(i=0;i<80;i+=1){t=al+M[offset+zl[i]]|0;if(i<16){t+=f1(bl,cl,dl)+hl[0]}else if(i<32){t+=f2(bl,cl,dl)+hl[1]}else if(i<48){t+=f3(bl,cl,dl)+hl[2]}else if(i<64){t+=f4(bl,cl,dl)+hl[3]}else{t+=f5(bl,cl,dl)+hl[4]}t=t|0;t=rotl(t,sl[i]);t=t+el|0;al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=t;t=ar+M[offset+zr[i]]|0;if(i<16){t+=f5(br,cr,dr)+hr[0]}else if(i<32){t+=f4(br,cr,dr)+hr[1]}else if(i<48){t+=f3(br,cr,dr)+hr[2]}else if(i<64){t+=f2(br,cr,dr)+hr[3]}else{t+=f1(br,cr,dr)+hr[4]}t=t|0;t=rotl(t,sr[i]);t=t+er|0;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=t}t=H[1]+cl+dr|0;H[1]=H[2]+dl+er|0;H[2]=H[3]+el+ar|0;H[3]=H[4]+al+br|0;H[4]=H[0]+bl+cr|0;H[0]=t}function f1(x,y,z){return x^y^z}function f2(x,y,z){return x&y|~x&z}function f3(x,y,z){return(x|~y)^z}function f4(x,y,z){return x&z|y&~z}function f5(x,y,z){return x^(y|~z)}function rotl(x,n){return x<<n|x>>>32-n}function ripemd160(message){var H=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof message==="string"){message=new Buffer(message,"utf8")}var m=bytesToWords(message);var nBitsLeft=message.length*8;var nBitsTotal=message.length*8;m[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;m[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&16711935|(nBitsTotal<<24|nBitsTotal>>>8)&4278255360;for(var i=0;i<m.length;i+=16){processBlock(H,m,i)}for(i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}var digestbytes=wordsToBytes(H);return new Buffer(digestbytes)}module.exports=ripemd160}).call(this,require("buffer").Buffer)},{buffer:85}],183:[function(require,module,exports){(function(Buffer){function Hash(blockSize,finalSize){this._block=new Buffer(blockSize);this._finalSize=finalSize;this._blockSize=blockSize;this._len=0;this._s=0}Hash.prototype.update=function(data,enc){if(typeof data==="string"){enc=enc||"utf8";data=new Buffer(data,enc)}var l=this._len+=data.length;var s=this._s||0;var f=0;var buffer=this._block;while(s<l){var t=Math.min(data.length,f+this._blockSize-s%this._blockSize);var ch=t-f;for(var i=0;i<ch;i++){buffer[s%this._blockSize+i]=data[i+f]}s+=ch;f+=ch;if(s%this._blockSize===0){this._update(buffer)}}this._s=s;return this};Hash.prototype.digest=function(enc){var l=this._len*8;this._block[this._len%this._blockSize]=128;this._block.fill(0,this._len%this._blockSize+1);if(l%(this._blockSize*8)>=this._finalSize*8){this._update(this._block);this._block.fill(0)}this._block.writeInt32BE(l,this._blockSize-4);var hash=this._update(this._block)||this._hash();return enc?hash.toString(enc):hash};Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")};module.exports=Hash}).call(this,require("buffer").Buffer)},{buffer:85}],184:[function(require,module,exports){var exports=module.exports=function SHA(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+" is not supported (we accept pull requests)");return new Algorithm};exports.sha=require("./sha");exports.sha1=require("./sha1");exports.sha224=require("./sha224");exports.sha256=require("./sha256");exports.sha384=require("./sha384");exports.sha512=require("./sha512")},{"./sha":185,"./sha1":186,"./sha224":187,"./sha256":188,"./sha384":189,"./sha512":190}],185:[function(require,module,exports){(function(Buffer){var inherits=require("inherits");var Hash=require("./hash");var K=[1518500249,1859775393,2400959708|0,3395469782|0];var W=new Array(80);function Sha(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha,Hash);Sha.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){if(s===0)return b&c|~b&d;if(s===2)return b&c|b&d|c&d;return b^c^d}Sha.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<80;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d;d=c;c=rotl30(b);b=a;a=t}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0};Sha.prototype._hash=function(){var H=new Buffer(20);H.writeInt32BE(this._a|0,0);H.writeInt32BE(this._b|0,4);H.writeInt32BE(this._c|0,8);H.writeInt32BE(this._d|0,12);H.writeInt32BE(this._e|0,16);return H};module.exports=Sha}).call(this,require("buffer").Buffer)},{"./hash":183,buffer:85,inherits:136}],186:[function(require,module,exports){(function(Buffer){var inherits=require("inherits");var Hash=require("./hash");var K=[1518500249,1859775393,2400959708|0,3395469782|0];var W=new Array(80);function Sha1(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha1,Hash);Sha1.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl1(num){return num<<1|num>>>31}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){if(s===0)return b&c|~b&d;if(s===2)return b&c|b&d|c&d;return b^c^d}Sha1.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<80;++i)W[i]=rotl1(W[i-3]^W[i-8]^W[i-14]^W[i-16]);for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d;d=c;c=rotl30(b);b=a;a=t}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0};Sha1.prototype._hash=function(){var H=new Buffer(20);H.writeInt32BE(this._a|0,0);H.writeInt32BE(this._b|0,4);H.writeInt32BE(this._c|0,8);H.writeInt32BE(this._d|0,12);H.writeInt32BE(this._e|0,16);return H};module.exports=Sha1}).call(this,require("buffer").Buffer)},{"./hash":183,buffer:85,inherits:136}],187:[function(require,module,exports){(function(Buffer){var inherits=require("inherits");var Sha256=require("./sha256");var Hash=require("./hash");var W=new Array(64);function Sha224(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha224,Sha256);Sha224.prototype.init=function(){this._a=3238371032;this._b=914150663;this._c=812702999;this._d=4144912697;this._e=4290775857;this._f=1750603025;this._g=1694076839;this._h=3204075428;return this};Sha224.prototype._hash=function(){var H=new Buffer(28);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);return H};module.exports=Sha224}).call(this,require("buffer").Buffer)},{"./hash":183,"./sha256":188,buffer:85,inherits:136}],188:[function(require,module,exports){(function(Buffer){var inherits=require("inherits");var Hash=require("./hash");var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var W=new Array(64);function Sha256(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha256,Hash);Sha256.prototype.init=function(){this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;return this};function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}Sha256.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;var f=this._f|0;var g=this._g|0;var h=this._h|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<64;++i)W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0;for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0;var T2=sigma0(a)+maj(a,b,c)|0;h=g;g=f;f=e;e=d+T1|0;d=c;c=b;b=a;a=T1+T2|0}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;this._f=f+this._f|0;this._g=g+this._g|0;this._h=h+this._h|0};Sha256.prototype._hash=function(){var H=new Buffer(32);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);H.writeInt32BE(this._h,28);return H};module.exports=Sha256}).call(this,require("buffer").Buffer)},{"./hash":183,buffer:85,inherits:136}],189:[function(require,module,exports){(function(Buffer){var inherits=require("inherits");var SHA512=require("./sha512");var Hash=require("./hash");var W=new Array(160);function Sha384(){this.init();this._w=W;Hash.call(this,128,112)}inherits(Sha384,SHA512);Sha384.prototype.init=function(){this._ah=3418070365;this._bh=1654270250;this._ch=2438529370;this._dh=355462360;this._eh=1731405415;this._fh=2394180231;this._gh=3675008525;this._hh=1203062813;this._al=3238371032;this._bl=914150663;this._cl=812702999;this._dl=4144912697;this._el=4290775857;this._fl=1750603025;this._gl=1694076839;this._hl=3204075428;return this};Sha384.prototype._hash=function(){var H=new Buffer(48);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);return H};module.exports=Sha384}).call(this,require("buffer").Buffer)},{"./hash":183,"./sha512":190,buffer:85,inherits:136}],190:[function(require,module,exports){(function(Buffer){var inherits=require("inherits");var Hash=require("./hash");var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var W=new Array(160);function Sha512(){this.init();this._w=W;Hash.call(this,128,112)}inherits(Sha512,Hash);Sha512.prototype.init=function(){this._ah=1779033703;this._bh=3144134277;this._ch=1013904242;this._dh=2773480762;this._eh=1359893119;this._fh=2600822924;this._gh=528734635;this._hh=1541459225;this._al=4089235720;this._bl=2227873595;this._cl=4271175723;this._dl=1595750129;this._el=2917565137;this._fl=725511199;this._gl=4215389547;this._hl=327033209;return this};function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return a>>>0<b>>>0?1:0}Sha512.prototype._update=function(M){var W=this._w;var ah=this._ah|0;var bh=this._bh|0;var ch=this._ch|0;var dh=this._dh|0;var eh=this._eh|0;var fh=this._fh|0;var gh=this._gh|0;var hh=this._hh|0;var al=this._al|0;var bl=this._bl|0;var cl=this._cl|0;var dl=this._dl|0;var el=this._el|0;var fl=this._fl|0;var gl=this._gl|0;var hl=this._hl|0;for(var i=0;i<32;i+=2){W[i]=M.readInt32BE(i*4);W[i+1]=M.readInt32BE(i*4+4)}for(;i<160;i+=2){var xh=W[i-15*2];var xl=W[i-15*2+1];var gamma0=Gamma0(xh,xl);var gamma0l=Gamma0l(xl,xh);xh=W[i-2*2];xl=W[i-2*2+1];var gamma1=Gamma1(xh,xl);var gamma1l=Gamma1l(xl,xh);var Wi7h=W[i-7*2];var Wi7l=W[i-7*2+1];var Wi16h=W[i-16*2];var Wi16l=W[i-16*2+1];var Wil=gamma0l+Wi7l|0;var Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wil=Wil+gamma1l|0;Wih=Wih+gamma1+getCarry(Wil,gamma1l)|0;Wil=Wil+Wi16l|0;Wih=Wih+Wi16h+getCarry(Wil,Wi16l)|0;W[i]=Wih;W[i+1]=Wil}for(var j=0;j<160;j+=2){Wih=W[j];Wil=W[j+1];var majh=maj(ah,bh,ch);var majl=maj(al,bl,cl);var sigma0h=sigma0(ah,al);var sigma0l=sigma0(al,ah);var sigma1h=sigma1(eh,el);var sigma1l=sigma1(el,eh);var Kih=K[j];var Kil=K[j+1];var chh=Ch(eh,fh,gh);var chl=Ch(el,fl,gl);var t1l=hl+sigma1l|0;var t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1l=t1l+chl|0;t1h=t1h+chh+getCarry(t1l,chl)|0;t1l=t1l+Kil|0;t1h=t1h+Kih+getCarry(t1l,Kil)|0;t1l=t1l+Wil|0;t1h=t1h+Wih+getCarry(t1l,Wil)|0;var t2l=sigma0l+majl|0;var t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;el=dl+t1l|0;eh=dh+t1h+getCarry(el,dl)|0;dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;al=t1l+t2l|0;ah=t1h+t2h+getCarry(al,t1l)|0}this._al=this._al+al|0;this._bl=this._bl+bl|0;this._cl=this._cl+cl|0;this._dl=this._dl+dl|0;this._el=this._el+el|0;this._fl=this._fl+fl|0;this._gl=this._gl+gl|0;this._hl=this._hl+hl|0;this._ah=this._ah+ah+getCarry(this._al,al)|0;this._bh=this._bh+bh+getCarry(this._bl,bl)|0;this._ch=this._ch+ch+getCarry(this._cl,cl)|0;this._dh=this._dh+dh+getCarry(this._dl,dl)|0;this._eh=this._eh+eh+getCarry(this._el,el)|0;this._fh=this._fh+fh+getCarry(this._fl,fl)|0;this._gh=this._gh+gh+getCarry(this._gl,gl)|0;this._hh=this._hh+hh+getCarry(this._hl,hl)|0};Sha512.prototype._hash=function(){var H=new Buffer(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);writeInt64BE(this._gh,this._gl,48);writeInt64BE(this._hh,this._hl,56);return H};module.exports=Sha512}).call(this,require("buffer").Buffer)},{"./hash":183,buffer:85,inherits:136}],191:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;var inherits=require("inherits");inherits(Stream,EE);Stream.Readable=require("readable-stream/readable.js");Stream.Writable=require("readable-stream/writable.js");Stream.Duplex=require("readable-stream/duplex.js");Stream.Transform=require("readable-stream/transform.js");Stream.PassThrough=require("readable-stream/passthrough.js");Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EE.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest}},{events:125,inherits:136,"readable-stream/duplex.js":171,"readable-stream/passthrough.js":178,"readable-stream/readable.js":179,"readable-stream/transform.js":180,"readable-stream/writable.js":181}],192:[function(require,module,exports){(function(global){var ClientRequest=require("./lib/request");var extend=require("xtend");var statusCodes=require("builtin-status-codes");var url=require("url");var http=exports;http.request=function(opts,cb){if(typeof opts==="string")opts=url.parse(opts);else opts=extend(opts);var defaultProtocol=global.location.protocol.search(/^https?:$/)===-1?"http:":"";var protocol=opts.protocol||defaultProtocol;var host=opts.hostname||opts.host;var port=opts.port;var path=opts.path||"/";if(host&&host.indexOf(":")!==-1)host="["+host+"]";opts.url=(host?protocol+"//"+host:"")+(port?":"+port:"")+path;opts.method=(opts.method||"GET").toUpperCase();opts.headers=opts.headers||{};var req=new ClientRequest(opts);if(cb)req.on("response",cb);return req};http.get=function get(opts,cb){var req=http.request(opts,cb);req.end();return req};http.Agent=function(){};http.Agent.defaultMaxSockets=4;http.STATUS_CODES=statusCodes;http.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./lib/request":194,"builtin-status-codes":89,url:200,xtend:223}],193:[function(require,module,exports){(function(global){exports.fetch=isFunction(global.fetch)&&isFunction(global.ReadableByteStream);exports.blobConstructor=false;try{new Blob([new ArrayBuffer(1)]);exports.blobConstructor=true}catch(e){}var xhr=new global.XMLHttpRequest;xhr.open("GET",global.location.host?"/":"https://example.com");function checkTypeSupport(type){try{xhr.responseType=type;return xhr.responseType===type}catch(e){}return false}var haveArrayBuffer=typeof global.ArrayBuffer!=="undefined";var haveSlice=haveArrayBuffer&&isFunction(global.ArrayBuffer.prototype.slice);exports.arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer");exports.msstream=!exports.fetch&&haveSlice&&checkTypeSupport("ms-stream");exports.mozchunkedarraybuffer=!exports.fetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer");exports.overrideMimeType=isFunction(xhr.overrideMimeType);exports.vbArray=isFunction(global.VBArray);function isFunction(value){return typeof value==="function"}xhr=null}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});
},{}],194:[function(require,module,exports){(function(process,global,Buffer){var capability=require("./capability");var inherits=require("inherits");var response=require("./response");var stream=require("readable-stream");var toArrayBuffer=require("to-arraybuffer");var IncomingMessage=response.IncomingMessage;var rStates=response.readyStates;function decideMode(preferBinary){if(capability.fetch){return"fetch"}else if(capability.mozchunkedarraybuffer){return"moz-chunked-arraybuffer"}else if(capability.msstream){return"ms-stream"}else if(capability.arraybuffer&&preferBinary){return"arraybuffer"}else if(capability.vbArray&&preferBinary){return"text:vbarray"}else{return"text"}}var ClientRequest=module.exports=function(opts){var self=this;stream.Writable.call(self);self._opts=opts;self._body=[];self._headers={};if(opts.auth)self.setHeader("Authorization","Basic "+new Buffer(opts.auth).toString("base64"));Object.keys(opts.headers).forEach(function(name){self.setHeader(name,opts.headers[name])});var preferBinary;if(opts.mode==="prefer-streaming"){preferBinary=false}else if(opts.mode==="allow-wrong-content-type"){preferBinary=!capability.overrideMimeType}else if(!opts.mode||opts.mode==="default"||opts.mode==="prefer-fast"){preferBinary=true}else{throw new Error("Invalid value for opts.mode")}self._mode=decideMode(preferBinary);self.on("finish",function(){self._onFinish()})};inherits(ClientRequest,stream.Writable);ClientRequest.prototype.setHeader=function(name,value){var self=this;var lowerName=name.toLowerCase();if(unsafeHeaders.indexOf(lowerName)!==-1)return;self._headers[lowerName]={name:name,value:value}};ClientRequest.prototype.getHeader=function(name){var self=this;return self._headers[name.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(name){var self=this;delete self._headers[name.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var self=this;if(self._destroyed)return;var opts=self._opts;var headersObj=self._headers;var body;if(opts.method==="POST"||opts.method==="PUT"||opts.method==="PATCH"){if(capability.blobConstructor){body=new global.Blob(self._body.map(function(buffer){return toArrayBuffer(buffer)}),{type:(headersObj["content-type"]||{}).value||""})}else{body=Buffer.concat(self._body).toString()}}if(self._mode==="fetch"){var headers=Object.keys(headersObj).map(function(name){return[headersObj[name].name,headersObj[name].value]});global.fetch(self._opts.url,{method:self._opts.method,headers:headers,body:body,mode:"cors",credentials:opts.withCredentials?"include":"same-origin"}).then(function(response){self._fetchResponse=response;self._connect()},function(reason){self.emit("error",reason)})}else{var xhr=self._xhr=new global.XMLHttpRequest;try{xhr.open(self._opts.method,self._opts.url,true)}catch(err){process.nextTick(function(){self.emit("error",err)});return}if("responseType"in xhr)xhr.responseType=self._mode.split(":")[0];if("withCredentials"in xhr)xhr.withCredentials=!!opts.withCredentials;if(self._mode==="text"&&"overrideMimeType"in xhr)xhr.overrideMimeType("text/plain; charset=x-user-defined");Object.keys(headersObj).forEach(function(name){xhr.setRequestHeader(headersObj[name].name,headersObj[name].value)});self._response=null;xhr.onreadystatechange=function(){switch(xhr.readyState){case rStates.LOADING:case rStates.DONE:self._onXHRProgress();break}};if(self._mode==="moz-chunked-arraybuffer"){xhr.onprogress=function(){self._onXHRProgress()}}xhr.onerror=function(){if(self._destroyed)return;self.emit("error",new Error("XHR error"))};try{xhr.send(body)}catch(err){process.nextTick(function(){self.emit("error",err)});return}}};function statusValid(xhr){try{var status=xhr.status;return status!==null&&status!==0}catch(e){return false}}ClientRequest.prototype._onXHRProgress=function(){var self=this;if(!statusValid(self._xhr)||self._destroyed)return;if(!self._response)self._connect();self._response._onXHRProgress()};ClientRequest.prototype._connect=function(){var self=this;if(self._destroyed)return;self._response=new IncomingMessage(self._xhr,self._fetchResponse,self._mode);self.emit("response",self._response)};ClientRequest.prototype._write=function(chunk,encoding,cb){var self=this;self._body.push(chunk);cb()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var self=this;self._destroyed=true;if(self._response)self._response._destroyed=true;if(self._xhr)self._xhr.abort()};ClientRequest.prototype.end=function(data,encoding,cb){var self=this;if(typeof data==="function"){cb=data;data=undefined}stream.Writable.prototype.end.call(self,data,encoding,cb)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{"./capability":193,"./response":195,_process:159,buffer:85,inherits:136,"readable-stream":179,"to-arraybuffer":197}],195:[function(require,module,exports){(function(process,global,Buffer){var capability=require("./capability");var inherits=require("inherits");var stream=require("readable-stream");var rStates=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var IncomingMessage=exports.IncomingMessage=function(xhr,response,mode){var self=this;stream.Readable.call(self);self._mode=mode;self.headers={};self.rawHeaders=[];self.trailers={};self.rawTrailers=[];self.on("end",function(){process.nextTick(function(){self.emit("close")})});if(mode==="fetch"){self._fetchResponse=response;self.url=response.url;self.statusCode=response.status;self.statusMessage=response.statusText;for(var header,_i,_it=response.headers[Symbol.iterator]();header=(_i=_it.next()).value,!_i.done;){self.headers[header[0].toLowerCase()]=header[1];self.rawHeaders.push(header[0],header[1])}var reader=response.body.getReader();function read(){reader.read().then(function(result){if(self._destroyed)return;if(result.done){self.push(null);return}self.push(new Buffer(result.value));read()})}read()}else{self._xhr=xhr;self._pos=0;self.url=xhr.responseURL;self.statusCode=xhr.status;self.statusMessage=xhr.statusText;var headers=xhr.getAllResponseHeaders().split(/\r?\n/);headers.forEach(function(header){var matches=header.match(/^([^:]+):\s*(.*)/);if(matches){var key=matches[1].toLowerCase();if(key==="set-cookie"){if(self.headers[key]===undefined){self.headers[key]=[]}self.headers[key].push(matches[2])}else if(self.headers[key]!==undefined){self.headers[key]+=", "+matches[2]}else{self.headers[key]=matches[2]}self.rawHeaders.push(matches[1],matches[2])}});self._charset="x-user-defined";if(!capability.overrideMimeType){var mimeType=self.rawHeaders["mime-type"];if(mimeType){var charsetMatch=mimeType.match(/;\s*charset=([^;])(;|$)/);if(charsetMatch){self._charset=charsetMatch[1].toLowerCase()}}if(!self._charset)self._charset="utf-8"}}};inherits(IncomingMessage,stream.Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var self=this;var xhr=self._xhr;var response=null;switch(self._mode){case"text:vbarray":if(xhr.readyState!==rStates.DONE)break;try{response=new global.VBArray(xhr.responseBody).toArray()}catch(e){}if(response!==null){self.push(new Buffer(response));break}case"text":try{response=xhr.responseText}catch(e){self._mode="text:vbarray";break}if(response.length>self._pos){var newData=response.substr(self._pos);if(self._charset==="x-user-defined"){var buffer=new Buffer(newData.length);for(var i=0;i<newData.length;i++)buffer[i]=newData.charCodeAt(i)&255;self.push(buffer)}else{self.push(newData,self._charset)}self._pos=response.length}break;case"arraybuffer":if(xhr.readyState!==rStates.DONE)break;response=xhr.response;self.push(new Buffer(new Uint8Array(response)));break;case"moz-chunked-arraybuffer":response=xhr.response;if(xhr.readyState!==rStates.LOADING||!response)break;self.push(new Buffer(new Uint8Array(response)));break;case"ms-stream":response=xhr.response;if(xhr.readyState!==rStates.LOADING)break;var reader=new global.MSStreamReader;reader.onprogress=function(){if(reader.result.byteLength>self._pos){self.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))));self._pos=reader.result.byteLength}};reader.onload=function(){self.push(null)};reader.readAsArrayBuffer(response);break}if(self._xhr.readyState===rStates.DONE&&self._mode!=="ms-stream"){self.push(null)}}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{"./capability":193,_process:159,buffer:85,inherits:136,"readable-stream":179}],196:[function(require,module,exports){var Buffer=require("buffer").Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}var StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charReceived=0;this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}},{buffer:85}],197:[function(require,module,exports){var Buffer=require("buffer").Buffer;module.exports=function(buf){if(buf instanceof Uint8Array){if(buf.byteOffset===0&&buf.byteLength===buf.buffer.byteLength){return buf.buffer}else if(typeof buf.buffer.slice==="function"){return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength)}}if(Buffer.isBuffer(buf)){var arrayCopy=new Uint8Array(buf.length);var len=buf.length;for(var i=0;i<len;i++){arrayCopy[i]=buf[i]}return arrayCopy.buffer}else{throw new Error("Argument must be a Buffer")}}},{buffer:85}],198:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty;var id=0;function Ultron(ee){if(!(this instanceof Ultron))return new Ultron(ee);this.id=id++;this.ee=ee}Ultron.prototype.on=function on(event,fn,context){fn.__ultron=this.id;this.ee.on(event,fn,context);return this};Ultron.prototype.once=function once(event,fn,context){fn.__ultron=this.id;this.ee.once(event,fn,context);return this};Ultron.prototype.remove=function remove(){var args=arguments,event;if(args.length===1&&"string"===typeof args[0]){args=args[0].split(/[, ]+/)}else if(!args.length){args=[];for(event in this.ee._events){if(has.call(this.ee._events,event))args.push(event)}}for(var i=0;i<args.length;i++){var listeners=this.ee.listeners(args[i]);for(var j=0;j<listeners.length;j++){event=listeners[j];if(event.listener){if(event.listener.__ultron!==this.id)continue;delete event.listener.__ultron}else{if(event.__ultron!==this.id)continue;delete event.__ultron}this.ee.removeListener(args[i],event)}}return this};Ultron.prototype.destroy=function destroy(){if(!this.ee)return false;this.remove();this.ee=null;return true};module.exports=Ultron},{}],199:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var property=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context);
};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}],200:[function(require,module,exports){"use strict";var punycode=require("punycode");var util=require("./util");exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=require("querystring");function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},{"./util":201,punycode:166,querystring:169}],201:[function(require,module,exports){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},{}],202:[function(require,module,exports){"use strict";module.exports.Validation={isValidUTF8:function(buffer){return true}}},{}],203:[function(require,module,exports){"use strict";try{module.exports=require("bindings")("validation")}catch(e){module.exports=require("./fallback")}},{"./fallback":202,bindings:53}],204:[function(require,module,exports){(function(global){module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation")){return fn}var warned=false;function deprecated(){if(!warned){if(config("throwDeprecation")){throw new Error(msg)}else if(config("traceDeprecation")){console.trace(msg)}else{console.warn(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!global.localStorage)return false}catch(_){return false}var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==="true"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],205:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],206:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":205,_process:159,inherits:136}],207:[function(require,module,exports){var indexOf=require("indexof");var Object_keys=function(obj){if(Object.keys)return Object.keys(obj);else{var res=[];for(var key in obj)res.push(key);return res}};var forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);else for(var i=0;i<xs.length;i++){fn(xs[i],i,xs)}};var defineProp=function(){try{Object.defineProperty({},"_",{});return function(obj,name,value){Object.defineProperty(obj,name,{writable:true,enumerable:false,configurable:true,value:value})}}catch(e){return function(obj,name,value){obj[name]=value}}}();var globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function NodeScript(code){if(!(this instanceof Script))return new Script(code);this.code=code};Script.prototype.runInContext=function(context){if(!(context instanceof Context)){throw new TypeError("needs a 'context' argument.")}var iframe=document.createElement("iframe");if(!iframe.style)iframe.style={};iframe.style.display="none";document.body.appendChild(iframe);var win=iframe.contentWindow;var wEval=win.eval,wExecScript=win.execScript;if(!wEval&&wExecScript){wExecScript.call(win,"null");wEval=win.eval}forEach(Object_keys(context),function(key){win[key]=context[key]});forEach(globals,function(key){if(context[key]){win[key]=context[key]}});var winKeys=Object_keys(win);var res=wEval.call(win,this.code);forEach(Object_keys(win),function(key){if(key in context||indexOf(winKeys,key)===-1){context[key]=win[key]}});forEach(globals,function(key){if(!(key in context)){defineProp(context,key,win[key])}});document.body.removeChild(iframe);return res};Script.prototype.runInThisContext=function(){return eval(this.code)};Script.prototype.runInNewContext=function(context){var ctx=Script.createContext(context);var res=this.runInContext(ctx);forEach(Object_keys(ctx),function(key){context[key]=ctx[key]});return res};forEach(Object_keys(Script.prototype),function(name){exports[name]=Script[name]=function(code){
var s=Script(code);return s[name].apply(s,[].slice.call(arguments,1))}});exports.createScript=function(code){return exports.Script(code)};exports.createContext=Script.createContext=function(context){var copy=new Context;if(typeof context==="object"){forEach(Object_keys(context),function(key){copy[key]=context[key]})}return copy}},{indexof:135}],208:[function(require,module,exports){"use strict";var WS=module.exports=require("./lib/WebSocket");WS.Server=require("./lib/WebSocketServer");WS.Sender=require("./lib/Sender");WS.Receiver=require("./lib/Receiver");WS.createServer=function createServer(options,fn){var server=new WS.Server(options);if(typeof fn==="function"){server.on("connection",fn)}return server};WS.connect=WS.createConnection=function connect(address,fn){var client=new WS(address);if(typeof fn==="function"){client.on("open",fn)}return client}},{"./lib/Receiver":216,"./lib/Sender":218,"./lib/WebSocket":221,"./lib/WebSocketServer":222}],209:[function(require,module,exports){(function(Buffer){var util=require("util");function BufferPool(initialSize,growStrategy,shrinkStrategy){if(this instanceof BufferPool===false){throw new TypeError("Classes can't be function-called")}if(typeof initialSize==="function"){shrinkStrategy=growStrategy;growStrategy=initialSize;initialSize=0}else if(typeof initialSize==="undefined"){initialSize=0}this._growStrategy=(growStrategy||function(db,size){return db.used+size}).bind(null,this);this._shrinkStrategy=(shrinkStrategy||function(db){return initialSize}).bind(null,this);this._buffer=initialSize?new Buffer(initialSize):null;this._offset=0;this._used=0;this._changeFactor=0;this.__defineGetter__("size",function(){return this._buffer==null?0:this._buffer.length});this.__defineGetter__("used",function(){return this._used})}BufferPool.prototype.get=function(length){if(this._buffer==null||this._offset+length>this._buffer.length){var newBuf=new Buffer(this._growStrategy(length));this._buffer=newBuf;this._offset=0}this._used+=length;var buf=this._buffer.slice(this._offset,this._offset+length);this._offset+=length;return buf};BufferPool.prototype.reset=function(forceNewBuffer){var len=this._shrinkStrategy();if(len<this.size)this._changeFactor-=1;if(forceNewBuffer||this._changeFactor<-2){this._changeFactor=0;this._buffer=len?new Buffer(len):null}this._offset=0;this._used=0};module.exports=BufferPool}).call(this,require("buffer").Buffer)},{buffer:85,util:206}],210:[function(require,module,exports){exports.BufferUtil={merge:function(mergedBuffer,buffers){var offset=0;for(var i=0,l=buffers.length;i<l;++i){var buf=buffers[i];buf.copy(mergedBuffer,offset);offset+=buf.length}},mask:function(source,mask,output,offset,length){var maskNum=mask.readUInt32LE(0,true);var i=0;for(;i<length-3;i+=4){var num=maskNum^source.readUInt32LE(i,true);if(num<0)num=4294967296+num;output.writeUInt32LE(num,offset+i,true)}switch(length%4){case 3:output[offset+i+2]=source[i+2]^mask[2];case 2:output[offset+i+1]=source[i+1]^mask[1];case 1:output[offset+i]=source[i]^mask[0];case 0:}},unmask:function(data,mask){var maskNum=mask.readUInt32LE(0,true);var length=data.length;var i=0;for(;i<length-3;i+=4){var num=maskNum^data.readUInt32LE(i,true);if(num<0)num=4294967296+num;data.writeUInt32LE(num,i,true)}switch(length%4){case 3:data[i+2]=data[i+2]^mask[2];case 2:data[i+1]=data[i+1]^mask[1];case 1:data[i]=data[i]^mask[0];case 0:}}}},{}],211:[function(require,module,exports){"use strict";try{module.exports=require("bufferutil")}catch(e){module.exports=require("./BufferUtil.fallback")}},{"./BufferUtil.fallback":210,bufferutil:88}],212:[function(require,module,exports){module.exports={isValidErrorCode:function(code){return code>=1e3&&code<=1011&&code!=1004&&code!=1005&&code!=1006||code>=3e3&&code<=4999},1e3:"normal",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"reserved for extensions",1006:"reserved for extensions",1007:"inconsistent or invalid data",1008:"policy violation",1009:"message too big",1010:"extension handshake missing",1011:"an unexpected condition prevented the request from being fulfilled"}},{}],213:[function(require,module,exports){var util=require("util");exports.parse=parse;exports.format=format;function parse(value){value=value||"";var extensions={};value.split(",").forEach(function(v){var params=v.split(";");var token=params.shift().trim();var paramsList=extensions[token]=extensions[token]||[];var parsedParams={};params.forEach(function(param){var parts=param.trim().split("=");var key=parts[0];var value=parts[1];if(typeof value==="undefined"){value=true}else{if(value[0]==='"'){value=value.slice(1)}if(value[value.length-1]==='"'){value=value.slice(0,value.length-1)}}(parsedParams[key]=parsedParams[key]||[]).push(value)});paramsList.push(parsedParams)});return extensions}function format(value){return Object.keys(value).map(function(token){var paramsList=value[token];if(!util.isArray(paramsList)){paramsList=[paramsList]}return paramsList.map(function(params){return[token].concat(Object.keys(params).map(function(k){var p=params[k];if(!util.isArray(p))p=[p];return p.map(function(v){return v===true?k:k+"="+v}).join("; ")})).join("; ")}).join(", ")}).join(", ")}},{util:206}],214:[function(require,module,exports){(function(Buffer){var zlib=require("zlib");var AVAILABLE_WINDOW_BITS=[8,9,10,11,12,13,14,15];var DEFAULT_WINDOW_BITS=15;var DEFAULT_MEM_LEVEL=8;PerMessageDeflate.extensionName="permessage-deflate";function PerMessageDeflate(options,isServer,maxPayload){if(this instanceof PerMessageDeflate===false){throw new TypeError("Classes can't be function-called")}this._options=options||{};this._isServer=!!isServer;this._inflate=null;this._deflate=null;this.params=null;this._maxPayload=maxPayload||0}PerMessageDeflate.prototype.offer=function(){var params={};if(this._options.serverNoContextTakeover){params.server_no_context_takeover=true}if(this._options.clientNoContextTakeover){params.client_no_context_takeover=true}if(this._options.serverMaxWindowBits){params.server_max_window_bits=this._options.serverMaxWindowBits}if(this._options.clientMaxWindowBits){params.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits==null){params.client_max_window_bits=true}return params};PerMessageDeflate.prototype.accept=function(paramsList){paramsList=this.normalizeParams(paramsList);var params;if(this._isServer){params=this.acceptAsServer(paramsList)}else{params=this.acceptAsClient(paramsList)}this.params=params;return params};PerMessageDeflate.prototype.cleanup=function(){if(this._inflate){if(this._inflate.writeInProgress){this._inflate.pendingClose=true}else{if(this._inflate.close)this._inflate.close();this._inflate=null}}if(this._deflate){if(this._deflate.writeInProgress){this._deflate.pendingClose=true}else{if(this._deflate.close)this._deflate.close();this._deflate=null}}};PerMessageDeflate.prototype.acceptAsServer=function(paramsList){var accepted={};var result=paramsList.some(function(params){accepted={};if(this._options.serverNoContextTakeover===false&&params.server_no_context_takeover){return}if(this._options.serverMaxWindowBits===false&&params.server_max_window_bits){return}if(typeof this._options.serverMaxWindowBits==="number"&&typeof params.server_max_window_bits==="number"&&this._options.serverMaxWindowBits>params.server_max_window_bits){return}if(typeof this._options.clientMaxWindowBits==="number"&&!params.client_max_window_bits){return}if(this._options.serverNoContextTakeover||params.server_no_context_takeover){accepted.server_no_context_takeover=true}if(this._options.clientNoContextTakeover){accepted.client_no_context_takeover=true}if(this._options.clientNoContextTakeover!==false&&params.client_no_context_takeover){accepted.client_no_context_takeover=true}if(typeof this._options.serverMaxWindowBits==="number"){accepted.server_max_window_bits=this._options.serverMaxWindowBits}else if(typeof params.server_max_window_bits==="number"){accepted.server_max_window_bits=params.server_max_window_bits}if(typeof this._options.clientMaxWindowBits==="number"){accepted.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits!==false&&typeof params.client_max_window_bits==="number"){accepted.client_max_window_bits=params.client_max_window_bits}return true},this);if(!result){throw new Error("Doesn't support the offered configuration")}return accepted};PerMessageDeflate.prototype.acceptAsClient=function(paramsList){var params=paramsList[0];if(this._options.clientNoContextTakeover!=null){if(this._options.clientNoContextTakeover===false&&params.client_no_context_takeover){throw new Error('Invalid value for "client_no_context_takeover"')}}if(this._options.clientMaxWindowBits!=null){if(this._options.clientMaxWindowBits===false&&params.client_max_window_bits){throw new Error('Invalid value for "client_max_window_bits"')}if(typeof this._options.clientMaxWindowBits==="number"&&(!params.client_max_window_bits||params.client_max_window_bits>this._options.clientMaxWindowBits)){throw new Error('Invalid value for "client_max_window_bits"')}}return params};PerMessageDeflate.prototype.normalizeParams=function(paramsList){return paramsList.map(function(params){Object.keys(params).forEach(function(key){var value=params[key];if(value.length>1){throw new Error("Multiple extension parameters for "+key)}value=value[0];switch(key){case"server_no_context_takeover":case"client_no_context_takeover":if(value!==true){throw new Error("invalid extension parameter value for "+key+" ("+value+")")}params[key]=true;break;case"server_max_window_bits":case"client_max_window_bits":if(typeof value==="string"){value=parseInt(value,10);if(!~AVAILABLE_WINDOW_BITS.indexOf(value)){throw new Error("invalid extension parameter value for "+key+" ("+value+")")}}if(!this._isServer&&value===true){throw new Error("Missing extension parameter value for "+key)}params[key]=value;break;default:throw new Error("Not defined extension parameter ("+key+")")}},this);return params},this)};PerMessageDeflate.prototype.decompress=function(data,fin,callback){var endpoint=this._isServer?"client":"server";if(!this._inflate){var maxWindowBits=this.params[endpoint+"_max_window_bits"];this._inflate=zlib.createInflateRaw({windowBits:"number"===typeof maxWindowBits?maxWindowBits:DEFAULT_WINDOW_BITS})}this._inflate.writeInProgress=true;var self=this;var buffers=[];var cumulativeBufferLength=0;this._inflate.on("error",onError).on("data",onData);this._inflate.write(data);if(fin){this._inflate.write(new Buffer([0,0,255,255]))}this._inflate.flush(function(){cleanup();callback(null,Buffer.concat(buffers))});function onError(err){cleanup();callback(err)}function onData(data){if(self._maxPayload!==undefined&&self._maxPayload!==null&&self._maxPayload>0){cumulativeBufferLength+=data.length;if(cumulativeBufferLength>self._maxPayload){buffers=[];cleanup();var err={type:1009};callback(err);return}}buffers.push(data)}function cleanup(){if(!self._inflate)return;self._inflate.removeListener("error",onError);self._inflate.removeListener("data",onData);self._inflate.writeInProgress=false;if(fin&&self.params[endpoint+"_no_context_takeover"]||self._inflate.pendingClose){if(self._inflate.close)self._inflate.close();self._inflate=null}}};PerMessageDeflate.prototype.compress=function(data,fin,callback){var endpoint=this._isServer?"server":"client";if(!this._deflate){var maxWindowBits=this.params[endpoint+"_max_window_bits"];this._deflate=zlib.createDeflateRaw({flush:zlib.Z_SYNC_FLUSH,windowBits:"number"===typeof maxWindowBits?maxWindowBits:DEFAULT_WINDOW_BITS,memLevel:this._options.memLevel||DEFAULT_MEM_LEVEL})}this._deflate.writeInProgress=true;var self=this;var buffers=[];this._deflate.on("error",onError).on("data",onData);this._deflate.write(data);this._deflate.flush(function(){cleanup();var data=Buffer.concat(buffers);if(fin){data=data.slice(0,data.length-4)}callback(null,data)});function onError(err){cleanup();callback(err)}function onData(data){buffers.push(data)}function cleanup(){if(!self._deflate)return;self._deflate.removeListener("error",onError);self._deflate.removeListener("data",onData);self._deflate.writeInProgress=false;if(fin&&self.params[endpoint+"_no_context_takeover"]||self._deflate.pendingClose){if(self._deflate.close)self._deflate.close();self._deflate=null}}};module.exports=PerMessageDeflate}).call(this,require("buffer").Buffer)},{buffer:85,zlib:82}],215:[function(require,module,exports){(function(Buffer){var util=require("util");var EMPTY=0,BODY=1;var BINARYLENGTH=2,BINARYBODY=3;function Receiver(){if(this instanceof Receiver===false){throw new TypeError("Classes can't be function-called")}this.state=EMPTY;this.buffers=[];this.messageEnd=-1;this.spanLength=0;this.dead=false;this.onerror=function(){};this.ontext=function(){};this.onbinary=function(){};this.onclose=function(){};this.onping=function(){};this.onpong=function(){}}module.exports=Receiver;Receiver.prototype.add=function(data){if(this.dead)return;var self=this;function doAdd(){if(self.state===EMPTY){if(data.length==2&&data[0]==255&&data[1]==0){self.reset();self.onclose();return}if(data[0]===128){self.messageEnd=0;self.state=BINARYLENGTH;data=data.slice(1)}else{if(data[0]!==0){self.error("payload must start with 0x00 byte",true);return}data=data.slice(1);self.state=BODY}}if(self.state===BINARYLENGTH){var i=0;while(i<data.length&&data[i]&128){self.messageEnd=128*self.messageEnd+(data[i]&127);++i}if(i<data.length){self.messageEnd=128*self.messageEnd+(data[i]&127);self.state=BINARYBODY;++i}if(i>0)data=data.slice(i)}if(self.state===BINARYBODY){var dataleft=self.messageEnd-self.spanLength;if(data.length>=dataleft){self.buffers.push(data);self.spanLength+=dataleft;self.messageEnd=dataleft;return self.parse()}self.buffers.push(data);self.spanLength+=data.length;return}self.buffers.push(data);if((self.messageEnd=bufferIndex(data,255))!=-1){self.spanLength+=self.messageEnd;return self.parse()}else self.spanLength+=data.length}while(data)data=doAdd()};Receiver.prototype.cleanup=function(){this.dead=true;this.state=EMPTY;this.buffers=[]};Receiver.prototype.parse=function(){var output=new Buffer(this.spanLength);var outputIndex=0;for(var bi=0,bl=this.buffers.length;bi<bl-1;++bi){var buffer=this.buffers[bi];buffer.copy(output,outputIndex);outputIndex+=buffer.length}var lastBuffer=this.buffers[this.buffers.length-1];if(this.messageEnd>0)lastBuffer.copy(output,outputIndex,0,this.messageEnd);if(this.state!==BODY)--this.messageEnd;var tail=null;if(this.messageEnd<lastBuffer.length-1){tail=lastBuffer.slice(this.messageEnd+1)}this.reset();this.ontext(output.toString("utf8"));return tail};Receiver.prototype.error=function(reason,terminate){if(this.dead)return;this.reset();if(typeof reason=="string"){this.onerror(new Error(reason),terminate)}else if(reason.constructor==Error){this.onerror(reason,terminate)}else{this.onerror(new Error("An error occured"),terminate)}return this};Receiver.prototype.reset=function(reason){if(this.dead)return;this.state=EMPTY;this.buffers=[];this.messageEnd=-1;this.spanLength=0};function bufferIndex(buffer,byte){for(var i=0,l=buffer.length;i<l;++i){if(buffer[i]===byte)return i}return-1}}).call(this,require("buffer").Buffer)},{buffer:85,util:206}],216:[function(require,module,exports){(function(Buffer){var util=require("util"),Validation=require("./Validation").Validation,ErrorCodes=require("./ErrorCodes"),BufferPool=require("./BufferPool"),bufferUtil=require("./BufferUtil").BufferUtil,PerMessageDeflate=require("./PerMessageDeflate");function Receiver(extensions,maxPayload){if(this instanceof Receiver===false){throw new TypeError("Classes can't be function-called")}if(typeof extensions==="number"){maxPayload=extensions;extensions={}}var fragmentedPoolPrevUsed=-1;this.fragmentedBufferPool=new BufferPool(1024,function(db,length){return db.used+length},function(db){return fragmentedPoolPrevUsed=fragmentedPoolPrevUsed>=0?Math.ceil((fragmentedPoolPrevUsed+db.used)/2):db.used});var unfragmentedPoolPrevUsed=-1;this.unfragmentedBufferPool=new BufferPool(1024,function(db,length){return db.used+length},function(db){return unfragmentedPoolPrevUsed=unfragmentedPoolPrevUsed>=0?Math.ceil((unfragmentedPoolPrevUsed+db.used)/2):db.used});this.extensions=extensions||{};this.maxPayload=maxPayload||0;this.currentPayloadLength=0;this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0,fragmentedOperation:false};this.overflow=[];this.headerBuffer=new Buffer(10);this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.currentMessage=[];this.currentMessageLength=0;this.messageHandlers=[];this.expectHeader(2,this.processPacket);this.dead=false;this.processing=false;this.onerror=function(){};this.ontext=function(){};this.onbinary=function(){};this.onclose=function(){};this.onping=function(){};this.onpong=function(){}}module.exports=Receiver;Receiver.prototype.add=function(data){if(this.dead)return;var dataLength=data.length;if(dataLength==0)return;if(this.expectBuffer==null){this.overflow.push(data);return}var toRead=Math.min(dataLength,this.expectBuffer.length-this.expectOffset);fastCopy(toRead,data,this.expectBuffer,this.expectOffset);this.expectOffset+=toRead;if(toRead<dataLength){this.overflow.push(data.slice(toRead))}while(this.expectBuffer&&this.expectOffset==this.expectBuffer.length){var bufferForHandler=this.expectBuffer;this.expectBuffer=null;this.expectOffset=0;this.expectHandler.call(this,bufferForHandler)}};Receiver.prototype.cleanup=function(){this.dead=true;this.overflow=null;this.headerBuffer=null;this.expectBuffer=null;this.expectHandler=null;this.unfragmentedBufferPool=null;this.fragmentedBufferPool=null;this.state=null;this.currentMessage=null;this.onerror=null;this.ontext=null;this.onbinary=null;this.onclose=null;this.onping=null;this.onpong=null};Receiver.prototype.expectHeader=function(length,handler){if(length==0){handler(null);return}this.expectBuffer=this.headerBuffer.slice(this.expectOffset,this.expectOffset+length);this.expectHandler=handler;var toRead=length;while(toRead>0&&this.overflow.length>0){var fromOverflow=this.overflow.pop();if(toRead<fromOverflow.length)this.overflow.push(fromOverflow.slice(toRead));var read=Math.min(fromOverflow.length,toRead);fastCopy(read,fromOverflow,this.expectBuffer,this.expectOffset);this.expectOffset+=read;toRead-=read}};Receiver.prototype.expectData=function(length,handler){if(length==0){handler(null);return}this.expectBuffer=this.allocateFromPool(length,this.state.fragmentedOperation);this.expectHandler=handler;var toRead=length;while(toRead>0&&this.overflow.length>0){var fromOverflow=this.overflow.pop();if(toRead<fromOverflow.length)this.overflow.push(fromOverflow.slice(toRead));var read=Math.min(fromOverflow.length,toRead);fastCopy(read,fromOverflow,this.expectBuffer,this.expectOffset);this.expectOffset+=read;toRead-=read}};Receiver.prototype.allocateFromPool=function(length,isFragmented){return(isFragmented?this.fragmentedBufferPool:this.unfragmentedBufferPool).get(length)};Receiver.prototype.processPacket=function(data){if(this.extensions[PerMessageDeflate.extensionName]){if((data[0]&48)!=0){this.error("reserved fields (2, 3) must be empty",1002);return}}else{if((data[0]&112)!=0){this.error("reserved fields must be empty",1002);return}}this.state.lastFragment=(data[0]&128)==128;this.state.masked=(data[1]&128)==128;var compressed=(data[0]&64)==64;var opcode=data[0]&15;if(opcode===0){if(compressed){this.error("continuation frame cannot have the Per-message Compressed bits",1002);return}this.state.fragmentedOperation=true;this.state.opcode=this.state.activeFragmentedOperation;if(!(this.state.opcode==1||this.state.opcode==2)){this.error("continuation frame cannot follow current opcode",1002);return}}else{if(opcode<3&&this.state.activeFragmentedOperation!=null){this.error("data frames after the initial data frame must have opcode 0",1002);return}if(opcode>=8&&compressed){this.error("control frames cannot have the Per-message Compressed bits",1002);return}this.state.compressed=compressed;this.state.opcode=opcode;if(this.state.lastFragment===false){this.state.fragmentedOperation=true;this.state.activeFragmentedOperation=opcode}else this.state.fragmentedOperation=false}var handler=opcodes[this.state.opcode];if(typeof handler=="undefined")this.error("no handler for opcode "+this.state.opcode,1002);else{handler.start.call(this,data)}};Receiver.prototype.endPacket=function(){if(this.dead)return;if(!this.state.fragmentedOperation)this.unfragmentedBufferPool.reset(true);else if(this.state.lastFragment)this.fragmentedBufferPool.reset(true);this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;if(this.state.lastFragment&&this.state.opcode===this.state.activeFragmentedOperation){this.state.activeFragmentedOperation=null}this.currentPayloadLength=0;this.state.lastFragment=false;this.state.opcode=this.state.activeFragmentedOperation!=null?this.state.activeFragmentedOperation:0;this.state.masked=false;this.expectHeader(2,this.processPacket)};Receiver.prototype.reset=function(){if(this.dead)return;this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0,fragmentedOperation:false};this.fragmentedBufferPool.reset(true);this.unfragmentedBufferPool.reset(true);this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.overflow=[];this.currentMessage=[];this.currentMessageLength=0;this.messageHandlers=[];this.currentPayloadLength=0};Receiver.prototype.unmask=function(mask,buf,binary){if(mask!=null&&buf!=null)bufferUtil.unmask(buf,mask);if(binary)return buf;return buf!=null?buf.toString("utf8"):""};Receiver.prototype.error=function(reason,protocolErrorCode){if(this.dead)return;this.reset();if(typeof reason=="string"){this.onerror(new Error(reason),protocolErrorCode)}else if(reason.constructor==Error){this.onerror(reason,protocolErrorCode)}else{this.onerror(new Error("An error occured"),protocolErrorCode)}return this};Receiver.prototype.flush=function(){if(this.processing||this.dead)return;var handler=this.messageHandlers.shift();if(!handler)return;this.processing=true;var self=this;handler(function(){self.processing=false;self.flush()})};Receiver.prototype.applyExtensions=function(messageBuffer,fin,compressed,callback){var self=this;if(compressed){this.extensions[PerMessageDeflate.extensionName].decompress(messageBuffer,fin,function(err,buffer){if(self.dead)return;if(err){callback(new Error("invalid compressed data"));return}callback(null,buffer)})}else{callback(null,messageBuffer)}};Receiver.prototype.maxPayloadExceeded=function(length){if(this.maxPayload===undefined||this.maxPayload===null||this.maxPayload<1){return false}var fullLength=this.currentPayloadLength+length;if(fullLength<this.maxPayload){this.currentPayloadLength=fullLength;return false}this.error("payload cannot exceed "+this.maxPayload+" bytes",1009);this.messageBuffer=[];this.cleanup();return true};function readUInt16BE(start){return(this[start]<<8)+this[start+1]}function readUInt32BE(start){return(this[start]<<24)+(this[start+1]<<16)+(this[start+2]<<8)+this[start+3]}function fastCopy(length,srcBuffer,dstBuffer,dstOffset){switch(length){default:srcBuffer.copy(dstBuffer,dstOffset,0,length);break;case 16:dstBuffer[dstOffset+15]=srcBuffer[15];case 15:dstBuffer[dstOffset+14]=srcBuffer[14];case 14:dstBuffer[dstOffset+13]=srcBuffer[13];case 13:dstBuffer[dstOffset+12]=srcBuffer[12];case 12:dstBuffer[dstOffset+11]=srcBuffer[11];case 11:dstBuffer[dstOffset+10]=srcBuffer[10];case 10:dstBuffer[dstOffset+9]=srcBuffer[9];case 9:dstBuffer[dstOffset+8]=srcBuffer[8];case 8:dstBuffer[dstOffset+7]=srcBuffer[7];case 7:dstBuffer[dstOffset+6]=srcBuffer[6];case 6:dstBuffer[dstOffset+5]=srcBuffer[5];case 5:dstBuffer[dstOffset+4]=srcBuffer[4];case 4:dstBuffer[dstOffset+3]=srcBuffer[3];case 3:dstBuffer[dstOffset+2]=srcBuffer[2];case 2:dstBuffer[dstOffset+1]=srcBuffer[1];case 1:dstBuffer[dstOffset]=srcBuffer[0]}}function clone(obj){var cloned={};for(var k in obj){if(obj.hasOwnProperty(k)){cloned[k]=obj[k]}}return cloned}var opcodes={1:{start:function(data){var self=this;var firstLength=data[1]&127;if(firstLength<126){if(self.maxPayloadExceeded(firstLength)){self.error("Maximumpayload exceeded in compressed text message. Aborting...",1009);return}opcodes["1"].getData.call(self,firstLength)}else if(firstLength==126){self.expectHeader(2,function(data){var length=readUInt16BE.call(data,0);if(self.maxPayloadExceeded(length)){self.error("Maximumpayload exceeded in compressed text message. Aborting...",1009);return}opcodes["1"].getData.call(self,length)})}else if(firstLength==127){self.expectHeader(8,function(data){if(readUInt32BE.call(data,0)!=0){self.error("packets with length spanning more than 32 bit is currently not supported",1008);return}var length=readUInt32BE.call(data,4);if(self.maxPayloadExceeded(length)){self.error("Maximumpayload exceeded in compressed text message. Aborting...",1009);return}opcodes["1"].getData.call(self,readUInt32BE.call(data,4))})}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes["1"].finish.call(self,mask,data)})})}else{self.expectData(length,function(data){opcodes["1"].finish.call(self,null,data)})}},finish:function(mask,data){var self=this;var packet=this.unmask(mask,data,true)||new Buffer(0);var state=clone(this.state);this.messageHandlers.push(function(callback){self.applyExtensions(packet,state.lastFragment,state.compressed,function(err,buffer){if(err){if(err.type===1009){return self.error("Maximumpayload exceeded in compressed text message. Aborting...",1009)}return self.error(err.message,1007)}if(buffer!=null){if(self.maxPayload==0||self.maxPayload>0&&self.currentMessageLength+buffer.length<self.maxPayload){self.currentMessage.push(buffer)}else{self.currentMessage=null;self.currentMessage=[];self.currentMessageLength=0;self.error(new Error("Maximum payload exceeded. maxPayload: "+self.maxPayload),1009);return}self.currentMessageLength+=buffer.length}if(state.lastFragment){var messageBuffer=Buffer.concat(self.currentMessage);self.currentMessage=[];self.currentMessageLength=0;if(!Validation.isValidUTF8(messageBuffer)){self.error("invalid utf8 sequence",1007);return}self.ontext(messageBuffer.toString("utf8"),{masked:state.masked,buffer:messageBuffer})}callback()})});this.flush();this.endPacket()}},2:{start:function(data){var self=this;var firstLength=data[1]&127;if(firstLength<126){if(self.maxPayloadExceeded(firstLength)){self.error("Max payload exceeded in compressed text message. Aborting...",1009);return}opcodes["2"].getData.call(self,firstLength)}else if(firstLength==126){self.expectHeader(2,function(data){var length=readUInt16BE.call(data,0);if(self.maxPayloadExceeded(length)){self.error("Max payload exceeded in compressed text message. Aborting...",1009);return}opcodes["2"].getData.call(self,length)})}else if(firstLength==127){self.expectHeader(8,function(data){if(readUInt32BE.call(data,0)!=0){self.error("packets with length spanning more than 32 bit is currently not supported",1008);return}var length=readUInt32BE.call(data,4,true);if(self.maxPayloadExceeded(length)){self.error("Max payload exceeded in compressed text message. Aborting...",1009);return}opcodes["2"].getData.call(self,length)})}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes["2"].finish.call(self,mask,data)})})}else{self.expectData(length,function(data){opcodes["2"].finish.call(self,null,data)})}},finish:function(mask,data){var self=this;var packet=this.unmask(mask,data,true)||new Buffer(0);var state=clone(this.state);this.messageHandlers.push(function(callback){self.applyExtensions(packet,state.lastFragment,state.compressed,function(err,buffer){if(err){if(err.type===1009){return self.error("Max payload exceeded in compressed binary message. Aborting...",1009)}return self.error(err.message,1007)}if(buffer!=null){if(self.maxPayload==0||self.maxPayload>0&&self.currentMessageLength+buffer.length<self.maxPayload){self.currentMessage.push(buffer)}else{self.currentMessage=null;self.currentMessage=[];self.currentMessageLength=0;self.error(new Error("Maximum payload exceeded"),1009);return}self.currentMessageLength+=buffer.length}if(state.lastFragment){var messageBuffer=Buffer.concat(self.currentMessage);self.currentMessage=[];self.currentMessageLength=0;self.onbinary(messageBuffer,{masked:state.masked,buffer:messageBuffer})}callback()})});this.flush();this.endPacket()}},8:{start:function(data){var self=this;if(self.state.lastFragment==false){self.error("fragmented close is not supported",1002);return}var firstLength=data[1]&127;if(firstLength<126){opcodes["8"].getData.call(self,firstLength)}else{self.error("control frames cannot have more than 125 bytes of data",1002)}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes["8"].finish.call(self,mask,data)})})}else{self.expectData(length,function(data){opcodes["8"].finish.call(self,null,data)})}},finish:function(mask,data){var self=this;data=self.unmask(mask,data,true);var state=clone(this.state);this.messageHandlers.push(function(){if(data&&data.length==1){self.error("close packets with data must be at least two bytes long",1002);return}var code=data&&data.length>1?readUInt16BE.call(data,0):1e3;if(!ErrorCodes.isValidErrorCode(code)){self.error("invalid error code",1002);return}var message="";if(data&&data.length>2){var messageBuffer=data.slice(2);if(!Validation.isValidUTF8(messageBuffer)){self.error("invalid utf8 sequence",1007);return}message=messageBuffer.toString("utf8")}self.onclose(code,message,{masked:state.masked});self.reset()});this.flush()}},9:{start:function(data){var self=this;if(self.state.lastFragment==false){self.error("fragmented ping is not supported",1002);return}var firstLength=data[1]&127;if(firstLength<126){opcodes["9"].getData.call(self,firstLength)}else{self.error("control frames cannot have more than 125 bytes of data",1002)}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes["9"].finish.call(self,mask,data)})})}else{self.expectData(length,function(data){opcodes["9"].finish.call(self,null,data)})}},finish:function(mask,data){var self=this;data=this.unmask(mask,data,true);var state=clone(this.state);this.messageHandlers.push(function(callback){self.onping(data,{masked:state.masked,binary:true});callback()});this.flush();this.endPacket()}},10:{start:function(data){var self=this;if(self.state.lastFragment==false){self.error("fragmented pong is not supported",1002);return}var firstLength=data[1]&127;if(firstLength<126){opcodes["10"].getData.call(self,firstLength)}else{self.error("control frames cannot have more than 125 bytes of data",1002)}},getData:function(length){var self=this;if(this.state.masked){this.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes["10"].finish.call(self,mask,data)})})}else{this.expectData(length,function(data){opcodes["10"].finish.call(self,null,data)})}},finish:function(mask,data){var self=this;data=self.unmask(mask,data,true);var state=clone(this.state);this.messageHandlers.push(function(callback){self.onpong(data,{masked:state.masked,binary:true});callback()});this.flush();this.endPacket()}}}}).call(this,require("buffer").Buffer)},{"./BufferPool":209,"./BufferUtil":211,"./ErrorCodes":212,"./PerMessageDeflate":214,"./Validation":220,buffer:85,util:206}],217:[function(require,module,exports){(function(Buffer){var events=require("events"),util=require("util"),EventEmitter=events.EventEmitter;function Sender(socket){if(this instanceof Sender===false){throw new TypeError("Classes can't be function-called")}events.EventEmitter.call(this);this.socket=socket;this.continuationFrame=false;this.isClosed=false;
}module.exports=Sender;util.inherits(Sender,events.EventEmitter);Sender.prototype.send=function(data,options,cb){if(this.isClosed)return;var isString=typeof data=="string",length=isString?Buffer.byteLength(data):data.length,lengthbytes=length>127?2:1,writeStartMarker=this.continuationFrame==false,writeEndMarker=!options||!(typeof options.fin!="undefined"&&!options.fin),buffer=new Buffer((writeStartMarker?options&&options.binary?1+lengthbytes:1:0)+length+(writeEndMarker&&!(options&&options.binary)?1:0)),offset=writeStartMarker?1:0;if(writeStartMarker){if(options&&options.binary){buffer.write("","binary");if(lengthbytes>1)buffer.write(String.fromCharCode(128+length/128),offset++,"binary");buffer.write(String.fromCharCode(length&127),offset++,"binary")}else buffer.write("\x00","binary")}if(isString)buffer.write(data,offset,"utf8");else data.copy(buffer,offset,0);if(writeEndMarker){if(options&&options.binary){}else buffer.write("",offset+length,"binary");this.continuationFrame=false}else this.continuationFrame=true;try{this.socket.write(buffer,"binary",cb)}catch(e){this.error(e.toString())}};Sender.prototype.close=function(code,data,mask,cb){if(this.isClosed)return;this.isClosed=true;try{if(this.continuationFrame)this.socket.write(new Buffer([255],"binary"));this.socket.write(new Buffer([255,0]),"binary",cb)}catch(e){this.error(e.toString())}};Sender.prototype.ping=function(data,options){};Sender.prototype.pong=function(data,options){};Sender.prototype.error=function(reason){this.emit("error",reason);return this}}).call(this,require("buffer").Buffer)},{buffer:85,events:125,util:206}],218:[function(require,module,exports){(function(Buffer){var events=require("events"),util=require("util"),EventEmitter=events.EventEmitter,ErrorCodes=require("./ErrorCodes"),bufferUtil=require("./BufferUtil").BufferUtil,PerMessageDeflate=require("./PerMessageDeflate");function Sender(socket,extensions){if(this instanceof Sender===false){throw new TypeError("Classes can't be function-called")}events.EventEmitter.call(this);this._socket=socket;this.extensions=extensions||{};this.firstFragment=true;this.compress=false;this.messageHandlers=[];this.processing=false}util.inherits(Sender,events.EventEmitter);Sender.prototype.close=function(code,data,mask,cb){if(typeof code!=="undefined"){if(typeof code!=="number"||!ErrorCodes.isValidErrorCode(code))throw new Error("first argument must be a valid error code number")}code=code||1e3;var dataBuffer=new Buffer(2+(data?Buffer.byteLength(data):0));writeUInt16BE.call(dataBuffer,code,0);if(dataBuffer.length>2)dataBuffer.write(data,2);var self=this;this.messageHandlers.push(function(callback){self.frameAndSend(8,dataBuffer,true,mask);callback();if(typeof cb=="function")cb()});this.flush()};Sender.prototype.ping=function(data,options){var mask=options&&options.mask;var self=this;this.messageHandlers.push(function(callback){self.frameAndSend(9,data||"",true,mask);callback()});this.flush()};Sender.prototype.pong=function(data,options){var mask=options&&options.mask;var self=this;this.messageHandlers.push(function(callback){self.frameAndSend(10,data||"",true,mask);callback()});this.flush()};Sender.prototype.send=function(data,options,cb){var finalFragment=options&&options.fin===false?false:true;var mask=options&&options.mask;var compress=options&&options.compress;var opcode=options&&options.binary?2:1;if(this.firstFragment===false){opcode=0;compress=false}else{this.firstFragment=false;this.compress=compress}if(finalFragment)this.firstFragment=true;var compressFragment=this.compress;var self=this;this.messageHandlers.push(function(callback){self.applyExtensions(data,finalFragment,compressFragment,function(err,data){if(err){if(typeof cb=="function")cb(err);else self.emit("error",err);return}self.frameAndSend(opcode,data,finalFragment,mask,compress,cb);callback()})});this.flush()};Sender.prototype.frameAndSend=function(opcode,data,finalFragment,maskData,compressed,cb){var canModifyData=false;if(!data){try{this._socket.write(new Buffer([opcode|(finalFragment?128:0),0|(maskData?128:0)].concat(maskData?[0,0,0,0]:[])),"binary",cb)}catch(e){if(typeof cb=="function")cb(e);else this.emit("error",e)}return}if(!Buffer.isBuffer(data)){canModifyData=true;if(data&&(typeof data.byteLength!=="undefined"||typeof data.buffer!=="undefined")){data=getArrayBuffer(data)}else{if(typeof data==="number")data=data.toString();data=new Buffer(data)}}var dataLength=data.length,dataOffset=maskData?6:2,secondByte=dataLength;if(dataLength>=65536){dataOffset+=8;secondByte=127}else if(dataLength>125){dataOffset+=2;secondByte=126}var mergeBuffers=dataLength<32768||maskData&&!canModifyData;var totalLength=mergeBuffers?dataLength+dataOffset:dataOffset;var outputBuffer=new Buffer(totalLength);outputBuffer[0]=finalFragment?opcode|128:opcode;if(compressed)outputBuffer[0]|=64;switch(secondByte){case 126:writeUInt16BE.call(outputBuffer,dataLength,2);break;case 127:writeUInt32BE.call(outputBuffer,0,2);writeUInt32BE.call(outputBuffer,dataLength,6)}if(maskData){outputBuffer[1]=secondByte|128;var mask=getRandomMask();outputBuffer[dataOffset-4]=mask[0];outputBuffer[dataOffset-3]=mask[1];outputBuffer[dataOffset-2]=mask[2];outputBuffer[dataOffset-1]=mask[3];if(mergeBuffers){bufferUtil.mask(data,mask,outputBuffer,dataOffset,dataLength);try{this._socket.write(outputBuffer,"binary",cb)}catch(e){if(typeof cb=="function")cb(e);else this.emit("error",e)}}else{bufferUtil.mask(data,mask,data,0,dataLength);try{this._socket.write(outputBuffer,"binary");this._socket.write(data,"binary",cb)}catch(e){if(typeof cb=="function")cb(e);else this.emit("error",e)}}}else{outputBuffer[1]=secondByte;if(mergeBuffers){data.copy(outputBuffer,dataOffset);try{this._socket.write(outputBuffer,"binary",cb)}catch(e){if(typeof cb=="function")cb(e);else this.emit("error",e)}}else{try{this._socket.write(outputBuffer,"binary");this._socket.write(data,"binary",cb)}catch(e){if(typeof cb=="function")cb(e);else this.emit("error",e)}}}};Sender.prototype.flush=function(){if(this.processing)return;var handler=this.messageHandlers.shift();if(!handler)return;this.processing=true;var self=this;handler(function(){self.processing=false;self.flush()})};Sender.prototype.applyExtensions=function(data,fin,compress,callback){if(compress&&data){if((data.buffer||data)instanceof ArrayBuffer){data=getArrayBuffer(data)}this.extensions[PerMessageDeflate.extensionName].compress(data,fin,callback)}else{callback(null,data)}};module.exports=Sender;function writeUInt16BE(value,offset){this[offset]=(value&65280)>>8;this[offset+1]=value&255}function writeUInt32BE(value,offset){this[offset]=(value&4278190080)>>24;this[offset+1]=(value&16711680)>>16;this[offset+2]=(value&65280)>>8;this[offset+3]=value&255}function getArrayBuffer(data){var array=new Uint8Array(data.buffer||data),l=data.byteLength||data.length,o=data.byteOffset||0,buffer=new Buffer(l);for(var i=0;i<l;++i){buffer[i]=array[o+i]}return buffer}function getRandomMask(){return new Buffer([~~(Math.random()*255),~~(Math.random()*255),~~(Math.random()*255),~~(Math.random()*255)])}}).call(this,require("buffer").Buffer)},{"./BufferUtil":211,"./ErrorCodes":212,"./PerMessageDeflate":214,buffer:85,events:125,util:206}],219:[function(require,module,exports){exports.Validation={isValidUTF8:function(buffer){return true}}},{}],220:[function(require,module,exports){"use strict";try{module.exports=require("utf-8-validate")}catch(e){module.exports=require("./Validation.fallback")}},{"./Validation.fallback":219,"utf-8-validate":203}],221:[function(require,module,exports){(function(process,Buffer){"use strict";var url=require("url"),util=require("util"),http=require("http"),https=require("https"),crypto=require("crypto"),stream=require("stream"),Ultron=require("ultron"),Options=require("options"),Sender=require("./Sender"),Receiver=require("./Receiver"),SenderHixie=require("./Sender.hixie"),ReceiverHixie=require("./Receiver.hixie"),Extensions=require("./Extensions"),PerMessageDeflate=require("./PerMessageDeflate"),EventEmitter=require("events").EventEmitter;var protocolVersion=13;var closeTimeout=30*1e3;function WebSocket(address,protocols,options){if(this instanceof WebSocket===false){return new WebSocket(address,protocols,options)}EventEmitter.call(this);if(protocols&&!Array.isArray(protocols)&&"object"===typeof protocols){options=protocols;protocols=null}if("string"===typeof protocols){protocols=[protocols]}if(!Array.isArray(protocols)){protocols=[]}this._socket=null;this._ultron=null;this._closeReceived=false;this.bytesReceived=0;this.readyState=null;this.supports={};this.extensions={};this._binaryType="nodebuffer";if(Array.isArray(address)){initAsServerClient.apply(this,address.concat(options))}else{initAsClient.apply(this,[address,protocols,options])}}util.inherits(WebSocket,EventEmitter);["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function each(state,index){WebSocket.prototype[state]=WebSocket[state]=index});WebSocket.prototype.close=function close(code,data){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){this.readyState=WebSocket.CLOSED;return}if(this.readyState===WebSocket.CLOSING){if(this._closeReceived&&this._isServer){this.terminate()}return}var self=this;try{this.readyState=WebSocket.CLOSING;this._closeCode=code;this._closeMessage=data;var mask=!this._isServer;this._sender.close(code,data,mask,function(err){if(err)self.emit("error",err);if(self._closeReceived&&self._isServer){self.terminate()}else{clearTimeout(self._closeTimer);self._closeTimer=setTimeout(cleanupWebsocketResources.bind(self,true),closeTimeout)}})}catch(e){this.emit("error",e)}};WebSocket.prototype.pause=function pauser(){if(this.readyState!==WebSocket.OPEN)throw new Error("not opened");return this._socket.pause()};WebSocket.prototype.ping=function ping(data,options,dontFailWhenClosed){if(this.readyState!==WebSocket.OPEN){if(dontFailWhenClosed===true)return;throw new Error("not opened")}options=options||{};if(typeof options.mask==="undefined")options.mask=!this._isServer;this._sender.ping(data,options)};WebSocket.prototype.pong=function(data,options,dontFailWhenClosed){if(this.readyState!==WebSocket.OPEN){if(dontFailWhenClosed===true)return;throw new Error("not opened")}options=options||{};if(typeof options.mask==="undefined")options.mask=!this._isServer;this._sender.pong(data,options)};WebSocket.prototype.resume=function resume(){if(this.readyState!==WebSocket.OPEN)throw new Error("not opened");return this._socket.resume()};WebSocket.prototype.send=function send(data,options,cb){if(typeof options==="function"){cb=options;options={}}if(this.readyState!==WebSocket.OPEN){if(typeof cb==="function")cb(new Error("not opened"));else throw new Error("not opened");return}if(!data)data="";if(this._queue){var self=this;this._queue.push(function(){self.send(data,options,cb)});return}options=options||{};options.fin=true;if(typeof options.binary==="undefined"){options.binary=data instanceof ArrayBuffer||data instanceof Buffer||data instanceof Uint8Array||data instanceof Uint16Array||data instanceof Uint32Array||data instanceof Int8Array||data instanceof Int16Array||data instanceof Int32Array||data instanceof Float32Array||data instanceof Float64Array}if(typeof options.mask==="undefined")options.mask=!this._isServer;if(typeof options.compress==="undefined")options.compress=true;if(!this.extensions[PerMessageDeflate.extensionName]){options.compress=false}var readable=typeof stream.Readable==="function"?stream.Readable:stream.Stream;if(data instanceof readable){startQueue(this);var self=this;sendStream(this,data,options,function send(error){process.nextTick(function tock(){executeQueueSends(self)});if(typeof cb==="function")cb(error)})}else{this._sender.send(data,options,cb)}};WebSocket.prototype.stream=function stream(options,cb){if(typeof options==="function"){cb=options;options={}}var self=this;if(typeof cb!=="function")throw new Error("callback must be provided");if(this.readyState!==WebSocket.OPEN){if(typeof cb==="function")cb(new Error("not opened"));else throw new Error("not opened");return}if(this._queue){this._queue.push(function(){self.stream(options,cb)});return}options=options||{};if(typeof options.mask==="undefined")options.mask=!this._isServer;if(typeof options.compress==="undefined")options.compress=true;if(!this.extensions[PerMessageDeflate.extensionName]){options.compress=false}startQueue(this);function send(data,final){try{if(self.readyState!==WebSocket.OPEN)throw new Error("not opened");options.fin=final===true;self._sender.send(data,options);if(!final)process.nextTick(cb.bind(null,null,send));else executeQueueSends(self)}catch(e){if(typeof cb==="function")cb(e);else{delete self._queue;self.emit("error",e)}}}process.nextTick(cb.bind(null,null,send))};WebSocket.prototype.terminate=function terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this._socket){this.readyState=WebSocket.CLOSING;try{this._socket.end()}catch(e){cleanupWebsocketResources.call(this,true);return}if(this._closeTimer){clearTimeout(this._closeTimer)}this._closeTimer=setTimeout(cleanupWebsocketResources.bind(this,true),closeTimeout)}else if(this.readyState===WebSocket.CONNECTING){cleanupWebsocketResources.call(this,true)}};Object.defineProperty(WebSocket.prototype,"bufferedAmount",{get:function get(){var amount=0;if(this._socket){amount=this._socket.bufferSize||0}return amount}});Object.defineProperty(WebSocket.prototype,"binaryType",{get:function get(){return this._binaryType},set:function set(type){if(type==="arraybuffer"||type==="nodebuffer")this._binaryType=type;else throw new SyntaxError('unsupported binaryType: must be either "nodebuffer" or "arraybuffer"')}});["open","error","close","message"].forEach(function(method){Object.defineProperty(WebSocket.prototype,"on"+method,{get:function get(){var listener=this.listeners(method)[0];return listener?listener._listener?listener._listener:listener:undefined},set:function set(listener){this.removeAllListeners(method);this.addEventListener(method,listener)}})});WebSocket.prototype.addEventListener=function(method,listener){var target=this;function onMessage(data,flags){if(flags.binary&&this.binaryType==="arraybuffer")data=new Uint8Array(data).buffer;listener.call(target,new MessageEvent(data,!!flags.binary,target))}function onClose(code,message){listener.call(target,new CloseEvent(code,message,target))}function onError(event){event.type="error";event.target=target;listener.call(target,event)}function onOpen(){listener.call(target,new OpenEvent(target))}if(typeof listener==="function"){if(method==="message"){onMessage._listener=listener;this.on(method,onMessage)}else if(method==="close"){onClose._listener=listener;this.on(method,onClose)}else if(method==="error"){onError._listener=listener;this.on(method,onError)}else if(method==="open"){onOpen._listener=listener;this.on(method,onOpen)}else{this.on(method,listener)}}};module.exports=WebSocket;module.exports.buildHostHeader=buildHostHeader;function MessageEvent(dataArg,isBinary,target){this.type="message";this.data=dataArg;this.target=target;this.binary=isBinary}function CloseEvent(code,reason,target){this.type="close";this.wasClean=typeof code==="undefined"||code===1e3;this.code=code;this.reason=reason;this.target=target}function OpenEvent(target){this.type="open";this.target=target}function buildHostHeader(isSecure,hostname,port){var headerHost=hostname;if(hostname){if(isSecure&&port!=443||!isSecure&&port!=80){headerHost=headerHost+":"+port}}return headerHost}function initAsServerClient(req,socket,upgradeHead,options){options=new Options({protocolVersion:protocolVersion,protocol:null,extensions:{},maxPayload:0}).merge(options);this.protocol=options.value.protocol;this.protocolVersion=options.value.protocolVersion;this.extensions=options.value.extensions;this.supports.binary=this.protocolVersion!=="hixie-76";this.upgradeReq=req;this.readyState=WebSocket.CONNECTING;this._isServer=true;this.maxPayload=options.value.maxPayload;if(options.value.protocolVersion==="hixie-76"){establishConnection.call(this,ReceiverHixie,SenderHixie,socket,upgradeHead)}else{establishConnection.call(this,Receiver,Sender,socket,upgradeHead)}}function initAsClient(address,protocols,options){options=new Options({origin:null,protocolVersion:protocolVersion,host:null,headers:null,protocol:protocols.join(","),agent:null,pfx:null,key:null,passphrase:null,cert:null,ca:null,ciphers:null,rejectUnauthorized:null,perMessageDeflate:true,localAddress:null}).merge(options);if(options.value.protocolVersion!==8&&options.value.protocolVersion!==13){throw new Error("unsupported protocol version")}var serverUrl=url.parse(address);var isUnixSocket=serverUrl.protocol==="ws+unix:";if(!serverUrl.host&&!isUnixSocket)throw new Error("invalid url");var isSecure=serverUrl.protocol==="wss:"||serverUrl.protocol==="https:";var httpObj=isSecure?https:http;var port=serverUrl.port||(isSecure?443:80);var auth=serverUrl.auth;var extensionsOffer={};var perMessageDeflate;if(options.value.perMessageDeflate){perMessageDeflate=new PerMessageDeflate(typeof options.value.perMessageDeflate!==true?options.value.perMessageDeflate:{},false);extensionsOffer[PerMessageDeflate.extensionName]=perMessageDeflate.offer()}this._isServer=false;this.url=address;this.protocolVersion=options.value.protocolVersion;this.supports.binary=this.protocolVersion!=="hixie-76";var key=new Buffer(options.value.protocolVersion+"-"+Date.now()).toString("base64");var shasum=crypto.createHash("sha1");shasum.update(key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var expectedServerKey=shasum.digest("base64");var agent=options.value.agent;var headerHost=buildHostHeader(isSecure,serverUrl.hostname,port);var requestOptions={port:port,host:serverUrl.hostname,headers:{Connection:"Upgrade",Upgrade:"websocket",Host:headerHost,"Sec-WebSocket-Version":options.value.protocolVersion,"Sec-WebSocket-Key":key}};if(auth){requestOptions.headers.Authorization="Basic "+new Buffer(auth).toString("base64")}if(options.value.protocol){requestOptions.headers["Sec-WebSocket-Protocol"]=options.value.protocol}if(options.value.host){requestOptions.headers.Host=options.value.host}if(options.value.headers){for(var header in options.value.headers){if(options.value.headers.hasOwnProperty(header)){requestOptions.headers[header]=options.value.headers[header]}}}if(Object.keys(extensionsOffer).length){requestOptions.headers["Sec-WebSocket-Extensions"]=Extensions.format(extensionsOffer)}if(options.isDefinedAndNonNull("pfx")||options.isDefinedAndNonNull("key")||options.isDefinedAndNonNull("passphrase")||options.isDefinedAndNonNull("cert")||options.isDefinedAndNonNull("ca")||options.isDefinedAndNonNull("ciphers")||options.isDefinedAndNonNull("rejectUnauthorized")){if(options.isDefinedAndNonNull("pfx"))requestOptions.pfx=options.value.pfx;if(options.isDefinedAndNonNull("key"))requestOptions.key=options.value.key;if(options.isDefinedAndNonNull("passphrase"))requestOptions.passphrase=options.value.passphrase;if(options.isDefinedAndNonNull("cert"))requestOptions.cert=options.value.cert;if(options.isDefinedAndNonNull("ca"))requestOptions.ca=options.value.ca;if(options.isDefinedAndNonNull("ciphers"))requestOptions.ciphers=options.value.ciphers;if(options.isDefinedAndNonNull("rejectUnauthorized"))requestOptions.rejectUnauthorized=options.value.rejectUnauthorized;if(!agent){agent=new httpObj.Agent(requestOptions)}}requestOptions.path=serverUrl.path||"/";if(agent){requestOptions.agent=agent}if(isUnixSocket){requestOptions.socketPath=serverUrl.pathname}if(options.value.localAddress){requestOptions.localAddress=options.value.localAddress}if(options.value.origin){if(options.value.protocolVersion<13)requestOptions.headers["Sec-WebSocket-Origin"]=options.value.origin;else requestOptions.headers.Origin=options.value.origin}var self=this;var req=httpObj.request(requestOptions);req.on("error",function onerror(error){self.emit("error",error);cleanupWebsocketResources.call(self,error)});req.once("response",function response(res){var error;if(!self.emit("unexpected-response",req,res)){error=new Error("unexpected server response ("+res.statusCode+")");req.abort();self.emit("error",error)}cleanupWebsocketResources.call(self,error)});req.once("upgrade",function upgrade(res,socket,upgradeHead){if(self.readyState===WebSocket.CLOSED){self.emit("close");self.removeAllListeners();socket.end();return}var serverKey=res.headers["sec-websocket-accept"];if(typeof serverKey==="undefined"||serverKey!==expectedServerKey){self.emit("error","invalid server key");self.removeAllListeners();socket.end();return}var serverProt=res.headers["sec-websocket-protocol"];var protList=(options.value.protocol||"").split(/, */);var protError=null;if(!options.value.protocol&&serverProt){protError="server sent a subprotocol even though none requested"}else if(options.value.protocol&&!serverProt){protError="server sent no subprotocol even though requested"}else if(serverProt&&protList.indexOf(serverProt)===-1){protError="server responded with an invalid protocol"}if(protError){self.emit("error",protError);self.removeAllListeners();socket.end();return}else if(serverProt){self.protocol=serverProt}var serverExtensions=Extensions.parse(res.headers["sec-websocket-extensions"]);if(perMessageDeflate&&serverExtensions[PerMessageDeflate.extensionName]){try{perMessageDeflate.accept(serverExtensions[PerMessageDeflate.extensionName])}catch(err){self.emit("error","invalid extension parameter");self.removeAllListeners();socket.end();return}self.extensions[PerMessageDeflate.extensionName]=perMessageDeflate}establishConnection.call(self,Receiver,Sender,socket,upgradeHead);req.removeAllListeners();req=null;agent=null});req.end();this.readyState=WebSocket.CONNECTING}function establishConnection(ReceiverClass,SenderClass,socket,upgradeHead){var ultron=this._ultron=new Ultron(socket),called=false,self=this;socket.setTimeout(0);socket.setNoDelay(true);this._receiver=new ReceiverClass(this.extensions,this.maxPayload);this._socket=socket;ultron.on("end",cleanupWebsocketResources.bind(this));ultron.on("close",cleanupWebsocketResources.bind(this));ultron.on("error",cleanupWebsocketResources.bind(this));function firstHandler(data){if(called||self.readyState===WebSocket.CLOSED)return;called=true;socket.removeListener("data",firstHandler);ultron.on("data",realHandler);if(upgradeHead&&upgradeHead.length>0){realHandler(upgradeHead);upgradeHead=null}if(data)realHandler(data)}function realHandler(data){self.bytesReceived+=data.length;self._receiver.add(data)}ultron.on("data",firstHandler);process.nextTick(firstHandler);self._receiver.ontext=function ontext(data,flags){flags=flags||{};self.emit("message",data,flags)};self._receiver.onbinary=function onbinary(data,flags){flags=flags||{};flags.binary=true;self.emit("message",data,flags)};self._receiver.onping=function onping(data,flags){flags=flags||{};self.pong(data,{mask:!self._isServer,binary:flags.binary===true},true);self.emit("ping",data,flags)};self._receiver.onpong=function onpong(data,flags){self.emit("pong",data,flags||{})};self._receiver.onclose=function onclose(code,data,flags){flags=flags||{};self._closeReceived=true;self.close(code,data)};self._receiver.onerror=function onerror(reason,errorCode){self.close(typeof errorCode!=="undefined"?errorCode:1002,"");self.emit("error",reason instanceof Error?reason:new Error(reason))};this._sender=new SenderClass(socket,this.extensions);this._sender.on("error",function onerror(error){self.close(1002,"");self.emit("error",error)});this.readyState=WebSocket.OPEN;this.emit("open")}function startQueue(instance){instance._queue=instance._queue||[]}function executeQueueSends(instance){var queue=instance._queue;if(typeof queue==="undefined")return;delete instance._queue;for(var i=0,l=queue.length;i<l;++i){queue[i]()}}function sendStream(instance,stream,options,cb){stream.on("data",function incoming(data){if(instance.readyState!==WebSocket.OPEN){if(typeof cb==="function")cb(new Error("not opened"));else{delete instance._queue;instance.emit("error",new Error("not opened"))}return}options.fin=false;instance._sender.send(data,options)});stream.on("end",function end(){if(instance.readyState!==WebSocket.OPEN){if(typeof cb==="function")cb(new Error("not opened"));else{delete instance._queue;instance.emit("error",new Error("not opened"))}return}options.fin=true;instance._sender.send(null,options);if(typeof cb==="function")cb(null)})}function cleanupWebsocketResources(error){if(this.readyState===WebSocket.CLOSED)return;this.readyState=WebSocket.CLOSED;clearTimeout(this._closeTimer);this._closeTimer=null;if(error||!this._closeReceived){this._closeCode=1006}this.emit("close",this._closeCode||1e3,this._closeMessage||"");if(this._socket){if(this._ultron)this._ultron.destroy();this._socket.on("error",function onerror(){try{this.destroy()}catch(e){}});try{if(!error)this._socket.end();else this._socket.destroy()}catch(e){}this._socket=null;this._ultron=null}if(this._sender){this._sender.removeAllListeners();this._sender=null}if(this._receiver){this._receiver.cleanup();this._receiver=null}if(this.extensions[PerMessageDeflate.extensionName]){this.extensions[PerMessageDeflate.extensionName].cleanup()}this.extensions=null;this.removeAllListeners();this.on("error",function onerror(){});delete this._queue}}).call(this,require("_process"),require("buffer").Buffer)},{"./Extensions":213,"./PerMessageDeflate":214,"./Receiver":216,"./Receiver.hixie":215,"./Sender":218,"./Sender.hixie":217,_process:159,buffer:85,crypto:97,events:125,http:192,https:133,options:140,stream:191,ultron:198,url:200,util:206}],222:[function(require,module,exports){(function(Buffer){var util=require("util"),events=require("events"),http=require("http"),crypto=require("crypto"),Options=require("options"),WebSocket=require("./WebSocket"),Extensions=require("./Extensions"),PerMessageDeflate=require("./PerMessageDeflate"),tls=require("tls"),url=require("url");function WebSocketServer(options,callback){if(this instanceof WebSocketServer===false){return new WebSocketServer(options,callback)}events.EventEmitter.call(this);options=new Options({host:"0.0.0.0",port:null,server:null,verifyClient:null,handleProtocols:null,path:null,noServer:false,disableHixie:false,clientTracking:true,perMessageDeflate:true,maxPayload:null}).merge(options);if(!options.isDefinedAndNonNull("port")&&!options.isDefinedAndNonNull("server")&&!options.value.noServer){throw new TypeError("`port` or a `server` must be provided")}var self=this;if(options.isDefinedAndNonNull("port")){this._server=http.createServer(function(req,res){var body=http.STATUS_CODES[426];res.writeHead(426,{"Content-Length":body.length,"Content-Type":"text/plain"});res.end(body)});this._server.allowHalfOpen=false;this._server.listen(options.value.port,options.value.host,callback);this._closeServer=function(){if(self._server)self._server.close()}}else if(options.value.server){this._server=options.value.server;if(options.value.path){if(this._server._webSocketPaths&&options.value.server._webSocketPaths[options.value.path]){throw new Error("two instances of WebSocketServer cannot listen on the same http server path")}if(typeof this._server._webSocketPaths!=="object"){this._server._webSocketPaths={}}this._server._webSocketPaths[options.value.path]=1}}if(this._server){this._onceServerListening=function(){self.emit("listening")};this._server.once("listening",this._onceServerListening)}if(typeof this._server!="undefined"){this._onServerError=function(error){self.emit("error",error)};this._server.on("error",this._onServerError);this._onServerUpgrade=function(req,socket,upgradeHead){var head=new Buffer(upgradeHead.length);upgradeHead.copy(head);self.handleUpgrade(req,socket,head,function(client){self.emit("connection"+req.url,client);self.emit("connection",client)})};this._server.on("upgrade",this._onServerUpgrade)}this.options=options.value;this.path=options.value.path;this.clients=[]}util.inherits(WebSocketServer,events.EventEmitter);WebSocketServer.prototype.close=function(callback){var error=null;try{for(var i=0,l=this.clients.length;i<l;++i){this.clients[i].terminate()}}catch(e){error=e}if(this.path&&this._server._webSocketPaths){delete this._server._webSocketPaths[this.path];if(Object.keys(this._server._webSocketPaths).length==0){delete this._server._webSocketPaths}}try{if(typeof this._closeServer!=="undefined"){this._closeServer()}}finally{if(this._server){this._server.removeListener("listening",this._onceServerListening);this._server.removeListener("error",this._onServerError);this._server.removeListener("upgrade",this._onServerUpgrade)}delete this._server}if(callback)callback(error);else if(error)throw error};WebSocketServer.prototype.handleUpgrade=function(req,socket,upgradeHead,cb){if(this.options.path){var u=url.parse(req.url);if(u&&u.pathname!==this.options.path)return}if(typeof req.headers.upgrade==="undefined"||req.headers.upgrade.toLowerCase()!=="websocket"){abortConnection(socket,400,"Bad Request");return}if(req.headers["sec-websocket-key1"])handleHixieUpgrade.apply(this,arguments);else handleHybiUpgrade.apply(this,arguments)};module.exports=WebSocketServer;function handleHybiUpgrade(req,socket,upgradeHead,cb){var errorHandler=function(){try{socket.destroy()}catch(e){}};socket.on("error",errorHandler);if(!req.headers["sec-websocket-key"]){abortConnection(socket,400,"Bad Request");return}var version=parseInt(req.headers["sec-websocket-version"]);if([8,13].indexOf(version)===-1){abortConnection(socket,400,"Bad Request");return}var protocols=req.headers["sec-websocket-protocol"];var origin=version<13?req.headers["sec-websocket-origin"]:req.headers["origin"];var extensionsOffer=Extensions.parse(req.headers["sec-websocket-extensions"]);var self=this;var completeHybiUpgrade2=function(protocol){var key=req.headers["sec-websocket-key"];var shasum=crypto.createHash("sha1");shasum.update(key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");key=shasum.digest("base64");var headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+key];if(typeof protocol!="undefined"){headers.push("Sec-WebSocket-Protocol: "+protocol)}var extensions={};try{extensions=acceptExtensions.call(self,extensionsOffer)}catch(err){abortConnection(socket,400,"Bad Request");return}if(Object.keys(extensions).length){var serverExtensions={};Object.keys(extensions).forEach(function(token){serverExtensions[token]=[extensions[token].params]});headers.push("Sec-WebSocket-Extensions: "+Extensions.format(serverExtensions))}self.emit("headers",headers);socket.setTimeout(0);socket.setNoDelay(true);try{socket.write(headers.concat("","").join("\r\n"))}catch(e){try{socket.destroy()}catch(e){}return}var client=new WebSocket([req,socket,upgradeHead],{protocolVersion:version,protocol:protocol,extensions:extensions,maxPayload:self.options.maxPayload});if(self.options.clientTracking){self.clients.push(client);client.on("close",function(){var index=self.clients.indexOf(client);if(index!=-1){self.clients.splice(index,1)}})}socket.removeListener("error",errorHandler);cb(client)};var completeHybiUpgrade1=function(){if(typeof self.options.handleProtocols=="function"){var protList=(protocols||"").split(/, */);var callbackCalled=false;var res=self.options.handleProtocols(protList,function(result,protocol){callbackCalled=true;if(!result)abortConnection(socket,401,"Unauthorized");else completeHybiUpgrade2(protocol)});if(!callbackCalled){abortConnection(socket,501,"Could not process protocols")}return}else{if(typeof protocols!=="undefined"){completeHybiUpgrade2(protocols.split(/, */)[0])}else{completeHybiUpgrade2()}}};if(typeof this.options.verifyClient=="function"){var info={origin:origin,secure:typeof req.connection.authorized!=="undefined"||typeof req.connection.encrypted!=="undefined",req:req};if(this.options.verifyClient.length==2){this.options.verifyClient(info,function(result,code,name){if(typeof code==="undefined")code=401;if(typeof name==="undefined")name=http.STATUS_CODES[code];if(!result)abortConnection(socket,code,name);else completeHybiUpgrade1();
});return}else if(!this.options.verifyClient(info)){abortConnection(socket,401,"Unauthorized");return}}completeHybiUpgrade1()}function handleHixieUpgrade(req,socket,upgradeHead,cb){var errorHandler=function(){try{socket.destroy()}catch(e){}};socket.on("error",errorHandler);if(this.options.disableHixie){abortConnection(socket,401,"Hixie support disabled");return}if(!req.headers["sec-websocket-key2"]){abortConnection(socket,400,"Bad Request");return}var origin=req.headers["origin"],self=this;var onClientVerified=function(){var wshost;if(!req.headers["x-forwarded-host"])wshost=req.headers.host;else wshost=req.headers["x-forwarded-host"];var location=(req.headers["x-forwarded-proto"]==="https"||socket.encrypted?"wss":"ws")+"://"+wshost+req.url,protocol=req.headers["sec-websocket-protocol"];var buildResponseHeader=function(){var headers=["HTTP/1.1 101 Switching Protocols","Upgrade: WebSocket","Connection: Upgrade","Sec-WebSocket-Location: "+location];if(typeof protocol!="undefined")headers.push("Sec-WebSocket-Protocol: "+protocol);if(typeof origin!="undefined")headers.push("Sec-WebSocket-Origin: "+origin);return new Buffer(headers.concat("","").join("\r\n"))};var handshakeResponse=function(){socket.setTimeout(0);socket.setNoDelay(true);var headerBuffer=buildResponseHeader();try{socket.write(headerBuffer,"binary",function(err){if(err)socket.removeListener("data",handler);return})}catch(e){try{socket.destroy()}catch(e){}return}};var completeHandshake=function(nonce,rest,headerBuffer){var k1=req.headers["sec-websocket-key1"],k2=req.headers["sec-websocket-key2"],md5=crypto.createHash("md5");[k1,k2].forEach(function(k){var n=parseInt(k.replace(/[^\d]/g,"")),spaces=k.replace(/[^ ]/g,"").length;if(spaces===0||n%spaces!==0){abortConnection(socket,400,"Bad Request");return}n/=spaces;md5.update(String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255))});md5.update(nonce.toString("binary"));socket.setTimeout(0);socket.setNoDelay(true);try{var hashBuffer=new Buffer(md5.digest("binary"),"binary");var handshakeBuffer=new Buffer(headerBuffer.length+hashBuffer.length);headerBuffer.copy(handshakeBuffer,0);hashBuffer.copy(handshakeBuffer,headerBuffer.length);socket.write(handshakeBuffer,"binary",function(err){if(err)return;var client=new WebSocket([req,socket,rest],{protocolVersion:"hixie-76",protocol:protocol});if(self.options.clientTracking){self.clients.push(client);client.on("close",function(){var index=self.clients.indexOf(client);if(index!=-1){self.clients.splice(index,1)}})}socket.removeListener("error",errorHandler);cb(client)})}catch(e){try{socket.destroy()}catch(e){}return}};var nonceLength=8;if(upgradeHead&&upgradeHead.length>=nonceLength){var nonce=upgradeHead.slice(0,nonceLength);var rest=upgradeHead.length>nonceLength?upgradeHead.slice(nonceLength):null;completeHandshake.call(self,nonce,rest,buildResponseHeader())}else{var nonce=new Buffer(nonceLength);upgradeHead.copy(nonce,0);var received=upgradeHead.length;var rest=null;var handler=function(data){var toRead=Math.min(data.length,nonceLength-received);if(toRead===0)return;data.copy(nonce,received,0,toRead);received+=toRead;if(received==nonceLength){socket.removeListener("data",handler);if(toRead<data.length)rest=data.slice(toRead);completeHandshake.call(self,nonce,rest,new Buffer(0))}};socket.on("data",handler);handshakeResponse()}};if(typeof this.options.verifyClient=="function"){var info={origin:origin,secure:typeof req.connection.authorized!=="undefined"||typeof req.connection.encrypted!=="undefined",req:req};if(this.options.verifyClient.length==2){var self=this;this.options.verifyClient(info,function(result,code,name){if(typeof code==="undefined")code=401;if(typeof name==="undefined")name=http.STATUS_CODES[code];if(!result)abortConnection(socket,code,name);else onClientVerified.apply(self)});return}else if(!this.options.verifyClient(info)){abortConnection(socket,401,"Unauthorized");return}}onClientVerified()}function acceptExtensions(offer){var extensions={};var options=this.options.perMessageDeflate;var maxPayload=this.options.maxPayload;if(options&&offer[PerMessageDeflate.extensionName]){var perMessageDeflate=new PerMessageDeflate(options!==true?options:{},true,maxPayload);perMessageDeflate.accept(offer[PerMessageDeflate.extensionName]);extensions[PerMessageDeflate.extensionName]=perMessageDeflate}return extensions}function abortConnection(socket,code,name){try{var response=["HTTP/1.1 "+code+" "+name,"Content-type: text/html"];socket.write(response.concat("","").join("\r\n"))}catch(e){}finally{try{socket.destroy()}catch(e){}}}}).call(this,require("buffer").Buffer)},{"./Extensions":213,"./PerMessageDeflate":214,"./WebSocket":221,buffer:85,crypto:97,events:125,http:192,options:140,tls:83,url:200,util:206}],223:[function(require,module,exports){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target}},{}],224:[function(require,module,exports){(function(process,__dirname){function e(a){throw a}var j=void 0,l=!0,m=null,n=!1;function r(){return function(){}}var t;t||(t=eval("(function() { try { return Module || {} } catch(e) { return {} } })()"));var aa={},u;for(u in t)t.hasOwnProperty(u)&&(aa[u]=t[u]);var v="object"===typeof process&&"function"===typeof require,ba="object"===typeof window,ca="function"===typeof importScripts,da=!ba&&!v&&!ca;if(v){t.print=function(a){process.stdout.write(a+"\n")};t.printErr=function(a){process.stderr.write(a+"\n")};var ea=require("fs"),fa=require("path");t.read=function(a,b){var a=fa.normalize(a),c=ea.readFileSync(a);!c&&a!=fa.resolve(a)&&(a=path.join(__dirname,"..","src",a),c=ea.readFileSync(a));c&&!b&&(c=c.toString());return c};t.readBinary=function(a){return t.read(a,l)};t.load=function(a){ga(read(a))};t.arguments=process.argv.slice(2);module.exports=t}else da?(t.print=print,"undefined"!=typeof printErr&&(t.printErr=printErr),t.read="undefined"!=typeof read?read:function(){e("no read() available (jsc?)")},t.readBinary=function(a){return read(a,"binary")},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:"undefined"!=typeof arguments&&(t.arguments=arguments),this.Module=t):ba||ca?(t.read=function(a){var b=new XMLHttpRequest;b.open("GET",a,n);b.send(m);return b.responseText},"undefined"!=typeof arguments&&(t.arguments=arguments),"undefined"!==typeof console?(t.print=function(a){console.log(a)},t.printErr=function(a){console.log(a)}):t.print=r(),ba?this.Module=t:t.load=importScripts):e("Unknown runtime environment. Where are we?");function ga(a){eval.call(m,a)}"undefined"==!t.load&&t.read&&(t.load=function(a){ga(t.read(a))});t.print||(t.print=r());t.printErr||(t.printErr=t.print);t.arguments||(t.arguments=[]);t.print=t.print;t.T=t.printErr;t.preRun=[];t.postRun=[];for(u in aa)aa.hasOwnProperty(u)&&(t[u]=aa[u]);function ha(){return w}function ia(a){w=a}function ja(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===a[a.length-1]?ka:"i"===a[0]?(a=parseInt(a.substr(1)),y(0===a%8),a/8):0}}function la(a,b,c){c&&c.length?(c.splice||(c=Array.prototype.slice.call(c)),c.splice(0,0,b),t["dynCall_"+a].apply(m,c)):t["dynCall_"+a].call(m,b)}var ma;function na(){var a=[],b=0;this.Ca=function(c){c&=255;if(0==a.length){if(0==(c&128))return String.fromCharCode(c);a.push(c);b=192==(c&224)?1:224==(c&240)?2:3;return""}if(b&&(a.push(c),b--,0<b))return"";var c=a[0],d=a[1],f=a[2],g=a[3];2==a.length?c=String.fromCharCode((c&31)<<6|d&63):3==a.length?c=String.fromCharCode((c&15)<<12|(d&63)<<6|f&63):(c=(c&7)<<18|(d&63)<<12|(f&63)<<6|g&63,c=String.fromCharCode(Math.floor((c-65536)/1024)+55296,(c-65536)%1024+56320));a.length=0;return c};this.Jb=function(a){for(var a=unescape(encodeURIComponent(a)),b=[],f=0;f<a.length;f++)b.push(a.charCodeAt(f));return b}}function oa(a){var b=w;w=w+a|0;w=w+7&-8;return b}function pa(a){var b=z;z=z+a|0;z=z+7&-8;return b}function qa(a){var b=D;D=D+a|0;D=D+7&-8;D>=ra&&E("Cannot enlarge memory arrays in asm.js. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value "+ra+", or (2) set Module.TOTAL_MEMORY before the program runs.");return b}function sa(a,b){return Math.ceil(a/(b?b:8))*(b?b:8)}var ka=4,ta={},ua=n,va;function y(a,b){a||E("Assertion failed: "+b)}t.ccall=function(a,b,c,d){return wa(xa(a),b,c,d)};function xa(a){try{var b=t["_"+a];b||(b=eval("_"+a))}catch(c){}y(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)");return b}function wa(a,b,c,d){function f(a,b){if("string"==b){if(a===m||a===j||0===a)return 0;a=G(a);b="array"}if("array"==b){g||(g=ha());var c=oa(a.length);ya(a,c);return c}return a}var g=0,h=0,d=d?d.map(function(a){return f(a,c[h++])}):[];a=a.apply(m,d);"string"==b?b=za(a):(y("array"!=b),b=a);g&&ia(g);return b}t.cwrap=function(a,b,c){var d=xa(a);return function(){return wa(d,b,c,Array.prototype.slice.call(arguments))}};function Aa(a,b,c){c=c||"i8";"*"===c.charAt(c.length-1)&&(c="i32");switch(c){case"i1":I[a]=b;break;case"i8":I[a]=b;break;case"i16":Ba[a>>1]=b;break;case"i32":J[a>>2]=b;break;case"i64":va=[b>>>0,(tempDouble=b,1<=+Ca(tempDouble)?0<tempDouble?(Da(+Ea(tempDouble/4294967296),4294967295)|0)>>>0:~~+Fa((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)];J[a>>2]=va[0];J[a+4>>2]=va[1];break;case"float":Ga[a>>2]=b;break;case"double":Ha[a>>3]=b;break;default:E("invalid type for setValue: "+c)}}t.setValue=Aa;t.getValue=function(a,b){b=b||"i8";"*"===b.charAt(b.length-1)&&(b="i32");switch(b){case"i1":return I[a];case"i8":return I[a];case"i16":return Ba[a>>1];case"i32":return J[a>>2];case"i64":return J[a>>2];case"float":return Ga[a>>2];case"double":return Ha[a>>3];default:E("invalid type for setValue: "+b)}return m};var Ia=1,K=2,Ja=4;t.ALLOC_NORMAL=0;t.ALLOC_STACK=Ia;t.ALLOC_STATIC=K;t.ALLOC_DYNAMIC=3;t.ALLOC_NONE=Ja;function L(a,b,c,d){var f,g;"number"===typeof a?(f=l,g=a):(f=n,g=a.length);var h="string"===typeof b?b:m,c=c==Ja?d:[Ka,oa,pa,qa][c===j?K:c](Math.max(g,h?1:b.length));if(f){d=c;y(0==(c&3));for(a=c+(g&-4);d<a;d+=4)J[d>>2]=0;for(a=c+g;d<a;)I[d++|0]=0;return c}if("i8"===h)return a.subarray||a.slice?M.set(a,c):M.set(new Uint8Array(a),c),c;for(var d=0,i,q;d<g;){var k=a[d];"function"===typeof k&&(k=ta.Yd(k));f=h||b[d];0===f?d++:("i64"==f&&(f="i32"),Aa(c+d,k,f),q!==f&&(i=ja(f),q=f),d+=i)}return c}t.allocate=L;function za(a,b){for(var c=n,d,f=0;;){d=M[a+f|0];if(128<=d)c=l;else if(0==d&&!b)break;f++;if(b&&f==b)break}b||(b=f);var g="";if(!c){for(;0<b;)d=String.fromCharCode.apply(String,M.subarray(a,a+Math.min(b,1024))),g=g?g+d:d,a+=1024,b-=1024;return g}c=new na;for(f=0;f<b;f++)d=M[a+f|0],g+=c.Ca(d);return g}t.Pointer_stringify=za;t.UTF16ToString=function(a){for(var b=0,c="";;){var d=Ba[a+2*b>>1];if(0==d)return c;++b;c+=String.fromCharCode(d)}};t.stringToUTF16=function(a,b){for(var c=0;c<a.length;++c)Ba[b+2*c>>1]=a.charCodeAt(c);Ba[b+2*a.length>>1]=0};t.UTF32ToString=function(a){for(var b=0,c="";;){var d=J[a+4*b>>2];if(0==d)return c;++b;65536<=d?(d-=65536,c+=String.fromCharCode(55296|d>>10,56320|d&1023)):c+=String.fromCharCode(d)}};t.stringToUTF32=function(a,b){for(var c=0,d=0;d<a.length;++d){var f=a.charCodeAt(d);if(55296<=f&&57343>=f)var g=a.charCodeAt(++d),f=65536+((f&1023)<<10)|g&1023;J[b+4*c>>2]=f;++c}J[b+4*c>>2]=0};function La(a){try{"number"===typeof a&&(a=za(a));if("_"!==a[0]||"_"!==a[1]||"Z"!==a[2])return a;var b=3,c={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},d=[],f=function(g,i,q){var i=i||Infinity,k="",A=[],x;if("N"!==a[b]){"K"===a[b]&&b++;var s=parseInt(a.substr(b));if(s){var F=s.toString().length;x=a.substr(b+F,s);b+=F+s}}else{b++;"K"===a[b]&&b++;for(x=[];"E"!==a[b];)if("S"===a[b])b++,s=a.indexOf("_",b),x.push(d[a.substring(b,s)||0]||"?"),b=s+1;else{s=parseInt(a.substr(b));F=s.toString().length;if(!s||!F){b--;break}var H=a.substr(b+F,s);x.push(H);d.push(H);b+=F+s}b++;x=x.join("::");i--;if(0===i)return g?[x]:x}"I"===a[b]?(b++,s=f(l),F=f(l,1,l),k+=F[0]+" "+x+"<"+s.join(", ")+">"):k=x;a:for(;b<a.length&&0<i--;)if(x=a[b++],x in c)A.push(c[x]);else switch(x){case"P":A.push(f(l,1,l)[0]+"*");break;case"R":A.push(f(l,1,l)[0]+"&");break;case"L":b++;s=a.indexOf("E",b)-b;A.push(a.substr(b,s));b+=s+2;break;case"A":s=parseInt(a.substr(b));b+=s.toString().length;"_"!==a[b]&&e("?");b++;A.push(f(l,1,l)[0]+" ["+s+"]");break;case"E":break a;default:k+="?"+x;break a}!q&&(1===A.length&&"void"===A[0])&&(A=[]);return g?A:k+("("+A.join(", ")+")")};return f()}catch(g){return a}}function Ma(){var a=Error().stack;return a?a.replace(/__Z[\w\d_]+/g,function(a){var c=La(a);return a===c?a:a+" ["+c+"]"}):"(no stack trace available)"}var I,M,Ba,Na,J,Oa,Ga,Ha,Pa=0,z=0,Qa=0,w=0,Ra=0,Sa=0,D=0,ra=t.TOTAL_MEMORY||67108864;y("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"Cannot fallback to non-typed array case: Code is too specialized");var N=new ArrayBuffer(ra);I=new Int8Array(N);Ba=new Int16Array(N);J=new Int32Array(N);M=new Uint8Array(N);Na=new Uint16Array(N);Oa=new Uint32Array(N);Ga=new Float32Array(N);Ha=new Float64Array(N);J[0]=255;y(255===M[0]&&0===M[3],"Typed arrays 2 must be run on a little-endian system");t.HEAP=j;t.HEAP8=I;t.HEAP16=Ba;t.HEAP32=J;t.HEAPU8=M;t.HEAPU16=Na;t.HEAPU32=Oa;t.HEAPF32=Ga;t.HEAPF64=Ha;function Ta(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var c=b.D;"number"===typeof c?b.ha===j?la("v",c):la("vi",c,[b.ha]):c(b.ha===j?m:b.ha)}}}var Va=[],Wa=[],Xa=[],Ya=[],Za=[],$a=n;function ab(a){Va.unshift(a)}t.addOnPreRun=t.Od=ab;t.addOnInit=t.Ld=function(a){Wa.unshift(a)};t.addOnPreMain=t.Nd=function(a){Xa.unshift(a)};t.addOnExit=t.Kd=function(a){Ya.unshift(a)};function bb(a){Za.unshift(a)}t.addOnPostRun=t.Md=bb;function G(a,b,c){a=(new na).Jb(a);c&&(a.length=c);b||a.push(0);return a}t.intArrayFromString=G;t.intArrayToString=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];255<d&&(d&=255);b.push(String.fromCharCode(d))}return b.join("")};t.writeStringToMemory=function(a,b,c){a=G(a,c);for(c=0;c<a.length;)I[b+c|0]=a[c],c+=1};function ya(a,b){for(var c=0;c<a.length;c++)I[b+c|0]=a[c]}t.writeArrayToMemory=ya;t.writeAsciiToMemory=function(a,b,c){for(var d=0;d<a.length;d++)I[b+d|0]=a.charCodeAt(d);c||(I[b+a.length|0]=0)};function cb(a,b){return 0<=a?a:32>=b?2*Math.abs(1<<b-1)+a:Math.pow(2,b)+a}function db(a,b){if(0>=a)return a;var c=32>=b?Math.abs(1<<b-1):Math.pow(2,b-1);if(a>=c&&(32>=b||a>c))a=-2*c+a;return a}Math.imul||(Math.imul=function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16)|0});Math.ae=Math.imul;var Ca=Math.abs,Fa=Math.ceil,Ea=Math.floor,eb=Math.pow,Da=Math.min,O=0,fb=m,gb=m;function hb(){O++;t.monitorRunDependencies&&t.monitorRunDependencies(O)}t.addRunDependency=hb;function ib(){O--;t.monitorRunDependencies&&t.monitorRunDependencies(O);if(0==O&&(fb!==m&&(clearInterval(fb),fb=m),gb)){var a=gb;gb=m;a()}}t.removeRunDependency=ib;t.preloadedImages={};t.preloadedAudios={};var Pa=8,z=Pa+4528,jb;jb=jb=L([0,0,0,0,0,0,0,0],"i8",K);Wa.push({D:function(){kb()}},{D:function(){lb()}},{D:function(){mb()}});var nb;nb=L([0,0,0,0,104,12,0,0,22,0,0,0,44,0,0,0,34,0,0,0,30,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0],"i8",K);var ob;ob=L([0,0,0,0,120,12,0,0,22,0,0,0,10,0,0,0,34,0,0,0,30,0,0,0,2,0,0,0,4,0,0,0,4,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0],"i8",K);L([61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,91,32,83,101,97,114,99,104,32,83,116,97,116,105,115,116,105,99,115,32,93,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,124,32,32,32,32,32,32,32,32,32,32,32,124,32,32,32,32,86,97,114,115,32,32,67,108,97,117,115,101,115,32,76,105,116,101,114,97,108,115,32,124,32,32,32,32,76,105,109,105,116,32,32,67,108,97,117,115,101,115,32,76,105,116,47,67,108,32,124,32,32,32,32,32,32,32,32,32,32,124,0,124,32,67,111,110,102,108,105,99,116,115,32,124,32,32,32,32,32,32,32,32,32,32,79,82,73,71,73,78,65,76,32,32,32,32,32,32,32,32,32,124,32,32,32,32,32,32,32,32,32,32,76,69,65,82,78,84,32,32,32,32,32,32,32,32,32,32,124,32,80,114,111,103,114,101,115,115,32,124,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,0,0,0,0,0,0,36,64,0,0,0,0,0,0,89,64,0,0,0,0,0,136,195,64,0,0,0,0,132,215,151,65,0,128,224,55,121,195,65,67,23,110,5,181,181,184,147,70,245,249,63,233,3,79,56,77,50,29,48,249,72,119,130,90,60,191,115,127,221,79,21,117,101,108,105,109,0,0,0,0,114,110,100,45,102,114,101,113,0,0,0,0,0,0,0,0,97,115,121,109,109,0,0,0,32,32,45,37,45,49,50,115,32,61,32,37,45,56,115,32,37,99,37,52,46,50,103,32,46,46,32,37,52,46,50,103,37,99,32,40,100,101,102,97,117,108,116,58,32,37,103,41,10,0,0,0,0,0,0,0,67,79,82,69,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,115,109,97,108,108,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,67,104,101,99,107,32,105,102,32,97,32,99,108,97,117,115,101,32,105,115,32,97,108,114,101,97,100,121,32,105,109,112,108,105,101,100,46,32,40,99,111,115,116,108,121,41,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,61,0,0,0,0,0,0,0,84,104,101,32,99,108,97,117,115,101,32,97,99,116,105,118,105,116,121,32,100,101,99,97,121,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,114,99,104,101,99,107,0,0,10,32,32,32,32,32,32,32,32,37,115,10,0,0,0,0,93,32,40,100,101,102,97,117,108,116,58,32,37,100,41,10,0,0,0,0,0,0,0,0,105,109,97,120,0,0,0,0,32,46,46,32,0,0,0,0,37,52,100,0,0,0,0,0,105,109,105,110,0,0,0,0,32,32,45,37,45,49,50,115,32,61,32,37,45,56,115,32,91,0,0,0,0,0,0,0,99,108,97,45,100,101,99,97,121,0,0,0,0,0,0,0,110,111,45,0,0,0,0,0,111,102,102,0,0,0,0,0,111,110,0,0,0,0,0,0,40,100,101,102,97,117,108,116,58,32,37,115,41,10,0,0,32,32,45,37,115,44,32,45,110,111,45,37,115,0,0,0,83,104,114,105,110,107,32,99,108,97,117,115,101,115,32,98,121,32,97,115,121,109,109,101,116,114,105,99,32,98,114,97,110,99,104,105,110,103,46,0,80,65,82,83,69,32,69,82,82,79,82,33,32,85,110,101,120,112,101,99,116,101,100,32,99,104,97,114,58,32,37,99,10,0,0,0,0,0,0,0,84,104,101,32,118,97,114,105,97,98,108,101,32,97,99,116,105,118,105,116,121,32,100,101,99,97,121,32,102,97,99,116,111,114,0,0,0,0,0,0,73,78,68,69,84,0,0,0,32,37,115,37,100,0,0,0,45,0,0,0,0,0,0,0,60,98,111,111,108,62,0,0,83,65,84,0,0,0,0,0,83,73,77,80,0,0,0,0,85,78,83,65,84,0,0,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,0,124,32,37,57,100,32,124,32,37,55,100,32,37,56,100,32,37,56,100,32,124,32,37,56,100,32,37,56,100,32,37,54,46,48,102,32,124,32,37,54,46,51,102,32,37,37,32,124,10,0,0,0,0,0,0,0,77,105,110,105,109,117,109,32,108,101,97,114,110,116,32,99,108,97,117,115,101,32,108,105,109,105,116,0,0,0,0,0,109,105,110,45,108,101,97,114,110,116,115,0,0,0,0,0,60,105,110,116,51,50,62,0,84,104,101,32,102,114,97,99,116,105,111,110,32,111,102,32,119,97,115,116,101,100,32,109,101,109,111,114,121,32,97,108,108,111,119,101,100,32,98,101,102,111,114,101,32,97,32,103,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,32,105,115,32,116,114,105,103,103,101,114,101,100,0,0,103,99,45,102,114,97,99,0,82,101,115,116,97,114,116,32,105,110,116,101,114,118,97,108,32,105,110,99,114,101,97,115,101,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,114,105,110,99,0,0,0,0,84,104,101,32,98,97,115,101,32,114,101,115,116,97,114,116,32,105,110,116,101,114,118,97,108,0,0,0,0,0,0,0,60,100,111,117,98,108,101,62,0,0,0,0,0,0,0,0,114,102,105,114,115,116,0,0,124,32,32,71,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,58,32,32,32,37,49,50,100,32,98,121,116,101,115,32,61,62,32,37,49,50,100,32,98,121,116,101,115,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,0,0,0,0,124,32,32,69,108,105,109,105,110,97,116,101,100,32,99,108,97,117,115,101,115,58,32,32,32,32,32,37,49,48,46,50,102,32,77,98,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,101,108,105,109,105,110,97,116,105,111,110,32,108,101,102,116,58,32,37,49,48,100,13,0,85,115,101,32,116,104,101,32,76,117,98,121,32,114,101,115,116,97,114,116,32,115,101,113,117,101,110,99,101,0,0,0,115,117,98,115,117,109,112,116,105,111,110,32,108,101,102,116,58,32,37,49,48,100,32,40,37,49,48,100,32,115,117,98,115,117,109,101,100,44,32,37,49,48,100,32,100,101,108,101,116,101,100,32,108,105,116,101,114,97,108,115,41,13,0,0,108,117,98,121,0,0,0,0,84,104,101,32,102,114,97,99,116,105,111,110,32,111,102,32,119,97,115,116,101,100,32,109,101,109,111,114,121,32,97,108,108,111,119,101,100,32,98,101,102,111,114,101,32,97,32,103,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,32,105,115,32,116,114,105,103,103,101,114,101,100,32,100,117,114,105,110,103,32,115,105,109,112,108,105,102,105,99,97,116,105,111,110,46,0,0,0,82,97,110,100,111,109,105,122,101,32,116,104,101,32,105,110,105,116,105,97,108,32,97,99,116,105,118,105,116,121,0,0,115,105,109,112,45,103,99,45,102,114,97,99,0,0,0,0,114,110,100,45,105,110,105,116,0,0,0,0,0,0,0,0,118,97,114,45,100,101,99,97,121,0,0,0,0,0,0,0,68,111,32,110,111,116,32,99,104,101,99,107,32,105,102,32,115,117,98,115,117,109,112,116,105,111,110,32,97,103,97,105,110,115,116,32,97,32,99,108,97,117,115,101,32,108,97,114,103,101,114,32,116,104,97,110,32,116,104,105,115,46,32,45,49,32,109,101,97,110,115,32,110,111,32,108,105,109,105,116,46,0,0,0,0,0,0,0,67,111,110,116,114,111,108,115,32,116,104,101,32,108,101,118,101,108,32,111,102,32,112,104,97,115,101,32,115,97,118,105,110,103,32,40,48,61,110,111,110,101,44,32,49,61,108,105,109,105,116,101,100,44,32,50,61,102,117,108,108,41,0,0,115,117,98,45,108,105,109,0,112,104,97,115,101,45,115,97,118,105,110,103,0,0,0,0,86,97,114,105,97,98,108,101,115,32,97,114,101,32,110,111,116,32,101,108,105,109,105,110,97,116,101,100,32,105,102,32,105,116,32,112,114,111,100,117,99,101,115,32,97,32,114,101,115,111,108,118,101,110,116,32,119,105,116,104,32,97,32,108,101,110,103,116,104,32,97,98,111,118,101,32,116,104,105,115,32,108,105,109,105,116,46,32,45,49,32,109,101,97,110,115,32,110,111,32,108,105,109,105,116,0,0,0,0,0,0,0,67,111,110,116,114,111,108,115,32,99,111,110,102,108,105,99,116,32,99,108,97,117,115,101,32,109,105,110,105,109,105,122,97,116,105,111,110,32,40,48,61,110,111,110,101,44,32,49,61,98,97,115,105,99,44,32,50,61,100,101,101,112,41,0,99,108,45,108,105,109,0,0,99,99,109,105,110,45,109,111,100,101,0,0,0,0,0,0,65,108,108,111,119,32,97,32,118,97,114,105,97,98,108,101,32,101,108,105,109,105,110,97,116,105,111,110,32,115,116,101,112,32,116,111,32,103,114,111,119,32,98,121,32,97,32,110,117,109,98,101,114,32,111,102,32,99,108,97,117,115,101,115,46,0,0,0,0,0,0,0,85,115,101,100,32,98,121,32,116,104,101,32,114,97,110,100,111,109,32,118,97,114,105,97,98,108,101,32,115,101,108,101,99,116,105,111,110,0,0,0,103,114,111,119,0,0,0,0,114,110,100,45,115,101,101,100,0,0,0,0,0,0,0,0,80,101,114,102,111,114,109,32,118,97,114,105,97,98,108,101,32,101,108,105,109,105,110,97,116,105,111,110,46,0,0,0,84,104,101,32,102,114,101,113,117,101,110,99,121,32,119,105,116,104,32,119,104,105,99,104,32,116,104,101,32,100,101,99,105,115,105,111,110,32,104,101,117,114,105,115,116,105,99,32,116,114,105,101,115,32,116,111,32,99,104,111,111,115,101,32,97,32,114,97,110,100,111,109,32,118,97,114,105,97,98,108,101,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,26,0,0,0,6,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,12,0,0,42,0,0,0,2,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,12,0,0,14,0,0,0,28,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,12,0,0,20,0,0,0,24,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56,12,0,0,38,0,0,0,40,0,0,0,6,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,72,12,0,0,18,0,0,0,16,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,12,0,0,8,0,0,0,4,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,83,116,57,116,121,112,101,95,105,110,102,111,0,0,0,0,83,116,57,101,120,99,101,112,116,105,111,110,0,0,0,0,83,116,57,98,97,100,95,97,108,108,111,99,0,0,0,0,78,55,77,105,110,105,115,97,116,57,73,110,116,79,112,116,105,111,110,69,0,0,0,0,78,55,77,105,110,105,115,97,116,54,83,111,108,118,101,114,69,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,54,79,112,116,105,111,110,69,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,50,48,79,117,116,79,102,77,101,109,111,114,121,69,120,99,101,112,116,105,111,110,69,0,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,49,50,68,111,117,98,108,101,79,112,116,105,111,110,69,0,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,49,48,83,105,109,112,83,111,108,118,101,114,69,0,0,78,55,77,105,110,105,115,97,116,49,48,66,111,111,108,79,112,116,105,111,110,69,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,0,0,0,0,0,136,10,0,0,0,0,0,0,152,10,0,0,0,0,0,0,168,10,0,0,248,11,0,0,0,0,0,0,0,0,0,0,184,10,0,0,40,12,0,0,0,0,0,0,0,0,0,0,208,10,0,0,0,0,0,0,232,10,0,0,0,0,0,0,0,11,0,0,0,0,0,0,40,11,0,0,40,12,0,0,0,0,0,0,0,0,0,0,72,11,0,0,32,12,0,0,0,0,0,0,0,0,0,0,96,11,0,0,40,12,0,0,0,0,0,0,0,0,0,0,120,11,0,0,120,12,0,0,0,0,0,0,0,0,0,0,160,11,0,0,136,12,0,0,0,0,0,0,0,0,0,0,200,11,0,0,240,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",Ja,8);var pb=sa(L(12,"i8",K),8);y(0==pb%8);var Q={Z:1,fa:2,wd:3,uc:4,P:5,Ja:6,Rb:7,Rc:8,ea:9,ec:10,Y:11,Gd:11,qb:12,jb:13,pc:14,cd:15,cc:16,Ga:17,Hd:18,Ha:19,dd:20,ta:21,u:22,Mc:23,pb:24,hd:25,Dd:26,qc:27,Zc:28,wa:29,td:30,Fc:31,nd:32,mc:33,Ka:34,Vc:42,sc:43,fc:44,wc:45,xc:46,yc:47,Ec:48,Ed:49,Pc:50,vc:51,kc:35,Sc:37,Wb:52,Zb:53,Id:54,Nc:55,$b:56,ac:57,lc:35,bc:59,ad:60,Qc:61,Ad:62,$c:63,Wc:64,Xc:65,sd:66,Tc:67,Ub:68,xd:69,gc:70,od:71,Hc:72,nc:73,Yb:74,jd:76,Xb:77,rd:78,zc:79,Ac:80,Dc:81,Cc:82,Bc:83,bd:38,Ia:39,Ic:36,ua:40,va:95,md:96,jc:104,Oc:105,Vb:97,qd:91,fd:88,Yc:92,ud:108,ic:111,Sb:98,hc:103,Lc:101,Jc:100,Bd:110,rc:112,mb:113,nb:115,kb:114,lb:89,Gc:90,pd:93,vd:94,Tb:99,Kc:102,ob:106,ga:107,Cd:109,Fd:87,oc:122,yd:116,gd:95,Uc:123,tc:84,kd:75,dc:125,ed:131,ld:130,zd:86},qb={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},rb=0;function R(a){return J[rb>>2]=a}function sb(a,b){for(var c=0,d=a.length-1;0<=d;d--){var f=a[d];"."===f?a.splice(d,1):".."===f?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function S(a){var b="/"===a.charAt(0),c="/"===a.substr(-1),a=sb(a.split("/").filter(function(a){return!!a}),!b).join("/");!a&&!b&&(a=".");a&&c&&(a+="/");return(b?"/":"")+a}function tb(a){if("/"===a)return"/";var b=a.lastIndexOf("/");return-1===b?a:a.substr(b+1)}function ub(){for(var a="",b=n,c=arguments.length-1;-1<=c&&!b;c--){var d=0<=c?arguments[c]:"/";"string"!==typeof d&&e(new TypeError("Arguments to path.resolve must be strings"));d&&(a=d+"/"+a,b="/"===d.charAt(0))}a=sb(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."}var vb=[];function wb(a,b){vb[a]={input:[],R:[],ba:b};xb[a]={k:yb}}var yb={open:function(a){var b=vb[a.e.pa];b||e(new T(Q.Ha));a.B=b;a.seekable=n},close:function(a){a.B.R.length&&a.B.ba.oa(a.B,10)},O:function(a,b,c,d){(!a.B||!a.B.ba.Va)&&e(new T(Q.Ja));for(var f=0,g=0;g<d;g++){var h;try{h=a.B.ba.Va(a.B)}catch(i){e(new T(Q.P))}h===j&&0===f&&e(new T(Q.Y));if(h===m||h===j)break;f++;b[c+g]=h}f&&(a.e.timestamp=Date.now());return f},write:function(a,b,c,d){(!a.B||!a.B.ba.oa)&&e(new T(Q.Ja));for(var f=0;f<d;f++)try{a.B.ba.oa(a.B,b[c+f])}catch(g){e(new T(Q.P))}d&&(a.e.timestamp=Date.now());return f}},U={F:m,ib:1,sa:2,hb:3,K:function(){return U.createNode(m,"/",16895,0)},createNode:function(a,b,c,d){(24576===(c&61440)||4096===(c&61440))&&e(new T(Q.Z));U.F||(U.F={dir:{e:{N:U.n.N,A:U.n.A,Aa:U.n.Aa,S:U.n.S,S:U.n.S,rename:U.n.rename,gb:U.n.gb,eb:U.n.eb,ab:U.n.ab,ra:U.n.ra},G:{Q:U.k.Q}},file:{e:{N:U.n.N,A:U.n.A},G:{Q:U.k.Q,O:U.k.O,write:U.k.write,Na:U.k.Na,Ya:U.k.Ya}},link:{e:{N:U.n.N,A:U.n.A,qa:U.n.qa},G:{}},Qa:{e:{N:U.n.N,A:U.n.A},G:zb}});c=Ab(a,b,c,d);16384===(c.mode&61440)?(c.n=U.F.dir.e,c.k=U.F.dir.G,c.o={}):32768===(c.mode&61440)?(c.n=U.F.file.e,c.k=U.F.file.G,c.o=[],c.ja=U.sa):40960===(c.mode&61440)?(c.n=U.F.link.e,c.k=U.F.link.G):8192===(c.mode&61440)&&(c.n=U.F.Qa.e,c.k=U.F.Qa.G);c.timestamp=Date.now();a&&(a.o[b]=c);return c;
},ya:function(a){a.ja!==U.sa&&(a.o=Array.prototype.slice.call(a.o),a.ja=U.sa)},n:{N:function(a){var b={};b.Wd=8192===(a.mode&61440)?a.id:1;b.be=a.id;b.mode=a.mode;b.ge=1;b.uid=0;b.$d=0;b.pa=a.pa;b.size=16384===(a.mode&61440)?4096:32768===(a.mode&61440)?a.o.length:40960===(a.mode&61440)?a.link.length:0;b.Qd=new Date(a.timestamp);b.fe=new Date(a.timestamp);b.Vd=new Date(a.timestamp);b.ub=4096;b.Sd=Math.ceil(b.size/b.ub);return b},A:function(a,b){b.mode!==j&&(a.mode=b.mode);b.timestamp!==j&&(a.timestamp=b.timestamp);if(b.size!==j){U.ya(a);var c=a.o;if(b.size<c.length)c.length=b.size;else for(;b.size>c.length;)c.push(0)}},Aa:function(){e(Bb[Q.fa])},S:function(a,b,c,d){return U.createNode(a,b,c,d)},rename:function(a,b,c){if(16384===(a.mode&61440)){var d;try{d=Cb(b,c)}catch(f){}if(d)for(var g in d.o)e(new T(Q.Ia))}delete a.parent.o[a.name];a.name=c;b.o[c]=a;a.parent=b},gb:function(a,b){delete a.o[b]},eb:function(a,b){var c=Cb(a,b),d;for(d in c.o)e(new T(Q.Ia));delete a.o[b]},ab:function(a){var b=[".",".."],c;for(c in a.o)a.o.hasOwnProperty(c)&&b.push(c);return b},ra:function(a,b,c){a=U.createNode(a,b,41471,0);a.link=c;return a},qa:function(a){40960!==(a.mode&61440)&&e(new T(Q.u));return a.link}},k:{O:function(a,b,c,d,f){a=a.e.o;if(f>=a.length)return 0;d=Math.min(a.length-f,d);y(0<=d);if(8<d&&a.subarray)b.set(a.subarray(f,f+d),c);else for(var g=0;g<d;g++)b[c+g]=a[f+g];return d},write:function(a,b,c,d,f,g){var h=a.e;h.timestamp=Date.now();a=h.o;if(d&&0===a.length&&0===f&&b.subarray)return g&&b.buffer===I.buffer&&0===c?(h.o=b,h.ja=U.ib):(h.o=new Uint8Array(b.subarray(c,c+d)),h.ja=U.hb),d;U.ya(h);for(a=h.o;a.length<f;)a.push(0);for(g=0;g<d;g++)a[f+g]=b[c+g];return d},Q:function(a,b,c){1===c?b+=a.position:2===c&&32768===(a.e.mode&61440)&&(b+=a.e.o.length);0>b&&e(new T(Q.u));a.Ob=[];return a.position=b},Na:function(a,b,c){U.ya(a.e);a=a.e.o;for(b+=c;b>a.length;)a.push(0)},Ya:function(a,b,c,d,f,g,h){32768!==(a.e.mode&61440)&&e(new T(Q.Ha));a=a.e.o;if(!(h&2)&&(a.buffer===b||a.buffer===b.buffer))f=n,d=a.byteOffset;else{if(0<f||f+d<a.length)a=a.subarray?a.subarray(f,f+d):Array.prototype.slice.call(a,f,f+d);f=l;(d=Ka(d))||e(new T(Q.qb));b.set(a,d)}return{je:d,Pd:f}}}},Db=L(1,"i32*",K),Eb=L(1,"i32*",K);jb=L(1,"i32*",K);var Fb=m,Gb=[],xb=[m],V=[m],Hb=1,Ib=m,Jb=l,T=m,Bb={};function Kb(a){a instanceof T||e(a+" : "+Ma());R(a.Sa)}function W(a,b){a=ub("/",a);b=b||{Da:0};8<b.Da&&e(new T(Q.ua));for(var c=sb(a.split("/").filter(function(a){return!!a}),n),d=Fb,f="/",g=0;g<c.length;g++){var h=g===c.length-1;if(h&&b.parent)break;d=Cb(d,c[g]);f=S(f+"/"+c[g]);d.Gb&&(d=d.K.root);if(!h||b.$)for(h=0;40960===(d.mode&61440);){d=W(f,{$:n}).e;d.n.qa||e(new T(Q.u));var d=d.n.qa(d),i=ub;var q=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(f).slice(1),f=q[0],q=q[1];!f&&!q?f=".":(q&&(q=q.substr(0,q.length-1)),f+=q);f=i(f,d);d=W(f,{Da:b.Da}).e;40<h++&&e(new T(Q.ua))}}return{path:f,e:d}}function Lb(a){for(var b;;){if(a===a.parent)return a=a.K.Hb,!b?a:"/"!==a[a.length-1]?a+"/"+b:a+b;b=b?a.name+"/"+b:a.name;a=a.parent}}function Mb(a,b){for(var c=0,d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%Ib.length}function Cb(a,b){var c=Nb(a,"x");c&&e(new T(c));for(c=Ib[Mb(a.id,b)];c;c=c.Ib){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return a.n.Aa(a,b)}function Ab(a,b,c,d){Ob||(Ob=function(a,b,c,d){this.id=Hb++;this.name=b;this.mode=c;this.n={};this.k={};this.pa=d;this.K=this.parent=m;a||(a=this);this.parent=a;this.K=a.K;a=Mb(this.parent.id,this.name);this.Ib=Ib[a];Ib[a]=this},Ob.prototype={},Object.defineProperties(Ob.prototype,{O:{get:function(){return 365===(this.mode&365)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(this.mode&146)},set:function(a){a?this.mode|=146:this.mode&=-147}},Eb:{get:function(){return 16384===(this.mode&61440)}},Db:{get:function(){return 8192===(this.mode&61440)}}}));return new Ob(a,b,c,d)}var Pb={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Qb(a){var b=Pb[a];"undefined"===typeof b&&e(Error("Unknown file open mode: "+a));return b}function Nb(a,b){return Jb?0:-1!==b.indexOf("r")&&!(a.mode&292)||-1!==b.indexOf("w")&&!(a.mode&146)||-1!==b.indexOf("x")&&!(a.mode&73)?Q.jb:0}function Rb(a,b){try{return Cb(a,b),Q.Ga}catch(c){}return Nb(a,"wx")}function Sb(a,b,c){Tb||(Tb={},Object.defineProperties(Tb,{object:{get:function(){return this.e},set:function(a){this.e=a}},de:{get:function(){return 1!==(this.M&2097155)}},ee:{get:function(){return 0!==(this.M&2097155)}},ce:{get:function(){return this.M&1024}}}));a.prototype=Tb;var d;a:{b=b||1;for(c=c||4096;b<=c;b++)if(!V[b]){d=b;break a}e(new T(Q.pb))}a.C=d;return V[d]=a}var zb={open:function(a){a.k=xb[a.e.pa].k;a.k.open&&a.k.open(a)},Q:function(){e(new T(Q.wa))}};function Ub(a,b){var c;b&&(c=W(b,{$:n}),b=c.path);var d={type:a,ie:{},Hb:b,root:m},f=a.K(d);f.K=d;d.root=f;c&&(c.e.K=d,c.e.Gb=l,"/"===b&&(Fb=d.root));Gb.push(d);return f}function Vb(a,b,c){var d=W(a,{parent:l}).e,a=tb(a),f=Rb(d,a);f&&e(new T(f));d.n.S||e(new T(Q.Z));return d.n.S(d,a,b,c)}function Wb(a,b){b=(b!==j?b:438)&4095;b|=32768;return Vb(a,b,0)}function Xb(a,b){b=(b!==j?b:511)&1023;b|=16384;return Vb(a,b,0)}function Yb(a,b,c){"undefined"===typeof c&&(c=b,b=438);return Vb(a,b|8192,c)}function Zb(a,b){var c=W(b,{parent:l}).e,d=tb(b),f=Rb(c,d);f&&e(new T(f));c.n.ra||e(new T(Q.Z));return c.n.ra(c,d,a)}function $b(a,b){var c;c="string"===typeof a?W(a,{$:l}).e:a;c.n.A||e(new T(Q.Z));c.n.A(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})}function ac(a,b){var c,b="string"===typeof b?Qb(b):b;c=b&64?("undefined"===typeof c?438:c)&4095|32768:0;var d;if("object"===typeof a)d=a;else{a=S(a);try{d=W(a,{$:!(b&131072)}).e}catch(f){}}b&64&&(d?b&128&&e(new T(Q.Ga)):d=Vb(a,c,0));d||e(new T(Q.fa));8192===(d.mode&61440)&&(b&=-513);d?40960===(d.mode&61440)?c=Q.ua:16384===(d.mode&61440)&&(0!==(b&2097155)||b&512)?c=Q.ta:(c=["r","w","rw"][b&2097155],b&512&&(c+="w"),c=Nb(d,c)):c=Q.fa;c&&e(new T(c));if(b&512){c=d;c="string"===typeof c?W(c,{$:l}).e:c;c.n.A||e(new T(Q.Z));16384===(c.mode&61440)&&e(new T(Q.ta));32768!==(c.mode&61440)&&e(new T(Q.u));var g=Nb(c,"w");g&&e(new T(g));c.n.A(c,{size:0,timestamp:Date.now()})}b&=-641;d=Sb({e:d,path:Lb(d),M:b,seekable:l,position:0,k:d.k,Ob:[],error:n},j,j);d.k.open&&d.k.open(d);t.logReadFiles&&!(b&1)&&(bc||(bc={}),a in bc||(bc[a]=1,t.printErr("read file: "+a)));return d}function cc(a){try{a.k.close&&a.k.close(a)}catch(b){e(b)}finally{V[a.C]=m}}function dc(a,b,c,d,f,g){(0>d||0>f)&&e(new T(Q.u));0===(a.M&2097155)&&e(new T(Q.ea));16384===(a.e.mode&61440)&&e(new T(Q.ta));a.k.write||e(new T(Q.u));var h=l;"undefined"===typeof f?(f=a.position,h=n):a.seekable||e(new T(Q.wa));a.M&1024&&((!a.seekable||!a.k.Q)&&e(new T(Q.wa)),a.k.Q(a,0,2));b=a.k.write(a,b,c,d,f,g);h||(a.position+=b);return b}function ec(){T||(T=function(a){this.Sa=a;for(var b in Q)if(Q[b]===a){this.code=b;break}this.message=qb[a];this.stack=Ma()},T.prototype=Error(),[Q.fa].forEach(function(a){Bb[a]=new T(a);Bb[a].stack="<generic error, no stack>"}))}var fc;function gc(a,b){var c=0;a&&(c|=365);b&&(c|=146);return c}function hc(a,b,c,d,f,g){a=b?S(("string"===typeof a?a:Lb(a))+"/"+b):a;d=gc(d,f);f=Wb(a,d);if(c){if("string"===typeof c){for(var a=Array(c.length),b=0,h=c.length;b<h;++b)a[b]=c.charCodeAt(b);c=a}$b(f,d|146);a=ac(f,"w");dc(a,c,0,c.length,0,g);cc(a);$b(f,d)}return f}function ic(a,b,c,d){a=S(("string"===typeof a?a:Lb(a))+"/"+b);b=gc(!!c,!!d);ic.Xa||(ic.Xa=64);var f;f=ic.Xa++<<8|0;xb[f]={k:{open:function(a){a.seekable=n},close:function(){d&&(d.buffer&&d.buffer.length)&&d(10)},O:function(a,b,d,f){for(var k=0,A=0;A<f;A++){var x;try{x=c()}catch(s){e(new T(Q.P))}x===j&&0===k&&e(new T(Q.Y));if(x===m||x===j)break;k++;b[d+A]=x}k&&(a.e.timestamp=Date.now());return k},write:function(a,b,c,f){for(var k=0;k<f;k++)try{d(b[c+k])}catch(A){e(new T(Q.P))}f&&(a.e.timestamp=Date.now());return k}}};return Yb(a,b,f)}function jc(a){if(a.Db||a.Eb||a.link||a.o)return l;var b=l;"undefined"!==typeof XMLHttpRequest&&e(Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread."));if(t.read)try{a.o=G(t.read(a.url),l)}catch(c){b=n}else e(Error("Cannot load without read() or XMLHttpRequest."));b||R(Q.P);return b}var Ob,Tb,bc,Y={K:function(){return Ab(m,"/",16895,0)},xb:function(a,b,c){c&&y(1==b==(6==c));a={yb:a,type:b,protocol:c,p:m,ca:{},Ba:[],U:[],W:Y.q};b=Y.na();c=Ab(Y.root,b,49152,0);c.V=a;b=Sb({path:b,e:c,M:Qb("r+"),seekable:n,k:Y.k});a.G=b;return a},zb:function(a){a=V[a];return!a||49152!==(a.e.mode&49152)?m:a.e.V},k:{$a:function(a){a=a.e.V;return a.W.$a(a)},Wa:function(a,b,c){a=a.e.V;return a.W.Wa(a,b,c)},O:function(a,b,c,d){a=a.e.V;d=a.W.Kb(a,d);if(!d)return 0;b.set(d.buffer,c);return d.buffer.length},write:function(a,b,c,d){a=a.e.V;return a.W.Mb(a,b,c,d)},close:function(a){a=a.e.V;a.W.close(a)}},na:function(){Y.na.Ra||(Y.na.Ra=0);return"socket["+Y.na.Ra++ +"]"},q:{ka:function(a,b,c){var d;"object"===typeof b&&(d=b,c=b=m);if(d)d.La?(b=d.La.ke,c=d.La.le):((c=/ws[s]?:\/\/([^:]+):(\d+)/.exec(d.url))||e(Error("WebSocket URL must be in the format ws(s)://address:port")),b=c[1],c=parseInt(c[2],10));else try{d=new WebSocket("ws://"+b+":"+c,v?{}:["binary"]),d.binaryType="arraybuffer"}catch(f){e(new T(Q.mb))}b={H:b,port:c,g:d,la:[]};Y.q.Ma(a,b);Y.q.Bb(a,b);2===a.type&&"undefined"!==typeof a.X&&b.la.push(new Uint8Array([255,255,255,255,112,111,114,116,(a.X&65280)>>8,a.X&255]));return b},ma:function(a,b,c){return a.ca[b+":"+c]},Ma:function(a,b){a.ca[b.H+":"+b.port]=b},bb:function(a,b){delete a.ca[b.H+":"+b.port]},Bb:function(a,b){function c(c){y("string"!==typeof c&&c.byteLength!==j);var c=new Uint8Array(c),d=f;f=n;d&&10===c.length&&255===c[0]&&255===c[1]&&255===c[2]&&255===c[3]&&112===c[4]&&111===c[5]&&114===c[6]&&116===c[7]?(c=c[8]<<8|c[9],Y.q.bb(a,b),b.port=c,Y.q.Ma(a,b)):a.U.push({H:b.H,port:b.port,data:c})}function d(){try{for(var a=b.la.shift();a;)b.g.send(a),a=b.la.shift()}catch(c){b.g.close()}}var f=l;v?(b.g.aa("open",d),b.g.aa("message",function(a,b){b.Rd&&c(new Uint8Array(a).buffer)}),b.g.aa("error",r())):(b.g.onopen=d,b.g.onmessage=function(a){c(a.data)})},$a:function(a){if(1===a.type&&a.p)return a.Ba.length?65:0;var b=0,c=1===a.type?Y.q.ma(a,a.I,a.J):m;if(a.U.length||!c||c&&c.g.readyState===c.g.da||c&&c.g.readyState===c.g.CLOSED)b|=65;if(!c||c&&c.g.readyState===c.g.OPEN)b|=4;if(c&&c.g.readyState===c.g.da||c&&c.g.readyState===c.g.CLOSED)b|=16;return b},Wa:function(a,b,c){switch(b){case 21531:return b=0,a.U.length&&(b=a.U[0].data.length),J[c>>2]=b,0;default:return Q.u}},close:function(a){if(a.p){try{a.p.close()}catch(b){}a.p=m}for(var c=Object.keys(a.ca),d=0;d<c.length;d++){var f=a.ca[c[d]];try{f.g.close()}catch(g){}Y.q.bb(a,f)}return 0},bind:function(a,b,c){("undefined"!==typeof a.Fa||"undefined"!==typeof a.X)&&e(new T(Q.u));a.Fa=b;a.X=c||_mkport();if(2===a.type){a.p&&(a.p.close(),a.p=m);try{a.W.Fb(a,0)}catch(d){d instanceof T||e(d),d.Sa!==Q.va&&e(d)}}},Ud:function(a,b,c){a.p&&e(new T(ERRNO_CODS.va));if("undefined"!==typeof a.I&&"undefined"!==typeof a.J){var d=Y.q.ma(a,a.I,a.J);d&&(d.g.readyState===d.g.CONNECTING&&e(new T(Q.kb)),e(new T(Q.ob)))}b=Y.q.ka(a,b,c);a.I=b.H;a.J=b.port;e(new T(Q.nb))},Fb:function(a){v||e(new T(Q.va));a.p&&e(new T(Q.u));var b=require("ws").Jd;a.p=new b({host:a.Fa,port:a.X});a.p.aa("connection",function(b){if(1===a.type){var d=Y.xb(a.yb,a.type,a.protocol),b=Y.q.ka(d,b);d.I=b.H;d.J=b.port;a.Ba.push(d)}else Y.q.ka(a,b)});a.p.aa("closed",function(){a.p=m});a.p.aa("error",r())},accept:function(a){a.p||e(new T(Q.u));var b=a.Ba.shift();b.G.M=a.G.M;return b},Zd:function(a,b){var c,d;b?((a.I===j||a.J===j)&&e(new T(Q.ga)),c=a.I,d=a.J):(c=a.Fa||0,d=a.X||0);return{H:c,port:d}},Mb:function(a,b,c,d,f,g){if(2===a.type){if(f===j||g===j)f=a.I,g=a.J;(f===j||g===j)&&e(new T(Q.lb))}else f=a.I,g=a.J;var h=Y.q.ma(a,f,g);1===a.type&&((!h||h.g.readyState===h.g.da||h.g.readyState===h.g.CLOSED)&&e(new T(Q.ga)),h.g.readyState===h.g.CONNECTING&&e(new T(Q.Y)));b=b instanceof Array||b instanceof ArrayBuffer?b.slice(c,c+d):b.buffer.slice(b.byteOffset+c,b.byteOffset+c+d);if(2===a.type&&(!h||h.g.readyState!==h.g.OPEN)){if(!h||h.g.readyState===h.g.da||h.g.readyState===h.g.CLOSED)h=Y.q.ka(a,f,g);h.la.push(b);return d}try{return h.g.send(b),d}catch(i){e(new T(Q.u))}},Kb:function(a,b){1===a.type&&a.p&&e(new T(Q.ga));var c=a.U.shift();if(!c){if(1===a.type){var d=Y.q.ma(a,a.I,a.J);if(d){if(d.g.readyState===d.g.da||d.g.readyState===d.g.CLOSED)return m;e(new T(Q.Y))}e(new T(Q.ga))}e(new T(Q.Y))}var d=c.data.byteLength||c.data.length,f=c.data.byteOffset||0,g=c.data.buffer||c.data,h=Math.min(b,d),i={buffer:new Uint8Array(g,f,h),H:c.H,port:c.port};1===a.type&&h<d&&(c.data=new Uint8Array(g,f+h,d-h),a.U.unshift(c));return i}}};function kc(a,b,c){a=V[a];if(!a)return R(Q.ea),-1;try{return dc(a,I,b,c)}catch(d){return Kb(d),-1}}function lc(a,b,c,d){c*=b;if(0==c)return 0;a=kc(d,a,c);if(-1==a){if(b=V[d])b.error=l;return 0}return Math.floor(a/b)}t._strlen=mc;function nc(a){return 0>a||0===a&&-Infinity===1/a}function oc(a,b){function c(a){var c;"double"===a?c=Ha[b+f>>3]:"i64"==a?(c=[J[b+f>>2],J[b+(f+8)>>2]],f+=8):(a="i32",c=J[b+f>>2]);f+=Math.max(Math.max(ja(a),ka),8);return c}for(var d=a,f=0,g=[],h,i;;){var q=d;h=I[d];if(0===h)break;i=I[d+1|0];if(37==h){var k=n,A=n,x=n,s=n,F=n;a:for(;;){switch(i){case 43:k=l;break;case 45:A=l;break;case 35:x=l;break;case 48:if(s)break a;else{s=l;break}case 32:F=l;break;default:break a}d++;i=I[d+1|0]}var H=0;if(42==i)H=c("i32"),d++,i=I[d+1|0];else for(;48<=i&&57>=i;)H=10*H+(i-48),d++,i=I[d+1|0];var P=n;if(46==i){var C=0,P=l;d++;i=I[d+1|0];if(42==i)C=c("i32"),d++;else for(;;){i=I[d+1|0];if(48>i||57<i)break;C=10*C+(i-48);d++}i=I[d+1|0]}else C=6;var B;switch(String.fromCharCode(i)){case"h":i=I[d+2|0];104==i?(d++,B=1):B=2;break;case"l":i=I[d+2|0];108==i?(d++,B=8):B=4;break;case"L":case"q":case"j":B=8;break;case"z":case"t":case"I":B=4;break;default:B=m}B&&d++;i=I[d+1|0];switch(String.fromCharCode(i)){case"d":case"i":case"u":case"o":case"x":case"X":case"p":q=100==i||105==i;B=B||4;h=c("i"+8*B);var p;8==B&&(h=117==i?+(h[0]>>>0)+4294967296*+(h[1]>>>0):+(h[0]>>>0)+4294967296*+(h[1]|0));4>=B&&(h=(q?db:cb)(h&Math.pow(256,B)-1,8*B));var X=Math.abs(h),q="";if(100==i||105==i)p=db(h,8*B).toString(10);else if(117==i)p=cb(h,8*B).toString(10),h=Math.abs(h);else if(111==i)p=(x?"0":"")+X.toString(8);else if(120==i||88==i){q=x&&0!=h?"0x":"";if(0>h){h=-h;p=(X-1).toString(16);X=[];for(x=0;x<p.length;x++)X.push((15-parseInt(p[x],16)).toString(16));for(p=X.join("");p.length<2*B;)p="f"+p}else p=X.toString(16);88==i&&(q=q.toUpperCase(),p=p.toUpperCase())}else 112==i&&(0===X?p="(nil)":(q="0x",p=X.toString(16)));if(P)for(;p.length<C;)p="0"+p;0<=h&&(k?q="+"+q:F&&(q=" "+q));"-"==p.charAt(0)&&(q="-"+q,p=p.substr(1));for(;q.length+p.length<H;)A?p+=" ":s?p="0"+p:q=" "+q;p=q+p;p.split("").forEach(function(a){g.push(a.charCodeAt(0))});break;case"f":case"F":case"e":case"E":case"g":case"G":h=c("double");if(isNaN(h))p="nan",s=n;else if(isFinite(h)){P=n;B=Math.min(C,20);if(103==i||71==i)P=l,C=C||1,B=parseInt(h.toExponential(B).split("e")[1],10),C>B&&-4<=B?(i=(103==i?"f":"F").charCodeAt(0),C-=B+1):(i=(103==i?"e":"E").charCodeAt(0),C--),B=Math.min(C,20);if(101==i||69==i)p=h.toExponential(B),/[eE][-+]\d$/.test(p)&&(p=p.slice(0,-1)+"0"+p.slice(-1));else if(102==i||70==i)p=h.toFixed(B),0===h&&nc(h)&&(p="-"+p);q=p.split("e");if(P&&!x)for(;1<q[0].length&&-1!=q[0].indexOf(".")&&("0"==q[0].slice(-1)||"."==q[0].slice(-1));)q[0]=q[0].slice(0,-1);else for(x&&-1==p.indexOf(".")&&(q[0]+=".");C>B++;)q[0]+="0";p=q[0]+(1<q.length?"e"+q[1]:"");69==i&&(p=p.toUpperCase());0<=h&&(k?p="+"+p:F&&(p=" "+p))}else p=(0>h?"-":"")+"inf",s=n;for(;p.length<H;)p=A?p+" ":s&&("-"==p[0]||"+"==p[0])?p[0]+"0"+p.slice(1):(s?"0":" ")+p;97>i&&(p=p.toUpperCase());p.split("").forEach(function(a){g.push(a.charCodeAt(0))});break;case"s":s=(k=c("i8*"))?mc(k):6;P&&(s=Math.min(s,C));if(!A)for(;s<H--;)g.push(32);if(k)for(x=0;x<s;x++)g.push(M[k++|0]);else g=g.concat(G("(null)".substr(0,s),l));if(A)for(;s<H--;)g.push(32);break;case"c":for(A&&g.push(c("i8"));0<--H;)g.push(32);A||g.push(c("i8"));break;case"n":A=c("i32*");J[A>>2]=g.length;break;case"%":g.push(h);break;default:for(x=q;x<d+2;x++)g.push(I[x])}d+=2}else g.push(h),d+=1}return g}function pc(a,b,c){c=oc(b,c);b=ha();a=lc(L(c,"i8",Ia),1,c.length,a);ia(b);return a}function qc(a){t.print("exit("+a+") called");t.exit(a)}function Z(){return J[Z.L>>2]}function rc(){return!!rc.fb}function sc(a){var b=n;try{a==__ZTIi&&(b=l)}catch(c){}try{a==__ZTIj&&(b=l)}catch(d){}try{a==__ZTIl&&(b=l)}catch(f){}try{a==__ZTIm&&(b=l)}catch(g){}try{a==__ZTIx&&(b=l)}catch(h){}try{a==__ZTIy&&(b=l)}catch(i){}try{a==__ZTIf&&(b=l)}catch(q){}try{a==__ZTId&&(b=l)}catch(k){}try{a==__ZTIe&&(b=l)}catch(A){}try{a==__ZTIc&&(b=l)}catch(x){}try{a==__ZTIa&&(b=l)}catch(s){}try{a==__ZTIh&&(b=l)}catch(F){}try{a==__ZTIs&&(b=l)}catch(H){}try{a==__ZTIt&&(b=l)}catch(P){}return b}function tc(a,b,c){if(0==c)return n;if(0==b||b==a)return l;switch(sc(b)?b:J[J[b>>2]-8>>2]){case 0:return 0==J[J[a>>2]-8>>2]?tc(J[a+8>>2],J[b+8>>2],c):n;case 1:return n;case 2:return tc(a,J[b+8>>2],c);default:return n}}function uc(a,b,c){if(!uc.Cb){try{J[__ZTVN10__cxxabiv119__pointer_type_infoE>>2]=0}catch(d){}try{J[ob>>2]=1}catch(f){}try{J[nb>>2]=2}catch(g){}uc.Cb=l}J[Z.L>>2]=a;J[Z.L+4>>2]=b;J[Z.L+8>>2]=c;"uncaught_exception"in rc?rc.fb++:rc.fb=1;e(a+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.")}function vc(a,b,c){for(var d=0;d<c;){var f=M[a+d|0],g=M[b+d|0];if(f==g&&0==f)break;if(0==f)return-1;if(0==g)return 1;if(f==g)d++;else return f>g?1:-1}return 0}function wc(a){return 32==a||9<=a&&13>=a}function xc(a,b,c,d,f,g,h){for(;wc(I[a]);)a++;var i=1;45==I[a]?(i=-1,a++):43==I[a]&&a++;if(c){if(16==c&&48==I[a]&&(120==I[a+1|0]||88==I[a+1|0]))a+=2}else 48==I[a]&&(120==I[a+1|0]||88==I[a+1|0]?(c=16,a+=2):(c=8,a++));c||(c=10);for(var q,k=0;0!=(q=I[a])&&!(q=parseInt(String.fromCharCode(q),c),isNaN(q));)k=k*c+q,a++;k*=i;b&&(J[b>>2]=a);h&&(Math.abs(k)>f?(k=f,R(Q.Ka)):k=cb(k,g));if(k>f||k<d)k=k>f?f:d,R(Q.Ka);return 64==g?($.setTempRet0((tempDouble=k,1<=+Ca(tempDouble)?0<tempDouble?(Da(+Ea(tempDouble/4294967296),4294967295)|0)>>>0:~~+Fa((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)),k>>>0)|0:k}function yc(a,b){return kc(b,a,mc(a))}function zc(a,b){var c=cb(a&255);I[zc.cb|0]=c;if(-1==kc(b,zc.cb,1)){if(c=V[b])c.error=l;return-1}return c}t._memcpy=Ac;t._memset=Bc;function Cc(a){Cc.vb||(D=D+4095&-4096,Cc.vb=l,y(qa),Cc.tb=qa,qa=function(){E("cannot dynamically allocate, sbrk now has control")});var b=D;0!=a&&Cc.tb(a);return b}var Dc=n,Ec=n,Fc=n,Gc=n,Hc=j,Ic=j;function Jc(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[a.substr(a.lastIndexOf(".")+1)]}var Kc=[];function Lc(){var a=t.canvas;Kc.forEach(function(b){b(a.width,a.height)})}function Mc(){var a=t.canvas;this.Qb=a.width;this.Pb=a.height;a.width=screen.width;a.height=screen.height;"undefined"!=typeof SDL&&(a=Oa[SDL.screen+0*ka>>2],J[SDL.screen+0*ka>>2]=a|8388608);Lc()}function Nc(){var a=t.canvas;a.width=this.Qb;a.height=this.Pb;"undefined"!=typeof SDL&&(a=Oa[SDL.screen+0*ka>>2],J[SDL.screen+0*ka>>2]=a&-8388609);Lc()}var Oc,Pc,Qc,Rc;ec();Ib=Array(4096);Fb=Ab(m,"/",16895,0);Ub(U,"/");Xb("/tmp");Xb("/dev");xb[259]={k:{O:function(){return 0},write:function(){return 0}}};Yb("/dev/null",259);wb(1280,{Va:function(a){if(!a.input.length){var b=m;if(v){if(b=process.stdin.read(),!b){if(process.stdin._readableState&&process.stdin._readableState.ended)return m;return}}else"undefined"!=typeof window&&"function"==typeof window.prompt?(b=window.prompt("Input: "),b!==m&&(b+="\n")):"function"==typeof readline&&(b=readline(),b!==m&&(b+="\n"));if(!b)return m;a.input=G(b,l)}return a.input.shift()},oa:function(a,b){b===m||10===b?(t.print(a.R.join("")),a.R=[]):a.R.push(Sc.Ca(b))}});wb(1536,{oa:function(a,b){b===m||10===b?(t.printErr(a.R.join("")),a.R=[]):a.R.push(Sc.Ca(b))}});Yb("/dev/tty",1280);Yb("/dev/tty1",1536);Xb("/dev/shm");Xb("/dev/shm/tmp");Wa.unshift({D:function(){if(!t.noFSInit&&!fc){y(!fc,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)");fc=l;ec();t.stdin=t.stdin;t.stdout=t.stdout;t.stderr=t.stderr;t.stdin?ic("/dev","stdin",t.stdin):Zb("/dev/tty","/dev/stdin");t.stdout?ic("/dev","stdout",m,t.stdout):Zb("/dev/tty","/dev/stdout");t.stderr?ic("/dev","stderr",m,t.stderr):Zb("/dev/tty1","/dev/stderr");var a=ac("/dev/stdin","r");J[Db>>2]=a.C;y(1===a.C,"invalid handle for stdin ("+a.C+")");a=ac("/dev/stdout","w");J[Eb>>2]=a.C;y(2===a.C,"invalid handle for stdout ("+a.C+")");a=ac("/dev/stderr","w");J[jb>>2]=a.C;y(3===a.C,"invalid handle for stderr ("+a.C+")")}}});Xa.push({D:function(){Jb=n}});Ya.push({D:function(){fc=n;for(var a=0;a<V.length;a++){var b=V[a];b&&cc(b)}}});t.FS_createFolder=function(a,b,c,d){a=S(("string"===typeof a?a:Lb(a))+"/"+b);return Xb(a,gc(c,d))};t.FS_createPath=function(a,b){for(var a="string"===typeof a?a:Lb(a),c=b.split("/").reverse();c.length;){var d=c.pop();if(d){var f=S(a+"/"+d);try{Xb(f)}catch(g){}a=f}}return f};t.FS_createDataFile=hc;t.FS_createPreloadedFile=function(a,b,c,d,f,g,h,i,q){function k(){Fc=document.pointerLockElement===s||document.mozPointerLockElement===s||document.webkitPointerLockElement===s}function A(c){function p(c){i||hc(a,b,c,d,f,q);g&&g();ib()}var k=n;t.preloadPlugins.forEach(function(a){!k&&a.canHandle(F)&&(a.handle(c,F,p,function(){h&&h();ib()}),k=l)});k||p(c)}t.preloadPlugins||(t.preloadPlugins=[]);if(!Oc&&!ca){Oc=l;try{new Blob,Pc=l}catch(x){Pc=n,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Qc="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:!Pc?console.log("warning: no BlobBuilder"):m;Rc="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:j;!t.Za&&"undefined"===typeof Rc&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),t.Za=l);t.preloadPlugins.push({canHandle:function(a){return!t.Za&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},handle:function(a,b,c,d){var f=m;if(Pc)try{f=new Blob([a],{type:Jc(b)}),f.size!==a.length&&(f=new Blob([new Uint8Array(a).buffer],{type:Jc(b)}))}catch(g){var h="Blob constructor present but fails: "+g+"; falling back to blob builder";ma||(ma={});ma[h]||(ma[h]=1,t.T(h))}f||(f=new Qc,f.append(new Uint8Array(a).buffer),f=f.getBlob());var i=Rc.createObjectURL(f),k=new Image;k.onload=function(){y(k.complete,"Image "+b+" could not be decoded");var d=document.createElement("canvas");d.width=k.width;d.height=k.height;d.getContext("2d").drawImage(k,0,0);t.preloadedImages[b]=d;Rc.revokeObjectURL(i);c&&c(a)};k.onerror=function(){console.log("Image "+i+" could not be decoded");d&&d()};k.src=i}});t.preloadPlugins.push({canHandle:function(a){return!t.he&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(a,b,c,d){function f(d){h||(h=l,t.preloadedAudios[b]=d,c&&c(a))}function g(){h||(h=l,t.preloadedAudios[b]=new Audio,d&&d())}var h=n;if(Pc){try{var i=new Blob([a],{type:Jc(b)})}catch(k){return g()}var i=Rc.createObjectURL(i),s=new Audio;s.addEventListener("canplaythrough",function(){f(s)},n);s.onerror=function(){if(!h){console.log("warning: browser could not fully decode audio "+b+", trying slower base64 approach");for(var c="",d=0,g=0,i=0;i<a.length;i++){d=d<<8|a[i];for(g+=8;6<=g;)var k=d>>g-6&63,g=g-6,c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k]}2==g?(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(d&3)<<4],c+="=="):4==g&&(c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(d&15)<<2],c+="=");s.src="data:audio/x-"+b.substr(-3)+";base64,"+c;f(s)}};s.src=i;setTimeout(function(){ua||f(s)},1e4)}else return g()}});var s=t.canvas;s.Ea=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock;s.Ta=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||r();s.Ta=s.Ta.bind(document);document.addEventListener("pointerlockchange",k,n);document.addEventListener("mozpointerlockchange",k,n);document.addEventListener("webkitpointerlockchange",k,n);t.elementPointerLock&&s.addEventListener("click",function(a){!Fc&&s.Ea&&(s.Ea(),a.preventDefault())},n)}var F=b?ub(S(a+"/"+b)):a;hb();if("string"==typeof c){var H=h,P=function(){H?H():e('Loading data file "'+c+'" failed.')},C=new XMLHttpRequest;C.open("GET",c,l);C.responseType="arraybuffer";C.onload=function(){if(200==C.status||0==C.status&&C.response){var a=C.response;y(a,'Loading data file "'+c+'" failed (no arrayBuffer).');a=new Uint8Array(a);A(a);ib()}else P()};C.onerror=P;C.send(m);hb()}else A(c)};t.FS_createLazyFile=function(a,b,c,d,f){var g,h;"undefined"!==typeof XMLHttpRequest?(ca||e("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc"),g=function(){this.za=n;this.ia=[]},g.prototype.get=function(a){if(!(a>this.length-1||0>a)){var b=a%this.wb;return this.Ab(Math.floor(a/this.wb))[b]}},g.prototype.Nb=function(a){this.Ab=a},g.prototype.Oa=function(){var a=new XMLHttpRequest;a.open("HEAD",c,n);a.send(m);200<=a.status&&300>a.status||304===a.status||e(Error("Couldn't load "+c+". Status: "+a.status));var b=Number(a.getResponseHeader("Content-length")),d,f=1048576;if(!((d=a.getResponseHeader("Accept-Ranges"))&&"bytes"===d))f=b;var g=this;g.Nb(function(a){var d=a*f,h=(a+1)*f-1,h=Math.min(h,b-1);if("undefined"===typeof g.ia[a]){var i=g.ia;d>h&&e(Error("invalid range ("+d+", "+h+") or no bytes requested!"));h>b-1&&e(Error("only "+b+" bytes available! programmer error!"));var k=new XMLHttpRequest;k.open("GET",c,n);b!==f&&k.setRequestHeader("Range","bytes="+d+"-"+h);"undefined"!=typeof Uint8Array&&(k.responseType="arraybuffer");k.overrideMimeType&&k.overrideMimeType("text/plain; charset=x-user-defined");k.send(m);200<=k.status&&300>k.status||304===k.status||e(Error("Couldn't load "+c+". Status: "+k.status));d=k.response!==j?new Uint8Array(k.response||[]):G(k.responseText||"",l);i[a]=d}"undefined"===typeof g.ia[a]&&e(Error("doXHR failed!"));return g.ia[a]});this.sb=b;this.rb=f;this.za=l},g=new g,Object.defineProperty(g,"length",{get:function(){this.za||this.Oa();return this.sb}}),Object.defineProperty(g,"chunkSize",{get:function(){this.za||this.Oa();return this.rb}}),h=j):(h=c,g=j);var i,a=S(("string"===typeof a?a:Lb(a))+"/"+b);i=Wb(a,gc(d,f));g?i.o=g:h&&(i.o=m,i.url=h);var q={};Object.keys(i.k).forEach(function(a){var b=i.k[a];q[a]=function(){jc(i)||e(new T(Q.P));return b.apply(m,arguments)}});q.O=function(a,b,c,d,f){jc(i)||e(new T(Q.P));a=a.e.o;if(f>=a.length)return 0;d=Math.min(a.length-f,d);y(0<=d);if(a.slice)for(var g=0;g<d;g++)b[c+g]=a[f+g];else for(g=0;g<d;g++)b[c+g]=a.get(f+g);return d};i.k=q;return i};t.FS_createLink=function(a,b,c){a=S(("string"===typeof a?a:Lb(a))+"/"+b);return Zb(c,a)};t.FS_createDevice=ic;rb=pa(4);J[rb>>2]=0;Wa.unshift({D:r()});Ya.push({D:r()});var Sc=new na;v&&(require("fs"),process.platform&&process.platform.match(/^win/));Wa.push({D:function(){Y.root=Ub(Y,m)}});Z.L=L(12,"void*",K);zc.cb=L([0],"i8",K);t.requestFullScreen=function(a,b){function c(){Ec=n;(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement)===d?(d.Pa=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen,d.Pa=d.Pa.bind(document),Hc&&d.Ea(),Ec=l,Ic&&Mc()):Ic&&Nc();if(t.onFullScreen)t.onFullScreen(Ec)}Hc=a;Ic=b;"undefined"===typeof Hc&&(Hc=l);"undefined"===typeof Ic&&(Ic=n);var d=t.canvas;Gc||(Gc=l,document.addEventListener("fullscreenchange",c,n),document.addEventListener("mozfullscreenchange",c,n),document.addEventListener("webkitfullscreenchange",c,n));d.Lb=d.requestFullScreen||d.mozRequestFullScreen||(d.webkitRequestFullScreen?function(){d.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:m);d.Lb()};t.requestAnimationFrame=function(a){window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||window.setTimeout);window.requestAnimationFrame(a)};t.setCanvasSize=function(a,b,c){var d=t.canvas;d.width=a;d.height=b;c||Lc()};t.pauseMainLoop=r();t.resumeMainLoop=function(){Dc&&(Dc=n,m())};t.getUserMedia=function(){window.Ua||(window.Ua=navigator.getUserMedia||navigator.mozGetUserMedia);window.Ua(j)};Qa=w=sa(z);Ra=Qa+5242880;Sa=D=sa(Ra);y(Sa<ra);Da=Math.min;var $=function(global,env,buffer){"use asm";var a=new global.Int8Array(buffer);var b=new global.Int16Array(buffer);var c=new global.Int32Array(buffer);var d=new global.Uint8Array(buffer);var e=new global.Uint16Array(buffer);var f=new global.Uint32Array(buffer);var g=new global.Float32Array(buffer);var h=new global.Float64Array(buffer);var i=env.STACKTOP|0;var j=env.STACK_MAX|0;var k=env.tempDoublePtr|0;var l=env.ABORT|0;var m=env.__ZTVN10__cxxabiv120__si_class_type_infoE|0;var n=env.___dso_handle|0;var o=env._stderr|0;var p=env.__ZTVN10__cxxabiv117__class_type_infoE|0;var q=+env.NaN;var r=+env.Infinity;var s=0;var t=0;var u=0;var v=0;var w=0,x=0,y=0,z=0,A=0.0,B=0,C=0,D=0,E=0.0;var F=0;var G=0;var H=0;var I=0;var J=0;var K=0;var L=0;var M=0;var N=0;var O=0;var P=global.Math.floor;var Q=global.Math.abs;var R=global.Math.sqrt;var S=global.Math.pow;var T=global.Math.cos;var U=global.Math.sin;var V=global.Math.tan;var W=global.Math.acos;var X=global.Math.asin;var Y=global.Math.atan;var Z=global.Math.atan2;var _=global.Math.exp;var $=global.Math.log;var aa=global.Math.ceil;var ab=global.Math.imul;var ac=env.abort;var ad=env.assert;var ae=env.asmPrintInt;var af=env.asmPrintFloat;var ag=env.min;var ah=env.invoke_viiiii;var ai=env.invoke_vi;var aj=env.invoke_vii;var ak=env.invoke_ii;var al=env.invoke_iiii;var am=env.invoke_v;var an=env.invoke_viiiiii;var ao=env.invoke_iii;var ap=env.invoke_viiii;var aq=env._strncmp;var ar=env._llvm_lifetime_end;var as=env._llvm_uadd_with_overflow_i32;var at=env.___cxa_call_unexpected;var au=env._snprintf;var av=env.___cxa_throw;var aw=env._atexit;var ax=env._abort;var ay=env._fprintf;var az=env._llvm_eh_exception;var aA=env._printf;var aB=env._fflush;var aC=env.__reallyNegative;var aD=env._strtol;var aE=env._fputc;var aF=env._sysconf;var aG=env._puts;var aH=env.___setErrNo;var aI=env._fwrite;var aJ=env._send;var aK=env._write;var aL=env._fputs;var aM=env._exit;var aN=env._time;var aO=env.___cxa_find_matching_catch;var aP=env.___cxa_allocate_exception;var aQ=env._isspace;var aR=env.___cxa_pure_virtual;var aS=env.___cxa_is_number_type;var aT=env.___cxa_guard_release;var aU=env.__formatString;var aV=env.___cxa_does_inherit;var aW=env.___cxa_guard_acquire;var aX=env.__ZSt18uncaught_exceptionv;var aY=env._pwrite;var aZ=env._llvm_pow_f64;var a_=env._sbrk;var a$=env.___errno_location;var a0=env.___gxx_personality_v0;var a1=env._llvm_lifetime_start;var a2=env.__parseInt;var a3=env.___resumeException;var a4=env.__exit;var a5=env._strcmp;function bf(a){a=a|0;var b=0;b=i;i=i+a|0;i=i+7&-8;return b|0}function bg(){return i|0}function bh(a){a=a|0;i=a}function bi(a,b){a=a|0;b=b|0;if((s|0)==0){s=a;t=b}}function bj(b){b=b|0;a[k]=a[b];a[k+1|0]=a[b+1|0];a[k+2|0]=a[b+2|0];a[k+3|0]=a[b+3|0]}function bk(b){b=b|0;a[k]=a[b];a[k+1|0]=a[b+1|0];a[k+2|0]=a[b+2|0];a[k+3|0]=a[b+3|0];a[k+4|0]=a[b+4|0];a[k+5|0]=a[b+5|0];a[k+6|0]=a[b+6|0];a[k+7|0]=a[b+7|0]}function bl(a){a=a|0;F=a}function bm(a){a=a|0;G=a}function bn(a){a=a|0;H=a}function bo(a){a=a|0;I=a}function bp(a){a=a|0;J=a}function bq(a){a=a|0;K=a}function br(a){
a=a|0;L=a}function bs(a){a=a|0;M=a}function bt(a){a=a|0;N=a}function bu(a){a=a|0;O=a}function bv(){c[764]=p+8;c[766]=p+8;c[768]=m+8;c[772]=m+8;c[776]=p+8;c[778]=p+8;c[780]=p+8;c[782]=m+8;c[786]=m+8;c[790]=m+8;c[794]=m+8;c[798]=m+8;c[802]=m+8}function bw(a){a=a|0;return}function bx(a){a=a|0;return}function by(b,e){b=b|0;e=e|0;var f=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,R=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,ab=0,ac=0,ad=0,ae=0,af=0,ah=0,ai=0,aj=0,ak=0,al=0,am=0,an=0,ao=0,ap=0,aq=0,ar=0,as=0,at=0,aw=0,ax=0,ay=0,az=0,aB=0,aC=0,aD=0,aE=0,aF=0,aH=0,aI=0,aJ=0,aK=0,aL=0,aM=0,aN=0,aO=0,aQ=0,aR=0,aS=0,aT=0,aU=0,aV=0,aW=0,aX=0,aY=0,aZ=0,a_=0,a0=0,a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a8=0,a9=0,ba=0,bc=0,bd=0,be=0,bf=0,bg=0,bh=0,bi=0,bj=0,bk=0,bl=0,bm=0,bn=0,bo=0,bp=0,bq=0,br=0,bs=0,bt=0,bu=0,bv=0,bw=0,bx=0,by=0,bA=0,bB=0,bC=0,bD=0,bE=0,bF=0,bG=0,bH=0,bI=0,bJ=0,bK=0,bL=0,bM=0,bN=0,bU=0,bY=0,bZ=0,b0=0.0,b1=0.0,b4=0.0,b6=0,b8=0,b9=0,ca=0,cb=0,cc=0,cd=0,cj=0,ck=0,cl=0,cn=0.0,co=0,cp=0,cq=0,cr=0,cs=0,ct=0,cu=0,cv=0,cw=0,cx=0,cy=0,cz=0,cA=0,cB=0.0,cC=0,cD=0,cE=0,cI=0,cJ=0,cK=0,cL=0.0,cM=0,cN=0,cP=0.0,cQ=0,cR=0,cS=0,cT=0,cU=0,cV=0,cW=0,cX=0,cY=0,cZ=0,c_=0,c$=0,c0=0,c1=0,c2=0,c3=0,c4=0,c5=0,c6=0,c7=0,c8=0,c9=0,da=0,db=0,dc=0,dd=0,de=0,df=0,dg=0,dh=0,di=0,dj=0,dk=0,dl=0,dm=0,dn=0,dp=0,dq=0,dr=0,ds=0,dt=0,du=0,dv=0,dw=0,dx=0,dy=0,dz=0,dA=0,dB=0,dC=0.0,dD=0.0,dE=0,dF=0,dG=0.0,dH=0.0,dI=0,dJ=0,dK=0,dL=0,dM=0,dN=0,dO=0,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,d_=0,d$=0,d0=0,d1=0;f=i;i=i+1104|0;j=f|0;k=f+8|0;l=f+16|0;m=f+24|0;n=f+32|0;o=f+40|0;p=f+48|0;q=f+64|0;r=f+80|0;s=f+88|0;t=f+96|0;u=f+104|0;v=f+120|0;w=f+128|0;x=f+144|0;y=f+152|0;z=f+168|0;A=z;c[z>>2]=2544;B=z+4|0;C=B;F=z+8|0;G=z+16|0;H=G;I=z+32|0;J=I;K=z+36|0;L=z+48|0;cO(B|0,0,24);cO(I|0,0,16);h[L>>3]=+h[558];M=z+56|0;h[M>>3]=+h[526];N=z+64|0;h[N>>3]=+h[494];O=z+72|0;h[O>>3]=+h[540];R=z+80|0;a[R]=a[4100]&1;T=z+84|0;c[T>>2]=c[1103];c[z+88>>2]=c[1019];U=z+92|0;a[U]=0;V=z+93|0;a[V]=a[4044]&1;W=z+96|0;h[W>>3]=+h[519];X=z+104|0;c[X>>2]=c[997];Y=z+108|0;c[Y>>2]=c[1005];Z=z+112|0;h[Z>>3]=+h[533];_=z+120|0;h[_>>3]=.3333333333333333;$=z+128|0;h[$>>3]=1.1;ab=z+136|0;c[ab>>2]=100;ac=z+144|0;h[ac>>3]=1.5;ad=z+152|0;ae=z+268|0;af=z+272|0;ah=z+276|0;ai=z+280|0;aj=z+284|0;ak=z+288|0;al=z+292|0;am=al;an=z+296|0;ao=z+304|0;ap=z+308|0;aq=z+312|0;ar=z+316|0;as=ar;at=z+320|0;aw=z+324|0;ax=z+332|0;ay=ax;c[ay>>2]=0;c[z+336>>2]=0;c[z+340>>2]=0;az=z+348|0;aB=az;c[aB>>2]=0;c[z+352>>2]=0;c[z+356>>2]=0;aC=z+364|0;aD=aC;c[aD>>2]=0;c[z+368>>2]=0;c[z+372>>2]=0;aE=z+380|0;c[aE>>2]=0;aF=z+384|0;c[aF>>2]=0;aH=z+388|0;c[aH>>2]=0;aI=z+396|0;c[aI>>2]=0;aJ=z+400|0;c[aJ>>2]=0;aK=z+404|0;c[aK>>2]=0;aL=z+412|0;aM=z+544|0;aN=aM;c[aL>>2]=0;c[z+416>>2]=0;c[z+420>>2]=0;c[z+428>>2]=0;c[z+432>>2]=0;c[z+436>>2]=0;c[z+444>>2]=0;c[z+448>>2]=0;c[z+452>>2]=0;cO(ad|0,0,176);c[z+456>>2]=aN;aO=z+460|0;cO(aO|0,0,24);aQ=z+488|0;c[aQ>>2]=ar;ar=z+492|0;a[ar]=1;aR=z+496|0;h[aR>>3]=1.0;aS=z+504|0;h[aS>>3]=1.0;c[z+512>>2]=0;c[z+516>>2]=-1;aT=z+536|0;cO(z+520|0,0,16);a[aT]=1;aU=z+540|0;cO(aU|0,0,20);b5(aM,1048576);aV=z+560|0;a[aV]=0;aW=z+604|0;aX=z+664|0;cO(z+564|0,0,36);cO(aW|0,0,36);aY=z+680|0;cO(aX|0,-1|0,16);a[aY]=0;c[z>>2]=2640;c[z+684>>2]=c[951];c[z+688>>2]=c[1095];c[z+692>>2]=c[975];h[z+696>>3]=+h[483];a[z+704|0]=a[4492]&1;a[z+705|0]=a[4348]&1;a[z+706|0]=a[4524]&1;aZ=z+707|0;a[aZ]=1;c[z+708>>2]=0;c[z+712>>2]=0;c[z+716>>2]=0;c[z+720>>2]=1;a_=z+724|0;a[a_]=1;a0=z+732|0;a1=z+736|0;a2=z+760|0;c[a2>>2]=0;a3=z+764|0;c[a3>>2]=0;a4=z+768|0;c[a4>>2]=0;c[z+776>>2]=0;a5=z+780|0;c[a5>>2]=0;a6=z+784|0;c[a6>>2]=0;c[z+792>>2]=0;c[z+796>>2]=0;c[z+800>>2]=0;cO(a0|0,0,24);c[z+804>>2]=aN;a8=z+808|0;c[a8>>2]=0;c[z+812>>2]=0;c[z+816>>2]=0;a9=z+824|0;cO(a9|0,0,24);c[z+852>>2]=a8;a8=z+856|0;c[a8>>2]=0;ba=z+860|0;c[ba>>2]=0;c[z+864>>2]=2;bc=cF(8)|0;bd=bc;c[a8>>2]=bd;do{if((bc|0)==0){if((c[(a$()|0)>>2]|0)!=12){break}av(aP(1)|0,3120,0);return 0}}while(0);bc=c[ba>>2]|0;L9:do{if((bc|0)<1){be=bc;bf=bd;while(1){bg=bf+(be<<2)|0;if((bg|0)!=0){c[bg>>2]=0}if((be|0)>=0){break L9}be=be+1|0;bf=c[a8>>2]|0}}}while(0);c[ba>>2]=1;ba=z+876|0;c[z+920>>2]=0;c[z+924>>2]=0;a8=u|0;cO(z+868|0,0,20);cO(z+892|0,0,24);bd=u+4|0;c[bd>>2]=0;bc=u+8|0;c[bc>>2]=2;bf=cF(8)|0;c[a8>>2]=bf;do{if((bf|0)==0){if((c[(a$()|0)>>2]|0)!=12){break}av(aP(1)|0,3120,0);return 0}}while(0);c[bf>>2]=-2;c[bd>>2]=1;a[aV]=1;c[z+928>>2]=bS(aN,u,0)|0;a[aT]=0;aT=c[a8>>2]|0;if((aT|0)!=0){c[bd>>2]=0;cG(aT);c[a8>>2]=0;c[bc>>2]=0}c[952]=A;bc=y|0;c[bc>>2]=b;b=y+4|0;c[b>>2]=0;a8=y+8|0;c[a8>>2]=e;aT=w|0;c[aT>>2]=0;bd=w+4|0;c[bd>>2]=0;u=w+8|0;c[u>>2]=0;a[x]=0;aV=aU;aU=z+580|0;bf=z+576|0;be=aL;aL=s|0;bg=t|0;bh=ax;ax=z+588|0;bi=ax;bj=az;az=aC;aC=z+200|0;bk=aO;bl=z+476|0;bm=z+472|0;bn=z+876|0;bo=z+904|0;bp=z+808|0;bq=z+776|0;br=z+744|0;bs=0;bt=e;L26:while(1){L28:do{if((bs|0)<(bt|0)){e=c[bc>>2]|0;bu=bs;while(1){bv=a[e+bu|0]|0;if((bv&255)<=8){bw=bu;break L28}if(!((bv&255)<14|bv<<24>>24==32)){bw=bu;break L28}bv=bu+1|0;c[b>>2]=bv;if((bv|0)<(bt|0)){bu=bv}else{bw=bv;break}}}else{bw=bs}}while(0);bx=(a[x]&1)==0;if(!((bw|0)<(bt|0)&bx)){by=233;break}bu=c[bc>>2]|0;e=a[bu+bw|0]|0;L36:do{if((e<<24>>24|0)==112){bv=bw+1|0;c[b>>2]=bv;do{if((bv|0)<(bt|0)){if((a[bu+bv|0]|0)!=32){bA=bv;break}bB=bw+2|0;c[b>>2]=bB;if((bB|0)>=(bt|0)){bA=bB;break}if((a[bu+bB|0]|0)!=99){bA=bB;break}bB=bw+3|0;c[b>>2]=bB;if((bB|0)>=(bt|0)){bA=bB;break}if((a[bu+bB|0]|0)!=110){bA=bB;break}bB=bw+4|0;c[b>>2]=bB;if((bB|0)>=(bt|0)){bA=bB;break}if((a[bu+bB|0]|0)!=102){bA=bB;break}c[b>>2]=bw+5;bz(y,x)|0;bz(y,x)|0;break L36}else{bA=bv}}while(0);if((bA|0)<(bt|0)){bC=d[bu+bA|0]|0}else{bC=-1}aA(920,(bD=i,i=i+8|0,c[bD>>2]=bC,bD)|0)|0;i=bD;a[x]=1}else if((e<<24>>24|0)==99){bv=bw;while(1){if((bv|0)<(bt|0)){bB=(a[bu+bv|0]|0)==10;bE=bv+1|0;c[b>>2]=bE;if(bB){break L36}else{bF=bE}}else{bE=bv+1|0;c[b>>2]=bE;bF=bE}if((bF|0)<(bt|0)){bv=bF}else{break}}}else{a[v]=0;bv=c[aT>>2]|0;if((bv|0)!=0){c[bd>>2]=0}bE=bz(y,v)|0;L61:do{if((bE|0)!=0){bB=bE;bG=bv;while(1){if((a[v]&1)!=0){break L61}bH=((bB|0)>-1?bB:-bB|0)-1|0;bI=c[aV>>2]|0;if((bH|0)>=(bI|0)){bJ=bI;do{bI=c[aU>>2]|0;if((bI|0)>0){bK=bI-1|0;bI=c[(c[bf>>2]|0)+(bK<<2)>>2]|0;c[aU>>2]=bK;bL=bI}else{c[aV>>2]=bJ+1;bL=bJ}bI=bL<<1;c[aL>>2]=bI;bO(be,s);bK=bI|1;c[bg>>2]=bK;bO(be,t);bM=a[3232]|0;bN=bL+1|0;b$(bh,bN);a[(c[ay>>2]|0)+bL|0]=bM?2:0;if((c[aJ>>2]|0)<(bN|0)){bM=c[aK>>2]|0;do{if((bM|0)<(bN|0)){bU=bL+2-bM&-2;bY=(bM>>1)+2&-2;bZ=(bU|0)>(bY|0)?bU:bY;if((bZ|0)>(2147483647-bM|0)){by=143;break L26}bY=c[aI>>2]|0;bU=bZ+bM|0;c[aK>>2]=bU;bZ=cH(bY,bU<<3)|0;c[aI>>2]=bZ;if((bZ|0)!=0){break}if((c[(a$()|0)>>2]|0)==12){by=143;break L26}}}while(0);bM=c[aJ>>2]|0;if((bM|0)<(bN|0)){bZ=bM;do{bM=(c[aI>>2]|0)+(bZ<<3)|0;if((bM|0)!=0){bU=bM;c[bU>>2]=0;c[bU+4>>2]=0}bZ=bZ+1|0}while((bZ|0)<(bN|0))}c[aJ>>2]=bN}bZ=(c[aI>>2]|0)+(bL<<3)|0;c[bZ>>2]=-1;c[bZ+4>>2]=0;if((a[V]&1)==0){b0=0.0}else{b1=+h[O>>3]*1389796.0;b4=b1-+(~~(b1/2147483647.0)|0)*2147483647.0;h[O>>3]=b4;b0=b4/2147483647.0*1.0e-5}if((c[at>>2]|0)<(bN|0)){bZ=c[aw>>2]|0;do{if((bZ|0)<(bN|0)){bU=bL+2-bZ&-2;bM=(bZ>>1)+2&-2;bY=(bU|0)>(bM|0)?bU:bM;if((bY|0)>(2147483647-bZ|0)){by=157;break L26}bM=c[as>>2]|0;bU=bY+bZ|0;c[aw>>2]=bU;bY=cH(bM,bU<<3)|0;c[as>>2]=bY;if((bY|0)!=0){break}if((c[(a$()|0)>>2]|0)==12){by=157;break L26}}}while(0);bZ=c[at>>2]|0;if((bZ|0)<(bN|0)){bY=bZ;do{bZ=(c[as>>2]|0)+(bY<<3)|0;if((bZ|0)!=0){h[bZ>>3]=0.0}bY=bY+1|0}while((bY|0)<(bN|0))}c[at>>2]=bN}h[(c[as>>2]|0)+(bL<<3)>>3]=b0;bP(bi,bL,0);bP(bj,bL,1);b$(az,bN);a[(c[aD>>2]|0)+bL|0]=2;if((c[aF>>2]|0)<(bN|0)){bY=c[aH>>2]|0;do{if((bY|0)<(bN|0)){bZ=bL+2-bY&-2;bU=(bY>>1)+2&-2;bM=(bZ|0)>(bU|0)?bZ:bU;if((bM|0)>(2147483647-bY|0)){by=172;break L26}bU=c[aE>>2]|0;bZ=bM+bY|0;c[aH>>2]=bZ;bM=cH(bU,bZ)|0;c[aE>>2]=bM;if((bM|0)!=0){break}if((c[(a$()|0)>>2]|0)==12){by=172;break L26}}}while(0);bY=c[aF>>2]|0;if((bY|0)<(bN|0)){bM=bY;do{bY=(c[aE>>2]|0)+bM|0;if((bY|0)!=0){a[bY]=0}bM=bM+1|0}while((bM|0)<(bN|0))}c[aF>>2]=bN}bM=c[ak>>2]|0;do{if((bM|0)<(bN|0)){bY=bL+2-bM&-2;bZ=(bM>>1)+2&-2;bU=(bY|0)>(bZ|0)?bY:bZ;if((bU|0)>(2147483647-bM|0)){by=183;break L26}bZ=c[ai>>2]|0;bY=bU+bM|0;c[ak>>2]=bY;bU=cH(bZ,bY<<2)|0;c[ai>>2]=bU;if((bU|0)!=0){break}if((c[(a$()|0)>>2]|0)==12){by=183;break L26}}}while(0);bM=(c[aE>>2]|0)+bL|0;if((a[bM]|0)==0){bU=c[aC>>2]|0;bY=c[aC+4>>2]|0;bZ=1;b6=0;b8=(E=+(bU>>>0)+ +(bY|0)*4294967296.0+(+(bZ>>>0)+ +(b6|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[aC>>2]=~~(+(bU>>>0)+ +(bY|0)*4294967296.0+(+(bZ>>>0)+ +(b6|0)*4294967296.0))>>>0;c[aC+4>>2]=b8}a[bM]=1;if((c[bl>>2]|0)>(bL|0)){if((c[(c[bm>>2]|0)+(bL<<2)>>2]|0)<=-1){by=189}}else{by=189}do{if((by|0)==189){by=0;if((a[(c[aE>>2]|0)+bL|0]|0)==0){break}b7(bk,bL)}}while(0);bP(bn,bL,0);bP(bo,bL,0);if((a[a_]&1)!=0){cf(bp,bI);cf(bp,bK);if((c[a3>>2]|0)<(bN|0)){bM=c[a4>>2]|0;do{if((bM|0)<(bN|0)){b8=bL+2-bM&-2;b6=(bM>>1)+2&-2;bZ=(b8|0)>(b6|0)?b8:b6;if((bZ|0)>(2147483647-bM|0)){by=201;break L26}b6=c[a2>>2]|0;b8=bZ+bM|0;c[a4>>2]=b8;bZ=cH(b6,b8*12|0)|0;c[a2>>2]=bZ;if((bZ|0)!=0){break}if((c[(a$()|0)>>2]|0)==12){by=201;break L26}}}while(0);bM=c[a3>>2]|0;if((bM|0)<(bN|0)){bK=bM;do{bM=c[a2>>2]|0;bI=bM+(bK*12|0)|0;if((bI|0)!=0){c[bI>>2]=0;c[bM+(bK*12|0)+4>>2]=0;c[bM+(bK*12|0)+8>>2]=0}bK=bK+1|0}while((bK|0)<(bN|0))}c[a3>>2]=bN}bK=c[a2>>2]|0;if((c[bK+(bL*12|0)>>2]|0)!=0){c[bK+(bL*12|0)+4>>2]=0}if((c[a5>>2]|0)<(bN|0)){bK=c[a6>>2]|0;do{if((bK|0)<(bN|0)){bM=bL+2-bK&-2;bI=(bK>>1)+2&-2;bZ=(bM|0)>(bI|0)?bM:bI;if((bZ|0)>(2147483647-bK|0)){by=215;break L26}bI=c[bq>>2]|0;bM=bZ+bK|0;c[a6>>2]=bM;bZ=cH(bI,bM)|0;c[bq>>2]=bZ;if((bZ|0)!=0){break}if((c[(a$()|0)>>2]|0)==12){by=215;break L26}}}while(0);bK=c[a5>>2]|0;if((bK|0)<(bN|0)){bZ=bK;do{a[(c[bq>>2]|0)+bZ|0]=0;bZ=bZ+1|0}while((bZ|0)<(bN|0))}c[a5>>2]=bN}bP(br,bL,0);cg(a9,bL)}bJ=c[aV>>2]|0}while((bH|0)>=(bJ|0))}bJ=bH<<1|(bB|0)<1;bZ=c[bd>>2]|0;do{if((bZ|0)==(c[u>>2]|0)){bK=(bZ>>1)+2&-2;bM=(bK|0)<2?2:bK;if((bM|0)>(2147483647-bZ|0)){b9=bG;by=227;break L26}bK=bM+bZ|0;c[u>>2]=bK;bM=cH(bG,bK<<2)|0;bK=bM;c[aT>>2]=bK;if((bM|0)!=0){ca=bK;break}if((c[(a$()|0)>>2]|0)==12){b9=bK;by=227;break L26}else{ca=bK}}else{ca=bG}}while(0);c[bd>>2]=bZ+1;bH=ca+(bZ<<2)|0;if((bH|0)!=0){c[bH>>2]=bJ}bH=bz(y,v)|0;if((bH|0)==0){break}else{bB=bH;bG=ca}}}}while(0);a[x]=a[v]&1;ci(z,w)|0}}while(0);bs=c[b>>2]|0;bt=c[a8>>2]|0}if((by|0)==143){av(aP(1)|0,3120,0);return 0}else if((by|0)==157){av(aP(1)|0,3120,0);return 0}else if((by|0)==172){av(aP(1)|0,3120,0);return 0}else if((by|0)==183){av(aP(1)|0,3120,0);return 0}else if((by|0)==201){av(aP(1)|0,3120,0);return 0}else if((by|0)==215){av(aP(1)|0,3120,0);return 0}else if((by|0)==227){av(aP(1)|0,3120,0);return 0}else if((by|0)==233){a8=c[aT>>2]|0;if((a8|0)!=0){c[bd>>2]=0;cG(a8);c[aT>>2]=0;c[u>>2]=0}if(!bx){cb=3280;ce(z);i=f;return cb|0}ch(z,1)|0;if((a[ar]&1)==0){cb=1048;ce(z);i=f;return cb|0}bx=c[ao>>2]|0;do{if((bx|0)==0){if((c[ap>>2]|0)>=0){break}u=c[aq>>2]|0;do{if((u|0)<0){aT=1-u&-2;a8=(u>>1)+2&-2;bd=(aT|0)>(a8|0)?aT:a8;if((bd|0)<=(2147483647-u|0)){a8=bd+u|0;c[aq>>2]=a8;bd=cH(bx,a8<<2)|0;a8=bd;c[ao>>2]=a8;if((bd|0)!=0){cc=a8;break}if((c[(a$()|0)>>2]|0)!=12){cc=a8;break}}av(aP(1)|0,3120,0);return 0}else{cc=bx}}while(0);u=c[ap>>2]|0;L227:do{if((u|0)<0){a8=u;bd=cc;while(1){aT=bd+(a8<<2)|0;if((aT|0)!=0){c[aT>>2]=0}aT=a8+1|0;if((aT|0)>=0){break L227}a8=aT;bd=c[ao>>2]|0}}}while(0);c[ap>>2]=0}else{c[ap>>2]=0}}while(0);cc=q|0;c[cc>>2]=0;bx=q+4|0;c[bx>>2]=0;aq=q+8|0;c[aq>>2]=0;u=(a[a_]&1)!=0;do{if(u){bd=c[ap>>2]|0;if((bd|0)>0){a8=0;aT=bd;while(1){bd=c[(c[ao>>2]|0)+(a8<<2)>>2]>>1;c[r>>2]=bd;bt=(c[ba>>2]|0)+bd|0;if((a[bt]|0)==0){a[bt]=1;bQ(q,r);cd=c[ap>>2]|0}else{cd=aT}bt=a8+1|0;if((bt|0)<(cd|0)){a8=bt;aT=cd}else{break}}}aT=ch(z,0)|0;a8=aT&1^1;if(aT){by=269;break}if((c[z+44>>2]|0)<=0){cj=a8;break}aG(248)|0;cj=a8}else{by=269}}while(0);do{if((by|0)==269){cd=B;if((c[C>>2]|0)!=0){c[F>>2]=0}if((c[K>>2]|0)>0){r=0;do{a[(c[H>>2]|0)+(c[(c[J>>2]|0)+(r<<2)>>2]|0)|0]=0;r=r+1|0}while((r|0)<(c[K>>2]|0))}if((c[J>>2]|0)!=0){c[K>>2]=0}if((a[ar]&1)==0){cj=a[3240]&1;break}r=ad;q=c[r>>2]|0;a8=c[r+4>>2]|0;aT=1;bt=0;bd=(E=+(q>>>0)+ +(a8|0)*4294967296.0+(+(aT>>>0)+ +(bt|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[r>>2]=~~(+(q>>>0)+ +(a8|0)*4294967296.0+(+(aT>>>0)+ +(bt|0)*4294967296.0))>>>0;c[r+4>>2]=bd;bd=z+208|0;b0=+h[_>>3]*+(c[bd>>2]|0);r=z+640|0;h[r>>3]=b0;b4=+(c[X>>2]|0);if(b0<b4){h[r>>3]=b4}bt=c[ab>>2]|0;aT=z+648|0;h[aT>>3]=+(bt|0);a8=z+656|0;c[a8>>2]=bt;bt=a[3232]|0?2:0;q=z+44|0;if((c[q>>2]|0)>0){aG(8)|0;aG(168)|0;aG(88)|0;aG(248)|0;ck=a[3232]|0?2:0}else{ck=bt}b=z+192|0;bs=z+184|0;L270:do{if((((ck&255)>>>1^1)&bt<<24>>24==ck<<24>>24|ck&bt&255|0)==0){cl=bt}else{w=aX;v=z+672|0;x=p|0;ca=p+4|0;y=p+8|0;b9=z+160|0;bL=al;a9=z+168|0;br=z+224|0;a5=z+216|0;bq=z+232|0;a6=aM;a2=z+556|0;a3=z+548|0;a4=z;bp=z+464|0;bo=aO;bn=z+176|0;bk=ax;ak=m|0;aF=z+616|0;aH=aF;az=z+620|0;bj=z+624|0;bi=z+240|0;at=z+248|0;aw=l|0;V=aW;aJ=z+608|0;aK=z+612|0;bh=aF;aF=j|0;t=G;be=I;bg=k|0;s=z+528|0;aL=0;L272:while(1){b4=+h[Z>>3];if((a[R]&1)==0){cn=+S(+b4,+ +(aL|0))}else{aU=aL+1|0;if((aL|0)>0){bf=1;bF=0;do{bF=bF+1|0;bf=bf<<1|1}while((bf|0)<(aU|0));co=bf-1|0;cp=bF}else{co=0;cp=0}if((co|0)==(aL|0)){cq=cp}else{aU=aL;bw=cp;bC=co;while(1){bA=bC>>1;bc=bw-1|0;bu=(aU|0)%(bA|0)|0;e=bA-1|0;if((e|0)==(bu|0)){cq=bc;break}else{aU=bu;bw=bc;bC=e}}}cn=+S(+b4,+ +(cq|0))}bC=~~(cn*+(c[Y>>2]|0));c[x>>2]=0;c[ca>>2]=0;c[y>>2]=0;bw=c[b9>>2]|0;aU=c[b9+4>>2]|0;bF=1;bf=0;e=(E=+(bw>>>0)+ +(aU|0)*4294967296.0+(+(bF>>>0)+ +(bf|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[b9>>2]=~~(+(bw>>>0)+ +(aU|0)*4294967296.0+(+(bF>>>0)+ +(bf|0)*4294967296.0))>>>0;c[b9+4>>2]=e;e=(bC|0)<0;bf=0;bF=0;L287:while(1){aU=e|(bf|0)<(bC|0);while(1){cr=bR(A)|0;if((cr|0)!=-1){break}if(!aU){by=469;break L287}if((a[aY]&1)!=0){by=469;break L287}bw=c[w>>2]|0;bc=c[w+4>>2]|0;bu=0;if(!((bc|0)<(bu|0)|(bc|0)==(bu|0)&bw>>>0<0>>>0)){bu=c[b+4>>2]|0;if(!(bu>>>0<bc>>>0|bu>>>0==bc>>>0&(c[b>>2]|0)>>>0<bw>>>0)){by=469;break L287}}bw=c[v>>2]|0;bc=c[v+4>>2]|0;bu=0;if(!((bc|0)<(bu|0)|(bc|0)==(bu|0)&bw>>>0<0>>>0)){bu=c[bs+4>>2]|0;if(!(bu>>>0<bc>>>0|bu>>>0==bc>>>0&(c[bs>>2]|0)>>>0<bw>>>0)){by=469;break L287}}if((c[an>>2]|0)==0){if(!(b_(A)|0)){by=480;break L287}}bw=c[af>>2]|0;do{if(+(bw-(c[aj>>2]|0)|0)>=+h[r>>3]){b0=+h[aR>>3]/+(bw|0);b2(c[ae>>2]|0,bw,aN);bc=c[af>>2]|0;if((bc|0)>0){bu=0;bA=0;bv=bc;while(1){bE=c[ae>>2]|0;bG=c[bE+(bA<<2)>>2]|0;bB=c[a6>>2]|0;bH=bB+(bG<<2)|0;bK=bH;bM=c[bH>>2]|0;do{if(bM>>>0>95){bI=bB+(bG+1<<2)|0;b8=c[bI>>2]|0;b6=b8>>1;if((a[(c[ay>>2]|0)+b6|0]|0)==(b8&1)){b8=c[(c[aI>>2]|0)+(b6<<3)>>2]|0;if((b8|0)!=-1&(b8|0)==(bG|0)){by=494;break}}if((bA|0)>=((bv|0)/2|0|0)){if(+g[bK+4+(bM>>>5<<2)>>2]>=b0){by=494;break}}bV(A,bG,0);b8=c[bI>>2]|0;bI=b8>>1;do{if((a[(c[ay>>2]|0)+bI|0]|0)==(b8&1)){b6=(c[aI>>2]|0)+(bI<<3)|0;bY=c[b6>>2]|0;if((bY|0)==-1){break}if(((c[a6>>2]|0)+(bY<<2)|0)!=(bH|0)){break}c[b6>>2]=-1}}while(0);c[bH>>2]=c[bH>>2]&-4|1;bI=c[(c[a6>>2]|0)+(bG<<2)>>2]|0;c[a2>>2]=((((bI>>>3&1)+(bI>>>5)<<2)+4|0)>>>2)+(c[a2>>2]|0);cs=bu}else{by=494}}while(0);if((by|0)==494){by=0;c[bE+(bu<<2)>>2]=bG;cs=bu+1|0}bH=bA+1|0;bM=c[af>>2]|0;if((bH|0)<(bM|0)){bu=cs;bA=bH;bv=bM}else{ct=cs;cu=bH;cv=bM;break}}}else{ct=0;cu=0;cv=bc}bv=cu-ct|0;if((bv|0)>0){c[af>>2]=cv-bv}if(+((c[a2>>2]|0)>>>0>>>0)<=+h[W>>3]*+((c[a3>>2]|0)>>>0>>>0)){break}a7[c[(c[a4>>2]|0)+8>>2]&63](A)}}while(0);while(1){bw=c[an>>2]|0;if((bw|0)>=(c[ap>>2]|0)){by=528;break}cw=c[(c[ao>>2]|0)+(bw<<2)>>2]|0;cx=a[(c[ay>>2]|0)+(cw>>1)|0]|0;cy=cw&1;if(cx<<24>>24!=cy<<24>>24){by=503;break}c[n>>2]=c[aj>>2];bQ(bL,n)}if((by|0)==503){by=0;if((cx^cy)<<24>>24==(a[3240]&1)){by=504;break L287}if((cw|0)==-2){by=528}else{cz=cw}}if((by|0)==528){by=0;bw=c[a9>>2]|0;bN=c[a9+4>>2]|0;bv=1;bA=0;bu=(E=+(bw>>>0)+ +(bN|0)*4294967296.0+(+(bv>>>0)+ +(bA|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[a9>>2]=~~(+(bw>>>0)+ +(bN|0)*4294967296.0+(+(bv>>>0)+ +(bA|0)*4294967296.0))>>>0;c[a9+4>>2]=bu;b0=+h[O>>3]*1389796.0;b1=b0-+(~~(b0/2147483647.0)|0)*2147483647.0;h[O>>3]=b1;do{if(b1/2147483647.0<+h[N>>3]){bu=c[bp>>2]|0;if((bu|0)==0){cA=-1;break}b0=b1*1389796.0;cB=b0-+(~~(b0/2147483647.0)|0)*2147483647.0;h[O>>3]=cB;bA=c[(c[bo>>2]|0)+(~~(+(bu|0)*(cB/2147483647.0))<<2)>>2]|0;bu=a[(c[ay>>2]|0)+bA|0]|0;bv=a[3232]|0?2:0;if((((bv&255)>>>1^1)&bu<<24>>24==bv<<24>>24|bv&bu&255|0)==0){cA=bA;break}if((a[(c[aE>>2]|0)+bA|0]|0)==0){cA=bA;break}bu=c[bn>>2]|0;bv=c[bn+4>>2]|0;bN=1;bw=0;bM=(E=+(bu>>>0)+ +(bv|0)*4294967296.0+(+(bN>>>0)+ +(bw|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[bn>>2]=~~(+(bu>>>0)+ +(bv|0)*4294967296.0+(+(bN>>>0)+ +(bw|0)*4294967296.0))>>>0;c[bn+4>>2]=bM;cA=bA}else{cA=-1}}while(0);L346:while(1){do{if((cA|0)!=-1){bA=a[(c[ay>>2]|0)+cA|0]|0;cC=a[3232]|0?2:0;cD=(cC&255)>>>1^1;if((cD&bA<<24>>24==cC<<24>>24|cC&bA&255|0)==0){break}if((a[(c[aE>>2]|0)+cA|0]|0)!=0){break L346}}}while(0);bc=c[bp>>2]|0;if((bc|0)==0){cE=0;break L287}bA=c[bo>>2]|0;bM=c[bA>>2]|0;c[bA>>2]=c[bA+(bc-1<<2)>>2];c[(c[bm>>2]|0)+(c[c[bo>>2]>>2]<<2)>>2]=0;c[(c[bm>>2]|0)+(bM<<2)>>2]=-1;bc=(c[bp>>2]|0)-1|0;c[bp>>2]=bc;if((bc|0)<=1){cA=bM;continue}bA=c[bo>>2]|0;bw=c[bA>>2]|0;bN=0;bv=1;bu=bc;bc=bA;while(1){bA=(bN<<1)+2|0;if((bA|0)<(bu|0)){bH=c[bc+(bA<<2)>>2]|0;bK=c[bc+(bv<<2)>>2]|0;bB=c[c[aQ>>2]>>2]|0;b1=+h[bB+(bH<<3)>>3];cB=+h[bB+(bK<<3)>>3];if(b1>cB){cI=bA;cJ=bH;cK=bB;cL=b1}else{cM=bK;cN=bB;cP=cB;by=542}}else{bB=c[bc+(bv<<2)>>2]|0;bK=c[c[aQ>>2]>>2]|0;cM=bB;cN=bK;cP=+h[bK+(bB<<3)>>3];by=542}if((by|0)==542){by=0;cI=bv;cJ=cM;cK=cN;cL=cP}if(cL<=+h[cK+(bw<<3)>>3]){cQ=bN;cR=bc;break}c[bc+(bN<<2)>>2]=cJ;c[(c[bm>>2]|0)+(c[(c[bo>>2]|0)+(bN<<2)>>2]<<2)>>2]=bN;bB=cI<<1|1;bK=c[bp>>2]|0;bH=c[bo>>2]|0;if((bB|0)<(bK|0)){bN=cI;bv=bB;bu=bK;bc=bH}else{cQ=cI;cR=bH;break}}c[cR+(cQ<<2)>>2]=bw;c[(c[bm>>2]|0)+(bw<<2)>>2]=cQ;cA=bM}bc=a[(c[aD>>2]|0)+cA|0]|0;do{if((bc<<24>>24==cC<<24>>24&cD|bc&cC&255|0)==0){cS=bc<<24>>24==0|cA<<1}else{if((a[U]&1)==0){cS=(a[(c[aB>>2]|0)+cA|0]|0)!=0|cA<<1;break}else{cB=+h[O>>3]*1389796.0;b1=cB-+(~~(cB/2147483647.0)|0)*2147483647.0;h[O>>3]=b1;cS=b1/2147483647.0<.5|cA<<1;break}}}while(0);if((cS|0)==-2){cE=0;break L287}else{cz=cS}}c[o>>2]=c[aj>>2];bQ(bL,o);bc=cz>>1;a[(c[ay>>2]|0)+bc|0]=(cz&1^1)&255^1;bu=(c[aI>>2]|0)+(bc<<3)|0;bc=c[an>>2]|0;c[bu>>2]=-1;c[bu+4>>2]=bc;bc=c[aj>>2]|0;c[aj>>2]=bc+1;c[(c[ai>>2]|0)+(bc<<2)>>2]=cz}aU=c[b>>2]|0;bJ=c[b+4>>2]|0;bZ=1;bc=0;bu=(E=+(aU>>>0)+ +(bJ|0)*4294967296.0+(+(bZ>>>0)+ +(bc|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[b>>2]=~~(+(aU>>>0)+ +(bJ|0)*4294967296.0+(+(bZ>>>0)+ +(bc|0)*4294967296.0))>>>0;c[b+4>>2]=bu;bu=bf+1|0;if((c[an>>2]|0)==0){by=296;break}if((bF|0)==0){cT=c[ca>>2]|0}else{c[ca>>2]=0;cT=0}do{if((cT|0)==(c[y>>2]|0)){bc=(cT>>1)+2&-2;bZ=(bc|0)<2?2:bc;if((bZ|0)>(2147483647-cT|0)){by=318;break L272}bc=c[x>>2]|0;bJ=bZ+cT|0;c[y>>2]=bJ;bZ=cH(bc,bJ<<2)|0;bJ=bZ;c[x>>2]=bJ;if((bZ|0)!=0){cU=bJ;break}if((c[(a$()|0)>>2]|0)==12){by=318;break L272}else{cU=bJ}}else{cU=c[x>>2]|0}}while(0);bJ=cU+(cT<<2)|0;if((bJ|0)!=0){c[bJ>>2]=0}c[ca>>2]=cT+1;bJ=cr;bZ=0;bc=(c[aj>>2]|0)-1|0;aU=-2;while(1){bv=(c[a6>>2]|0)+(bJ<<2)|0;bN=bv;bH=c[bv>>2]|0;do{if((bH&4|0)!=0){bK=bN+4+(bH>>>5<<2)|0;b1=+h[aR>>3]+ +g[bK>>2];g[bK>>2]=b1;if(b1<=1.0e20){break}if((c[af>>2]|0)>0){bK=0;do{bB=(c[a6>>2]|0)+(c[(c[ae>>2]|0)+(bK<<2)>>2]<<2)|0;bA=bB+4+((c[bB>>2]|0)>>>5<<2)|0;g[bA>>2]=+g[bA>>2]*1.0e-20;bK=bK+1|0}while((bK|0)<(c[af>>2]|0))}h[aR>>3]=+h[aR>>3]*1.0e-20}}while(0);bH=(aU|0)!=-2|0;if(bH>>>0<(c[bv>>2]|0)>>>5>>>0){bK=bH;bH=bZ;while(1){bM=c[bN+4+(bK<<2)>>2]|0;c[ak>>2]=bM;bw=bM>>1;do{if((a[(c[bk>>2]|0)+bw|0]|0)==0){if((c[(c[aI>>2]|0)+(bw<<3)+4>>2]|0)<=0){cV=bH;break}bM=(c[as>>2]|0)+(bw<<3)|0;b1=+h[aS>>3]+ +h[bM>>3];h[bM>>3]=b1;if(b1>1.0e+100){if((c[aV>>2]|0)>0){bM=0;do{bA=(c[as>>2]|0)+(bM<<3)|0;h[bA>>3]=+h[bA>>3]*1.0e-100;bM=bM+1|0}while((bM|0)<(c[aV>>2]|0))}h[aS>>3]=+h[aS>>3]*1.0e-100}do{if((c[bl>>2]|0)>(bw|0)){bM=c[(c[bm>>2]|0)+(bw<<2)>>2]|0;if((bM|0)<=-1){break}bG=c[bo>>2]|0;bE=c[bG+(bM<<2)>>2]|0;L415:do{if((bM|0)==0){cW=0;cX=bG}else{bA=bM;bB=bG;while(1){bI=bA-1>>1;b8=c[bB+(bI<<2)>>2]|0;b6=c[c[aQ>>2]>>2]|0;if(+h[b6+(bE<<3)>>3]<=+h[b6+(b8<<3)>>3]){cW=bA;cX=bB;break L415}c[bB+(bA<<2)>>2]=b8;c[(c[bm>>2]|0)+(c[(c[bo>>2]|0)+(bI<<2)>>2]<<2)>>2]=bA;b8=c[bo>>2]|0;if((bI|0)==0){cW=0;cX=b8;break}else{bA=bI;bB=b8}}}}while(0);c[cX+(cW<<2)>>2]=bE;c[(c[bm>>2]|0)+(bE<<2)>>2]=cW}}while(0);a[(c[bk>>2]|0)+bw|0]=1;if((c[(c[aI>>2]|0)+(bw<<3)+4>>2]|0)<(c[an>>2]|0)){bX(p,m);cV=bH;break}else{cV=bH+1|0;break}}else{cV=bH}}while(0);bw=bK+1|0;if((bw|0)<((c[bv>>2]|0)>>>5|0)){bK=bw;bH=cV}else{cY=cV;break}}}else{cY=bZ}bH=c[ai>>2]|0;bK=c[bk>>2]|0;bv=bc;while(1){cZ=bv-1|0;c_=c[bH+(bv<<2)>>2]|0;c$=c_>>1;c0=bK+c$|0;if((a[c0]|0)==0){bv=cZ}else{break}}bv=c[(c[aI>>2]|0)+(c$<<3)>>2]|0;a[c0]=0;bK=cY-1|0;if((bK|0)>0){bJ=bv;bZ=bK;bc=cZ;aU=c_}else{break}}c[c[x>>2]>>2]=c_^1;aU=c[aH>>2]|0;if((aU|0)==0){c1=c[az>>2]|0}else{c[az>>2]=0;c1=0}bc=c[ca>>2]|0;if((c1|0)<(bc|0)){bZ=c[bj>>2]|0;do{if((bZ|0)<(bc|0)){bJ=bc+1-bZ&-2;bK=(bZ>>1)+2&-2;bv=(bJ|0)>(bK|0)?bJ:bK;if((bv|0)>(2147483647-bZ|0)){by=356;break L272}bK=bv+bZ|0;c[bj>>2]=bK;bv=cH(aU,bK<<2)|0;bK=bv;c[aH>>2]=bK;if((bv|0)!=0){c2=bK;break}if((c[(a$()|0)>>2]|0)==12){by=356;break L272}else{c2=bK}}else{c2=aU}}while(0);aU=c[az>>2]|0;if((aU|0)<(bc|0)){bZ=aU;aU=c2;while(1){bK=aU+(bZ<<2)|0;if((bK|0)!=0){c[bK>>2]=0}bK=bZ+1|0;if((bK|0)>=(bc|0)){break}bZ=bK;aU=c[aH>>2]|0}c3=c[ca>>2]|0}else{c3=bc}c[az>>2]=bc;c4=c3}else{c4=bc}if((c4|0)>0){aU=c[x>>2]|0;bZ=0;do{c[(c[aH>>2]|0)+(bZ<<2)>>2]=c[aU+(bZ<<2)>>2];bZ=bZ+1|0}while((bZ|0)<(c4|0))}bZ=c[T>>2]|0;do{if((bZ|0)==1){if((c4|0)<=1){c5=1;c6=1;c7=c4;break}aU=c[x>>2]|0;bc=1;bK=1;while(1){bv=c[aU+(bc<<2)>>2]|0;bJ=c[aI>>2]|0;bH=c[bJ+(bv>>1<<3)>>2]|0;L461:do{if((bH|0)==-1){c[aU+(bK<<2)>>2]=bv;c8=bK+1|0}else{bN=(c[a6>>2]|0)+(bH<<2)|0;bw=bN;bG=c[bN>>2]|0;if(bG>>>0<=63){c8=bK;break}bN=c[bk>>2]|0;bM=bG>>>5;bG=1;while(1){bB=c[bw+4+(bG<<2)>>2]>>1;if((a[bN+bB|0]|0)==0){if((c[bJ+(bB<<3)+4>>2]|0)>0){break}}bB=bG+1|0;if((bB|0)<(bM|0)){bG=bB}else{c8=bK;break L461}}c[aU+(bK<<2)>>2]=bv;c8=bK+1|0}}while(0);bv=bc+1|0;if((bv|0)<(c4|0)){bc=bv;bK=c8}else{c5=c8;c6=bv;c7=c4;break}}}else if((bZ|0)==2){if((c4|0)<=1){c5=1;c6=1;c7=c4;break}bK=1;bc=1;aU=c[x>>2]|0;bv=c4;while(1){bJ=c[aU+(bK<<2)>>2]|0;bH=c[aI>>2]|0;bG=c[bH+(bJ>>1<<3)>>2]|0;L476:do{if((bG|0)==-1){c9=aU;da=bJ;by=412}else{c[aw>>2]=bJ;bM=(c[a6>>2]|0)+(bG<<2)|0;if((c[V>>2]|0)==0){db=1;dc=bM;dd=bH;de=bJ}else{c[aJ>>2]=0;db=1;dc=bM;dd=bH;de=bJ}L480:while(1){do{if(db>>>0<(c[dc>>2]|0)>>>5>>>0){bM=c[dc+4+(db<<2)>>2]|0;bN=bM>>1;if((c[dd+(bN<<3)+4>>2]|0)==0){df=db;dg=dc;dh=dd;di=de;break}bw=a[(c[bk>>2]|0)+bN|0]|0;if((bw-1&255)<2){df=db;dg=dc;dh=dd;di=de;break}dj=c[aJ>>2]|0;dk=(dj|0)==(c[aK>>2]|0);if((c[dd+(bN<<3)>>2]|0)==-1|bw<<24>>24==3){break L480}if(dk){bw=(dj>>1)+2&-2;bB=(bw|0)<2?2:bw;if((bB|0)>(2147483647-dj|0)){by=400;break L272}bw=c[V>>2]|0;bA=bB+dj|0;c[aK>>2]=bA;bB=cH(bw,bA<<3)|0;bA=bB;c[V>>2]=bA;if((bB|0)==0){if((c[(a$()|0)>>2]|0)==12){by=400;break L272}}dl=c[aJ>>2]|0;dm=bA}else{dl=dj;dm=c[V>>2]|0}c[aJ>>2]=dl+1;bA=dm+(dl<<3)|0;if((bA|0)!=0){bB=bA;c[bB>>2]=db;c[bB+4>>2]=de}c[aw>>2]=bM;bB=c[aI>>2]|0;df=0;dg=(c[a6>>2]|0)+(c[bB+(bN<<3)>>2]<<2)|0;dh=bB;di=bM}else{bM=(c[bk>>2]|0)+(de>>1)|0;if((a[bM]|0)==0){a[bM]=2;bX(bh,l)}bM=c[aJ>>2]|0;if((bM|0)==0){dn=bc;dp=aU;dq=bv;break L476}bB=bM-1|0;bM=c[V>>2]|0;bN=c[bM+(bB<<3)>>2]|0;bA=c[bM+(bB<<3)+4>>2]|0;c[aw>>2]=bA;bM=c[aI>>2]|0;bw=(c[a6>>2]|0)+(c[bM+(bA>>1<<3)>>2]<<2)|0;c[aJ>>2]=bB;df=bN;dg=bw;dh=bM;di=bA}}while(0);db=df+1|0;dc=dg;dd=dh;de=di}if(dk){bE=(dj>>1)+2&-2;bA=(bE|0)<2?2:bE;if((bA|0)>(2147483647-dj|0)){by=385;break L272}bE=c[V>>2]|0;bM=bA+dj|0;c[aK>>2]=bM;bA=cH(bE,bM<<3)|0;bM=bA;c[V>>2]=bM;if((bA|0)==0){if((c[(a$()|0)>>2]|0)==12){by=385;break L272}}dr=c[aJ>>2]|0;ds=bM}else{dr=dj;ds=c[V>>2]|0}bM=dr+1|0;c[aJ>>2]=bM;bA=ds+(dr<<3)|0;if((bA|0)==0){dt=bM}else{bM=bA;c[bM>>2]=0;c[bM+4>>2]=de;dt=c[aJ>>2]|0}if((dt|0)>0){bM=0;bA=dt;while(1){bE=(c[bk>>2]|0)+(c[(c[V>>2]|0)+(bM<<3)+4>>2]>>1)|0;if((a[bE]|0)==0){a[bE]=3;bX(bh,(c[V>>2]|0)+(bM<<3)+4|0);du=c[aJ>>2]|0}else{du=bA}bE=bM+1|0;if((bE|0)<(du|0)){bM=bE;bA=du}else{break}}}bA=c[x>>2]|0;c9=bA;da=c[bA+(bK<<2)>>2]|0;by=412}}while(0);if((by|0)==412){by=0;c[c9+(bc<<2)>>2]=da;dn=bc+1|0;dp=c9;dq=c[ca>>2]|0}bJ=bK+1|0;if((bJ|0)<(dq|0)){bK=bJ;bc=dn;aU=dp;bv=dq}else{c5=dn;c6=bJ;c7=dq;break}}}else{c5=c4;c6=c4;c7=c4}}while(0);bZ=c7;bv=(c7|0)<0|0?-1:0;aU=c[bi>>2]|0;bc=c[bi+4>>2]|0;bK=(E=+(aU>>>0)+ +(bc|0)*4294967296.0+(+(bZ>>>0)+ +(bv|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[bi>>2]=~~(+(aU>>>0)+ +(bc|0)*4294967296.0+(+(bZ>>>0)+ +(bv|0)*4294967296.0))>>>0;c[bi+4>>2]=bK;bK=c6-c5|0;if((bK|0)>0){bv=c7-bK|0;c[ca>>2]=bv;dv=bv}else{dv=c7}bv=dv;bK=(dv|0)<0|0?-1:0;bZ=c[at>>2]|0;bc=c[at+4>>2]|0;aU=(E=+(bZ>>>0)+ +(bc|0)*4294967296.0+(+(bv>>>0)+ +(bK|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[at>>2]=~~(+(bZ>>>0)+ +(bc|0)*4294967296.0+(+(bv>>>0)+ +(bK|0)*4294967296.0))>>>0;c[at+4>>2]=aU;aU=(dv|0)==1;if(aU){dw=0}else{bK=c[x>>2]|0;if((dv|0)>2){bv=c[aI>>2]|0;bc=1;bZ=2;while(1){bJ=(c[bv+(c[bK+(bZ<<2)>>2]>>1<<3)+4>>2]|0)>(c[bv+(c[bK+(bc<<2)>>2]>>1<<3)+4>>2]|0)?bZ:bc;bH=bZ+1|0;if((bH|0)<(dv|0)){bc=bJ;bZ=bH}else{dx=bJ;break}}}else{dx=1}bZ=bK+(dx<<2)|0;bc=c[bZ>>2]|0;bv=bK+4|0;c[bZ>>2]=c[bv>>2];c[bv>>2]=bc;dw=c[(c[aI>>2]|0)+(bc>>1<<3)+4>>2]|0}if((c[az>>2]|0)>0){bc=0;do{a[(c[bk>>2]|0)+(c[(c[aH>>2]|0)+(bc<<2)>>2]>>1)|0]=0;bc=bc+1|0}while((bc|0)<(c[az>>2]|0))}bW(A,dw);if(aU){bc=c[x>>2]|0;bK=c[bc>>2]|0;bv=bK>>1;a[(c[ay>>2]|0)+bv|0]=(bK&1^1)&255^1;bZ=(c[aI>>2]|0)+(bv<<3)|0;bv=c[an>>2]|0;c[bZ>>2]=-1;c[bZ+4>>2]=bv;bv=c[aj>>2]|0;c[aj>>2]=bv+1;c[(c[ai>>2]|0)+(bv<<2)>>2]=bK;dy=bc}else{bc=bS(aN,p,1)|0;bK=c[af>>2]|0;if((bK|0)==(c[ah>>2]|0)){bv=(bK>>1)+2&-2;bZ=(bv|0)<2?2:bv;if((bZ|0)>(2147483647-bK|0)){by=441;break L272}bv=c[ae>>2]|0;bJ=bZ+bK|0;c[ah>>2]=bJ;bZ=cH(bv,bJ<<2)|0;bJ=bZ;c[ae>>2]=bJ;if((bZ|0)==0){if((c[(a$()|0)>>2]|0)==12){by=441;break L272}}dz=c[af>>2]|0;dA=bJ}else{dz=bK;dA=c[ae>>2]|0}c[af>>2]=dz+1;bK=dA+(dz<<2)|0;if((bK|0)!=0){c[bK>>2]=bc}bT(A,bc);bK=(c[a6>>2]|0)+(bc<<2)|0;bJ=bK+4+((c[bK>>2]|0)>>>5<<2)|0;b1=+h[aR>>3]+ +g[bJ>>2];g[bJ>>2]=b1;if(b1>1.0e20){if((c[af>>2]|0)>0){bJ=0;do{bK=(c[a6>>2]|0)+(c[(c[ae>>2]|0)+(bJ<<2)>>2]<<2)|0;bZ=bK+4+((c[bK>>2]|0)>>>5<<2)|0;g[bZ>>2]=+g[bZ>>2]*1.0e-20;bJ=bJ+1|0}while((bJ|0)<(c[af>>2]|0))}h[aR>>3]=+h[aR>>3]*1.0e-20}bJ=c[x>>2]|0;aU=c[bJ>>2]|0;bZ=aU>>1;a[(c[ay>>2]|0)+bZ|0]=(aU&1^1)&255^1;bK=(c[aI>>2]|0)+(bZ<<3)|0;bZ=c[an>>2]|0;c[bK>>2]=bc;c[bK+4>>2]=bZ;bZ=c[aj>>2]|0;c[aj>>2]=bZ+1;c[(c[ai>>2]|0)+(bZ<<2)>>2]=aU;dy=bJ}h[aS>>3]=1.0/+h[L>>3]*+h[aS>>3];h[aR>>3]=1.0/+h[M>>3]*+h[aR>>3];bJ=(c[a8>>2]|0)-1|0;c[a8>>2]=bJ;if((bJ|0)!=0){bf=bu;bF=dy;continue}b1=+h[ac>>3]*+h[aT>>3];h[aT>>3]=b1;c[a8>>2]=~~b1;b1=+h[$>>3]*+h[r>>3];h[r>>3]=b1;if((c[q>>2]|0)<=0){bf=bu;bF=dy;continue}bJ=c[b>>2]|0;aU=c[aC>>2]|0;bZ=c[an>>2]|0;if((bZ|0)==0){dB=aj}else{dB=c[am>>2]|0}bK=c[dB>>2]|0;bv=c[bd>>2]|0;bH=c[br>>2]|0;bG=c[a5>>2]|0;bA=c[bq>>2]|0;bM=c[bq+4>>2]|0;cB=+(c[aV>>2]|0);b0=1.0/cB;if((bZ|0)<0){dC=0.0}else{bE=0;dD=0.0;while(1){if((bE|0)==0){dE=0}else{dE=c[(c[am>>2]|0)+(bE-1<<2)>>2]|0}if((bE|0)==(bZ|0)){dF=aj}else{dF=(c[am>>2]|0)+(bE<<2)|0}bw=c[dF>>2]|0;dG=dD+ +S(+b0,+ +(bE|0))*+(bw-dE|0);bw=bE+1|0;if((bw|0)>(bZ|0)){dC=dG;break}else{bE=bw;dD=dG}}}aA(1072,(bD=i,i=i+64|0,c[bD>>2]=bJ,c[bD+8>>2]=aU-bK,c[bD+16>>2]=bv,c[bD+24>>2]=bH,c[bD+32>>2]=~~b1,c[bD+40>>2]=bG,h[bD+48>>3]=(+(bA>>>0)+ +(bM>>>0)*4294967296.0)/+(bG|0),h[bD+56>>3]=dC/cB*100.0,bD)|0)|0;i=bD;bf=bu;bF=dy}if((by|0)==296){by=0;cE=a[3240]&1}else if((by|0)==469){by=0;b4=+(c[aV>>2]|0);dD=1.0/b4;bf=c[an>>2]|0;if((bf|0)<0){dH=0.0}else{bC=0;b0=0.0;while(1){if((bC|0)==0){dI=0}else{dI=c[(c[am>>2]|0)+(bC-1<<2)>>2]|0}if((bC|0)==(bf|0)){dJ=aj}else{dJ=(c[am>>2]|0)+(bC<<2)|0}e=c[dJ>>2]|0;dG=b0+ +S(+dD,+ +(bC|0))*+(e-dI|0);e=bC+1|0;if((e|0)>(bf|0)){dH=dG;break}else{bC=e;b0=dG}}}h[s>>3]=dH/b4;bW(A,0);cE=a[3232]|0?2:0}else if((by|0)==480){by=0;cE=a[3240]&1}else if((by|0)==504){by=0;bC=cw^1;if((c[K>>2]|0)>0){bf=0;do{a[(c[H>>2]|0)+(c[(c[J>>2]|0)+(bf<<2)>>2]|0)|0]=0;bf=bf+1|0}while((bf|0)<(c[K>>2]|0))}if((c[J>>2]|0)!=0){c[K>>2]=0}c[aF>>2]=bC;b3(t,bC);bf=(c[H>>2]|0)+bC|0;if((a[bf]|0)==0){a[bf]=1;bX(be,j)}if((c[an>>2]|0)!=0){bf=bC>>1;a[(c[bk>>2]|0)+bf|0]=1;e=(c[aj>>2]|0)-1|0;bE=c[c[am>>2]>>2]|0;if((e|0)>=(bE|0)){bZ=e;e=bE;while(1){bE=c[(c[ai>>2]|0)+(bZ<<2)>>2]|0;bc=bE>>1;if((a[(c[bk>>2]|0)+bc|0]|0)==0){dK=e}else{bw=c[aI>>2]|0;bN=c[bw+(bc<<3)>>2]|0;L617:do{if((bN|0)==-1){bB=bE^1;c[bg>>2]=bB;b3(t,bB);b8=(c[H>>2]|0)+bB|0;if((a[b8]|0)!=0){break}a[b8]=1;bX(be,k)}else{b8=(c[a6>>2]|0)+(bN<<2)|0;bB=b8;bI=c[b8>>2]|0;if(bI>>>0>63){dL=1;dM=bI;dN=bw}else{break}while(1){bI=c[bB+4+(dL<<2)>>2]>>1;if((c[dN+(bI<<3)+4>>2]|0)>0){a[(c[bk>>2]|0)+bI|0]=1;dO=c[b8>>2]|0}else{dO=dM}bI=dL+1|0;if((bI|0)>=(dO>>>5|0)){break L617}dL=bI;dM=dO;dN=c[aI>>2]|0}}}while(0);a[(c[bk>>2]|0)+bc|0]=0;dK=c[c[am>>2]>>2]|0}bw=bZ-1|0;if((bw|0)<(dK|0)){break}else{bZ=bw;e=dK}}}a[(c[bk>>2]|0)+bf|0]=0}cE=a[3240]&1}if((bF|0)!=0){c[ca>>2]=0;cG(bF);c[x>>2]=0;c[y>>2]=0}if((a[aY]&1)!=0){cl=cE;break L270}e=c[w>>2]|0;bZ=c[w+4>>2]|0;bC=0;if(!((bZ|0)<(bC|0)|(bZ|0)==(bC|0)&e>>>0<0>>>0)){bC=c[b+4>>2]|0;if(!(bC>>>0<bZ>>>0|bC>>>0==bZ>>>0&(c[b>>2]|0)>>>0<e>>>0)){cl=cE;break L270}}e=c[v>>2]|0;bZ=c[v+4>>2]|0;bC=0;if(!((bZ|0)<(bC|0)|(bZ|0)==(bC|0)&e>>>0<0>>>0)){bC=c[bs+4>>2]|0;if(!(bC>>>0<bZ>>>0|bC>>>0==bZ>>>0&(c[bs>>2]|0)>>>0<e>>>0)){cl=cE;break L270}}e=a[3232]|0?2:0;if((((e&255)>>>1^1)&cE<<24>>24==e<<24>>24|e&cE&255|0)==0){cl=cE;break L270}else{aL=aL+1|0}}if((by|0)==318){av(aP(1)|0,3120,0);return 0}else if((by|0)==356){av(aP(1)|0,3120,0);return 0}else if((by|0)==385){av(aP(1)|0,3120,0);return 0}else if((by|0)==400){av(aP(1)|0,3120,0);return 0}else if((by|0)==441){av(aP(1)|0,3120,0);return 0}}}while(0);if((c[q>>2]|0)>0){aG(248)|0}do{if(cl<<24>>24==0){b$(cd,c[aV>>2]|0);if((c[aV>>2]|0)>0){dP=0}else{break}do{a[(c[C>>2]|0)+dP|0]=a[(c[ay>>2]|0)+dP|0]|0;dP=dP+1|0}while((dP|0)<(c[aV>>2]|0))}else{if(cl<<24>>24!=(a[3240]&1)){break}if((c[K>>2]|0)!=0){break}a[ar]=0}}while(0);bW(A,0);cj=cl}}while(0);do{if(cj<<24>>24==0){if((a[aZ]&1)==0){break}cl=(c[a1>>2]|0)-1|0;if((cl|0)<=0){break}A=a[3248]|0;ar=cl;do{cl=c[a0>>2]|0;K=A&1;dP=c[C>>2]|0;ay=ar;cE=c[cl+(ar<<2)>>2]|0;while(1){dQ=ay-1|0;dR=c[cl+(dQ<<2)>>2]|0;dS=dR>>1;if((cE|0)<=1){by=581;break}if((a[dP+dS|0]^dR&1)<<24>>24==K<<24>>24){ay=dQ;cE=cE-1|0}else{break}}if((by|0)==581){by=0;a[dP+dS|0]=(dR&1^1)&255^1}ar=dQ-cE|0}while((ar|0)>0)}}while(0);do{if(u){dQ=c[bx>>2]|0;if((dQ|0)<=0){break}dR=c[cc>>2]|0;dS=0;do{a0=c[dR+(dS<<2)>>2]|0;a[(c[ba>>2]|0)+a0|0]=0;if((a[a_]&1)!=0){cm(z,a0)}dS=dS+1|0}while((dS|0)<(dQ|0))}}while(0);a_=c[cc>>2]|0;if((a_|0)!=0){c[bx>>2]=0;cG(a_);c[cc>>2]=0;c[aq>>2]=0}if(cj<<24>>24!=0){cb=cj<<24>>24==1?1048:1e3;ce(z);i=f;return cb|0}cj=c[aV>>2]|0;if((cj|0)>0){aq=c[C>>2]|0;cc=3;a_=0;while(1){bx=a[aq+a_|0]|0;if((bx&2)==0){ba=bx<<24>>24==0|0;bx=a_+1|0;if((bx|0)>0){u=0;dQ=bx;while(1){dS=u+1|0;if((dQ|0)>9){u=dS;dQ=(dQ|0)/10|0}else{dT=dS;break}}}else{dT=0}dU=cc+2-ba+dT|0;dV=bx}else{dU=cc;dV=a_+1|0}if((dV|0)<(cj|0)){cc=dU;a_=dV}else{dW=dU;break}}}else{dW=3}dU=dW+1|0;dW=(dU|0)>-1?dU:-1;dV=(dW|0)==0?1:dW;while(1){dX=cF(dV)|0;if((dX|0)!=0){break}dW=(D=c[1124]|0,c[1124]=D+0,D);if((dW|0)==0){by=611;break}bb[dW&3]()}if((by|0)==611){by=aP(4)|0;c[by>>2]=2480;av(by|0,3072,26);return 0}by=au(dX|0,dU|0,1032,(bD=i,i=i+1|0,i=i+7&-8,c[bD>>2]=0,bD)|0)|0;i=bD;dV=c[aV>>2]|0;if((dV|0)>0){dY=by;dZ=0;d_=dV}else{cb=dX;ce(z);i=f;return cb|0}while(1){dV=a[(c[C>>2]|0)+dZ|0]|0;if((dV&2)==0){by=dZ+1|0;dW=au(dX+dY|0,dU-dY|0,1008,(bD=i,i=i+16|0,c[bD>>2]=dV<<24>>24==0?3280:1016,c[bD+8>>2]=by,bD)|0)|0;i=bD;d$=dW+dY|0;d0=c[aV>>2]|0;d1=by}else{d$=dY;d0=d_;d1=dZ+1|0}if((d1|0)<(d0|0)){dY=d$;dZ=d1;d_=d0}else{cb=dX;break}}ce(z);i=f;return cb|0}return 0}function bz(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;
e=i;f=b|0;g=b+4|0;h=c[g>>2]|0;j=c[b+8>>2]|0;L728:do{if((h|0)<(j|0)){b=c[f>>2]|0;k=h;while(1){l=a[b+k|0]|0;if((l&255)<=8){m=k;break L728}if(!((l&255)<14|l<<24>>24==32)){m=k;break L728}l=k+1|0;c[g>>2]=l;if((l|0)<(j|0)){k=l}else{m=l;break}}}else{m=h}}while(0);do{if((m|0)<(j|0)){h=a[(c[f>>2]|0)+m|0]|0;if((h<<24>>24|0)==45){k=m+1|0;c[g>>2]=k;n=1;p=k;break}else if((h<<24>>24|0)==43){h=m+1|0;c[g>>2]=h;n=0;p=h;break}else{n=0;p=m;break}}else{n=0;p=m}}while(0);do{if((p|0)<(j|0)){m=c[f>>2]|0;h=a[m+p|0]|0;if((h&255)<48|(h&255)>57){q=h&255;break}if((a[d]&1)==0){r=0;s=p;t=h}else{u=0;i=e;return u|0}while(1){if((t-48&255)>=10){v=r;break}h=(t&255)-48+(r*10|0)|0;k=s+1|0;c[g>>2]=k;if((k|0)>=(j|0)){v=h;break}r=h;s=k;t=a[m+k|0]|0}u=n?-v|0:v;i=e;return u|0}else{q=-1}}while(0);ay(c[o>>2]|0,920,(v=i,i=i+8|0,c[v>>2]=q,v)|0)|0;i=v;a[d]=1;u=0;i=e;return u|0}function bA(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0;c[b>>2]=2576;c[b+4>>2]=d;c[b+8>>2]=e;c[b+12>>2]=f;c[b+16>>2]=g;do{if((a[4528]|0)==0){if((aW(4528)|0)==0){break}c[940]=0;c[941]=0;c[942]=0;aw(36,3760,n|0)|0}}while(0);g=c[941]|0;if((g|0)==(c[942]|0)){f=(g>>1)+2&-2;e=(f|0)<2?2:f;if((e|0)>(2147483647-g|0)){h=aP(1)|0;av(h|0,3120,0)}f=c[940]|0;d=e+g|0;c[942]=d;e=cH(f,d<<2)|0;d=e;c[940]=d;do{if((e|0)==0){if((c[(a$()|0)>>2]|0)!=12){break}h=aP(1)|0;av(h|0,3120,0)}}while(0);i=c[941]|0;j=d}else{i=g;j=c[940]|0}c[941]=i+1;g=j+(i<<2)|0;if((g|0)==0){return}c[g>>2]=b;return}function bB(a){a=a|0;return}function bC(a){a=a|0;if((a|0)==0){return}cG(a);return}function bD(a){a=a|0;var b=0,d=0;b=a|0;d=c[b>>2]|0;if((d|0)==0){return}c[a+4>>2]=0;cG(d);c[b>>2]=0;c[a+8>>2]=0;return}function bE(a){a=a|0;if((a|0)==0){return}cG(a);return}function bF(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0;e=0;while(1){f=d+e|0;if((e|0)==1){g=0;break}if((a[f]|0)==(a[1016+e|0]|0)){e=e+1|0}else{h=0;i=695;break}}if((i|0)==695){return h|0}while(1){i=g+1|0;e=d+i|0;if((g|0)==3){j=0;k=e;break}if((a[e]|0)==(a[824+g|0]|0)){g=i}else{j=1;k=f;break}}if((a5(k|0,c[b+4>>2]|0)|0)!=0){h=0;return h|0}a[b+20|0]=j;h=1;return h|0}function bG(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0;e=i;f=c[o>>2]|0;g=b+4|0;h=c[g>>2]|0;ay(f|0,864,(j=i,i=i+16|0,c[j>>2]=h,c[j+8>>2]=h,j)|0)|0;i=j;h=0;while(1){k=h>>>0<(32-((cM(c[g>>2]|0)|0)<<1)|0)>>>0;aE(32,f|0)|0;if(k){h=h+1|0}else{break}}ay(f|0,848,(j=i,i=i+8|0,c[j>>2]=(a[b+20|0]&1)!=0?840:832,j)|0)|0;i=j;if(!d){i=e;return}ay(f|0,712,(j=i,i=i+8|0,c[j>>2]=c[b+8>>2],j)|0)|0;i=j;aE(10,f|0)|0;i=e;return}function bH(a){a=a|0;if((a|0)==0){return}cG(a);return}function bI(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,p=0,q=0,r=0;e=i;i=i+8|0;f=e|0;g=0;while(1){if((g|0)==1){break}if((a[d+g|0]|0)==(a[1016+g|0]|0)){g=g+1|0}else{h=0;j=724;break}}if((j|0)==724){i=e;return h|0}g=b+4|0;k=c[g>>2]|0;l=0;while(1){m=a[k+l|0]|0;n=l+1|0;if(m<<24>>24==0){p=0;break}if((a[d+n|0]|0)==m<<24>>24){l=n}else{h=0;j=727;break}}if((j|0)==727){i=e;return h|0}while(1){q=d+(p+n)|0;if((p|0)==1){break}if((a[q]|0)==(a[656+p|0]|0)){p=p+1|0}else{h=0;j=725;break}}if((j|0)==725){i=e;return h|0}j=aD(q|0,f|0,10)|0;if((c[f>>2]|0)==0){h=0;i=e;return h|0}if((j|0)>(c[b+24>>2]|0)){f=c[o>>2]|0;p=c[g>>2]|0;ay(f|0,600,(r=i,i=i+16|0,c[r>>2]=q,c[r+8>>2]=p,r)|0)|0;i=r;aM(1);return 0}if((j|0)<(c[b+20>>2]|0)){p=c[o>>2]|0;f=c[g>>2]|0;ay(p|0,496,(r=i,i=i+16|0,c[r>>2]=q,c[r+8>>2]=f,r)|0)|0;i=r;aM(1);return 0}c[b+28>>2]=j;h=1;i=e;return h|0}function bJ(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;d=i;e=c[o>>2]|0;f=c[a+16>>2]|0;ay(e|0,784,(g=i,i=i+16|0,c[g>>2]=c[a+4>>2],c[g+8>>2]=f,g)|0)|0;i=g;f=c[a+20>>2]|0;if((f|0)==-2147483648){aI(776,4,1,e|0)|0}else{ay(e|0,768,(g=i,i=i+8|0,c[g>>2]=f,g)|0)|0;i=g}aI(760,4,1,e|0)|0;f=c[a+24>>2]|0;if((f|0)==2147483647){aI(752,4,1,e|0)|0}else{ay(e|0,768,(g=i,i=i+8|0,c[g>>2]=f,g)|0)|0;i=g}ay(e|0,728,(g=i,i=i+8|0,c[g>>2]=c[a+28>>2],g)|0)|0;i=g;if(!b){i=d;return}ay(e|0,712,(g=i,i=i+8|0,c[g>>2]=c[a+8>>2],g)|0)|0;i=g;aE(10,e|0)|0;i=d;return}function bK(a){a=a|0;return}function bL(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;b=a+32|0;d=c[b>>2]|0;if((d|0)!=0){c[a+36>>2]=0;cG(d);c[b>>2]=0;c[a+40>>2]=0}b=a+16|0;d=c[b>>2]|0;if((d|0)!=0){c[a+20>>2]=0;cG(d);c[b>>2]=0;c[a+24>>2]=0}b=a|0;d=c[b>>2]|0;if((d|0)==0){return}e=a+4|0;f=c[e>>2]|0;if((f|0)>0){g=0;h=f;f=d;while(1){i=f+(g*12|0)|0;j=c[i>>2]|0;if((j|0)==0){k=h;l=f}else{c[f+(g*12|0)+4>>2]=0;cG(j);c[i>>2]=0;c[f+(g*12|0)+8>>2]=0;k=c[e>>2]|0;l=c[b>>2]|0}i=g+1|0;if((i|0)<(k|0)){g=i;h=k;f=l}else{m=l;break}}}else{m=d}c[e>>2]=0;cG(m);c[b>>2]=0;c[a+8>>2]=0;return}function bM(a){a=a|0;bN(a);if((a|0)==0){return}cG(a);return}function bN(a){a=a|0;var b=0,d=0;c[a>>2]=2544;b=a+628|0;d=c[b>>2]|0;if((d|0)!=0){c[a+632>>2]=0;cG(d);c[b>>2]=0;c[a+636>>2]=0}b=a+616|0;d=c[b>>2]|0;if((d|0)!=0){c[a+620>>2]=0;cG(d);c[b>>2]=0;c[a+624>>2]=0}b=a+604|0;d=c[b>>2]|0;if((d|0)!=0){c[a+608>>2]=0;cG(d);c[b>>2]=0;c[a+612>>2]=0}b=a+588|0;d=c[b>>2]|0;if((d|0)!=0){c[a+592>>2]=0;cG(d);c[b>>2]=0;c[a+596>>2]=0}b=a+576|0;d=c[b>>2]|0;if((d|0)!=0){c[a+580>>2]=0;cG(d);c[b>>2]=0;c[a+584>>2]=0}b=a+564|0;d=c[b>>2]|0;if((d|0)!=0){c[a+568>>2]=0;cG(d);c[b>>2]=0;c[a+572>>2]=0}b=c[a+544>>2]|0;if((b|0)!=0){cG(b)}b=a+472|0;d=c[b>>2]|0;if((d|0)!=0){c[a+476>>2]=0;cG(d);c[b>>2]=0;c[a+480>>2]=0}b=a+460|0;d=c[b>>2]|0;if((d|0)!=0){c[a+464>>2]=0;cG(d);c[b>>2]=0;c[a+468>>2]=0}bL(a+412|0);b=a+396|0;d=c[b>>2]|0;if((d|0)!=0){c[a+400>>2]=0;cG(d);c[b>>2]=0;c[a+404>>2]=0}b=a+380|0;d=c[b>>2]|0;if((d|0)!=0){c[a+384>>2]=0;cG(d);c[b>>2]=0;c[a+388>>2]=0}b=a+364|0;d=c[b>>2]|0;if((d|0)!=0){c[a+368>>2]=0;cG(d|0);c[b>>2]=0;c[a+372>>2]=0}b=a+348|0;d=c[b>>2]|0;if((d|0)!=0){c[a+352>>2]=0;cG(d);c[b>>2]=0;c[a+356>>2]=0}b=a+332|0;d=c[b>>2]|0;if((d|0)!=0){c[a+336>>2]=0;cG(d|0);c[b>>2]=0;c[a+340>>2]=0}b=a+316|0;d=c[b>>2]|0;if((d|0)!=0){c[a+320>>2]=0;cG(d);c[b>>2]=0;c[a+324>>2]=0}b=a+304|0;d=c[b>>2]|0;if((d|0)!=0){c[a+308>>2]=0;cG(d);c[b>>2]=0;c[a+312>>2]=0}b=a+292|0;d=c[b>>2]|0;if((d|0)!=0){c[a+296>>2]=0;cG(d);c[b>>2]=0;c[a+300>>2]=0}b=a+280|0;d=c[b>>2]|0;if((d|0)!=0){c[a+284>>2]=0;cG(d);c[b>>2]=0;c[a+288>>2]=0}b=a+268|0;d=c[b>>2]|0;if((d|0)!=0){c[a+272>>2]=0;cG(d);c[b>>2]=0;c[a+276>>2]=0}b=a+256|0;d=c[b>>2]|0;if((d|0)!=0){c[a+260>>2]=0;cG(d);c[b>>2]=0;c[a+264>>2]=0}b=a+32|0;d=c[b>>2]|0;if((d|0)!=0){c[a+36>>2]=0;cG(d);c[b>>2]=0;c[a+40>>2]=0}b=a+16|0;d=c[b>>2]|0;if((d|0)!=0){c[a+20>>2]=0;cG(d);c[b>>2]=0;c[a+24>>2]=0}b=a+4|0;d=c[b>>2]|0;if((d|0)==0){return}c[a+8>>2]=0;cG(d|0);c[b>>2]=0;c[a+12>>2]=0;return}function bO(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;d=b|0;b=c[d>>2]|0;e=b+1|0;f=a+4|0;if((c[f>>2]|0)<(e|0)){g=a+8|0;h=c[g>>2]|0;do{if((h|0)<(e|0)){i=b+2-h&-2;j=(h>>1)+2&-2;k=(i|0)>(j|0)?i:j;if((k|0)>(2147483647-h|0)){l=aP(1)|0;av(l|0,3120,0)}j=a|0;i=c[j>>2]|0;m=k+h|0;c[g>>2]=m;k=cH(i,m*12|0)|0;c[j>>2]=k;if((k|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}l=aP(1)|0;av(l|0,3120,0)}}while(0);l=c[f>>2]|0;if((l|0)<(e|0)){g=a|0;h=l;do{l=c[g>>2]|0;k=l+(h*12|0)|0;if((k|0)!=0){c[k>>2]=0;c[l+(h*12|0)+4>>2]=0;c[l+(h*12|0)+8>>2]=0}h=h+1|0}while((h|0)<(e|0))}c[f>>2]=e;n=c[d>>2]|0}else{n=b}b=c[a>>2]|0;if((c[b+(n*12|0)>>2]|0)==0){o=n;p=a+16|0;b3(p,o);return}c[b+(n*12|0)+4>>2]=0;o=c[d>>2]|0;p=a+16|0;b3(p,o);return}function bP(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;f=d+1|0;g=b+4|0;if((c[g>>2]|0)>=(f|0)){h=b|0;i=c[h>>2]|0;j=i+d|0;a[j]=e;return}k=b+8|0;l=c[k>>2]|0;do{if((l|0)<(f|0)){m=d+2-l&-2;n=(l>>1)+2&-2;o=(m|0)>(n|0)?m:n;if((o|0)>(2147483647-l|0)){p=aP(1)|0;av(p|0,3120,0)}n=b|0;m=c[n>>2]|0;q=o+l|0;c[k>>2]=q;o=cH(m,q)|0;c[n>>2]=o;if((o|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}p=aP(1)|0;av(p|0,3120,0)}}while(0);p=c[g>>2]|0;if((p|0)<(f|0)){k=b|0;l=p;do{p=(c[k>>2]|0)+l|0;if((p|0)!=0){a[p]=0}l=l+1|0}while((l|0)<(f|0))}c[g>>2]=f;h=b|0;i=c[h>>2]|0;j=i+d|0;a[j]=e;return}function bQ(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;d=a+4|0;e=c[d>>2]|0;f=a+8|0;g=c[f>>2]|0;do{if((e|0)==(g|0)&(g|0)<(e+1|0)){h=(e>>1)+2&-2;i=(h|0)<2?2:h;if((i|0)>(2147483647-e|0)){j=aP(1)|0;av(j|0,3120,0)}h=a|0;k=c[h>>2]|0;l=i+e|0;c[f>>2]=l;i=cH(k,l<<2)|0;l=i;c[h>>2]=l;if((i|0)!=0){m=l;break}if((c[(a$()|0)>>2]|0)!=12){m=l;break}j=aP(1)|0;av(j|0,3120,0)}else{m=c[a>>2]|0}}while(0);a=c[d>>2]|0;c[d>>2]=a+1;d=m+(a<<2)|0;if((d|0)==0){return}c[d>>2]=c[b>>2];return}function bR(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,ab=0,ac=0,ad=0,ae=0,af=0,ah=0,ai=0,aj=0,ak=0,al=0,am=0,an=0,ao=0,ap=0,aq=0,ar=0;d=i;i=i+8|0;e=d|0;f=e;g=b+512|0;h=c[g>>2]|0;j=b+284|0;if((h|0)<(c[j>>2]|0)){k=b+280|0;l=b+428|0;m=b+412|0;n=b+332|0;o=b+544|0;p=e;q=f+4|0;r=b+396|0;s=b+296|0;t=b+456|0;u=1;v=-1;w=h;while(1){c[g>>2]=w+1;h=c[(c[k>>2]|0)+(w<<2)>>2]|0;if((a[(c[l>>2]|0)+h|0]|0)!=0){x=c[m>>2]|0;y=x+(h*12|0)+4|0;z=c[y>>2]|0;if((z|0)>0){A=x+(h*12|0)|0;x=0;B=0;C=z;while(1){D=c[A>>2]|0;F=D+(x<<3)|0;if((c[(c[c[t>>2]>>2]|0)+(c[F>>2]<<2)>>2]&3|0)==1){G=B;H=C}else{I=F;F=D+(B<<3)|0;D=c[I+4>>2]|0;c[F>>2]=c[I>>2];c[F+4>>2]=D;G=B+1|0;H=c[y>>2]|0}D=x+1|0;if((D|0)<(H|0)){x=D;B=G;C=H}else{J=D;K=G;L=H;break}}}else{J=0;K=0;L=z}C=J-K|0;if((C|0)>0){c[y>>2]=L-C}a[(c[l>>2]|0)+h|0]=0}C=c[m>>2]|0;B=c[C+(h*12|0)>>2]|0;x=C+(h*12|0)+4|0;C=c[x>>2]|0;A=B+(C<<3)|0;L1033:do{if((C|0)==0){M=B;N=B;O=v}else{D=h^1;F=B;I=B;R=v;while(1){S=F;T=I;while(1){U=T;L1039:while(1){V=c[U+4>>2]|0;if((a[(c[n>>2]|0)+(V>>1)|0]|0)==(V&1)){W=873;break}X=c[U>>2]|0;Y=c[o>>2]|0;Z=Y+(X<<2)|0;_=Z;$=Y+(X+1<<2)|0;ab=c[$>>2]|0;if((ab|0)==(D|0)){ac=Y+(X+2<<2)|0;ad=c[ac>>2]|0;c[$>>2]=ad;c[ac>>2]=D;ae=ad}else{ae=ab}af=U+8|0;c[p>>2]=X;c[q>>2]=ae;if((ae|0)!=(V|0)){if((a[(c[n>>2]|0)+(ae>>1)|0]|0)==(ae&1)){W=880;break}}V=(c[Z>>2]|0)>>>5;ah=a[3240]&1;Z=2;while(1){if((Z|0)>=(V|0)){W=884;break L1039}ai=_+4+(Z<<2)|0;aj=c[ai>>2]|0;if((a[(c[n>>2]|0)+(aj>>1)|0]^aj&1)<<24>>24==ah<<24>>24){Z=Z+1|0}else{break}}Z=Y+(X+2<<2)|0;c[Z>>2]=aj;c[ai>>2]=D;bU((c[m>>2]|0)+((c[Z>>2]^1)*12|0)|0,f);if((af|0)==(A|0)){M=A;N=S;O=R;break L1033}else{U=af}}if((W|0)==873){W=0;Z=U;_=S;V=c[Z+4>>2]|0;c[_>>2]=c[Z>>2];c[_+4>>2]=V;ak=U+8|0;al=S+8|0}else if((W|0)==880){W=0;V=S;_=c[e+4>>2]|0;c[V>>2]=c[e>>2];c[V+4>>2]=_;ak=af;al=S+8|0}else if((W|0)==884){W=0;am=S+8|0;_=S;V=c[e+4>>2]|0;c[_>>2]=c[e>>2];c[_+4>>2]=V;V=ae>>1;_=(c[n>>2]|0)+V|0;if((a[_]^ae&1)<<24>>24==ah<<24>>24){break}a[_]=(ae&1^1)&255^1;_=(c[r>>2]|0)+(V<<3)|0;V=c[s>>2]|0;c[_>>2]=X;c[_+4>>2]=V;V=c[j>>2]|0;c[j>>2]=V+1;c[(c[k>>2]|0)+(V<<2)>>2]=ae;ak=af;al=am}if((ak|0)==(A|0)){M=A;N=al;O=R;break L1033}else{S=al;T=ak}}c[g>>2]=c[j>>2];if(af>>>0<A>>>0){T=am;S=af;while(1){V=T+8|0;_=S+8|0;Z=S;ab=T;ad=c[Z+4>>2]|0;c[ab>>2]=c[Z>>2];c[ab+4>>2]=ad;if(_>>>0<A>>>0){T=V;S=_}else{an=V;ao=_;break}}}else{an=am;ao=af}if((ao|0)==(A|0)){M=A;N=an;O=X;break}else{F=an;I=ao;R=X}}}}while(0);A=M-N|0;if((A|0)>0){c[x>>2]=(c[x>>2]|0)-(A>>3)}A=c[g>>2]|0;if((A|0)>=(c[j>>2]|0)){break}u=u+1|0;v=O;w=A}ap=(u|0)<0|0?-1:0;aq=u;ar=O}else{ap=0;aq=0;ar=-1}O=b+184|0;u=c[O>>2]|0;w=c[O+4>>2]|0;v=(E=+(u>>>0)+ +(w|0)*4294967296.0+(+(aq>>>0)+ +(ap|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[O>>2]=~~(+(u>>>0)+ +(w|0)*4294967296.0+(+(aq>>>0)+ +(ap|0)*4294967296.0))>>>0;c[O+4>>2]=v;v=b+520|0;b=c[v>>2]|0;O=c[v+4>>2]|0;w=(E=+(b>>>0)+ +(O|0)*4294967296.0-(+(aq>>>0)+ +(ap|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[v>>2]=~~(+(b>>>0)+ +(O|0)*4294967296.0-(+(aq>>>0)+ +(ap|0)*4294967296.0))>>>0;c[v+4>>2]=w;i=d;return ar|0}function bS(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;f=e&1;e=a[b+16|0]&1|f;h=d+4|0;i=((e+(c[h>>2]|0)<<2)+4|0)>>>2;j=b+4|0;b5(b|0,i+(c[j>>2]|0)|0);k=c[j>>2]|0;l=as(k|0,i|0)|0;c[j>>2]=l;if(F){av(aP(1)|0,3120,0);return 0}l=(c[b>>2]|0)+(k<<2)|0;b=l;if((l|0)==0){return k|0}j=e<<3|f<<2;c[l>>2]=c[l>>2]&-32|j;f=c[h>>2]<<5|j;c[l>>2]=f;if((c[h>>2]|0)>0){j=d|0;d=0;do{c[b+4+(d<<2)>>2]=c[(c[j>>2]|0)+(d<<2)>>2];d=d+1|0}while((d|0)<(c[h>>2]|0));m=c[l>>2]|0}else{m=f}if((m&8|0)==0){return k|0}f=m>>>5;if((m&4|0)!=0){g[b+4+(f<<2)>>2]=0.0;return k|0}if((f|0)==0){n=0;o=0}else{m=0;l=0;while(1){h=1<<((c[b+4+(l<<2)>>2]|0)>>>1&31)|m;d=l+1|0;if((d|0)<(f|0)){m=h;l=d}else{n=h;o=f;break}}}c[b+4+(o<<2)>>2]=n;return k|0}function bT(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;d=i;i=i+16|0;e=d|0;f=d+8|0;g=c[a+544>>2]|0;h=g+(b<<2)|0;j=g+(b+1<<2)|0;k=a+412|0;l=(c[k>>2]|0)+((c[j>>2]^1)*12|0)|0;m=g+(b+2<<2)|0;g=c[m>>2]|0;c[e>>2]=b;c[e+4>>2]=g;bU(l,e);e=(c[k>>2]|0)+((c[m>>2]^1)*12|0)|0;m=c[j>>2]|0;c[f>>2]=b;c[f+4>>2]=m;bU(e,f);if((c[h>>2]&4|0)==0){f=a+208|0;e=c[f>>2]|0;m=c[f+4>>2]|0;b=1;j=0;k=(E=+(e>>>0)+ +(m|0)*4294967296.0+(+(b>>>0)+ +(j|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[f>>2]=~~(+(e>>>0)+ +(m|0)*4294967296.0+(+(b>>>0)+ +(j|0)*4294967296.0))>>>0;c[f+4>>2]=k;k=(c[h>>2]|0)>>>5;f=0;j=a+224|0;b=c[j>>2]|0;m=c[j+4>>2]|0;e=(E=+(k>>>0)+ +(f|0)*4294967296.0+(+(b>>>0)+ +(m|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[j>>2]=~~(+(k>>>0)+ +(f|0)*4294967296.0+(+(b>>>0)+ +(m|0)*4294967296.0))>>>0;c[j+4>>2]=e;i=d;return}else{e=a+216|0;j=c[e>>2]|0;m=c[e+4>>2]|0;b=1;f=0;k=(E=+(j>>>0)+ +(m|0)*4294967296.0+(+(b>>>0)+ +(f|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[e>>2]=~~(+(j>>>0)+ +(m|0)*4294967296.0+(+(b>>>0)+ +(f|0)*4294967296.0))>>>0;c[e+4>>2]=k;k=(c[h>>2]|0)>>>5;h=0;e=a+232|0;a=c[e>>2]|0;f=c[e+4>>2]|0;b=(E=+(k>>>0)+ +(h|0)*4294967296.0+(+(a>>>0)+ +(f|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[e>>2]=~~(+(k>>>0)+ +(h|0)*4294967296.0+(+(a>>>0)+ +(f|0)*4294967296.0))>>>0;c[e+4>>2]=b;i=d;return}}function bU(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;d=a+4|0;e=c[d>>2]|0;f=a+8|0;g=c[f>>2]|0;do{if((e|0)==(g|0)&(g|0)<(e+1|0)){h=(e>>1)+2&-2;i=(h|0)<2?2:h;if((i|0)>(2147483647-e|0)){j=aP(1)|0;av(j|0,3120,0)}h=a|0;k=c[h>>2]|0;l=i+e|0;c[f>>2]=l;i=cH(k,l<<3)|0;l=i;c[h>>2]=l;if((i|0)!=0){m=l;break}if((c[(a$()|0)>>2]|0)!=12){m=l;break}j=aP(1)|0;av(j|0,3120,0)}else{m=c[a>>2]|0}}while(0);a=c[d>>2]|0;c[d>>2]=a+1;d=m+(a<<3)|0;if((d|0)==0){return}a=b;b=d;d=c[a+4>>2]|0;c[b>>2]=c[a>>2];c[b+4>>2]=d;return}function bV(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;f=i;i=i+16|0;g=f|0;h=f+8|0;j=c[b+544>>2]|0;k=j+(d<<2)|0;l=c[j+(d+1<<2)>>2]^1;do{if(e){m=b+412|0;n=c[m>>2]|0;o=j+(d+2<<2)|0;p=n+(l*12|0)|0;q=n+(l*12|0)+4|0;n=c[q>>2]|0;r=0;while(1){if((r|0)>=(n|0)){break}if((c[(c[p>>2]|0)+(r<<3)>>2]|0)==(d|0)){break}else{r=r+1|0}}s=n-1|0;if((r|0)<(s|0)){t=r;while(1){u=c[p>>2]|0;v=t+1|0;w=u+(v<<3)|0;x=u+(t<<3)|0;u=c[w+4>>2]|0;c[x>>2]=c[w>>2];c[x+4>>2]=u;u=(c[q>>2]|0)-1|0;if((v|0)<(u|0)){t=v}else{y=u;break}}}else{y=s}c[q>>2]=y;t=c[o>>2]^1;p=c[m>>2]|0;r=p+(t*12|0)|0;n=p+(t*12|0)+4|0;t=c[n>>2]|0;p=0;while(1){if((p|0)>=(t|0)){break}if((c[(c[r>>2]|0)+(p<<3)>>2]|0)==(d|0)){break}else{p=p+1|0}}m=t-1|0;if((p|0)<(m|0)){o=p;while(1){q=c[r>>2]|0;s=o+1|0;u=q+(s<<3)|0;v=q+(o<<3)|0;q=c[u+4>>2]|0;c[v>>2]=c[u>>2];c[v+4>>2]=q;q=(c[n>>2]|0)-1|0;if((s|0)<(q|0)){o=s}else{z=q;break}}}else{z=m}c[n>>2]=z}else{c[g>>2]=l;o=b+428|0;r=c[o>>2]|0;p=r+l|0;if((a[p]|0)==0){a[p]=1;bX(b+444|0,g);A=c[o>>2]|0}else{A=r}r=c[j+(d+2<<2)>>2]^1;c[h>>2]=r;o=A+r|0;if((a[o]|0)!=0){break}a[o]=1;bX(b+444|0,h)}}while(0);if((c[k>>2]&4|0)==0){h=b+208|0;A=c[h>>2]|0;d=c[h+4>>2]|0;j=-1;g=-1;l=(E=+(A>>>0)+ +(d|0)*4294967296.0+(+(j>>>0)+ +(g|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[h>>2]=~~(+(A>>>0)+ +(d|0)*4294967296.0+(+(j>>>0)+ +(g|0)*4294967296.0))>>>0;c[h+4>>2]=l;l=(c[k>>2]|0)>>>5;h=0;g=b+224|0;j=c[g>>2]|0;d=c[g+4>>2]|0;A=(E=+(j>>>0)+ +(d|0)*4294967296.0-(+(l>>>0)+ +(h|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[g>>2]=~~(+(j>>>0)+ +(d|0)*4294967296.0-(+(l>>>0)+ +(h|0)*4294967296.0))>>>0;c[g+4>>2]=A;i=f;return}else{A=b+216|0;g=c[A>>2]|0;h=c[A+4>>2]|0;l=-1;d=-1;j=(E=+(g>>>0)+ +(h|0)*4294967296.0+(+(l>>>0)+ +(d|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[A>>2]=~~(+(g>>>0)+ +(h|0)*4294967296.0+(+(l>>>0)+ +(d|0)*4294967296.0))>>>0;c[A+4>>2]=j;j=(c[k>>2]|0)>>>5;k=0;A=b+232|0;b=c[A>>2]|0;d=c[A+4>>2]|0;l=(E=+(b>>>0)+ +(d|0)*4294967296.0-(+(j>>>0)+ +(k|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[A>>2]=~~(+(b>>>0)+ +(d|0)*4294967296.0-(+(j>>>0)+ +(k|0)*4294967296.0))>>>0;c[A+4>>2]=l;i=f;return}}function bW(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;e=b+296|0;if((c[e>>2]|0)<=(d|0)){return}f=b+284|0;g=c[f>>2]|0;h=g-1|0;i=b+292|0;j=c[i>>2]|0;k=c[j+(d<<2)>>2]|0;if((h|0)<(k|0)){l=k;m=g;n=j}else{j=b+280|0;g=b+332|0;k=b+88|0;o=b+348|0;p=b+460|0;q=b+476|0;r=b+472|0;s=b+380|0;t=h;do{h=c[(c[j>>2]|0)+(t<<2)>>2]>>1;a[(c[g>>2]|0)+h|0]=a[3232]|0?2:0;u=c[k>>2]|0;do{if((u|0)>1){v=959}else{if((u|0)!=1){break}if((t|0)>(c[(c[i>>2]|0)+((c[e>>2]|0)-1<<2)>>2]|0)){v=959}}}while(0);if((v|0)==959){v=0;a[(c[o>>2]|0)+h|0]=c[(c[j>>2]|0)+(t<<2)>>2]&1}if((c[q>>2]|0)>(h|0)){if((c[(c[r>>2]|0)+(h<<2)>>2]|0)<=-1){v=963}}else{v=963}do{if((v|0)==963){v=0;if((a[(c[s>>2]|0)+h|0]|0)==0){break}b7(p,h)}}while(0);t=t-1|0;w=c[i>>2]|0;x=c[w+(d<<2)>>2]|0}while((t|0)>=(x|0));l=x;m=c[f>>2]|0;n=w}c[b+512>>2]=l;l=c[n+(d<<2)>>2]|0;if((m-l|0)>0){c[f>>2]=l}if(((c[e>>2]|0)-d|0)<=0){return}c[e>>2]=d;return}function bX(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;d=a+4|0;e=c[d>>2]|0;f=a+8|0;g=c[f>>2]|0;do{if((e|0)==(g|0)&(g|0)<(e+1|0)){h=(e>>1)+2&-2;i=(h|0)<2?2:h;if((i|0)>(2147483647-e|0)){j=aP(1)|0;av(j|0,3120,0)}h=a|0;k=c[h>>2]|0;l=i+e|0;c[f>>2]=l;i=cH(k,l<<2)|0;l=i;c[h>>2]=l;if((i|0)!=0){m=l;break}if((c[(a$()|0)>>2]|0)!=12){m=l;break}j=aP(1)|0;av(j|0,3120,0)}else{m=c[a>>2]|0}}while(0);a=c[d>>2]|0;c[d>>2]=a+1;d=m+(a<<2)|0;if((d|0)==0){return}c[d>>2]=c[b>>2];return}function bY(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0;e=d+4|0;f=c[e>>2]|0;if((f|0)>0){g=d|0;d=b+544|0;h=b+332|0;i=b+396|0;j=b+556|0;k=0;l=0;while(1){m=c[g>>2]|0;n=c[m+(l<<2)>>2]|0;o=c[d>>2]|0;p=o+(n<<2)|0;q=p;r=c[p>>2]|0;s=r>>>5;t=0;while(1){if((t|0)>=(s|0)){u=997;break}v=c[q+4+(t<<2)>>2]|0;if((a[(c[h>>2]|0)+(v>>1)|0]|0)==(v&1)){u=992;break}else{t=t+1|0}}if((u|0)==992){u=0;bV(b,n,0);t=c[o+(n+1<<2)>>2]|0;v=t>>1;do{if((a[(c[h>>2]|0)+v|0]|0)==(t&1)){w=(c[i>>2]|0)+(v<<3)|0;x=c[w>>2]|0;if((x|0)==-1){break}if(((c[d>>2]|0)+(x<<2)|0)!=(p|0)){break}c[w>>2]=-1}}while(0);c[p>>2]=c[p>>2]&-4|1;v=c[(c[d>>2]|0)+(n<<2)>>2]|0;c[j>>2]=((((v>>>3&1)+(v>>>5)<<2)+4|0)>>>2)+(c[j>>2]|0);y=k}else if((u|0)==997){u=0;if(r>>>0>95){v=a[3240]&1;t=2;o=s;w=r;while(1){x=q+4+(t<<2)|0;z=c[x>>2]|0;if((a[(c[h>>2]|0)+(z>>1)|0]^z&1)<<24>>24==v<<24>>24){c[x>>2]=c[q+4+(o-1<<2)>>2];x=c[p>>2]|0;if((x&8|0)==0){A=x}else{z=x>>>5;c[q+4+(z-1<<2)>>2]=c[q+4+(z<<2)>>2];A=c[p>>2]|0}z=A-32|0;c[p>>2]=z;B=t-1|0;C=z}else{B=t;C=w}z=B+1|0;x=C>>>5;if((z|0)<(x|0)){t=z;o=x;w=C}else{break}}w=c[g>>2]|0;D=w;E=c[w+(l<<2)>>2]|0}else{D=m;E=n}c[D+(k<<2)>>2]=E;y=k+1|0}w=l+1|0;o=c[e>>2]|0;if((w|0)<(o|0)){k=y;l=w}else{F=y;G=w;H=o;break}}}else{F=0;G=0;H=f}f=G-F|0;if((f|0)<=0){return}c[e>>2]=H-f;return}function bZ(b){b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0.0,D=0.0,E=0,F=0,G=0,H=0.0,I=0,J=0,K=0.0,L=0,M=0,N=0;d=i;i=i+24|0;e=d|0;f=d+16|0;g=e|0;c[g>>2]=0;j=e+4|0;c[j>>2]=0;k=e+8|0;c[k>>2]=0;c[f>>2]=0;l=b+540|0;m=c[l>>2]|0;if((m|0)>0){n=b+380|0;o=b+332|0;p=0;q=m;while(1){do{if((a[(c[n>>2]|0)+p|0]|0)==0){r=p;s=q}else{m=a[(c[o>>2]|0)+p|0]|0;t=a[3232]|0?2:0;if((((t&255)>>>1^1)&m<<24>>24==t<<24>>24|t&m&255|0)==0){r=p;s=q;break}bQ(e,f);r=c[f>>2]|0;s=c[l>>2]|0}}while(0);m=r+1|0;c[f>>2]=m;if((m|0)<(s|0)){p=m;q=s}else{break}}}s=b+460|0;q=s|0;p=b+464|0;f=c[p>>2]|0;r=s|0;s=c[r>>2]|0;if((f|0)>0){l=b+472|0;e=0;o=s;while(1){c[(c[l>>2]|0)+(c[o+(e<<2)>>2]<<2)>>2]=-1;n=e+1|0;m=c[p>>2]|0;t=c[r>>2]|0;if((n|0)<(m|0)){e=n;o=t}else{u=t;v=m;break}}}else{u=s;v=f}if((u|0)==0){w=v}else{c[p>>2]=0;w=0}v=c[j>>2]|0;if((v|0)>0){u=b+472|0;f=c[g>>2]|0;s=0;do{o=f+(s<<2)|0;c[(c[u>>2]|0)+(c[o>>2]<<2)>>2]=s;bQ(q,o);s=s+1|0}while((s|0)<(v|0));x=c[p>>2]|0}else{x=w}L1248:do{if((x|0)>1){w=b+488|0;v=b+472|0;s=(x|0)/2|0;q=x;while(1){u=s-1|0;f=c[r>>2]|0;o=c[f+(u<<2)>>2]|0;e=u<<1|1;L1252:do{if((e|0)<(q|0)){l=u;m=e;t=q;n=f;while(1){y=(l<<1)+2|0;if((y|0)<(t|0)){z=c[n+(y<<2)>>2]|0;A=c[n+(m<<2)>>2]|0;B=c[c[w>>2]>>2]|0;C=+h[B+(z<<3)>>3];D=+h[B+(A<<3)>>3];if(C>D){E=y;F=z;G=B;H=C}else{I=A;J=B;K=D;L=1039}}else{B=c[n+(m<<2)>>2]|0;A=c[c[w>>2]>>2]|0;I=B;J=A;K=+h[A+(B<<3)>>3];L=1039}if((L|0)==1039){L=0;E=m;F=I;G=J;H=K}if(H<=+h[G+(o<<3)>>3]){M=l;N=n;break L1252}c[n+(l<<2)>>2]=F;c[(c[v>>2]|0)+(c[(c[r>>2]|0)+(l<<2)>>2]<<2)>>2]=l;B=E<<1|1;A=c[p>>2]|0;z=c[r>>2]|0;if((B|0)<(A|0)){l=E;m=B;t=A;n=z}else{M=E;N=z;break}}}else{M=u;N=f}}while(0);c[N+(M<<2)>>2]=o;c[(c[v>>2]|0)+(o<<2)>>2]=M;if((u|0)<=0){break L1248}s=u;q=c[p>>2]|0}}}while(0);p=c[g>>2]|0;if((p|0)==0){i=d;return}c[j>>2]=0;cG(p);c[g>>2]=0;c[k>>2]=0;i=d;return}function b_(b){b=b|0;var d=0,e=0,f=0,g=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,F=0,G=0,H=0,I=0;d=b+492|0;do{if((a[d]&1)!=0){if((bR(b)|0)!=-1){break}e=b+284|0;f=b+516|0;if((c[e>>2]|0)==(c[f>>2]|0)){g=1;return g|0}i=b+520|0;j=c[i+4>>2]|0;k=0;if((j|0)>(k|0)|(j|0)==(k|0)&(c[i>>2]|0)>>>0>0>>>0){g=1;return g|0}bY(b,b+268|0);do{if((a[b+536|0]&1)!=0){bY(b,b+256|0);k=b+564|0;j=b+568|0;if((c[j>>2]|0)>0){l=k|0;m=b+588|0;n=0;do{a[(c[m>>2]|0)+(c[(c[l>>2]|0)+(n<<2)>>2]|0)|0]=1;n=n+1|0}while((n|0)<(c[j>>2]|0))}n=c[e>>2]|0;if((n|0)>0){l=b+280|0;m=b+588|0;o=0;p=0;q=n;while(1){r=c[l>>2]|0;s=c[r+(o<<2)>>2]|0;if((a[(c[m>>2]|0)+(s>>1)|0]|0)==0){c[r+(p<<2)>>2]=s;t=p+1|0;u=c[e>>2]|0}else{t=p;u=q}s=o+1|0;if((s|0)<(u|0)){o=s;p=t;q=u}else{v=s;w=t;x=u;break}}}else{v=0;w=0;x=n}q=v-w|0;if((q|0)>0){p=x-q|0;c[e>>2]=p;y=p}else{y=x}c[b+512>>2]=y;p=k|0;L1297:do{if((c[j>>2]|0)>0){q=b+588|0;o=0;do{a[(c[q>>2]|0)+(c[(c[p>>2]|0)+(o<<2)>>2]|0)|0]=0;o=o+1|0;z=c[j>>2]|0}while((o|0)<(z|0));if((z|0)<=0){break}o=b+580|0;q=b+584|0;m=b+576|0;l=0;while(1){s=c[o>>2]|0;if((s|0)==(c[q>>2]|0)){r=(s>>1)+2&-2;A=(r|0)<2?2:r;if((A|0)>(2147483647-s|0)){B=1087;break}r=c[m>>2]|0;C=A+s|0;c[q>>2]=C;A=cH(r,C<<2)|0;C=A;c[m>>2]=C;if((A|0)==0){if((c[(a$()|0)>>2]|0)==12){B=1088;break}}D=c[o>>2]|0;F=C}else{D=s;F=c[m>>2]|0}s=F+(D<<2)|0;if((s|0)==0){G=D;H=F}else{c[s>>2]=0;G=c[o>>2]|0;H=c[m>>2]|0}c[o>>2]=G+1;c[H+(G<<2)>>2]=c[(c[p>>2]|0)+(l<<2)>>2];l=l+1|0;if((l|0)>=(c[j>>2]|0)){break L1297}}if((B|0)==1087){I=aP(1)|0;av(I|0,3120,0);return 0}else if((B|0)==1088){I=aP(1)|0;av(I|0,3120,0);return 0}}}while(0);if((c[p>>2]|0)==0){break}c[j>>2]=0}}while(0);if(+((c[b+556>>2]|0)>>>0>>>0)>+h[b+96>>3]*+((c[b+548>>2]|0)>>>0>>>0)){a7[c[(c[b>>2]|0)+8>>2]&63](b)}bZ(b);c[f>>2]=c[e>>2];k=b+224|0;n=c[k>>2]|0;l=c[k+4>>2]|0;k=b+232|0;o=c[k>>2]|0;m=c[k+4>>2]|0;k=(E=+(o>>>0)+ +(m|0)*4294967296.0+(+(n>>>0)+ +(l|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[i>>2]=~~(+(o>>>0)+ +(m|0)*4294967296.0+(+(n>>>0)+ +(l|0)*4294967296.0))>>>0;c[i+4>>2]=k;g=1;return g|0}}while(0);a[d]=0;g=0;return g|0}function b$(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0;e=b+4|0;if((c[e>>2]|0)>=(d|0)){return}f=b+8|0;g=c[f>>2]|0;do{if((g|0)<(d|0)){h=d+1-g&-2;i=(g>>1)+2&-2;j=(h|0)>(i|0)?h:i;if((j|0)>(2147483647-g|0)){k=aP(1)|0;av(k|0,3120,0)}i=b|0;h=c[i>>2]|0;l=j+g|0;c[f>>2]=l;j=cH(h,l)|0;c[i>>2]=j;if((j|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}k=aP(1)|0;av(k|0,3120,0)}}while(0);k=c[e>>2]|0;if((k|0)<(d|0)){f=b|0;b=k;do{k=(c[f>>2]|0)+b|0;if((k|0)!=0){a[k]=0}b=b+1|0}while((b|0)<(d|0))}c[e>>2]=d;return}function b0(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0;e=b+412|0;f=b+448|0;g=c[f>>2]|0;h=b+444|0;i=c[h>>2]|0;if((g|0)>0){j=b+428|0;k=e|0;l=b+456|0;m=0;n=i;o=g;while(1){g=n+(m<<2)|0;p=c[g>>2]|0;if((a[(c[j>>2]|0)+p|0]|0)==0){q=o;r=n}else{s=c[k>>2]|0;t=s+(p*12|0)+4|0;u=c[t>>2]|0;if((u|0)>0){v=s+(p*12|0)|0;p=0;s=0;w=u;while(1){x=c[v>>2]|0;y=x+(p<<3)|0;if((c[(c[c[l>>2]>>2]|0)+(c[y>>2]<<2)>>2]&3|0)==1){z=s;A=w}else{B=y;y=x+(s<<3)|0;x=c[B+4>>2]|0;c[y>>2]=c[B>>2];c[y+4>>2]=x;z=s+1|0;A=c[t>>2]|0}x=p+1|0;if((x|0)<(A|0)){p=x;s=z;w=A}else{C=x;D=z;E=A;break}}}else{C=0;D=0;E=u}w=C-D|0;if((w|0)>0){c[t>>2]=E-w}a[(c[j>>2]|0)+(c[g>>2]|0)|0]=0;q=c[f>>2]|0;r=c[h>>2]|0}w=m+1|0;if((w|0)<(q|0)){m=w;n=r;o=q}else{F=r;break}}}else{F=i}if((F|0)!=0){c[f>>2]=0}f=b+540|0;if((c[f>>2]|0)>0){F=e|0;e=b+544|0;i=0;do{r=i<<1;q=c[F>>2]|0;o=q+(r*12|0)+4|0;if((c[o>>2]|0)>0){n=q+(r*12|0)|0;m=0;do{h=(c[n>>2]|0)+(m<<3)|0;j=c[h>>2]|0;E=c[e>>2]|0;D=E+(j<<2)|0;if((c[D>>2]&16|0)==0){C=b6(d,D)|0;c[h>>2]=C;c[D>>2]=c[D>>2]|16;c[E+(j+1<<2)>>2]=C}else{c[h>>2]=c[E+(j+1<<2)>>2]}m=m+1|0}while((m|0)<(c[o>>2]|0));G=c[F>>2]|0}else{G=q}o=r|1;m=G+(o*12|0)+4|0;if((c[m>>2]|0)>0){n=G+(o*12|0)|0;o=0;do{g=(c[n>>2]|0)+(o<<3)|0;t=c[g>>2]|0;u=c[e>>2]|0;j=u+(t<<2)|0;if((c[j>>2]&16|0)==0){E=b6(d,j)|0;c[g>>2]=E;c[j>>2]=c[j>>2]|16;c[u+(t+1<<2)>>2]=E}else{c[g>>2]=c[u+(t+1<<2)>>2]}o=o+1|0}while((o|0)<(c[m>>2]|0))}i=i+1|0}while((i|0)<(c[f>>2]|0))}f=b+284|0;if((c[f>>2]|0)>0){i=b+280|0;e=b+396|0;G=b+544|0;F=b+332|0;m=0;do{o=c[e>>2]|0;n=o+(c[(c[i>>2]|0)+(m<<2)>>2]>>1<<3)|0;r=c[n>>2]|0;do{if((r|0)!=-1){q=c[G>>2]|0;t=q+(r<<2)|0;u=q+(r+1<<2)|0;q=c[u>>2]|0;if((c[t>>2]&16|0)!=0){c[n>>2]=q;break}g=q>>1;if((a[(c[F>>2]|0)+g|0]|0)!=(q&1)){break}q=c[o+(g<<3)>>2]|0;if(!((q|0)!=-1&(q|0)==(r|0))){break}q=b6(d,t)|0;c[n>>2]=q;c[t>>2]=c[t>>2]|16;c[u>>2]=q}}while(0);m=m+1|0}while((m|0)<(c[f>>2]|0))}f=b+272|0;m=c[f>>2]|0;if((m|0)>0){F=b+268|0;G=b+544|0;i=0;e=0;n=m;while(1){r=(c[F>>2]|0)+(i<<2)|0;o=c[r>>2]|0;q=c[G>>2]|0;u=q+(o<<2)|0;t=c[u>>2]|0;if((t&3|0)==1){H=e;I=n}else{if((t&16|0)==0){t=b6(d,u)|0;c[r>>2]=t;c[u>>2]=c[u>>2]|16;c[q+(o+1<<2)>>2]=t}else{c[r>>2]=c[q+(o+1<<2)>>2]}o=c[F>>2]|0;c[o+(e<<2)>>2]=c[o+(i<<2)>>2];H=e+1|0;I=c[f>>2]|0}o=i+1|0;if((o|0)<(I|0)){i=o;e=H;n=I}else{J=o;K=H;L=I;break}}}else{J=0;K=0;L=m}m=J-K|0;if((m|0)>0){c[f>>2]=L-m}m=b+260|0;L=c[m>>2]|0;if((L|0)>0){f=b+256|0;K=b+544|0;b=0;J=0;I=L;while(1){H=(c[f>>2]|0)+(b<<2)|0;n=c[H>>2]|0;e=c[K>>2]|0;i=e+(n<<2)|0;F=c[i>>2]|0;if((F&3|0)==1){M=J;N=I}else{if((F&16|0)==0){F=b6(d,i)|0;c[H>>2]=F;c[i>>2]=c[i>>2]|16;c[e+(n+1<<2)>>2]=F}else{c[H>>2]=c[e+(n+1<<2)>>2]}n=c[f>>2]|0;c[n+(J<<2)>>2]=c[n+(b<<2)>>2];M=J+1|0;N=c[m>>2]|0}n=b+1|0;if((n|0)<(N|0)){b=n;J=M;I=N}else{O=n;P=M;Q=N;break}}}else{O=0;P=0;Q=L}L=O-P|0;if((L|0)<=0){return}c[m>>2]=Q-L;return}function b1(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0;d=i;i=i+24|0;e=d|0;f=b+548|0;g=b+556|0;h=(c[f>>2]|0)-(c[g>>2]|0)|0;cO(e|0,0,16);b5(e|0,h);h=e+16|0;a[h]=0;b0(b,e);if((c[b+44>>2]|0)>1){j=c[f>>2]<<2;k=c[e+4>>2]<<2;aA(1376,(l=i,i=i+16|0,c[l>>2]=j,c[l+8>>2]=k,l)|0)|0;i=l}a[b+560|0]=a[h]&1;h=b+544|0;l=c[h>>2]|0;if((l|0)!=0){cG(l)}c[h>>2]=c[e>>2];c[f>>2]=c[e+4>>2];c[b+552>>2]=c[e+8>>2];c[g>>2]=c[e+12>>2];i=d;return}function b2(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0.0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0;if((b|0)<16){e=b-1|0;if((e|0)<=0){return}f=d|0;h=0;while(1){i=h+1|0;if((i|0)<(b|0)){j=c[f>>2]|0;k=i;l=h;while(1){m=j+(c[a+(k<<2)>>2]<<2)|0;n=m;o=c[m>>2]|0;m=o>>>5;do{if(o>>>0>95){p=j+(c[a+(l<<2)>>2]<<2)|0;q=(c[p>>2]|0)>>>5;if((q|0)==2){r=k;break}r=+g[n+4+(m<<2)>>2]<+g[p+4+(q<<2)>>2]?k:l}else{r=l}}while(0);m=k+1|0;if((m|0)<(b|0)){k=m;l=r}else{s=r;break}}}else{s=h}l=a+(h<<2)|0;k=c[l>>2]|0;j=a+(s<<2)|0;c[l>>2]=c[j>>2];c[j>>2]=k;if((i|0)<(e|0)){h=i}else{break}}return}h=c[a+(((b|0)/2|0)<<2)>>2]|0;e=d|0;s=b;r=-1;while(1){f=r+1|0;k=a+(f<<2)|0;j=c[k>>2]|0;l=c[e>>2]|0;m=l+(j<<2)|0;n=c[m>>2]|0;o=l+(h<<2)|0;q=c[o>>2]|0;L1469:do{if(n>>>0>95){p=q>>>5;if((p|0)==2){t=f;while(1){u=t+1|0;v=a+(u<<2)|0;w=c[v>>2]|0;if((c[l+(w<<2)>>2]|0)>>>0>95){t=u}else{x=u;y=v;z=w;break L1469}}}A=+g[o+4+(p<<2)>>2];t=f;w=k;v=m;u=n;B=j;while(1){if(+g[v+4+(u>>>5<<2)>>2]>=A){x=t;y=w;z=B;break L1469}C=t+1|0;D=a+(C<<2)|0;E=c[D>>2]|0;F=l+(E<<2)|0;G=c[F>>2]|0;if(G>>>0>95){t=C;w=D;v=F;u=G;B=E}else{x=C;y=D;z=E;break}}}else{x=f;y=k;z=j}}while(0);j=s-1|0;k=a+(j<<2)|0;L1479:do{if(q>>>0>95){A=+g[o+4+(q>>>5<<2)>>2];f=j;n=k;while(1){m=l+(c[n>>2]<<2)|0;i=(c[m>>2]|0)>>>5;if((i|0)!=2){if(A>=+g[m+4+(i<<2)>>2]){H=f;I=n;break L1479}}i=f-1|0;f=i;n=a+(i<<2)|0}}else{H=j;I=k}}while(0);if((x|0)>=(H|0)){break}c[y>>2]=c[I>>2];c[I>>2]=z;s=H;r=x}b2(a,x,d);b2(y,b-x|0,d);return}function b3(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;e=d+1|0;f=b+4|0;if((c[f>>2]|0)>=(e|0)){return}g=b+8|0;h=c[g>>2]|0;do{if((h|0)<(e|0)){i=d+2-h&-2;j=(h>>1)+2&-2;k=(i|0)>(j|0)?i:j;if((k|0)>(2147483647-h|0)){l=aP(1)|0;av(l|0,3120,0)}j=b|0;i=c[j>>2]|0;m=k+h|0;c[g>>2]=m;k=cH(i,m)|0;c[j>>2]=k;if((k|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}l=aP(1)|0;av(l|0,3120,0)}}while(0);l=c[f>>2]|0;if((l|0)<(e|0)){g=b|0;b=l;do{a[(c[g>>2]|0)+b|0]=0;b=b+1|0}while((b|0)<(e|0))}c[f>>2]=e;return}function b4(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;if((b|0)<16){d=b-1|0;if((d|0)>0){e=0}else{return}while(1){f=e+1|0;if((f|0)<(b|0)){g=f;h=e;while(1){i=(c[a+(g<<2)>>2]|0)<(c[a+(h<<2)>>2]|0)?g:h;j=g+1|0;if((j|0)<(b|0)){g=j;h=i}else{k=i;break}}}else{k=e}h=a+(e<<2)|0;g=c[h>>2]|0;i=a+(k<<2)|0;c[h>>2]=c[i>>2];c[i>>2]=g;if((f|0)<(d|0)){e=f}else{break}}return}e=c[a+(((b|0)/2|0)<<2)>>2]|0;d=b;k=-1;while(1){g=k;while(1){l=g+1|0;m=a+(l<<2)|0;n=m|0;o=c[n>>2]|0;if((o|0)<(e|0)){g=l}else{p=d;break}}do{p=p-1|0;q=a+(p<<2)|0;r=c[q>>2]|0}while((e|0)<(r|0));if((l|0)>=(p|0)){break}c[n>>2]=r;c[q>>2]=o;d=p;k=l}b4(a,l);b4(m,b-l|0);return}function b5(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0;d=a+8|0;e=c[d>>2]|0;if(e>>>0<b>>>0){f=e}else{return}while(1){if(f>>>0>=b>>>0){break}g=((f>>>3)+2+(f>>>1)&-2)+f|0;c[d>>2]=g;if(g>>>0>e>>>0){f=g}else{h=1244;break}}if((h|0)==1244){av(aP(1)|0,3120,0)}h=a|0;a=cH(c[h>>2]|0,f<<2)|0;do{if((a|0)==0){if((c[(a$()|0)>>2]|0)!=12){break}av(aP(1)|0,3120,0)}}while(0);c[h>>2]=a;return}function b6(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0,j=0,k=0,l=0;e=d;f=c[e>>2]|0;h=a[b+16|0]&1|f>>>2&1;i=((h+(f>>>5)<<2)+4|0)>>>2;f=b+4|0;b5(b|0,i+(c[f>>2]|0)|0);j=c[f>>2]|0;k=as(j|0,i|0)|0;c[f>>2]=k;if(F){av(aP(1)|0,3120,0);return 0}k=(c[b>>2]|0)+(j<<2)|0;b=k;if((k|0)==0){return j|0}f=c[e>>2]&-9|h<<3;c[k>>2]=f;if((c[e>>2]|0)>>>0>31){h=0;do{c[b+4+(h<<2)>>2]=c[d+4+(h<<2)>>2];h=h+1|0}while((h|0)<((c[e>>2]|0)>>>5|0));l=c[k>>2]|0}else{l=f}if((l&8|0)==0){return j|0}f=l>>>5;k=d+4+(f<<2)|0;if((l&4|0)==0){c[b+4+(f<<2)>>2]=c[k>>2];return j|0}else{g[b+4+(f<<2)>>2]=+g[k>>2];return j|0}return 0}function b7(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;d=i;i=i+8|0;e=d|0;c[e>>2]=b;f=a+12|0;g=b+1|0;j=a+16|0;if((c[j>>2]|0)<(g|0)){k=a+20|0;l=c[k>>2]|0;do{if((l|0)<(g|0)){m=b+2-l&-2;n=(l>>1)+2&-2;o=(m|0)>(n|0)?m:n;if((o|0)>(2147483647-l|0)){p=aP(1)|0;av(p|0,3120,0)}n=f|0;m=c[n>>2]|0;q=o+l|0;c[k>>2]=q;o=cH(m,q<<2)|0;c[n>>2]=o;if((o|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}p=aP(1)|0;av(p|0,3120,0)}}while(0);p=c[j>>2]|0;if((p|0)<(g|0)){k=f|0;l=p;do{c[(c[k>>2]|0)+(l<<2)>>2]=-1;l=l+1|0}while((l|0)<(g|0))}c[j>>2]=g}g=f|0;c[(c[g>>2]|0)+(b<<2)>>2]=c[a+4>>2];bQ(a|0,e);b=c[(c[g>>2]|0)+(c[e>>2]<<2)>>2]|0;e=a|0;g=c[e>>2]|0;f=c[g+(b<<2)>>2]|0;if((b|0)==0){r=0;s=g;t=a+12|0;u=s+(r<<2)|0;c[u>>2]=f;v=c[t>>2]|0;w=v+(f<<2)|0;c[w>>2]=r;i=d;return}j=a+28|0;l=a+12|0;a=b;b=g;while(1){g=a-1>>1;k=c[b+(g<<2)>>2]|0;p=c[c[j>>2]>>2]|0;if(+h[p+(f<<3)>>3]<=+h[p+(k<<3)>>3]){r=a;s=b;t=l;x=1286;break}c[b+(a<<2)>>2]=k;c[(c[l>>2]|0)+(c[(c[e>>2]|0)+(g<<2)>>2]<<2)>>2]=a;
k=c[e>>2]|0;if((g|0)==0){r=0;s=k;t=l;x=1287;break}else{a=g;b=k}}if((x|0)==1286){u=s+(r<<2)|0;c[u>>2]=f;v=c[t>>2]|0;w=v+(f<<2)|0;c[w>>2]=r;i=d;return}else if((x|0)==1287){u=s+(r<<2)|0;c[u>>2]=f;v=c[t>>2]|0;w=v+(f<<2)|0;c[w>>2]=r;i=d;return}}function b8(a){a=a|0;if((a|0)==0){return}cG(a);return}function b9(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0.0,z=0,A=0,B=0,C=0.0,D=0,E=0,F=0.0,G=0.0,H=0,I=0,J=0,K=0.0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0.0,U=0,V=0,W=0.0,X=0.0,Y=0.0,Z=0;e=i;f=0;while(1){if((f|0)==1){break}if((a[d+f|0]|0)==(a[1016+f|0]|0)){f=f+1|0}else{g=0;j=1348;break}}if((j|0)==1348){i=e;return g|0}f=b+4|0;k=c[f>>2]|0;l=0;while(1){m=a[k+l|0]|0;n=l+1|0;if(m<<24>>24==0){p=0;break}if((a[d+n|0]|0)==m<<24>>24){l=n}else{g=0;j=1350;break}}if((j|0)==1350){i=e;return g|0}while(1){q=d+(p+n)|0;if((p|0)==1){r=q;break}if((a[q]|0)==(a[656+p|0]|0)){p=p+1|0}else{g=0;j=1351;break}}if((j|0)==1351){i=e;return g|0}while(1){s=r+1|0;if((aQ(a[r]|0)|0)==0){break}else{r=s}}p=a[r]|0;if((p<<24>>24|0)==45){t=s;u=1}else if((p<<24>>24|0)==43){t=s;u=0}else{t=r;u=0}r=-1;s=0;p=t;while(1){v=a[p]|0;if(((v<<24>>24)-48|0)>>>0<10){w=r}else{if(v<<24>>24!=46|(r|0)>-1){break}else{w=s}}r=w;s=s+1|0;p=p+1|0}w=p+(-s|0)|0;t=(r|0)<0;n=((t^1)<<31>>31)+s|0;d=(n|0)>18;l=(d?-18:-n|0)+(t?s:r)|0;r=d?18:n;do{if((r|0)==0){x=q;y=0.0}else{if((r|0)>9){n=w;d=r;s=0;while(1){t=a[n]|0;k=n+1|0;if(t<<24>>24==46){z=a[k]|0;A=n+2|0}else{z=t;A=k}B=(s*10|0)-48+(z<<24>>24)|0;k=d-1|0;if((k|0)>9){n=A;d=k;s=B}else{break}}C=+(B|0)*1.0e9;D=9;E=A;j=1313}else{if((r|0)>0){C=0.0;D=r;E=w;j=1313}else{F=0.0;G=0.0}}if((j|0)==1313){s=E;d=D;n=0;while(1){k=a[s]|0;t=s+1|0;if(k<<24>>24==46){H=a[t]|0;I=s+2|0}else{H=k;I=t}J=(n*10|0)-48+(H<<24>>24)|0;t=d-1|0;if((t|0)>0){s=I;d=t;n=J}else{break}}F=+(J|0);G=C}K=G+F;do{if((v<<24>>24|0)==69|(v<<24>>24|0)==101){n=p+1|0;d=a[n]|0;if((d<<24>>24|0)==45){L=p+2|0;M=1}else if((d<<24>>24|0)==43){L=p+2|0;M=0}else{L=n;M=0}n=a[L]|0;if(((n<<24>>24)-48|0)>>>0<10){N=L;O=0;P=n}else{Q=0;R=L;S=M;break}while(1){n=(P<<24>>24)-48+(O*10|0)|0;d=N+1|0;s=a[d]|0;if(((s<<24>>24)-48|0)>>>0<10){N=d;O=n;P=s}else{Q=n;R=d;S=M;break}}}else{Q=0;R=p;S=0}}while(0);d=l+((S|0)==0?Q:-Q|0)|0;n=(d|0)<0?-d|0:d;if((n|0)>511){c[(a$()|0)>>2]=34;T=1.0;U=328;V=511;j=1330}else{if((n|0)==0){W=1.0}else{T=1.0;U=328;V=n;j=1330}}if((j|0)==1330){while(1){j=0;if((V&1|0)==0){X=T}else{X=T*+h[U>>3]}n=V>>1;if((n|0)==0){W=X;break}else{T=X;U=U+8|0;V=n;j=1330}}}if((d|0)>-1){x=R;y=K*W;break}else{x=R;y=K/W;break}}}while(0);if((u|0)==0){Y=y}else{Y=-0.0-y}if((x|0)==0){g=0;i=e;return g|0}y=+h[b+32>>3];do{if(Y>=y){if(!((a[b+41|0]&1)==0|Y!=y)){break}x=c[o>>2]|0;u=c[f>>2]|0;ay(x|0,600,(Z=i,i=i+16|0,c[Z>>2]=q,c[Z+8>>2]=u,Z)|0)|0;i=Z;aM(1);return 0}}while(0);y=+h[b+24>>3];do{if(Y<=y){if(!((a[b+40|0]&1)==0|Y!=y)){break}u=c[o>>2]|0;x=c[f>>2]|0;ay(u|0,496,(Z=i,i=i+16|0,c[Z>>2]=q,c[Z+8>>2]=x,Z)|0)|0;i=Z;aM(1);return 0}}while(0);h[b+48>>3]=Y;g=1;i=e;return g|0}function ca(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,k=0.0,l=0.0,m=0,n=0.0,p=0;e=i;f=c[o>>2]|0;g=c[b+16>>2]|0;j=(a[b+40|0]&1)!=0?91:40;k=+h[b+24>>3];l=+h[b+32>>3];m=(a[b+41|0]&1)!=0?93:41;n=+h[b+48>>3];ay(f|0,432,(p=i,i=i+56|0,c[p>>2]=c[b+4>>2],c[p+8>>2]=g,c[p+16>>2]=j,h[p+24>>3]=k,h[p+32>>3]=l,c[p+40>>2]=m,h[p+48>>3]=n,p)|0)|0;i=p;if(!d){i=e;return}ay(f|0,712,(p=i,i=i+8|0,c[p>>2]=c[b+8>>2],p)|0)|0;i=p;aE(10,f|0)|0;i=e;return}function cb(){var d=0,e=0,f=0;d=i;i=i+8|0;a[3240]=1;a[3232]=1;e=d|0;bA(4416,1824,960,488,1352);c[1104]=2608;h[555]=0.0;h[556]=1.0;a[4456]=0;a[4457]=0;b[2229]=b[e>>1]|0;b[2230]=b[e+2>>1]|0;b[2231]=b[e+4>>1]|0;h[558]=.95;bA(4160,808,664,488,1352);c[1040]=2608;h[523]=0.0;h[524]=1.0;a[4200]=0;a[4201]=0;b[2101]=b[e>>1]|0;b[2102]=b[e+2>>1]|0;b[2103]=b[e+4>>1]|0;h[526]=.999;bA(3904,408,2384,488,1352);c[976]=2608;h[491]=0.0;h[492]=1.0;a[3944]=1;a[3945]=1;b[1973]=b[e>>1]|0;b[1974]=b[e+2>>1]|0;b[1975]=b[e+4>>1]|0;h[494]=0.0;bA(4272,2336,2288,488,1352);c[1068]=2608;h[537]=0.0;h[538]=+r;a[4312]=0;a[4313]=0;b[2157]=b[e>>1]|0;b[2158]=b[e+2>>1]|0;b[2159]=b[e+4>>1]|0;h[540]=91648253.0;bA(4384,2200,2128,488,1176);c[1096]=2512;f=4404;c[f>>2]=0;c[f+4>>2]=2;c[1103]=2;bA(4048,2e3,1928,488,1176);c[1012]=2512;f=4068;c[f>>2]=0;c[f+4>>2]=2;c[1019]=2;bA(4024,1808,1760,488,1024);c[1006]=2672;a[4044]=0;bA(4080,1648,1552,488,1024);c[1020]=2672;a[4100]=1;bA(3992,1368,1320,488,1176);c[998]=2512;f=4012;c[f>>2]=1;c[f+4>>2]=2147483647;c[1005]=100;bA(4216,1312,1272,488,1352);c[1054]=2608;h[530]=1.0;h[531]=+r;a[4256]=0;a[4257]=0;b[2129]=b[e>>1]|0;b[2130]=b[e+2>>1]|0;b[2131]=b[e+4>>1]|0;h[533]=2.0;bA(4104,1264,1184,488,1352);c[1026]=2608;h[516]=0.0;h[517]=+r;a[4144]=0;a[4145]=0;b[2073]=b[e>>1]|0;b[2074]=b[e+2>>1]|0;b[2075]=b[e+4>>1]|0;h[519]=.2;bA(3960,1160,1128,488,1176);c[990]=2512;e=3980;c[e>>2]=0;c[e+4>>2]=2147483647;c[997]=0;i=d;return}function cc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;b=a+32|0;d=c[b>>2]|0;if((d|0)!=0){c[a+36>>2]=0;cG(d);c[b>>2]=0;c[a+40>>2]=0}b=a+16|0;d=c[b>>2]|0;if((d|0)!=0){c[a+20>>2]=0;cG(d);c[b>>2]=0;c[a+24>>2]=0}b=a|0;d=c[b>>2]|0;if((d|0)==0){return}e=a+4|0;f=c[e>>2]|0;if((f|0)>0){g=0;h=f;f=d;while(1){i=f+(g*12|0)|0;j=c[i>>2]|0;if((j|0)==0){k=h;l=f}else{c[f+(g*12|0)+4>>2]=0;cG(j);c[i>>2]=0;c[f+(g*12|0)+8>>2]=0;k=c[e>>2]|0;l=c[b>>2]|0}i=g+1|0;if((i|0)<(k|0)){g=i;h=k;f=l}else{m=l;break}}}else{m=d}c[e>>2]=0;cG(m);c[b>>2]=0;c[a+8>>2]=0;return}function cd(a){a=a|0;ce(a);if((a|0)==0){return}cG(a|0);return}function ce(a){a=a|0;var b=0,d=0,e=0;c[a>>2]=2640;b=a+904|0;d=c[b>>2]|0;if((d|0)!=0){c[a+908>>2]=0;cG(d);c[b>>2]=0;c[a+912>>2]=0}b=a+892|0;d=c[b>>2]|0;if((d|0)!=0){c[a+896>>2]=0;cG(d);c[b>>2]=0;c[a+900>>2]=0}b=a+876|0;d=c[b>>2]|0;if((d|0)!=0){c[a+880>>2]=0;cG(d);c[b>>2]=0;c[a+884>>2]=0}b=a+856|0;d=c[b>>2]|0;if((d|0)!=0){c[a+860>>2]=0;cG(d);c[b>>2]=0;c[a+864>>2]=0}b=a+836|0;d=c[b>>2]|0;if((d|0)!=0){c[a+840>>2]=0;cG(d);c[b>>2]=0;c[a+844>>2]=0}b=a+824|0;d=c[b>>2]|0;if((d|0)!=0){c[a+828>>2]=0;cG(d);c[b>>2]=0;c[a+832>>2]=0}b=a+808|0;d=c[b>>2]|0;if((d|0)!=0){c[a+812>>2]=0;cG(d);c[b>>2]=0;c[a+816>>2]=0}cc(a+760|0);b=a+744|0;d=c[b>>2]|0;if((d|0)!=0){c[a+748>>2]=0;cG(d);c[b>>2]=0;c[a+752>>2]=0}b=a+732|0;d=c[b>>2]|0;if((d|0)==0){e=a;bN(e);return}c[a+736>>2]=0;cG(d);c[b>>2]=0;c[a+740>>2]=0;e=a;bN(e);return}function cf(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;d=b+1|0;e=a+4|0;if((c[e>>2]|0)>=(d|0)){f=a|0;g=c[f>>2]|0;h=g+(b<<2)|0;c[h>>2]=0;return}i=a+8|0;j=c[i>>2]|0;do{if((j|0)<(d|0)){k=b+2-j&-2;l=(j>>1)+2&-2;m=(k|0)>(l|0)?k:l;if((m|0)>(2147483647-j|0)){n=aP(1)|0;av(n|0,3120,0)}l=a|0;k=c[l>>2]|0;o=m+j|0;c[i>>2]=o;m=cH(k,o<<2)|0;c[l>>2]=m;if((m|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}n=aP(1)|0;av(n|0,3120,0)}}while(0);n=c[e>>2]|0;if((n|0)<(d|0)){i=a|0;j=n;do{n=(c[i>>2]|0)+(j<<2)|0;if((n|0)!=0){c[n>>2]=0}j=j+1|0}while((j|0)<(d|0))}c[e>>2]=d;f=a|0;g=c[f>>2]|0;h=g+(b<<2)|0;c[h>>2]=0;return}function cg(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0;d=i;i=i+8|0;e=d|0;c[e>>2]=b;f=a+12|0;g=b+1|0;h=a+16|0;if((c[h>>2]|0)<(g|0)){j=a+20|0;k=c[j>>2]|0;do{if((k|0)<(g|0)){l=b+2-k&-2;m=(k>>1)+2&-2;n=(l|0)>(m|0)?l:m;if((n|0)>(2147483647-k|0)){o=aP(1)|0;av(o|0,3120,0)}m=f|0;l=c[m>>2]|0;p=n+k|0;c[j>>2]=p;n=cH(l,p<<2)|0;c[m>>2]=n;if((n|0)!=0){break}if((c[(a$()|0)>>2]|0)!=12){break}o=aP(1)|0;av(o|0,3120,0)}}while(0);o=c[h>>2]|0;if((o|0)<(g|0)){j=f|0;k=o;do{c[(c[j>>2]|0)+(k<<2)>>2]=-1;k=k+1|0}while((k|0)<(g|0))}c[h>>2]=g}g=f|0;c[(c[g>>2]|0)+(b<<2)>>2]=c[a+4>>2];bQ(a|0,e);b=c[(c[g>>2]|0)+(c[e>>2]<<2)>>2]|0;e=a|0;g=c[e>>2]|0;f=c[g+(b<<2)>>2]|0;if((b|0)==0){q=0;r=g;s=a+12|0;t=r+(q<<2)|0;c[t>>2]=f;u=c[s>>2]|0;v=u+(f<<2)|0;c[v>>2]=q;i=d;return}h=a+28|0;k=f<<1;j=k|1;o=a+12|0;a=b;b=g;while(1){g=a-1>>1;n=c[b+(g<<2)>>2]|0;m=c[c[h>>2]>>2]|0;p=c[m+(k<<2)>>2]|0;l=p;w=(p|0)<0|0?-1:0;p=c[m+(j<<2)>>2]|0;x=p;y=(p|0)<0|0?-1:0;p=(E=(+(x>>>0)+ +(y|0)*4294967296.0)*(+(l>>>0)+ +(w|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);z=n<<1;A=c[m+(z<<2)>>2]|0;B=A;C=(A|0)<0|0?-1:0;A=c[m+((z|1)<<2)>>2]|0;z=A;m=(A|0)<0|0?-1:0;A=(E=(+(z>>>0)+ +(m|0)*4294967296.0)*(+(B>>>0)+ +(C|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);if(!(p>>>0<A>>>0|p>>>0==A>>>0&~~((+(x>>>0)+ +(y|0)*4294967296.0)*(+(l>>>0)+ +(w|0)*4294967296.0))>>>0>>>0<~~((+(z>>>0)+ +(m|0)*4294967296.0)*(+(B>>>0)+ +(C|0)*4294967296.0))>>>0>>>0)){q=a;r=b;s=o;D=1432;break}c[b+(a<<2)>>2]=n;c[(c[o>>2]|0)+(c[(c[e>>2]|0)+(g<<2)>>2]<<2)>>2]=a;n=c[e>>2]|0;if((g|0)==0){q=0;r=n;s=o;D=1433;break}else{a=g;b=n}}if((D|0)==1432){t=r+(q<<2)|0;c[t>>2]=f;u=c[s>>2]|0;v=u+(f<<2)|0;c[v>>2]=q;i=d;return}else if((D|0)==1433){t=r+(q<<2)|0;c[t>>2]=f;u=c[s>>2]|0;v=u+(f<<2)|0;c[v>>2]=q;i=d;return}}function ch(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,ab=0,ac=0,ad=0,ae=0,af=0,ah=0,ai=0,aj=0,ak=0,al=0,am=0,an=0,ao=0,ap=0,aq=0,ar=0,as=0,at=0,au=0,av=0,aw=0,ax=0,ay=0,az=0,aB=0,aC=0,aD=0,aE=0,aF=0,aG=0,aH=0,aI=0,aJ=0,aK=0,aL=0,aM=0,aN=0,aO=0,aP=0,aQ=0,aR=0,aS=0,aT=0,aU=0,aV=0,aW=0,aX=0,aY=0,aZ=0,a_=0,a$=0,a0=0,a1=0,a2=0,a3=0,a4=0,a5=0,a6=0,a8=0,a9=0,ba=0,bb=0,bc=0,bd=0,be=0,bf=0,bg=0,bh=0,bi=0,bj=0,bk=0,bl=0,bm=0,bn=0,bo=0,bp=0,bq=0,br=0,bs=0,bt=0,bu=0,bv=0,bw=0,bx=0,by=0,bz=0,bA=0,bB=0,bC=0,bD=0,bE=0,bF=0,bG=0,bH=0,bI=0,bJ=0,bK=0,bL=0,bM=0,bN=0,bO=0,bP=0,bS=0,bT=0,bU=0,bV=0,bY=0,b$=0,b0=0,b1=0,b2=0,b3=0,b4=0,b5=0,b6=0,b8=0.0;e=i;i=i+120|0;f=e|0;g=e+8|0;j=e+16|0;k=e+24|0;l=e+32|0;m=e+40|0;n=e+48|0;o=e+56|0;p=e+64|0;q=e+72|0;r=e+80|0;s=e+96|0;t=e+112|0;u=b;if(!(b_(u)|0)){v=0;i=e;return v|0}w=b+724|0;if((a[w]&1)==0){v=1;i=e;return v|0}x=b+924|0;y=b+872|0;z=b+868|0;A=b+860|0;B=b+680|0;C=b+824|0;D=b+828|0;F=C|0;G=b+836|0;H=b+904|0;I=b+332|0;J=b+44|0;K=b+704|0;L=b+706|0;M=b+696|0;N=b+556|0;O=b+548|0;R=b;S=b+876|0;T=b+920|0;U=b+284|0;V=b+776|0;W=b+760|0;X=r|0;Y=r+4|0;Z=r+8|0;_=s|0;$=s+4|0;ab=s+8|0;ac=b+544|0;ad=b+708|0;ae=b+684|0;af=b+688|0;ah=b+380|0;ai=b+460|0;aj=b+476|0;ak=b+472|0;al=b+716|0;am=b+732|0;an=b+736|0;ao=am|0;ap=b+628|0;aq=ap;ar=ap;ap=f|0;as=g|0;at=b+632|0;au=b+412|0;av=b+200|0;aw=b+804|0;ax=b+292|0;ay=b+396|0;az=b+296|0;aB=b+280|0;aC=b+712|0;aD=b+856|0;aE=aD|0;aF=b+540|0;aG=b+744|0;L1797:while(1){aH=c[x>>2]|0;do{if((aH|0)>0){aI=0;aJ=1443}else{if((c[T>>2]|0)>=(c[U>>2]|0)){if((c[D>>2]|0)<=0){break L1797}}if((aH|0)!=0){aI=0;aJ=1443;break}aK=c[y>>2]|0;aL=c[z>>2]|0}}while(0);if((aJ|0)==1443){while(1){aJ=0;aH=c[y>>2]|0;aM=c[z>>2]|0;aN=aH-aM|0;if((aH|0)<(aM|0)){aO=(c[A>>2]|0)+aN|0}else{aO=aN}if((aI|0)>=(aO|0)){break}aN=(c[ac>>2]|0)+(c[(c[aE>>2]|0)+(((aM+aI|0)%(c[A>>2]|0)|0)<<2)>>2]<<2)|0;aM=c[aN>>2]|0;if((aM&3|0)==0){c[aN>>2]=aM&-4|2}aI=aI+1|0;aJ=1443}aM=c[aF>>2]|0;if((aM|0)>0){aN=0;aH=aM;while(1){if((a[(c[aG>>2]|0)+aN|0]|0)==0){aP=aH}else{if((a[(c[V>>2]|0)+aN|0]|0)!=0){aM=c[W>>2]|0;aQ=aM+(aN*12|0)+4|0;aR=c[aQ>>2]|0;if((aR|0)>0){aS=aM+(aN*12|0)|0;aM=0;aT=0;aU=aR;while(1){aV=c[aS>>2]|0;aW=c[aV+(aM<<2)>>2]|0;if((c[(c[c[aw>>2]>>2]|0)+(aW<<2)>>2]&3|0)==1){aX=aT;aY=aU}else{c[aV+(aT<<2)>>2]=aW;aX=aT+1|0;aY=c[aQ>>2]|0}aW=aM+1|0;if((aW|0)<(aY|0)){aM=aW;aT=aX;aU=aY}else{aZ=aW;a_=aX;a$=aY;break}}}else{aZ=0;a_=0;a$=aR}aU=aZ-a_|0;if((aU|0)>0){c[aQ>>2]=a$-aU}a[(c[V>>2]|0)+aN|0]=0}aU=c[W>>2]|0;aT=aU+(aN*12|0)+4|0;aM=c[aT>>2]|0;if((aM|0)>0){aS=aU+(aN*12|0)|0;aU=0;aW=aM;while(1){aM=c[(c[aS>>2]|0)+(aU<<2)>>2]|0;if((c[(c[ac>>2]|0)+(aM<<2)>>2]&3|0)==0){cj(aD,aM);aM=(c[ac>>2]|0)+(c[(c[aS>>2]|0)+(aU<<2)>>2]<<2)|0;c[aM>>2]=c[aM>>2]&-4|2;a0=c[aT>>2]|0}else{a0=aW}aM=aU+1|0;if((aM|0)<(a0|0)){aU=aM;aW=a0}else{break}}}a[(c[aG>>2]|0)+aN|0]=0;aP=c[aF>>2]|0}aW=aN+1|0;if((aW|0)<(aP|0)){aN=aW;aH=aP}else{a1=0;break}}}else{a1=0}while(1){a2=c[y>>2]|0;a3=c[z>>2]|0;aH=a2-a3|0;if((a2|0)<(a3|0)){a4=(c[A>>2]|0)+aH|0}else{a4=aH}if((a1|0)>=(a4|0)){break}aH=(c[ac>>2]|0)+(c[(c[aE>>2]|0)+(((a3+a1|0)%(c[A>>2]|0)|0)<<2)>>2]<<2)|0;aN=c[aH>>2]|0;if((aN&3|0)==2){c[aH>>2]=aN&-4}a1=a1+1|0}c[x>>2]=0;aK=a2;aL=a3}aN=aK-aL|0;if((aK|0)<(aL|0)){a5=(c[A>>2]|0)+aN|0}else{a5=aN}if((a5|0)>0){aJ=1478}else{if((c[T>>2]|0)<(c[U>>2]|0)){aJ=1478}}if((aJ|0)==1478){aJ=0;if(!(co(b,1)|0)){aJ=1479;break}}a6=c[D>>2]|0;if((a[B]&1)!=0){aJ=1482;break}if((a6|0)==0){continue}else{a8=0;a9=a6}while(1){aN=c[F>>2]|0;aH=c[aN>>2]|0;c[aN>>2]=c[aN+(a9-1<<2)>>2];c[(c[G>>2]|0)+(c[c[F>>2]>>2]<<2)>>2]=0;c[(c[G>>2]|0)+(aH<<2)>>2]=-1;aN=(c[D>>2]|0)-1|0;c[D>>2]=aN;if((aN|0)>1){cr(C,0)}if((a[B]&1)!=0){continue L1797}do{if((a[(c[H>>2]|0)+aH|0]|0)==0){aN=a[(c[I>>2]|0)+aH|0]|0;aW=a[3224]|0?2:0;if((((aW&255)>>>1^1)&aN<<24>>24==aW<<24>>24|aW&aN&255|0)==0){break}do{if((c[J>>2]|0)>1){if(((a8|0)%100|0|0)!=0){break}aN=c[D>>2]|0;aA(1528,(ba=i,i=i+8|0,c[ba>>2]=aN,ba)|0)|0;i=ba}}while(0);if((a[K]&1)!=0){aN=(c[S>>2]|0)+aH|0;aW=a[aN]|0;a[aN]=1;if((a[(c[V>>2]|0)+aH|0]|0)!=0){aN=c[W>>2]|0;aU=aN+(aH*12|0)+4|0;aT=c[aU>>2]|0;if((aT|0)>0){aS=aN+(aH*12|0)|0;aN=0;aQ=0;aR=aT;while(1){aM=c[aS>>2]|0;aV=c[aM+(aN<<2)>>2]|0;if((c[(c[c[aw>>2]>>2]|0)+(aV<<2)>>2]&3|0)==1){bb=aQ;bc=aR}else{c[aM+(aQ<<2)>>2]=aV;bb=aQ+1|0;bc=c[aU>>2]|0}aV=aN+1|0;if((aV|0)<(bc|0)){aN=aV;aQ=bb;aR=bc}else{bd=aV;be=bb;bf=bc;break}}}else{bd=0;be=0;bf=aT}aR=bd-be|0;if((aR|0)>0){c[aU>>2]=bf-aR}a[(c[V>>2]|0)+aH|0]=0}aR=c[W>>2]|0;aQ=a[(c[I>>2]|0)+aH|0]|0;aN=a[3224]|0?2:0;do{if((((aN&255)>>>1^1)&aQ<<24>>24==aN<<24>>24|aN&aQ&255|0)!=0){aS=aR+(aH*12|0)+4|0;aV=c[aS>>2]|0;if((aV|0)==0){break}aM=aR+(aH*12|0)|0;if((aV|0)>0){aV=0;do{bg=c[(c[aM>>2]|0)+(aV<<2)>>2]|0;bh=(c[ac>>2]|0)+(bg<<2)|0;bi=bh;bj=c[bh>>2]|0;L1899:do{if((bj&3|0)==0){bk=bj>>>5;bl=0;while(1){if((bl|0)>=(bk|0)){break}bm=c[bi+4+(bl<<2)>>2]|0;if((a[(c[I>>2]|0)+(bm>>1)|0]|0)==(bm&1)){break L1899}else{bl=bl+1|0}}c[t>>2]=c[U>>2];bQ(ax,t);bl=c[bh>>2]|0;if(bl>>>0>31){bk=-2;bm=0;bn=bl;while(1){bl=c[bi+4+(bm<<2)>>2]|0;bo=bl>>1;do{if((bo|0)==(aH|0)){bp=bl;bq=bn}else{br=c[I>>2]|0;if((a[br+bo|0]^bl&1)<<24>>24==(a[3248]&1)){bp=bl;bq=bn;break}bs=bl^1;bt=bs>>1;a[br+bt|0]=(bs&1^1)&255^1;br=(c[ay>>2]|0)+(bt<<3)|0;bt=c[az>>2]|0;c[br>>2]=-1;c[br+4>>2]=bt;bt=c[U>>2]|0;c[U>>2]=bt+1;c[(c[aB>>2]|0)+(bt<<2)>>2]=bs;bp=bk;bq=c[bh>>2]|0}}while(0);bl=bm+1|0;if((bl|0)<(bq>>>5|0)){bk=bp;bm=bl;bn=bq}else{bu=bp;break}}}else{bu=-2}bn=(bR(u)|0)==-1;bW(u,0);if(bn){break}c[aC>>2]=(c[aC>>2]|0)+1;if(!(cn(b,bg,bu)|0)){aJ=1520;break L1797}}}while(0);aV=aV+1|0}while((aV|0)<(c[aS>>2]|0))}if(!(co(b,0)|0)){aJ=1520;break L1797}}}while(0);a[(c[S>>2]|0)+aH|0]=aW<<24>>24!=0|0}do{if((a[L]&1)!=0){aR=a[(c[I>>2]|0)+aH|0]|0;aQ=a[3224]|0?2:0;if((((aQ&255)>>>1^1)&aR<<24>>24==aQ<<24>>24|aQ&aR&255|0)==0){break}if((a[(c[S>>2]|0)+aH|0]|0)!=0){break}if((a[(c[V>>2]|0)+aH|0]|0)!=0){aR=c[W>>2]|0;aQ=aR+(aH*12|0)+4|0;aN=c[aQ>>2]|0;if((aN|0)>0){aU=aR+(aH*12|0)|0;aR=0;aT=0;aS=aN;while(1){aV=c[aU>>2]|0;aM=c[aV+(aR<<2)>>2]|0;if((c[(c[c[aw>>2]>>2]|0)+(aM<<2)>>2]&3|0)==1){bv=aT;bw=aS}else{c[aV+(aT<<2)>>2]=aM;bv=aT+1|0;bw=c[aQ>>2]|0}aM=aR+1|0;if((aM|0)<(bw|0)){aR=aM;aT=bv;aS=bw}else{bx=aM;by=bv;bz=bw;break}}}else{bx=0;by=0;bz=aN}aS=bx-by|0;if((aS|0)>0){c[aQ>>2]=bz-aS}a[(c[V>>2]|0)+aH|0]=0}aS=c[W>>2]|0;aT=aS+(aH*12|0)|0;c[X>>2]=0;c[Y>>2]=0;c[Z>>2]=0;c[_>>2]=0;c[$>>2]=0;c[ab>>2]=0;aR=aS+(aH*12|0)+4|0;L1936:do{if((c[aR>>2]|0)>0){aS=aT|0;aU=aH<<1;aM=0;do{aV=(c[aS>>2]|0)+(aM<<2)|0;bg=(c[ac>>2]|0)+(c[aV>>2]<<2)|0;bh=bg;bi=(c[bg>>2]|0)>>>5;bg=0;while(1){if((bg|0)>=(bi|0)){bA=s;break}if((c[bh+4+(bg<<2)>>2]|0)==(aU|0)){bA=r;break}else{bg=bg+1|0}}ck(bA,aV);aM=aM+1|0}while((aM|0)<(c[aR>>2]|0));aM=c[Y>>2]|0;if((aM|0)<=0){bB=aM;bC=0;aJ=1568;break}aU=c[$>>2]|0;aS=c[X>>2]|0;bg=c[_>>2]|0;if((aU|0)<=0){bh=0;while(1){bi=bh+1|0;if((bi|0)<(aM|0)){bh=bi}else{bB=aM;bC=1;aJ=1568;break L1936}}}bh=c[ac>>2]|0;bi=0;bj=0;bn=c[ad>>2]|0;while(1){bm=aS+(bj<<2)|0;bk=bi;bl=0;bo=bn;while(1){bs=bh+(c[bm>>2]<<2)|0;bt=bs;br=bh+(c[bg+(bl<<2)>>2]<<2)|0;bD=br;bE=bo+1|0;c[ad>>2]=bE;bF=(c[bs>>2]|0)>>>5>>>0<(c[br>>2]|0)>>>5>>>0;br=bF?bD:bt;bs=bF?bt:bD;bD=br+4|0;bt=bs+4|0;bF=(c[br>>2]|0)>>>5;br=bF-1|0;bG=c[bs>>2]|0;L1955:do{if(bG>>>0>31){bs=bG>>>5;bH=0;bI=br;while(1){bJ=c[bt+(bH<<2)>>2]|0;bK=bJ>>1;do{if((bK|0)==(aH|0)){bL=bI}else{bM=0;while(1){if((bM|0)>=(bF|0)){aJ=1543;break}bN=c[bD+(bM<<2)>>2]|0;if((bN>>1|0)==(bK|0)){aJ=1545;break}else{bM=bM+1|0}}if((aJ|0)==1545){aJ=0;if((bN|0)==(bJ^1|0)){bO=bk;break L1955}else{bL=bI;break}}else if((aJ|0)==1543){aJ=0;bL=bI+1|0;break}}}while(0);bJ=bH+1|0;if((bJ|0)<(bs|0)){bH=bJ;bI=bL}else{bP=bL;aJ=1547;break}}}else{bP=br;aJ=1547}}while(0);if((aJ|0)==1547){aJ=0;br=bk+1|0;if((br|0)>((c[ae>>2]|0)+(c[aR>>2]|0)|0)){bS=1;bT=bg;break L1936}bD=c[af>>2]|0;if((bD|0)!=-1&(bP|0)>(bD|0)){bS=1;bT=bg;break L1936}else{bO=br}}br=bl+1|0;if((br|0)<(aU|0)){bk=bO;bl=br;bo=bE}else{break}}bo=bj+1|0;if((bo|0)<(aM|0)){bi=bO;bj=bo;bn=bE}else{bB=aM;bC=1;aJ=1568;break}}}else{bB=0;bC=0;aJ=1568}}while(0);L1972:do{if((aJ|0)==1568){aJ=0;a[(c[H>>2]|0)+aH|0]=1;aQ=(c[ah>>2]|0)+aH|0;if((a[aQ]|0)!=0){aN=c[av>>2]|0;aM=c[av+4>>2]|0;bn=-1;bj=-1;bi=(E=+(aN>>>0)+ +(aM|0)*4294967296.0+(+(bn>>>0)+ +(bj|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);c[av>>2]=~~(+(aN>>>0)+ +(aM|0)*4294967296.0+(+(bn>>>0)+ +(bj|0)*4294967296.0))>>>0;c[av+4>>2]=bi}a[aQ]=0;if((c[aj>>2]|0)>(aH|0)){if((c[(c[ak>>2]|0)+(aH<<2)>>2]|0)<=-1){aJ=1572}}else{aJ=1572}do{if((aJ|0)==1572){aJ=0;if((a[(c[ah>>2]|0)+aH|0]|0)==0){break}b7(ai,aH)}}while(0);c[al>>2]=(c[al>>2]|0)+1;aQ=c[$>>2]|0;if((bB|0)>(aQ|0)){if((aQ|0)>0){bi=c[_>>2]|0;bj=0;do{bn=(c[ac>>2]|0)+(c[bi+(bj<<2)>>2]<<2)|0;aM=bn;aN=c[an>>2]|0;if((c[bn>>2]|0)>>>0>31){aU=0;bg=-1;while(1){bh=aM+4+(aU<<2)|0;c[j>>2]=c[bh>>2];ck(am,j);aS=(c[bh>>2]>>1|0)==(aH|0)?aU+aN|0:bg;bh=aU+1|0;if((bh|0)<((c[bn>>2]|0)>>>5|0)){aU=bh;bg=aS}else{bU=aS;break}}}else{bU=-1}bg=c[ao>>2]|0;aU=bg+(bU<<2)|0;aM=c[aU>>2]|0;c[aU>>2]=c[bg+(aN<<2)>>2];c[(c[ao>>2]|0)+(aN<<2)>>2]=aM;c[k>>2]=(c[bn>>2]|0)>>>5;ck(am,k);bj=bj+1|0}while((bj|0)<(aQ|0))}c[l>>2]=aH<<1;ck(am,l);c[m>>2]=1;ck(am,m)}else{if(bC){bj=c[X>>2]|0;bi=0;do{aM=(c[ac>>2]|0)+(c[bj+(bi<<2)>>2]<<2)|0;bg=aM;aU=c[an>>2]|0;if((c[aM>>2]|0)>>>0>31){aS=0;bh=-1;while(1){bo=bg+4+(aS<<2)|0;c[n>>2]=c[bo>>2];ck(am,n);bl=(c[bo>>2]>>1|0)==(aH|0)?aS+aU|0:bh;bo=aS+1|0;if((bo|0)<((c[aM>>2]|0)>>>5|0)){aS=bo;bh=bl}else{bV=bl;break}}}else{bV=-1}bh=c[ao>>2]|0;aS=bh+(bV<<2)|0;bg=c[aS>>2]|0;c[aS>>2]=c[bh+(aU<<2)>>2];c[(c[ao>>2]|0)+(aU<<2)>>2]=bg;c[o>>2]=(c[aM>>2]|0)>>>5;ck(am,o);bi=bi+1|0}while((bi|0)<(bB|0))}c[p>>2]=aH<<1|1;ck(am,p);c[q>>2]=1;ck(am,q)}if((c[aR>>2]|0)>0){bi=aT|0;bj=0;do{cl(b,c[(c[bi>>2]|0)+(bj<<2)>>2]|0);bj=bj+1|0}while((bj|0)<(c[aR>>2]|0))}do{if(bC){bj=c[X>>2]|0;bi=c[_>>2]|0;if((aQ|0)>0){bY=0}else{break}do{bg=bj+(bY<<2)|0;bh=0;do{aS=c[ac>>2]|0;bn=aS+(c[bg>>2]<<2)|0;aN=bn;bl=aS+(c[bi+(bh<<2)>>2]<<2)|0;aS=bl;c[ad>>2]=(c[ad>>2]|0)+1;if((c[ar>>2]|0)!=0){c[at>>2]=0}bo=(c[bn>>2]|0)>>>5>>>0<(c[bl>>2]|0)>>>5>>>0;bl=bo?aS:aN;bn=bo?aN:aS;aS=bn;aN=c[aS>>2]|0;bo=bl;L2026:do{if(aN>>>0>31){bk=0;bm=aN;while(1){aV=c[bn+4+(bk<<2)>>2]|0;br=aV>>1;do{if((br|0)==(aH|0)){b$=bm}else{bD=(c[bo>>2]|0)>>>5;bF=0;while(1){if((bF|0)>=(bD|0)){break}b0=c[bl+4+(bF<<2)>>2]|0;if((b0>>1|0)==(br|0)){aJ=1608;break}else{bF=bF+1|0}}if((aJ|0)==1608){aJ=0;if((b0|0)==(aV^1|0)){break L2026}else{b$=bm;break}}c[ap>>2]=aV;bX(aq,f);b$=c[aS>>2]|0}}while(0);aV=bk+1|0;if((aV|0)<(b$>>>5|0)){bk=aV;bm=b$}else{aJ=1603;break}}}else{aJ=1603}}while(0);if((aJ|0)==1603){aJ=0;aS=c[bo>>2]|0;if(aS>>>0>31){bn=0;aN=aS;while(1){aS=c[bl+4+(bn<<2)>>2]|0;if((aS>>1|0)==(aH|0)){b1=aN}else{c[as>>2]=aS;bX(aq,g);b1=c[bo>>2]|0}aS=bn+1|0;if((aS|0)<(b1>>>5|0)){bn=aS;aN=b1}else{break}}}if(!(ci(b,aq)|0)){bS=0;bT=bi;break L1972}}bh=bh+1|0}while((bh|0)<(aQ|0));bY=bY+1|0}while((bY|0)<(bB|0))}}while(0);aQ=c[W>>2]|0;bi=aQ+(aH*12|0)|0;bj=c[bi>>2]|0;if((bj|0)!=0){c[aQ+(aH*12|0)+4>>2]=0;cG(bj);c[bi>>2]=0;c[aQ+(aH*12|0)+8>>2]=0}aQ=aH<<1;bi=c[au>>2]|0;bj=bi+(aQ*12|0)+4|0;do{if((c[bj>>2]|0)==0){aM=bi+(aQ*12|0)|0;aU=c[aM>>2]|0;if((aU|0)==0){b2=bi;break}c[bj>>2]=0;cG(aU);c[aM>>2]=0;c[bi+(aQ*12|0)+8>>2]=0;b2=c[au>>2]|0}else{b2=bi}}while(0);bi=aQ|1;bj=b2+(bi*12|0)+4|0;do{if((c[bj>>2]|0)==0){aM=b2+(bi*12|0)|0;aU=c[aM>>2]|0;if((aU|0)==0){break}c[bj>>2]=0;cG(aU);c[aM>>2]=0;c[b2+(bi*12|0)+8>>2]=0}}while(0);bi=co(b,0)|0;bS=bi;bT=c[_>>2]|0}}while(0);if((bT|0)!=0){c[$>>2]=0;cG(bT);c[_>>2]=0;c[ab>>2]=0}aR=c[X>>2]|0;if((aR|0)!=0){c[Y>>2]=0;cG(aR);c[X>>2]=0;c[Z>>2]=0}if(!bS){aJ=1641;break L1797}}}while(0);if(+((c[N>>2]|0)>>>0>>>0)<=+h[M>>3]*+((c[O>>2]|0)>>>0>>>0)){break}a7[c[(c[R>>2]|0)+8>>2]&63](u)}}while(0);aH=c[D>>2]|0;if((aH|0)==0){continue L1797}else{a8=a8+1|0;a9=aH}}}do{if((aJ|0)==1641){a[b+492|0]=0}else if((aJ|0)==1520){a[b+492|0]=0}else if((aJ|0)==1479){a[b+492|0]=0}else if((aJ|0)==1482){a9=b+824|0;a8=c[a9>>2]|0;if((a6|0)>0){M=0;bS=a8;while(1){c[(c[G>>2]|0)+(c[bS+(M<<2)>>2]<<2)>>2]=-1;Z=M+1|0;X=c[a9>>2]|0;if((Z|0)<(c[D>>2]|0)){M=Z;bS=X}else{b3=X;break}}}else{b3=a8}if((b3|0)==0){break}c[D>>2]=0}}while(0);do{if(d){b3=c[aG>>2]|0;if((b3|0)!=0){c[b+748>>2]=0;cG(b3);c[aG>>2]=0;c[b+752>>2]=0}b3=c[W>>2]|0;if((b3|0)!=0){a6=b+764|0;aJ=c[a6>>2]|0;if((aJ|0)>0){bS=0;M=aJ;aJ=b3;while(1){a9=aJ+(bS*12|0)|0;X=c[a9>>2]|0;if((X|0)==0){b4=M}else{c[aJ+(bS*12|0)+4>>2]=0;cG(X);c[a9>>2]=0;c[aJ+(bS*12|0)+8>>2]=0;b4=c[a6>>2]|0}a9=bS+1|0;X=c[W>>2]|0;if((a9|0)<(b4|0)){bS=a9;M=b4;aJ=X}else{b5=X;break}}}else{b5=b3}c[a6>>2]=0;cG(b5);c[W>>2]=0;c[b+768>>2]=0}aJ=c[V>>2]|0;if((aJ|0)!=0){c[b+780>>2]=0;cG(aJ);c[V>>2]=0;c[b+784>>2]=0}aJ=b+792|0;M=c[aJ>>2]|0;if((M|0)!=0){c[b+796>>2]=0;cG(M);c[aJ>>2]=0;c[b+800>>2]=0}aJ=b+808|0;M=c[aJ>>2]|0;if((M|0)!=0){c[b+812>>2]=0;cG(M);c[aJ>>2]=0;c[b+816>>2]=0}aJ=b+824|0;M=c[aJ>>2]|0;if((c[D>>2]|0)>0){bS=0;a8=M;while(1){c[(c[G>>2]|0)+(c[a8+(bS<<2)>>2]<<2)>>2]=-1;X=bS+1|0;a9=c[aJ>>2]|0;if((X|0)<(c[D>>2]|0)){bS=X;a8=a9}else{b6=a9;break}}}else{b6=M}if((b6|0)!=0){c[D>>2]=0;cG(b6);c[aJ>>2]=0;c[b+832>>2]=0}cp(aD,1);a[w]=0;a[b+536|0]=1;a[b+560|0]=0;c[b+728>>2]=c[aF>>2];bZ(u);a7[c[(c[b>>2]|0)+8>>2]&63](b)}else{if(+((c[N>>2]|0)>>>0>>>0)<=+h[b+96>>3]*+((c[O>>2]|0)>>>0>>>0)){break}a7[c[(c[R>>2]|0)+8>>2]&63](u)}}while(0);do{if((c[J>>2]|0)>0){u=c[an>>2]|0;if((u|0)<=0){break}b8=+(u<<2>>>0>>>0)*9.5367431640625e-7;aA(1448,(ba=i,i=i+8|0,h[ba>>3]=b8,ba)|0)|0;i=ba}}while(0);v=(a[b+492|0]&1)!=0;i=e;return v|0}function ci(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0;e=i;i=i+16|0;f=e|0;g=e+8|0;h=b;j=b+256|0;k=b+260|0;l=c[k>>2]|0;do{if((a[b+705|0]&1)!=0){m=b+284|0;c[f>>2]=c[m>>2];bQ(b+292|0,f);n=d+4|0;o=c[n>>2]|0;L2128:do{if((o|0)>0){p=d|0;q=b+332|0;r=b+396|0;s=b+296|0;t=b+280|0;u=0;v=o;while(1){w=c[(c[p>>2]|0)+(u<<2)>>2]|0;x=c[q>>2]|0;y=a[x+(w>>1)|0]|0;z=w&1;if(y<<24>>24==z<<24>>24){break}if((y^z)<<24>>24==(a[3248]&1)){A=v}else{z=w^1;w=z>>1;a[x+w|0]=(z&1^1)&255^1;x=(c[r>>2]|0)+(w<<3)|0;w=c[s>>2]|0;c[x>>2]=-1;c[x+4>>2]=w;w=c[m>>2]|0;c[m>>2]=w+1;c[(c[t>>2]|0)+(w<<2)>>2]=z;A=c[n>>2]|0}z=u+1|0;if((z|0)<(A|0)){u=z;v=A}else{break L2128}}bW(h,0);B=1;i=e;return B|0}}while(0);n=(bR(h)|0)==-1;bW(h,0);if(n){break}else{B=1}i=e;return B|0}}while(0);A=b+492|0;if((a[A]&1)==0){B=0;i=e;return B|0}f=d|0;n=d+4|0;b4(c[f>>2]|0,c[n>>2]|0);m=c[n>>2]|0;L2144:do{if((m|0)>0){o=b+332|0;v=-2;u=0;t=0;s=m;while(1){r=c[f>>2]|0;q=c[r+(u<<2)>>2]|0;p=a[(c[o>>2]|0)+(q>>1)|0]|0;z=q&1;if(p<<24>>24==z<<24>>24){break L2144}if((q|0)==(v^1|0)){break L2144}if((q|0)!=(v|0)&(p^z)<<24>>24!=(a[3240]&1)){c[r+(t<<2)>>2]=q;C=t+1|0;D=q;E=c[n>>2]|0}else{C=t;D=v;E=s}q=u+1|0;if((q|0)<(E|0)){v=D;u=q;t=C;s=E}else{F=q;G=C;H=E;I=1692;break}}}else{F=0;G=0;H=m;I=1692}}while(0);do{if((I|0)==1692){m=F-G|0;if((m|0)>0){E=H-m|0;c[n>>2]=E;J=E}else{J=H}if((J|0)==0){a[A]=0;B=0;i=e;return B|0}else if((J|0)==1){E=c[c[f>>2]>>2]|0;m=E>>1;a[(c[b+332>>2]|0)+m|0]=(E&1^1)&255^1;C=(c[b+396>>2]|0)+(m<<3)|0;m=c[b+296>>2]|0;c[C>>2]=-1;c[C+4>>2]=m;m=b+284|0;C=c[m>>2]|0;c[m>>2]=C+1;c[(c[b+280>>2]|0)+(C<<2)>>2]=E;E=(bR(h)|0)==-1;a[A]=E&1;if(E){break}else{B=0}i=e;return B|0}else{E=bS(b+544|0,d,0)|0;C=c[k>>2]|0;m=b+264|0;if((C|0)==(c[m>>2]|0)){D=(C>>1)+2&-2;s=(D|0)<2?2:D;if((s|0)>(2147483647-C|0)){K=aP(1)|0;av(K|0,3120,0);return 0}D=j;t=c[D>>2]|0;u=s+C|0;c[m>>2]=u;m=cH(t,u<<2)|0;u=m;c[D>>2]=u;do{if((m|0)==0){if((c[(a$()|0)>>2]|0)!=12){break}K=aP(1)|0;av(K|0,3120,0);return 0}}while(0);L=c[k>>2]|0;M=u}else{L=C;M=c[j>>2]|0}c[k>>2]=L+1;m=M+(L<<2)|0;if((m|0)!=0){c[m>>2]=E}bT(h,E);break}}}while(0);if((a[b+724|0]&1)==0){B=1;i=e;return B|0}h=c[k>>2]|0;if((h|0)!=(l+1|0)){B=1;i=e;return B|0}l=c[(c[j>>2]|0)+(h-1<<2)>>2]|0;c[g>>2]=l;h=(c[b+544>>2]|0)+(l<<2)|0;j=h;cj(b+856|0,l);if((c[h>>2]|0)>>>0<=31){B=1;i=e;return B|0}l=b+760|0;k=b+808|0;L=b+744|0;M=b+924|0;K=b+824|0;d=b+840|0;A=b+836|0;b=0;while(1){f=j+4+(b<<2)|0;ck((c[l>>2]|0)+((c[f>>2]>>1)*12|0)|0,g);J=(c[k>>2]|0)+(c[f>>2]<<2)|0;c[J>>2]=(c[J>>2]|0)+1;a[(c[L>>2]|0)+(c[f>>2]>>1)|0]=1;c[M>>2]=(c[M>>2]|0)+1;J=c[f>>2]>>1;do{if((c[d>>2]|0)>(J|0)){f=c[(c[A>>2]|0)+(J<<2)>>2]|0;if((f|0)<=-1){break}cr(K,f)}}while(0);J=b+1|0;if((J|0)<((c[h>>2]|0)>>>5|0)){b=J}else{B=1;break}}i=e;return B|0}function cj(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;d=a+16|0;e=c[d>>2]|0;c[d>>2]=e+1;f=a|0;c[(c[f>>2]|0)+(e<<2)>>2]=b;b=c[d>>2]|0;e=a+4|0;g=c[e>>2]|0;if((b|0)==(g|0)){c[d>>2]=0;h=0}else{h=b}b=a+12|0;if((c[b>>2]|0)!=(h|0)){return}i=(g*3|0)+1>>1;if((i|0)>0){j=i+1&-2;k=(j|0)>2?j:2;j=cF(k<<2)|0;l=j;do{if((j|0)==0){if((c[(a$()|0)>>2]|0)!=12){m=0;break}av(aP(1)|0,3120,0)}else{m=0}}while(0);do{j=l+(m<<2)|0;if((j|0)!=0){c[j>>2]=0}m=m+1|0}while((m|0)<(i|0));n=l;o=i;p=k;q=c[b>>2]|0;r=c[e>>2]|0}else{n=0;o=0;p=0;q=h;r=g}if((q|0)<(r|0)){g=c[f>>2]|0;h=q;k=0;while(1){c[n+(k<<2)>>2]=c[g+(h<<2)>>2];i=h+1|0;if((i|0)<(r|0)){h=i;k=k+1|0}else{break}}s=r-q|0}else{s=0}q=c[d>>2]|0;k=c[f>>2]|0;do{if((q|0)>0){h=s;g=0;while(1){c[n+(h<<2)>>2]=c[k+(g<<2)>>2];i=g+1|0;if((i|0)<(q|0)){h=h+1|0;g=i}else{break}}c[b>>2]=0;c[d>>2]=r;t=1747}else{c[b>>2]=0;c[d>>2]=r;if((k|0)!=0){t=1747;break}u=a+8|0}}while(0);if((t|0)==1747){c[e>>2]=0;cG(k);c[f>>2]=0;k=a+8|0;c[k>>2]=0;u=k}c[f>>2]=n;c[e>>2]=o;c[u>>2]=p;return}function ck(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;d=a+4|0;e=c[d>>2]|0;f=a+8|0;g=c[f>>2]|0;do{if((e|0)==(g|0)&(g|0)<(e+1|0)){h=(e>>1)+2&-2;i=(h|0)<2?2:h;if((i|0)>(2147483647-e|0)){j=aP(1)|0;av(j|0,3120,0)}h=a|0;k=c[h>>2]|0;l=i+e|0;c[f>>2]=l;i=cH(k,l<<2)|0;l=i;c[h>>2]=l;if((i|0)!=0){m=l;break}if((c[(a$()|0)>>2]|0)!=12){m=l;break}j=aP(1)|0;av(j|0,3120,0)}else{m=c[a>>2]|0}}while(0);a=c[d>>2]|0;c[d>>2]=a+1;d=m+(a<<2)|0;if((d|0)==0){return}c[d>>2]=c[b>>2];return}function cl(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;e=i;i=i+8|0;f=e|0;g=b;h=b+544|0;j=c[h>>2]|0;k=j+(d<<2)|0;l=k;do{if((a[b+724|0]&1)==0){m=j}else{if((c[k>>2]|0)>>>0<=31){m=j;break}n=b+808|0;o=b+776|0;p=b+792|0;q=0;do{r=l+4+(q<<2)|0;s=(c[n>>2]|0)+(c[r>>2]<<2)|0;c[s>>2]=(c[s>>2]|0)-1;cm(b,c[r>>2]>>1);s=c[r>>2]>>1;c[f>>2]=s;r=(c[o>>2]|0)+s|0;if((a[r]|0)==0){a[r]=1;bQ(p,f)}q=q+1|0}while((q|0)<((c[k>>2]|0)>>>5|0));m=c[h>>2]|0}}while(0);k=m+(d<<2)|0;bV(g,d,0);g=c[m+(d+1<<2)>>2]|0;m=g>>1;do{if((a[(c[b+332>>2]|0)+m|0]|0)==(g&1)){f=(c[b+396>>2]|0)+(m<<3)|0;l=c[f>>2]|0;if((l|0)==-1){break}if(((c[h>>2]|0)+(l<<2)|0)!=(k|0)){break}c[f>>2]=-1}}while(0);c[k>>2]=c[k>>2]&-4|1;k=c[(c[h>>2]|0)+(d<<2)>>2]|0;d=b+556|0;c[d>>2]=((((k>>>3&1)+(k>>>5)<<2)+4|0)>>>2)+(c[d>>2]|0);i=e;return}function cm(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0;e=b+824|0;f=(c[b+840>>2]|0)>(d|0);if(f){g=c[(c[b+836>>2]|0)+(d<<2)>>2]|0;if((g|0)>-1){h=g}else{i=1779}}else{i=1779}do{if((i|0)==1779){if((a[(c[b+876>>2]|0)+d|0]|0)!=0){return}if((a[(c[b+904>>2]|0)+d|0]|0)!=0){return}g=a[(c[b+332>>2]|0)+d|0]|0;j=a[3224]|0?2:0;if((((j&255)>>>1^1)&g<<24>>24==j<<24>>24|j&g&255|0)==0){return}if(f){g=c[(c[b+836>>2]|0)+(d<<2)>>2]|0;if((g|0)>-1){h=g;break}}cg(e,d);return}}while(0);f=b+836|0;i=e|0;g=c[i>>2]|0;j=c[g+(h<<2)>>2]|0;L2279:do{if((h|0)==0){k=0;l=g}else{m=b+852|0;n=j<<1;o=n|1;p=h;q=g;while(1){r=p-1>>1;s=c[q+(r<<2)>>2]|0;t=c[c[m>>2]>>2]|0;u=c[t+(n<<2)>>2]|0;v=u;w=(u|0)<0|0?-1:0;u=c[t+(o<<2)>>2]|0;x=u;y=(u|0)<0|0?-1:0;u=(E=(+(x>>>0)+ +(y|0)*4294967296.0)*(+(v>>>0)+ +(w|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);z=s<<1;A=c[t+(z<<2)>>2]|0;B=A;C=(A|0)<0|0?-1:0;A=c[t+((z|1)<<2)>>2]|0;z=A;t=(A|0)<0|0?-1:0;A=(E=(+(z>>>0)+ +(t|0)*4294967296.0)*(+(B>>>0)+ +(C|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);if(!(u>>>0<A>>>0|u>>>0==A>>>0&~~((+(x>>>0)+ +(y|0)*4294967296.0)*(+(v>>>0)+ +(w|0)*4294967296.0))>>>0>>>0<~~((+(z>>>0)+ +(t|0)*4294967296.0)*(+(B>>>0)+ +(C|0)*4294967296.0))>>>0>>>0)){k=p;l=q;break L2279}c[q+(p<<2)>>2]=s;c[(c[f>>2]|0)+(c[(c[i>>2]|0)+(r<<2)>>2]<<2)>>2]=p;s=c[i>>2]|0;if((r|0)==0){k=0;l=s;break}else{p=r;q=s}}}}while(0);c[l+(k<<2)>>2]=j;c[(c[f>>2]|0)+(j<<2)>>2]=k;cr(e,c[(c[f>>2]|0)+(d<<2)>>2]|0);return}function cn(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0;f=b;g=c[b+544>>2]|0;h=g+(d<<2)|0;i=h;cj(b+856|0,d);if((c[h>>2]&-32|0)==64){cl(b,d);j=c[h>>2]|0;k=j>>>5;l=0;while(1){if((l|0)>=(k|0)){break}if((c[i+4+(l<<2)>>2]|0)==(e|0)){break}else{l=l+1|0}}m=k-1|0;if((l|0)<(m|0)){n=l;while(1){l=n+1|0;c[i+4+(n<<2)>>2]=c[i+4+(l<<2)>>2];o=c[h>>2]|0;p=o>>>5;q=p-1|0;if((l|0)<(q|0)){n=l}else{r=o;s=p;t=q;break}}}else{r=j;s=k;t=m}if((r&8|0)==0){u=r}else{c[i+4+(t<<2)>>2]=c[i+4+(s<<2)>>2];u=c[h>>2]|0}s=u-32|0;c[h>>2]=s;u=s>>>5;if((u|0)==0){v=0;w=0}else{s=0;t=0;while(1){r=1<<((c[i+4+(t<<2)>>2]|0)>>>1&31)|s;m=t+1|0;if((m|0)<(u|0)){s=r;t=m}else{v=r;w=u;break}}}c[i+4+(w<<2)>>2]=v}else{bV(f,d,1);v=c[h>>2]|0;w=v>>>5;u=0;while(1){if((u|0)>=(w|0)){break}if((c[i+4+(u<<2)>>2]|0)==(e|0)){break}else{u=u+1|0}}t=w-1|0;if((u|0)<(t|0)){s=u;while(1){u=s+1|0;c[i+4+(s<<2)>>2]=c[i+4+(u<<2)>>2];r=c[h>>2]|0;m=r>>>5;k=m-1|0;if((u|0)<(k|0)){s=u}else{x=r;y=m;z=k;break}}}else{x=v;y=w;z=t}if((x&8|0)==0){A=x}else{c[i+4+(z<<2)>>2]=c[i+4+(y<<2)>>2];A=c[h>>2]|0}y=A-32|0;c[h>>2]=y;A=y>>>5;if((A|0)==0){B=0;C=0}else{y=0;z=0;while(1){x=1<<((c[i+4+(z<<2)>>2]|0)>>>1&31)|y;t=z+1|0;if((t|0)<(A|0)){y=x;z=t}else{B=x;C=A;break}}}c[i+4+(C<<2)>>2]=B;bT(f,d);B=e>>1;C=c[b+760>>2]|0;i=C+(B*12|0)|0;A=C+(B*12|0)+4|0;C=c[A>>2]|0;z=0;while(1){if((z|0)>=(C|0)){break}if((c[(c[i>>2]|0)+(z<<2)>>2]|0)==(d|0)){break}else{z=z+1|0}}y=C-1|0;if((z|0)<(y|0)){C=z;while(1){z=C+1|0;x=c[i>>2]|0;c[x+(C<<2)>>2]=c[x+(z<<2)>>2];x=(c[A>>2]|0)-1|0;if((z|0)<(x|0)){C=z}else{D=x;break}}}else{D=y}c[A>>2]=D;D=(c[b+808>>2]|0)+(e<<2)|0;c[D>>2]=(c[D>>2]|0)-1;cm(b,B)}if((c[h>>2]&-32|0)!=32){E=1;return E|0}h=c[g+(d+1<<2)>>2]|0;d=h>>1;g=(c[b+332>>2]|0)+d|0;B=a[g]^h&1;D=a[3224]|0?2:0;do{if((((D&255)>>>1^1)&B<<24>>24==D<<24>>24|D&B&255|0)==0){if(B<<24>>24==(a[3248]&1)){E=0}else{break}return E|0}else{a[g]=(h&1^1)&255^1;e=(c[b+396>>2]|0)+(d<<3)|0;A=c[b+296>>2]|0;c[e>>2]=-1;c[e+4>>2]=A;A=b+284|0;e=c[A>>2]|0;c[A>>2]=e+1;c[(c[b+280>>2]|0)+(e<<2)>>2]=h}}while(0);E=(bR(f)|0)==-1;return E|0}function co(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ab=0,ac=0,ad=0,ae=0,af=0,ag=0,ah=0,ai=0,aj=0,ak=0,al=0,am=0,an=0,ao=0,ap=0,aq=0,ar=0,as=0,at=0;e=i;f=b+856|0;g=b+872|0;h=b+868|0;j=b+860|0;k=b+680|0;l=b+920|0;m=b+284|0;n=b+280|0;o=b+928|0;p=b+544|0;q=f|0;r=b+44|0;s=b+776|0;t=b+692|0;u=b+804|0;v=b+760|0;w=0;x=0;y=0;L2339:while(1){z=w;while(1){A=c[h>>2]|0;while(1){B=c[g>>2]|0;C=(B|0)<(A|0);D=B-A|0;if(C){E=(c[j>>2]|0)+D|0}else{E=D}if((E|0)<=0){if((c[l>>2]|0)>=(c[m>>2]|0)){F=1;G=1888;break L2339}}if((a[k]&1)!=0){G=1839;break L2339}if(C){H=(c[j>>2]|0)+D|0}else{H=D}do{if((H|0)==0){D=c[l>>2]|0;if((D|0)>=(c[m>>2]|0)){I=A;break}c[l>>2]=D+1;c[(c[p>>2]|0)+((c[o>>2]|0)+1<<2)>>2]=c[(c[n>>2]|0)+(D<<2)>>2];D=(c[p>>2]|0)+(c[o>>2]<<2)|0;C=D;B=(c[D>>2]|0)>>>5;
if((B|0)==0){J=0;K=0}else{D=0;L=0;while(1){M=1<<((c[C+4+(L<<2)>>2]|0)>>>1&31)|D;N=L+1|0;if((N|0)<(B|0)){D=M;L=N}else{J=M;K=B;break}}}c[C+4+(K<<2)>>2]=J;cj(f,c[o>>2]|0);I=c[h>>2]|0}else{I=A}}while(0);O=c[(c[q>>2]|0)+(I<<2)>>2]|0;B=I+1|0;c[h>>2]=B;P=c[j>>2]|0;if((B|0)==(P|0)){c[h>>2]=0;Q=0}else{Q=B}R=c[p>>2]|0;S=R+(O<<2)|0;T=c[S>>2]|0;if((T&3|0)==0){break}else{A=Q}}U=S;do{if(d){if((c[r>>2]|0)<=1){V=z;W=T;break}A=z+1|0;if(((z|0)%1e3|0|0)!=0){V=A;W=T;break}B=c[g>>2]|0;L=B-Q+((B|0)<(Q|0)?P:0)|0;aA(1584,(B=i,i=i+24|0,c[B>>2]=L,c[B+8>>2]=x,c[B+16>>2]=y,B)|0)|0;i=B;V=A;W=c[S>>2]|0}else{V=z;W=T}}while(0);X=R+(O+1<<2)|0;A=c[X>>2]>>1;if(W>>>0>63){B=c[v>>2]|0;L=W>>>5;D=A;M=1;while(1){N=c[U+4+(M<<2)>>2]>>1;Y=(c[B+(N*12|0)+4>>2]|0)<(c[B+(D*12|0)+4>>2]|0)?N:D;N=M+1|0;if((N|0)<(L|0)){D=Y;M=N}else{Z=Y;break}}}else{Z=A}if((a[(c[s>>2]|0)+Z|0]|0)!=0){M=c[v>>2]|0;D=M+(Z*12|0)+4|0;L=c[D>>2]|0;if((L|0)>0){B=M+(Z*12|0)|0;M=0;Y=0;N=L;while(1){_=c[B>>2]|0;$=c[_+(M<<2)>>2]|0;if((c[(c[c[u>>2]>>2]|0)+($<<2)>>2]&3|0)==1){aa=Y;ab=N}else{c[_+(Y<<2)>>2]=$;aa=Y+1|0;ab=c[D>>2]|0}$=M+1|0;if(($|0)<(ab|0)){M=$;Y=aa;N=ab}else{ac=$;ad=aa;ae=ab;break}}}else{ac=0;ad=0;ae=L}N=ac-ad|0;if((N|0)>0){c[D>>2]=ae-N}a[(c[s>>2]|0)+Z|0]=0}N=c[v>>2]|0;af=c[N+(Z*12|0)>>2]|0;ag=N+(Z*12|0)+4|0;if((c[ag>>2]|0)>0){break}else{z=V}}z=X;N=y;Y=x;M=0;while(1){B=c[S>>2]|0;if((B&3|0)!=0){w=V;x=Y;y=N;continue L2339}A=c[af+(M<<2)>>2]|0;$=c[p>>2]|0;_=$+(A<<2)|0;ah=c[_>>2]|0;L2395:do{if((ah&3|0)!=0|(A|0)==(O|0)){ai=M;aj=Y;ak=N}else{al=c[t>>2]|0;am=ah>>>5;if(!((al|0)==-1|(am|0)<(al|0))){ai=M;aj=Y;ak=N;break}al=B>>>5;if(am>>>0<al>>>0){ai=M;aj=Y;ak=N;break}if((c[U+4+(al<<2)>>2]&~c[_+4+(am<<2)>>2]|0)!=0){ai=M;aj=Y;ak=N;break}an=$+(A+1<<2)|0;do{if(B>>>0>31){if(ah>>>0>31){ao=-2;ap=0}else{ai=M;aj=Y;ak=N;break L2395}while(1){aq=c[z+(ap<<2)>>2]|0;L2404:do{if((ao|0)==-2){ar=0;while(1){as=c[an+(ar<<2)>>2]|0;if((aq|0)==(as|0)){at=-2;break L2404}if((aq|0)==(as^1|0)){at=aq;break L2404}as=ar+1|0;if(as>>>0<am>>>0){ar=as}else{ai=M;aj=Y;ak=N;break L2395}}}else{ar=0;while(1){if((aq|0)==(c[an+(ar<<2)>>2]|0)){at=ao;break L2404}as=ar+1|0;if(as>>>0<am>>>0){ar=as}else{ai=M;aj=Y;ak=N;break L2395}}}}while(0);aq=ap+1|0;if(aq>>>0<al>>>0){ao=at;ap=aq}else{break}}if((at|0)==(-2|0)){break}else if((at|0)==(-1|0)){ai=M;aj=Y;ak=N;break L2395}if(!(cn(b,A,at^1)|0)){F=0;G=1890;break L2339}ai=(((at>>1|0)==(Z|0))<<31>>31)+M|0;aj=Y;ak=N+1|0;break L2395}}while(0);cl(b,A);ai=M;aj=Y+1|0;ak=N}}while(0);A=ai+1|0;if((A|0)<(c[ag>>2]|0)){N=ak;Y=aj;M=A}else{w=V;x=aj;y=ak;continue L2339}}}if((G|0)==1839){cp(f,0);c[l>>2]=c[m>>2];F=1;i=e;return F|0}else if((G|0)==1888){i=e;return F|0}else if((G|0)==1890){i=e;return F|0}return 0}function cp(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;d=a|0;e=c[d>>2]|0;f=a+4|0;do{if((e|0)==0){g=1894}else{c[f>>2]=0;if(!b){h=e;break}cG(e);c[d>>2]=0;c[a+8>>2]=0;g=1894}}while(0);do{if((g|0)==1894){if((c[f>>2]|0)<1){h=0;break}i=a+16|0;c[i>>2]=0;j=a+12|0;c[j>>2]=0;return}}while(0);g=a+8|0;e=c[g>>2]|0;do{if((e|0)<1){b=2-e&-2;k=(e>>1)+2&-2;l=(b|0)>(k|0)?b:k;if((l|0)>(2147483647-e|0)){m=aP(1)|0;av(m|0,3120,0)}k=l+e|0;c[g>>2]=k;l=cH(h,k<<2)|0;k=l;c[d>>2]=k;if((l|0)!=0){n=k;break}if((c[(a$()|0)>>2]|0)!=12){n=k;break}m=aP(1)|0;av(m|0,3120,0)}else{n=h}}while(0);h=c[f>>2]|0;L2439:do{if((h|0)<1){m=h;g=n;while(1){e=g+(m<<2)|0;if((e|0)!=0){c[e>>2]=0}if((m|0)>=0){break L2439}m=m+1|0;g=c[d>>2]|0}}}while(0);c[f>>2]=1;i=a+16|0;c[i>>2]=0;j=a+12|0;c[j>>2]=0;return}function cq(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0;d=i;i=i+24|0;e=d|0;f=b+544|0;g=b+548|0;h=b+556|0;j=(c[g>>2]|0)-(c[h>>2]|0)|0;cO(e|0,0,16);b5(e|0,j);j=e+16|0;k=b+560|0;a[j]=a[k]&1;do{if((a[b+724|0]&1)!=0){l=b+540|0;if((c[l>>2]|0)>0){m=b+760|0;n=b+804|0;o=b+776|0;p=f;q=0;do{r=c[m>>2]|0;s=r+(q*12|0)+4|0;t=c[s>>2]|0;if((t|0)>0){u=r+(q*12|0)|0;r=0;v=0;w=t;while(1){x=c[u>>2]|0;y=c[x+(r<<2)>>2]|0;if((c[(c[c[n>>2]>>2]|0)+(y<<2)>>2]&3|0)==1){z=v;A=w}else{c[x+(v<<2)>>2]=y;z=v+1|0;A=c[s>>2]|0}y=r+1|0;if((y|0)<(A|0)){r=y;v=z;w=A}else{B=y;C=z;D=A;break}}}else{B=0;C=0;D=t}w=B-C|0;if((w|0)>0){c[s>>2]=D-w}a[(c[o>>2]|0)+q|0]=0;w=c[m>>2]|0;v=w+(q*12|0)+4|0;if((c[v>>2]|0)>0){r=w+(q*12|0)|0;w=0;do{u=(c[r>>2]|0)+(w<<2)|0;y=c[u>>2]|0;x=c[p>>2]|0;E=x+(y<<2)|0;if((c[E>>2]&16|0)==0){F=b6(e,E)|0;c[u>>2]=F;c[E>>2]=c[E>>2]|16;c[x+(y+1<<2)>>2]=F}else{c[u>>2]=c[x+(y+1<<2)>>2]}w=w+1|0}while((w|0)<(c[v>>2]|0))}q=q+1|0}while((q|0)<(c[l>>2]|0))}l=b+856|0;q=c[b+872>>2]|0;p=b+868|0;m=c[p>>2]|0;o=q-m|0;if((q|0)<(m|0)){G=(c[b+860>>2]|0)+o|0}else{G=o}L2480:do{if((G|0)>0){o=l|0;q=b+860|0;n=f;v=G;w=m;while(1){r=c[(c[o>>2]|0)+(w<<2)>>2]|0;s=w+1|0;c[p>>2]=s;if((s|0)==(c[q>>2]|0)){c[p>>2]=0}s=c[n>>2]|0;t=s+(r<<2)|0;y=t;x=c[t>>2]|0;if((x&3|0)==0){if((x&16|0)==0){x=b6(e,y)|0;c[t>>2]=c[t>>2]|16;c[s+(r+1<<2)>>2]=x;H=x}else{H=c[s+(r+1<<2)>>2]|0}cj(l,H)}r=v-1|0;if((r|0)<=0){I=n;break L2480}v=r;w=c[p>>2]|0}}else{I=f}}while(0);p=b+928|0;l=c[p>>2]|0;m=c[I>>2]|0;w=m+(l<<2)|0;if((c[w>>2]&16|0)!=0){c[p>>2]=c[m+(l+1<<2)>>2];break}v=b6(e,w)|0;c[p>>2]=v;c[w>>2]=c[w>>2]|16;c[m+(l+1<<2)>>2]=v}}while(0);b0(b,e);if((c[b+44>>2]|0)>1){I=c[g>>2]<<2;H=c[e+4>>2]<<2;aA(1376,(G=i,i=i+16|0,c[G>>2]=I,c[G+8>>2]=H,G)|0)|0;i=G}a[k]=a[j]&1;j=f;f=c[j>>2]|0;if((f|0)==0){J=e|0;K=c[J>>2]|0;c[j>>2]=K;L=e+4|0;M=c[L>>2]|0;c[g>>2]=M;N=e+8|0;O=c[N>>2]|0;P=b+552|0;Q=P;c[Q>>2]=O;R=e+12|0;S=c[R>>2]|0;c[h>>2]=S;i=d;return}cG(f);J=e|0;K=c[J>>2]|0;c[j>>2]=K;L=e+4|0;M=c[L>>2]|0;c[g>>2]=M;N=e+8|0;O=c[N>>2]|0;P=b+552|0;Q=P;c[Q>>2]=O;R=e+12|0;S=c[R>>2]|0;c[h>>2]=S;i=d;return}function cr(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0;d=a|0;e=c[d>>2]|0;f=c[e+(b<<2)>>2]|0;g=b<<1|1;h=a+4|0;i=c[h>>2]|0;if((g|0)>=(i|0)){j=b;k=e;l=a+12|0;m=k+(j<<2)|0;c[m>>2]=f;n=c[l>>2]|0;o=n+(f<<2)|0;c[o>>2]=j;return}p=a+28|0;q=f<<1;r=q|1;s=a+12|0;a=b;b=g;g=i;i=e;while(1){e=(a<<1)+2|0;if((e|0)<(g|0)){t=c[i+(e<<2)>>2]|0;u=c[i+(b<<2)>>2]|0;v=t<<1;w=c[c[p>>2]>>2]|0;x=c[w+(v<<2)>>2]|0;y=x;z=(x|0)<0|0?-1:0;x=c[w+((v|1)<<2)>>2]|0;v=x;A=(x|0)<0|0?-1:0;x=(E=(+(v>>>0)+ +(A|0)*4294967296.0)*(+(y>>>0)+ +(z|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);B=u<<1;C=c[w+(B<<2)>>2]|0;D=C;F=(C|0)<0|0?-1:0;C=c[w+((B|1)<<2)>>2]|0;B=C;G=(C|0)<0|0?-1:0;C=(E=(+(B>>>0)+ +(G|0)*4294967296.0)*(+(D>>>0)+ +(F|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);if(x>>>0<C>>>0|x>>>0==C>>>0&~~((+(v>>>0)+ +(A|0)*4294967296.0)*(+(y>>>0)+ +(z|0)*4294967296.0))>>>0>>>0<~~((+(B>>>0)+ +(G|0)*4294967296.0)*(+(D>>>0)+ +(F|0)*4294967296.0))>>>0>>>0){H=e;I=t;J=w}else{K=u;L=w;M=1968}}else{K=c[i+(b<<2)>>2]|0;L=c[c[p>>2]>>2]|0;M=1968}if((M|0)==1968){M=0;H=b;I=K;J=L}w=I<<1;u=c[J+(w<<2)>>2]|0;t=u;e=(u|0)<0|0?-1:0;u=c[J+((w|1)<<2)>>2]|0;w=u;F=(u|0)<0|0?-1:0;u=(E=(+(w>>>0)+ +(F|0)*4294967296.0)*(+(t>>>0)+ +(e|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);D=c[J+(q<<2)>>2]|0;G=D;B=(D|0)<0|0?-1:0;D=c[J+(r<<2)>>2]|0;z=D;y=(D|0)<0|0?-1:0;D=(E=(+(z>>>0)+ +(y|0)*4294967296.0)*(+(G>>>0)+ +(B|0)*4294967296.0),+Q(E)>=1.0?E>0.0?(ag(+P(E/4294967296.0),4294967295.0)|0)>>>0:~~+aa((E-+(~~E>>>0))/4294967296.0)>>>0:0);if(!(u>>>0<D>>>0|u>>>0==D>>>0&~~((+(w>>>0)+ +(F|0)*4294967296.0)*(+(t>>>0)+ +(e|0)*4294967296.0))>>>0>>>0<~~((+(z>>>0)+ +(y|0)*4294967296.0)*(+(G>>>0)+ +(B|0)*4294967296.0))>>>0>>>0)){j=a;k=i;l=s;M=1972;break}c[i+(a<<2)>>2]=I;c[(c[s>>2]|0)+(c[(c[d>>2]|0)+(a<<2)>>2]<<2)>>2]=a;B=H<<1|1;G=c[h>>2]|0;y=c[d>>2]|0;if((B|0)<(G|0)){a=H;b=B;g=G;i=y}else{j=H;k=y;l=s;M=1973;break}}if((M|0)==1972){m=k+(j<<2)|0;c[m>>2]=f;n=c[l>>2]|0;o=n+(f<<2)|0;c[o>>2]=j;return}else if((M|0)==1973){m=k+(j<<2)|0;c[m>>2]=f;n=c[l>>2]|0;o=n+(f<<2)|0;c[o>>2]=j;return}}function cs(){var d=0,e=0;d=i;i=i+8|0;a[3248]=1;a[3224]=1;bA(4472,424,880,1040,1024);c[1118]=2672;a[4492]=0;bA(4328,704,552,1040,1024);c[1082]=2672;a[4348]=0;bA(4504,400,2352,1040,1024);c[1126]=2672;a[4524]=1;bA(3776,2328,2216,1040,1176);c[944]=2512;e=3796;c[e>>2]=-2147483648;c[e+4>>2]=2147483647;c[951]=0;bA(4352,2192,2016,1040,1176);c[1088]=2512;e=4372;c[e>>2]=-1;c[e+4>>2]=2147483647;c[1095]=20;bA(3872,1992,1840,1040,1176);c[968]=2512;e=3892;c[e>>2]=-1;c[e+4>>2]=2147483647;c[975]=1e3;e=d|0;bA(3816,1792,1656,1040,1352);c[954]=2608;h[480]=0.0;h[481]=+r;a[3856]=0;a[3857]=0;b[1929]=b[e>>1]|0;b[1930]=b[e+2>>1]|0;b[1931]=b[e+4>>1]|0;h[483]=.5;i=d;return}function ct(a){a=a|0;return}function cu(a){a=a|0;return}function cv(a){a=a|0;return}function cw(a){a=a|0;if((a|0)==0){return}cG(a);return}function cx(a){a=a|0;if((a|0)==0){return}cG(a);return}function cy(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;e=i;i=i+112|0;f=e|0;g=e+56|0;if((a|0)==(b|0)){h=1;i=e;return h|0}if((b|0)==0){h=0;i=e;return h|0}j=b;k=c[b>>2]|0;b=j+(c[k-8>>2]|0)|0;l=c[k-4>>2]|0;k=l;c[f>>2]=3192;c[f+4>>2]=j;c[f+8>>2]=3208;c[f+12>>2]=-1;j=f+16|0;m=f+20|0;n=f+24|0;o=f+28|0;p=f+32|0;q=f+40|0;cO(j|0,0,39);do{if((l|0)==3192){c[f+48>>2]=1;bc[c[(c[798]|0)+20>>2]&7](k,f,b,b,1,0);r=(c[n>>2]|0)==1?b:0}else{a6[c[(c[l>>2]|0)+24>>2]&7](k,f,b,1,0);s=c[f+36>>2]|0;if((s|0)==0){if((c[q>>2]|0)!=1){r=0;break}if((c[o>>2]|0)!=1){r=0;break}r=(c[p>>2]|0)==1?c[m>>2]|0:0;break}else if((s|0)!=1){r=0;break}if((c[n>>2]|0)!=1){if((c[q>>2]|0)!=0){r=0;break}if((c[o>>2]|0)!=1){r=0;break}if((c[p>>2]|0)!=1){r=0;break}}r=c[j>>2]|0}}while(0);j=r;if((r|0)==0){h=0;i=e;return h|0}cO(g|0,0,56);c[g>>2]=j;c[g+8>>2]=a;c[g+12>>2]=-1;c[g+48>>2]=1;be[c[(c[r>>2]|0)+28>>2]&7](j,g,c[d>>2]|0,1);if((c[g+24>>2]|0)!=1){h=0;i=e;return h|0}c[d>>2]=c[g+16>>2];h=1;i=e;return h|0}function cz(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0;if((c[d+8>>2]|0)!=(b|0)){return}b=d+16|0;g=c[b>>2]|0;if((g|0)==0){c[b>>2]=e;c[d+24>>2]=f;c[d+36>>2]=1;return}if((g|0)!=(e|0)){e=d+36|0;c[e>>2]=(c[e>>2]|0)+1;c[d+24>>2]=2;a[d+54|0]=1;return}e=d+24|0;if((c[e>>2]|0)!=2){return}c[e>>2]=f;return}function cA(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0;if((b|0)!=(c[d+8>>2]|0)){g=c[b+8>>2]|0;be[c[(c[g>>2]|0)+28>>2]&7](g,d,e,f);return}g=d+16|0;b=c[g>>2]|0;if((b|0)==0){c[g>>2]=e;c[d+24>>2]=f;c[d+36>>2]=1;return}if((b|0)!=(e|0)){e=d+36|0;c[e>>2]=(c[e>>2]|0)+1;c[d+24>>2]=2;a[d+54|0]=1;return}e=d+24|0;if((c[e>>2]|0)!=2){return}c[e>>2]=f;return}function cB(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0;h=b|0;if((h|0)==(c[d+8>>2]|0)){if((c[d+4>>2]|0)!=(e|0)){return}i=d+28|0;if((c[i>>2]|0)==1){return}c[i>>2]=f;return}if((h|0)!=(c[d>>2]|0)){h=c[b+8>>2]|0;a6[c[(c[h>>2]|0)+24>>2]&7](h,d,e,f,g);return}do{if((c[d+16>>2]|0)!=(e|0)){h=d+20|0;if((c[h>>2]|0)==(e|0)){break}c[d+32>>2]=f;i=d+44|0;if((c[i>>2]|0)==4){return}j=d+52|0;a[j]=0;k=d+53|0;a[k]=0;l=c[b+8>>2]|0;bc[c[(c[l>>2]|0)+20>>2]&7](l,d,e,e,1,g);if((a[k]&1)==0){m=0;n=2050}else{if((a[j]&1)==0){m=1;n=2050}}L2626:do{if((n|0)==2050){c[h>>2]=e;j=d+40|0;c[j>>2]=(c[j>>2]|0)+1;do{if((c[d+36>>2]|0)==1){if((c[d+24>>2]|0)!=2){n=2053;break}a[d+54|0]=1;if(m){break L2626}}else{n=2053}}while(0);if((n|0)==2053){if(m){break}}c[i>>2]=4;return}}while(0);c[i>>2]=3;return}}while(0);if((f|0)!=1){return}c[d+32>>2]=1;return}function cC(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;if((c[d+8>>2]|0)==(b|0)){if((c[d+4>>2]|0)!=(e|0)){return}g=d+28|0;if((c[g>>2]|0)==1){return}c[g>>2]=f;return}if((c[d>>2]|0)!=(b|0)){return}do{if((c[d+16>>2]|0)!=(e|0)){b=d+20|0;if((c[b>>2]|0)==(e|0)){break}c[d+32>>2]=f;c[b>>2]=e;b=d+40|0;c[b>>2]=(c[b>>2]|0)+1;do{if((c[d+36>>2]|0)==1){if((c[d+24>>2]|0)!=2){break}a[d+54|0]=1}}while(0);c[d+44>>2]=4;return}}while(0);if((f|0)!=1){return}c[d+32>>2]=1;return}function cD(b,d,e,f,g,h){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;var i=0,j=0;if((b|0)!=(c[d+8>>2]|0)){i=c[b+8>>2]|0;bc[c[(c[i>>2]|0)+20>>2]&7](i,d,e,f,g,h);return}a[d+53|0]=1;if((c[d+4>>2]|0)!=(f|0)){return}a[d+52|0]=1;f=d+16|0;h=c[f>>2]|0;if((h|0)==0){c[f>>2]=e;c[d+24>>2]=g;c[d+36>>2]=1;if(!((c[d+48>>2]|0)==1&(g|0)==1)){return}a[d+54|0]=1;return}if((h|0)!=(e|0)){e=d+36|0;c[e>>2]=(c[e>>2]|0)+1;a[d+54|0]=1;return}e=d+24|0;h=c[e>>2]|0;if((h|0)==2){c[e>>2]=g;j=g}else{j=h}if(!((c[d+48>>2]|0)==1&(j|0)==1)){return}a[d+54|0]=1;return}function cE(b,d,e,f,g,h){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;var i=0;if((c[d+8>>2]|0)!=(b|0)){return}a[d+53|0]=1;if((c[d+4>>2]|0)!=(f|0)){return}a[d+52|0]=1;f=d+16|0;b=c[f>>2]|0;if((b|0)==0){c[f>>2]=e;c[d+24>>2]=g;c[d+36>>2]=1;if(!((c[d+48>>2]|0)==1&(g|0)==1)){return}a[d+54|0]=1;return}if((b|0)!=(e|0)){e=d+36|0;c[e>>2]=(c[e>>2]|0)+1;a[d+54|0]=1;return}e=d+24|0;b=c[e>>2]|0;if((b|0)==2){c[e>>2]=g;i=g}else{i=b}if(!((c[d+48>>2]|0)==1&(i|0)==1)){return}a[d+54|0]=1;return}function cF(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ab=0,ac=0,ad=0,ae=0,af=0,ag=0,ah=0,ai=0,aj=0,ak=0,al=0,am=0,an=0,ao=0,ap=0,aq=0,ar=0,as=0,at=0,au=0,av=0,aw=0,ay=0,az=0,aA=0,aB=0,aC=0,aD=0,aE=0,aG=0,aH=0,aI=0;do{if(a>>>0<245){if(a>>>0<11){b=16}else{b=a+11&-8}d=b>>>3;e=c[822]|0;f=e>>>(d>>>0);if((f&3|0)!=0){g=(f&1^1)+d|0;h=g<<1;i=3328+(h<<2)|0;j=3328+(h+2<<2)|0;h=c[j>>2]|0;k=h+8|0;l=c[k>>2]|0;do{if((i|0)==(l|0)){c[822]=e&~(1<<g)}else{if(l>>>0<(c[826]|0)>>>0){ax();return 0}m=l+12|0;if((c[m>>2]|0)==(h|0)){c[m>>2]=i;c[j>>2]=l;break}else{ax();return 0}}}while(0);l=g<<3;c[h+4>>2]=l|3;j=h+(l|4)|0;c[j>>2]=c[j>>2]|1;n=k;return n|0}if(b>>>0<=(c[824]|0)>>>0){o=b;break}if((f|0)!=0){j=2<<d;l=f<<d&(j|-j);j=(l&-l)-1|0;l=j>>>12&16;i=j>>>(l>>>0);j=i>>>5&8;m=i>>>(j>>>0);i=m>>>2&4;p=m>>>(i>>>0);m=p>>>1&2;q=p>>>(m>>>0);p=q>>>1&1;r=(j|l|i|m|p)+(q>>>(p>>>0))|0;p=r<<1;q=3328+(p<<2)|0;m=3328+(p+2<<2)|0;p=c[m>>2]|0;i=p+8|0;l=c[i>>2]|0;do{if((q|0)==(l|0)){c[822]=e&~(1<<r)}else{if(l>>>0<(c[826]|0)>>>0){ax();return 0}j=l+12|0;if((c[j>>2]|0)==(p|0)){c[j>>2]=q;c[m>>2]=l;break}else{ax();return 0}}}while(0);l=r<<3;m=l-b|0;c[p+4>>2]=b|3;q=p;e=q+b|0;c[q+(b|4)>>2]=m|1;c[q+l>>2]=m;l=c[824]|0;if((l|0)!=0){q=c[827]|0;d=l>>>3;l=d<<1;f=3328+(l<<2)|0;k=c[822]|0;h=1<<d;do{if((k&h|0)==0){c[822]=k|h;s=f;t=3328+(l+2<<2)|0}else{d=3328+(l+2<<2)|0;g=c[d>>2]|0;if(g>>>0>=(c[826]|0)>>>0){s=g;t=d;break}ax();return 0}}while(0);c[t>>2]=q;c[s+12>>2]=q;c[q+8>>2]=s;c[q+12>>2]=f}c[824]=m;c[827]=e;n=i;return n|0}l=c[823]|0;if((l|0)==0){o=b;break}h=(l&-l)-1|0;l=h>>>12&16;k=h>>>(l>>>0);h=k>>>5&8;p=k>>>(h>>>0);k=p>>>2&4;r=p>>>(k>>>0);p=r>>>1&2;d=r>>>(p>>>0);r=d>>>1&1;g=c[3592+((h|l|k|p|r)+(d>>>(r>>>0))<<2)>>2]|0;r=g;d=g;p=(c[g+4>>2]&-8)-b|0;while(1){g=c[r+16>>2]|0;if((g|0)==0){k=c[r+20>>2]|0;if((k|0)==0){break}else{u=k}}else{u=g}g=(c[u+4>>2]&-8)-b|0;k=g>>>0<p>>>0;r=u;d=k?u:d;p=k?g:p}r=d;i=c[826]|0;if(r>>>0<i>>>0){ax();return 0}e=r+b|0;m=e;if(r>>>0>=e>>>0){ax();return 0}e=c[d+24>>2]|0;f=c[d+12>>2]|0;do{if((f|0)==(d|0)){q=d+20|0;g=c[q>>2]|0;if((g|0)==0){k=d+16|0;l=c[k>>2]|0;if((l|0)==0){v=0;break}else{w=l;x=k}}else{w=g;x=q}while(1){q=w+20|0;g=c[q>>2]|0;if((g|0)!=0){w=g;x=q;continue}q=w+16|0;g=c[q>>2]|0;if((g|0)==0){break}else{w=g;x=q}}if(x>>>0<i>>>0){ax();return 0}else{c[x>>2]=0;v=w;break}}else{q=c[d+8>>2]|0;if(q>>>0<i>>>0){ax();return 0}g=q+12|0;if((c[g>>2]|0)!=(d|0)){ax();return 0}k=f+8|0;if((c[k>>2]|0)==(d|0)){c[g>>2]=f;c[k>>2]=q;v=f;break}else{ax();return 0}}}while(0);L2921:do{if((e|0)!=0){f=d+28|0;i=3592+(c[f>>2]<<2)|0;do{if((d|0)==(c[i>>2]|0)){c[i>>2]=v;if((v|0)!=0){break}c[823]=c[823]&~(1<<c[f>>2]);break L2921}else{if(e>>>0<(c[826]|0)>>>0){ax();return 0}q=e+16|0;if((c[q>>2]|0)==(d|0)){c[q>>2]=v}else{c[e+20>>2]=v}if((v|0)==0){break L2921}}}while(0);if(v>>>0<(c[826]|0)>>>0){ax();return 0}c[v+24>>2]=e;f=c[d+16>>2]|0;do{if((f|0)!=0){if(f>>>0<(c[826]|0)>>>0){ax();return 0}else{c[v+16>>2]=f;c[f+24>>2]=v;break}}}while(0);f=c[d+20>>2]|0;if((f|0)==0){break}if(f>>>0<(c[826]|0)>>>0){ax();return 0}else{c[v+20>>2]=f;c[f+24>>2]=v;break}}}while(0);if(p>>>0<16){e=p+b|0;c[d+4>>2]=e|3;f=r+(e+4)|0;c[f>>2]=c[f>>2]|1}else{c[d+4>>2]=b|3;c[r+(b|4)>>2]=p|1;c[r+(p+b)>>2]=p;f=c[824]|0;if((f|0)!=0){e=c[827]|0;i=f>>>3;f=i<<1;q=3328+(f<<2)|0;k=c[822]|0;g=1<<i;do{if((k&g|0)==0){c[822]=k|g;y=q;z=3328+(f+2<<2)|0}else{i=3328+(f+2<<2)|0;l=c[i>>2]|0;if(l>>>0>=(c[826]|0)>>>0){y=l;z=i;break}ax();return 0}}while(0);c[z>>2]=e;c[y+12>>2]=e;c[e+8>>2]=y;c[e+12>>2]=q}c[824]=p;c[827]=m}f=d+8|0;if((f|0)==0){o=b;break}else{n=f}return n|0}else{if(a>>>0>4294967231){o=-1;break}f=a+11|0;g=f&-8;k=c[823]|0;if((k|0)==0){o=g;break}r=-g|0;i=f>>>8;do{if((i|0)==0){A=0}else{if(g>>>0>16777215){A=31;break}f=(i+1048320|0)>>>16&8;l=i<<f;h=(l+520192|0)>>>16&4;j=l<<h;l=(j+245760|0)>>>16&2;B=14-(h|f|l)+(j<<l>>>15)|0;A=g>>>((B+7|0)>>>0)&1|B<<1}}while(0);i=c[3592+(A<<2)>>2]|0;L2729:do{if((i|0)==0){C=0;D=r;E=0}else{if((A|0)==31){F=0}else{F=25-(A>>>1)|0}d=0;m=r;p=i;q=g<<F;e=0;while(1){B=c[p+4>>2]&-8;l=B-g|0;if(l>>>0<m>>>0){if((B|0)==(g|0)){C=p;D=l;E=p;break L2729}else{G=p;H=l}}else{G=d;H=m}l=c[p+20>>2]|0;B=c[p+16+(q>>>31<<2)>>2]|0;j=(l|0)==0|(l|0)==(B|0)?e:l;if((B|0)==0){C=G;D=H;E=j;break}else{d=G;m=H;p=B;q=q<<1;e=j}}}}while(0);if((E|0)==0&(C|0)==0){i=2<<A;r=(i|-i)&k;if((r|0)==0){o=g;break}i=(r&-r)-1|0;r=i>>>12&16;e=i>>>(r>>>0);i=e>>>5&8;q=e>>>(i>>>0);e=q>>>2&4;p=q>>>(e>>>0);q=p>>>1&2;m=p>>>(q>>>0);p=m>>>1&1;I=c[3592+((i|r|e|q|p)+(m>>>(p>>>0))<<2)>>2]|0}else{I=E}if((I|0)==0){J=D;K=C}else{p=I;m=D;q=C;while(1){e=(c[p+4>>2]&-8)-g|0;r=e>>>0<m>>>0;i=r?e:m;e=r?p:q;r=c[p+16>>2]|0;if((r|0)!=0){p=r;m=i;q=e;continue}r=c[p+20>>2]|0;if((r|0)==0){J=i;K=e;break}else{p=r;m=i;q=e}}}if((K|0)==0){o=g;break}if(J>>>0>=((c[824]|0)-g|0)>>>0){o=g;break}q=K;m=c[826]|0;if(q>>>0<m>>>0){ax();return 0}p=q+g|0;k=p;if(q>>>0>=p>>>0){ax();return 0}e=c[K+24>>2]|0;i=c[K+12>>2]|0;do{if((i|0)==(K|0)){r=K+20|0;d=c[r>>2]|0;if((d|0)==0){j=K+16|0;B=c[j>>2]|0;if((B|0)==0){L=0;break}else{M=B;N=j}}else{M=d;N=r}while(1){r=M+20|0;d=c[r>>2]|0;if((d|0)!=0){M=d;N=r;continue}r=M+16|0;d=c[r>>2]|0;if((d|0)==0){break}else{M=d;N=r}}if(N>>>0<m>>>0){ax();return 0}else{c[N>>2]=0;L=M;break}}else{r=c[K+8>>2]|0;if(r>>>0<m>>>0){ax();return 0}d=r+12|0;if((c[d>>2]|0)!=(K|0)){ax();return 0}j=i+8|0;if((c[j>>2]|0)==(K|0)){c[d>>2]=i;c[j>>2]=r;L=i;break}else{ax();return 0}}}while(0);L2779:do{if((e|0)!=0){i=K+28|0;m=3592+(c[i>>2]<<2)|0;do{if((K|0)==(c[m>>2]|0)){c[m>>2]=L;if((L|0)!=0){break}c[823]=c[823]&~(1<<c[i>>2]);break L2779}else{if(e>>>0<(c[826]|0)>>>0){ax();return 0}r=e+16|0;if((c[r>>2]|0)==(K|0)){c[r>>2]=L}else{c[e+20>>2]=L}if((L|0)==0){break L2779}}}while(0);if(L>>>0<(c[826]|0)>>>0){ax();return 0}c[L+24>>2]=e;i=c[K+16>>2]|0;do{if((i|0)!=0){if(i>>>0<(c[826]|0)>>>0){ax();return 0}else{c[L+16>>2]=i;c[i+24>>2]=L;break}}}while(0);i=c[K+20>>2]|0;if((i|0)==0){break}if(i>>>0<(c[826]|0)>>>0){ax();return 0}else{c[L+20>>2]=i;c[i+24>>2]=L;break}}}while(0);do{if(J>>>0<16){e=J+g|0;c[K+4>>2]=e|3;i=q+(e+4)|0;c[i>>2]=c[i>>2]|1}else{c[K+4>>2]=g|3;c[q+(g|4)>>2]=J|1;c[q+(J+g)>>2]=J;i=J>>>3;if(J>>>0<256){e=i<<1;m=3328+(e<<2)|0;r=c[822]|0;j=1<<i;do{if((r&j|0)==0){c[822]=r|j;O=m;P=3328+(e+2<<2)|0}else{i=3328+(e+2<<2)|0;d=c[i>>2]|0;if(d>>>0>=(c[826]|0)>>>0){O=d;P=i;break}ax();return 0}}while(0);c[P>>2]=k;c[O+12>>2]=k;c[q+(g+8)>>2]=O;c[q+(g+12)>>2]=m;break}e=p;j=J>>>8;do{if((j|0)==0){Q=0}else{if(J>>>0>16777215){Q=31;break}r=(j+1048320|0)>>>16&8;i=j<<r;d=(i+520192|0)>>>16&4;B=i<<d;i=(B+245760|0)>>>16&2;l=14-(d|r|i)+(B<<i>>>15)|0;Q=J>>>((l+7|0)>>>0)&1|l<<1}}while(0);j=3592+(Q<<2)|0;c[q+(g+28)>>2]=Q;c[q+(g+20)>>2]=0;c[q+(g+16)>>2]=0;m=c[823]|0;l=1<<Q;if((m&l|0)==0){c[823]=m|l;c[j>>2]=e;c[q+(g+24)>>2]=j;c[q+(g+12)>>2]=e;c[q+(g+8)>>2]=e;break}if((Q|0)==31){R=0}else{R=25-(Q>>>1)|0}l=J<<R;m=c[j>>2]|0;while(1){if((c[m+4>>2]&-8|0)==(J|0)){break}S=m+16+(l>>>31<<2)|0;j=c[S>>2]|0;if((j|0)==0){T=2277;break}else{l=l<<1;m=j}}if((T|0)==2277){if(S>>>0<(c[826]|0)>>>0){ax();return 0}else{c[S>>2]=e;c[q+(g+24)>>2]=m;c[q+(g+12)>>2]=e;c[q+(g+8)>>2]=e;break}}l=m+8|0;j=c[l>>2]|0;i=c[826]|0;if(m>>>0<i>>>0){ax();return 0}if(j>>>0<i>>>0){ax();return 0}else{c[j+12>>2]=e;c[l>>2]=e;c[q+(g+8)>>2]=j;c[q+(g+12)>>2]=m;c[q+(g+24)>>2]=0;break}}}while(0);q=K+8|0;if((q|0)==0){o=g;break}else{n=q}return n|0}}while(0);K=c[824]|0;if(o>>>0<=K>>>0){S=K-o|0;J=c[827]|0;if(S>>>0>15){R=J;c[827]=R+o;c[824]=S;c[R+(o+4)>>2]=S|1;c[R+K>>2]=S;c[J+4>>2]=o|3}else{c[824]=0;c[827]=0;c[J+4>>2]=K|3;S=J+(K+4)|0;c[S>>2]=c[S>>2]|1}n=J+8|0;return n|0}J=c[825]|0;if(o>>>0<J>>>0){S=J-o|0;c[825]=S;J=c[828]|0;K=J;c[828]=K+o;c[K+(o+4)>>2]=S|1;c[J+4>>2]=o|3;n=J+8|0;return n|0}do{if((c[814]|0)==0){J=aF(30)|0;if((J-1&J|0)==0){c[816]=J;c[815]=J;c[817]=-1;c[818]=-1;c[819]=0;c[933]=0;c[814]=(aN(0)|0)&-16^1431655768;break}else{ax();return 0}}}while(0);J=o+48|0;S=c[816]|0;K=o+47|0;R=S+K|0;Q=-S|0;S=R&Q;if(S>>>0<=o>>>0){n=0;return n|0}O=c[932]|0;do{if((O|0)!=0){P=c[930]|0;L=P+S|0;if(L>>>0<=P>>>0|L>>>0>O>>>0){n=0}else{break}return n|0}}while(0);L2988:do{if((c[933]&4|0)==0){O=c[828]|0;L2990:do{if((O|0)==0){T=2307}else{L=O;P=3736;while(1){U=P|0;M=c[U>>2]|0;if(M>>>0<=L>>>0){V=P+4|0;if((M+(c[V>>2]|0)|0)>>>0>L>>>0){break}}M=c[P+8>>2]|0;if((M|0)==0){T=2307;break L2990}else{P=M}}if((P|0)==0){T=2307;break}L=R-(c[825]|0)&Q;if(L>>>0>=2147483647){W=0;break}m=a_(L|0)|0;e=(m|0)==((c[U>>2]|0)+(c[V>>2]|0)|0);X=e?m:-1;Y=e?L:0;Z=m;_=L;T=2316}}while(0);do{if((T|0)==2307){O=a_(0)|0;if((O|0)==-1){W=0;break}g=O;L=c[815]|0;m=L-1|0;if((m&g|0)==0){$=S}else{$=S-g+(m+g&-L)|0}L=c[930]|0;g=L+$|0;if(!($>>>0>o>>>0&$>>>0<2147483647)){W=0;break}m=c[932]|0;if((m|0)!=0){if(g>>>0<=L>>>0|g>>>0>m>>>0){W=0;break}}m=a_($|0)|0;g=(m|0)==(O|0);X=g?O:-1;Y=g?$:0;Z=m;_=$;T=2316}}while(0);L3010:do{if((T|0)==2316){m=-_|0;if((X|0)!=-1){aa=Y;ab=X;T=2327;break L2988}do{if((Z|0)!=-1&_>>>0<2147483647&_>>>0<J>>>0){g=c[816]|0;O=K-_+g&-g;if(O>>>0>=2147483647){ac=_;break}if((a_(O|0)|0)==-1){a_(m|0)|0;W=Y;break L3010}else{ac=O+_|0;break}}else{ac=_}}while(0);if((Z|0)==-1){W=Y}else{aa=ac;ab=Z;T=2327;break L2988}}}while(0);c[933]=c[933]|4;ad=W;T=2324}else{ad=0;T=2324}}while(0);do{if((T|0)==2324){if(S>>>0>=2147483647){break}W=a_(S|0)|0;Z=a_(0)|0;if(!((Z|0)!=-1&(W|0)!=-1&W>>>0<Z>>>0)){break}ac=Z-W|0;Z=ac>>>0>(o+40|0)>>>0;Y=Z?W:-1;if((Y|0)!=-1){aa=Z?ac:ad;ab=Y;T=2327}}}while(0);do{if((T|0)==2327){ad=(c[930]|0)+aa|0;c[930]=ad;if(ad>>>0>(c[931]|0)>>>0){c[931]=ad}ad=c[828]|0;L3030:do{if((ad|0)==0){S=c[826]|0;if((S|0)==0|ab>>>0<S>>>0){c[826]=ab}c[934]=ab;c[935]=aa;c[937]=0;c[831]=c[814];c[830]=-1;S=0;do{Y=S<<1;ac=3328+(Y<<2)|0;c[3328+(Y+3<<2)>>2]=ac;c[3328+(Y+2<<2)>>2]=ac;S=S+1|0}while(S>>>0<32);S=ab+8|0;if((S&7|0)==0){ae=0}else{ae=-S&7}S=aa-40-ae|0;c[828]=ab+ae;c[825]=S;c[ab+(ae+4)>>2]=S|1;c[ab+(aa-36)>>2]=40;c[829]=c[818]}else{S=3736;while(1){af=c[S>>2]|0;ag=S+4|0;ah=c[ag>>2]|0;if((ab|0)==(af+ah|0)){T=2339;break}ac=c[S+8>>2]|0;if((ac|0)==0){break}else{S=ac}}do{if((T|0)==2339){if((c[S+12>>2]&8|0)!=0){break}ac=ad;if(!(ac>>>0>=af>>>0&ac>>>0<ab>>>0)){break}c[ag>>2]=ah+aa;ac=c[828]|0;Y=(c[825]|0)+aa|0;Z=ac;W=ac+8|0;if((W&7|0)==0){ai=0}else{ai=-W&7}W=Y-ai|0;c[828]=Z+ai;c[825]=W;c[Z+(ai+4)>>2]=W|1;c[Z+(Y+4)>>2]=40;c[829]=c[818];break L3030}}while(0);if(ab>>>0<(c[826]|0)>>>0){c[826]=ab}S=ab+aa|0;Y=3736;while(1){aj=Y|0;if((c[aj>>2]|0)==(S|0)){T=2349;break}Z=c[Y+8>>2]|0;if((Z|0)==0){break}else{Y=Z}}do{if((T|0)==2349){if((c[Y+12>>2]&8|0)!=0){break}c[aj>>2]=ab;S=Y+4|0;c[S>>2]=(c[S>>2]|0)+aa;S=ab+8|0;if((S&7|0)==0){ak=0}else{ak=-S&7}S=ab+(aa+8)|0;if((S&7|0)==0){al=0}else{al=-S&7}S=ab+(al+aa)|0;Z=S;W=ak+o|0;ac=ab+W|0;_=ac;K=S-(ab+ak)-o|0;c[ab+(ak+4)>>2]=o|3;do{if((Z|0)==(c[828]|0)){J=(c[825]|0)+K|0;c[825]=J;c[828]=_;c[ab+(W+4)>>2]=J|1}else{if((Z|0)==(c[827]|0)){J=(c[824]|0)+K|0;c[824]=J;c[827]=_;c[ab+(W+4)>>2]=J|1;c[ab+(J+W)>>2]=J;break}J=aa+4|0;X=c[ab+(al+J)>>2]|0;if((X&3|0)==1){$=X&-8;V=X>>>3;L3075:do{if(X>>>0<256){U=c[ab+((al|8)+aa)>>2]|0;Q=c[ab+(aa+12+al)>>2]|0;R=3328+(V<<1<<2)|0;do{if((U|0)!=(R|0)){if(U>>>0<(c[826]|0)>>>0){ax();return 0}if((c[U+12>>2]|0)==(Z|0)){break}ax();return 0}}while(0);if((Q|0)==(U|0)){c[822]=c[822]&~(1<<V);break}do{if((Q|0)==(R|0)){am=Q+8|0}else{if(Q>>>0<(c[826]|0)>>>0){ax();return 0}m=Q+8|0;if((c[m>>2]|0)==(Z|0)){am=m;break}ax();return 0}}while(0);c[U+12>>2]=Q;c[am>>2]=U}else{R=S;m=c[ab+((al|24)+aa)>>2]|0;P=c[ab+(aa+12+al)>>2]|0;do{if((P|0)==(R|0)){O=al|16;g=ab+(O+J)|0;L=c[g>>2]|0;if((L|0)==0){e=ab+(O+aa)|0;O=c[e>>2]|0;if((O|0)==0){an=0;break}else{ao=O;ap=e}}else{ao=L;ap=g}while(1){g=ao+20|0;L=c[g>>2]|0;if((L|0)!=0){ao=L;ap=g;continue}g=ao+16|0;L=c[g>>2]|0;if((L|0)==0){break}else{ao=L;ap=g}}if(ap>>>0<(c[826]|0)>>>0){ax();return 0}else{c[ap>>2]=0;an=ao;break}}else{g=c[ab+((al|8)+aa)>>2]|0;if(g>>>0<(c[826]|0)>>>0){ax();return 0}L=g+12|0;if((c[L>>2]|0)!=(R|0)){ax();return 0}e=P+8|0;if((c[e>>2]|0)==(R|0)){c[L>>2]=P;c[e>>2]=g;an=P;break}else{ax();return 0}}}while(0);if((m|0)==0){break}P=ab+(aa+28+al)|0;U=3592+(c[P>>2]<<2)|0;do{if((R|0)==(c[U>>2]|0)){c[U>>2]=an;if((an|0)!=0){break}c[823]=c[823]&~(1<<c[P>>2]);break L3075}else{if(m>>>0<(c[826]|0)>>>0){ax();return 0}Q=m+16|0;if((c[Q>>2]|0)==(R|0)){c[Q>>2]=an}else{c[m+20>>2]=an}if((an|0)==0){break L3075}}}while(0);if(an>>>0<(c[826]|0)>>>0){ax();return 0}c[an+24>>2]=m;R=al|16;P=c[ab+(R+aa)>>2]|0;do{if((P|0)!=0){if(P>>>0<(c[826]|0)>>>0){ax();return 0}else{c[an+16>>2]=P;c[P+24>>2]=an;break}}}while(0);P=c[ab+(R+J)>>2]|0;if((P|0)==0){break}if(P>>>0<(c[826]|0)>>>0){ax();return 0}else{c[an+20>>2]=P;c[P+24>>2]=an;break}}}while(0);aq=ab+(($|al)+aa)|0;ar=$+K|0}else{aq=Z;ar=K}J=aq+4|0;c[J>>2]=c[J>>2]&-2;c[ab+(W+4)>>2]=ar|1;c[ab+(ar+W)>>2]=ar;J=ar>>>3;if(ar>>>0<256){V=J<<1;X=3328+(V<<2)|0;P=c[822]|0;m=1<<J;do{if((P&m|0)==0){c[822]=P|m;as=X;at=3328+(V+2<<2)|0}else{J=3328+(V+2<<2)|0;U=c[J>>2]|0;if(U>>>0>=(c[826]|0)>>>0){as=U;at=J;break}ax();return 0}}while(0);c[at>>2]=_;c[as+12>>2]=_;c[ab+(W+8)>>2]=as;c[ab+(W+12)>>2]=X;break}V=ac;m=ar>>>8;do{if((m|0)==0){au=0}else{if(ar>>>0>16777215){au=31;break}P=(m+1048320|0)>>>16&8;$=m<<P;J=($+520192|0)>>>16&4;U=$<<J;$=(U+245760|0)>>>16&2;Q=14-(J|P|$)+(U<<$>>>15)|0;au=ar>>>((Q+7|0)>>>0)&1|Q<<1}}while(0);m=3592+(au<<2)|0;c[ab+(W+28)>>2]=au;c[ab+(W+20)>>2]=0;c[ab+(W+16)>>2]=0;X=c[823]|0;Q=1<<au;if((X&Q|0)==0){c[823]=X|Q;c[m>>2]=V;c[ab+(W+24)>>2]=m;c[ab+(W+12)>>2]=V;c[ab+(W+8)>>2]=V;break}if((au|0)==31){av=0}else{av=25-(au>>>1)|0}Q=ar<<av;X=c[m>>2]|0;while(1){if((c[X+4>>2]&-8|0)==(ar|0)){break}aw=X+16+(Q>>>31<<2)|0;m=c[aw>>2]|0;if((m|0)==0){T=2422;break}else{Q=Q<<1;X=m}}if((T|0)==2422){if(aw>>>0<(c[826]|0)>>>0){ax();return 0}else{c[aw>>2]=V;c[ab+(W+24)>>2]=X;c[ab+(W+12)>>2]=V;c[ab+(W+8)>>2]=V;break}}Q=X+8|0;m=c[Q>>2]|0;$=c[826]|0;if(X>>>0<$>>>0){ax();return 0}if(m>>>0<$>>>0){ax();return 0}else{c[m+12>>2]=V;c[Q>>2]=V;c[ab+(W+8)>>2]=m;c[ab+(W+12)>>2]=X;c[ab+(W+24)>>2]=0;break}}}while(0);n=ab+(ak|8)|0;return n|0}}while(0);Y=ad;W=3736;while(1){ay=c[W>>2]|0;if(ay>>>0<=Y>>>0){az=c[W+4>>2]|0;aA=ay+az|0;if(aA>>>0>Y>>>0){break}}W=c[W+8>>2]|0}W=ay+(az-39)|0;if((W&7|0)==0){aB=0}else{aB=-W&7}W=ay+(az-47+aB)|0;ac=W>>>0<(ad+16|0)>>>0?Y:W;W=ac+8|0;_=ab+8|0;if((_&7|0)==0){aC=0}else{aC=-_&7}_=aa-40-aC|0;c[828]=ab+aC;c[825]=_;c[ab+(aC+4)>>2]=_|1;c[ab+(aa-36)>>2]=40;c[829]=c[818];c[ac+4>>2]=27;c[W>>2]=c[934];c[W+4>>2]=c[935];c[W+8>>2]=c[936];c[W+12>>2]=c[937];c[934]=ab;c[935]=aa;c[937]=0;c[936]=W;W=ac+28|0;c[W>>2]=7;if((ac+32|0)>>>0<aA>>>0){_=W;while(1){W=_+4|0;c[W>>2]=7;if((_+8|0)>>>0<aA>>>0){_=W}else{break}}}if((ac|0)==(Y|0)){break}_=ac-ad|0;W=Y+(_+4)|0;c[W>>2]=c[W>>2]&-2;c[ad+4>>2]=_|1;c[Y+_>>2]=_;W=_>>>3;if(_>>>0<256){K=W<<1;Z=3328+(K<<2)|0;S=c[822]|0;m=1<<W;do{if((S&m|0)==0){c[822]=S|m;aD=Z;aE=3328+(K+2<<2)|0}else{W=3328+(K+2<<2)|0;Q=c[W>>2]|0;if(Q>>>0>=(c[826]|0)>>>0){aD=Q;aE=W;break}ax();return 0}}while(0);c[aE>>2]=ad;c[aD+12>>2]=ad;c[ad+8>>2]=aD;c[ad+12>>2]=Z;break}K=ad;m=_>>>8;do{if((m|0)==0){aG=0}else{if(_>>>0>16777215){aG=31;break}S=(m+1048320|0)>>>16&8;Y=m<<S;ac=(Y+520192|0)>>>16&4;W=Y<<ac;Y=(W+245760|0)>>>16&2;Q=14-(ac|S|Y)+(W<<Y>>>15)|0;aG=_>>>((Q+7|0)>>>0)&1|Q<<1}}while(0);m=3592+(aG<<2)|0;c[ad+28>>2]=aG;c[ad+20>>2]=0;c[ad+16>>2]=0;Z=c[823]|0;Q=1<<aG;if((Z&Q|0)==0){c[823]=Z|Q;c[m>>2]=K;c[ad+24>>2]=m;c[ad+12>>2]=ad;c[ad+8>>2]=ad;break}if((aG|0)==31){aH=0}else{aH=25-(aG>>>1)|0}Q=_<<aH;Z=c[m>>2]|0;while(1){if((c[Z+4>>2]&-8|0)==(_|0)){break}aI=Z+16+(Q>>>31<<2)|0;m=c[aI>>2]|0;if((m|0)==0){T=2457;break}else{Q=Q<<1;Z=m}}if((T|0)==2457){if(aI>>>0<(c[826]|0)>>>0){ax();return 0}else{c[aI>>2]=K;c[ad+24>>2]=Z;c[ad+12>>2]=ad;c[ad+8>>2]=ad;break}}Q=Z+8|0;_=c[Q>>2]|0;m=c[826]|0;if(Z>>>0<m>>>0){ax();return 0}if(_>>>0<m>>>0){ax();return 0}else{c[_+12>>2]=K;c[Q>>2]=K;c[ad+8>>2]=_;c[ad+12>>2]=Z;c[ad+24>>2]=0;break}}}while(0);ad=c[825]|0;if(ad>>>0<=o>>>0){break}_=ad-o|0;c[825]=_;ad=c[828]|0;Q=ad;c[828]=Q+o;c[Q+(o+4)>>2]=_|1;c[ad+4>>2]=o|3;n=ad+8|0;return n|0}}while(0);c[(a$()|0)>>2]=12;n=0;return n|0}function cG(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0;if((a|0)==0){return}b=a-8|0;d=b;e=c[826]|0;if(b>>>0<e>>>0){ax()}f=c[a-4>>2]|0;g=f&3;if((g|0)==1){ax()}h=f&-8;i=a+(h-8)|0;j=i;L3247:do{if((f&1|0)==0){k=c[b>>2]|0;if((g|0)==0){return}l=-8-k|0;m=a+l|0;n=m;o=k+h|0;if(m>>>0<e>>>0){ax()}if((n|0)==(c[827]|0)){p=a+(h-4)|0;if((c[p>>2]&3|0)!=3){q=n;r=o;break}c[824]=o;c[p>>2]=c[p>>2]&-2;c[a+(l+4)>>2]=o|1;c[i>>2]=o;return}p=k>>>3;if(k>>>0<256){k=c[a+(l+8)>>2]|0;s=c[a+(l+12)>>2]|0;t=3328+(p<<1<<2)|0;do{if((k|0)!=(t|0)){if(k>>>0<e>>>0){ax()}if((c[k+12>>2]|0)==(n|0)){break}ax()}}while(0);if((s|0)==(k|0)){c[822]=c[822]&~(1<<p);q=n;r=o;break}do{if((s|0)==(t|0)){u=s+8|0}else{if(s>>>0<e>>>0){ax()}v=s+8|0;if((c[v>>2]|0)==(n|0)){u=v;break}ax()}}while(0);c[k+12>>2]=s;c[u>>2]=k;q=n;r=o;break}t=m;p=c[a+(l+24)>>2]|0;v=c[a+(l+12)>>2]|0;do{if((v|0)==(t|0)){w=a+(l+20)|0;x=c[w>>2]|0;if((x|0)==0){y=a+(l+16)|0;z=c[y>>2]|0;if((z|0)==0){A=0;break}else{B=z;C=y}}else{B=x;C=w}while(1){w=B+20|0;x=c[w>>2]|0;if((x|0)!=0){B=x;C=w;continue}w=B+16|0;x=c[w>>2]|0;if((x|0)==0){break}else{B=x;C=w}}if(C>>>0<e>>>0){ax()}else{c[C>>2]=0;A=B;break}}else{w=c[a+(l+8)>>2]|0;if(w>>>0<e>>>0){ax()}x=w+12|0;if((c[x>>2]|0)!=(t|0)){ax()}y=v+8|0;if((c[y>>2]|0)==(t|0)){c[x>>2]=v;c[y>>2]=w;A=v;break}else{ax()}}}while(0);if((p|0)==0){q=n;r=o;break}v=a+(l+28)|0;m=3592+(c[v>>2]<<2)|0;do{if((t|0)==(c[m>>2]|0)){c[m>>2]=A;if((A|0)!=0){break}c[823]=c[823]&~(1<<c[v>>2]);q=n;r=o;break L3247}else{if(p>>>0<(c[826]|0)>>>0){ax()}k=p+16|0;if((c[k>>2]|0)==(t|0)){c[k>>2]=A}else{c[p+20>>2]=A}if((A|0)==0){q=n;r=o;break L3247}}}while(0);if(A>>>0<(c[826]|0)>>>0){ax()}c[A+24>>2]=p;t=c[a+(l+16)>>2]|0;do{if((t|0)!=0){if(t>>>0<(c[826]|0)>>>0){ax()}else{c[A+16>>2]=t;c[t+24>>2]=A;break}}}while(0);t=c[a+(l+20)>>2]|0;if((t|0)==0){q=n;r=o;break}if(t>>>0<(c[826]|0)>>>0){ax()}else{c[A+20>>2]=t;c[t+24>>2]=A;q=n;r=o;break}}else{q=d;r=h}}while(0);d=q;if(d>>>0>=i>>>0){ax()}A=a+(h-4)|0;e=c[A>>2]|0;if((e&1|0)==0){ax()}do{if((e&2|0)==0){if((j|0)==(c[828]|0)){B=(c[825]|0)+r|0;c[825]=B;c[828]=q;c[q+4>>2]=B|1;if((q|0)!=(c[827]|0)){return}c[827]=0;c[824]=0;return}if((j|0)==(c[827]|0)){B=(c[824]|0)+r|0;c[824]=B;c[827]=q;c[q+4>>2]=B|1;c[d+B>>2]=B;return}B=(e&-8)+r|0;C=e>>>3;L3349:do{if(e>>>0<256){u=c[a+h>>2]|0;g=c[a+(h|4)>>2]|0;b=3328+(C<<1<<2)|0;do{if((u|0)!=(b|0)){if(u>>>0<(c[826]|0)>>>0){ax()}if((c[u+12>>2]|0)==(j|0)){break}ax()}}while(0);if((g|0)==(u|0)){c[822]=c[822]&~(1<<C);break}do{if((g|0)==(b|0)){D=g+8|0}else{if(g>>>0<(c[826]|0)>>>0){ax()}f=g+8|0;if((c[f>>2]|0)==(j|0)){D=f;break}ax()}}while(0);c[u+12>>2]=g;c[D>>2]=u}else{b=i;f=c[a+(h+16)>>2]|0;t=c[a+(h|4)>>2]|0;do{if((t|0)==(b|0)){p=a+(h+12)|0;v=c[p>>2]|0;if((v|0)==0){m=a+(h+8)|0;k=c[m>>2]|0;if((k|0)==0){E=0;break}else{F=k;G=m}}else{F=v;G=p}while(1){p=F+20|0;v=c[p>>2]|0;if((v|0)!=0){F=v;G=p;continue}p=F+16|0;v=c[p>>2]|0;if((v|0)==0){break}else{F=v;G=p}}if(G>>>0<(c[826]|0)>>>0){ax()}else{c[G>>2]=0;E=F;break}}else{p=c[a+h>>2]|0;if(p>>>0<(c[826]|0)>>>0){ax()}v=p+12|0;if((c[v>>2]|0)!=(b|0)){ax()}m=t+8|0;if((c[m>>2]|0)==(b|0)){c[v>>2]=t;c[m>>2]=p;E=t;break}else{ax()}}}while(0);if((f|0)==0){break}t=a+(h+20)|0;u=3592+(c[t>>2]<<2)|0;do{if((b|0)==(c[u>>2]|0)){c[u>>2]=E;if((E|0)!=0){break}c[823]=c[823]&~(1<<c[t>>2]);break L3349}else{
if(f>>>0<(c[826]|0)>>>0){ax()}g=f+16|0;if((c[g>>2]|0)==(b|0)){c[g>>2]=E}else{c[f+20>>2]=E}if((E|0)==0){break L3349}}}while(0);if(E>>>0<(c[826]|0)>>>0){ax()}c[E+24>>2]=f;b=c[a+(h+8)>>2]|0;do{if((b|0)!=0){if(b>>>0<(c[826]|0)>>>0){ax()}else{c[E+16>>2]=b;c[b+24>>2]=E;break}}}while(0);b=c[a+(h+12)>>2]|0;if((b|0)==0){break}if(b>>>0<(c[826]|0)>>>0){ax()}else{c[E+20>>2]=b;c[b+24>>2]=E;break}}}while(0);c[q+4>>2]=B|1;c[d+B>>2]=B;if((q|0)!=(c[827]|0)){H=B;break}c[824]=B;return}else{c[A>>2]=e&-2;c[q+4>>2]=r|1;c[d+r>>2]=r;H=r}}while(0);r=H>>>3;if(H>>>0<256){d=r<<1;e=3328+(d<<2)|0;A=c[822]|0;E=1<<r;do{if((A&E|0)==0){c[822]=A|E;I=e;J=3328+(d+2<<2)|0}else{r=3328+(d+2<<2)|0;h=c[r>>2]|0;if(h>>>0>=(c[826]|0)>>>0){I=h;J=r;break}ax()}}while(0);c[J>>2]=q;c[I+12>>2]=q;c[q+8>>2]=I;c[q+12>>2]=e;return}e=q;I=H>>>8;do{if((I|0)==0){K=0}else{if(H>>>0>16777215){K=31;break}J=(I+1048320|0)>>>16&8;d=I<<J;E=(d+520192|0)>>>16&4;A=d<<E;d=(A+245760|0)>>>16&2;r=14-(E|J|d)+(A<<d>>>15)|0;K=H>>>((r+7|0)>>>0)&1|r<<1}}while(0);I=3592+(K<<2)|0;c[q+28>>2]=K;c[q+20>>2]=0;c[q+16>>2]=0;r=c[823]|0;d=1<<K;do{if((r&d|0)==0){c[823]=r|d;c[I>>2]=e;c[q+24>>2]=I;c[q+12>>2]=q;c[q+8>>2]=q}else{if((K|0)==31){L=0}else{L=25-(K>>>1)|0}A=H<<L;J=c[I>>2]|0;while(1){if((c[J+4>>2]&-8|0)==(H|0)){break}M=J+16+(A>>>31<<2)|0;E=c[M>>2]|0;if((E|0)==0){N=2634;break}else{A=A<<1;J=E}}if((N|0)==2634){if(M>>>0<(c[826]|0)>>>0){ax()}else{c[M>>2]=e;c[q+24>>2]=J;c[q+12>>2]=q;c[q+8>>2]=q;break}}A=J+8|0;B=c[A>>2]|0;E=c[826]|0;if(J>>>0<E>>>0){ax()}if(B>>>0<E>>>0){ax()}else{c[B+12>>2]=e;c[A>>2]=e;c[q+8>>2]=B;c[q+12>>2]=J;c[q+24>>2]=0;break}}}while(0);q=(c[830]|0)-1|0;c[830]=q;if((q|0)==0){O=3744}else{return}while(1){q=c[O>>2]|0;if((q|0)==0){break}else{O=q+8|0}}c[830]=-1;return}function cH(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0;if((a|0)==0){d=cF(b)|0;return d|0}if(b>>>0>4294967231){c[(a$()|0)>>2]=12;d=0;return d|0}if(b>>>0<11){e=16}else{e=b+11&-8}f=a-8|0;g=a-4|0;h=c[g>>2]|0;i=h&-8;j=i-8|0;k=a+j|0;l=k;m=c[826]|0;if(f>>>0<m>>>0){ax();return 0}n=h&3;if(!((n|0)!=1&(j|0)>-8)){ax();return 0}j=i|4;o=a+(j-8)|0;p=c[o>>2]|0;if((p&1|0)==0){ax();return 0}L3485:do{if((n|0)==0){if(e>>>0<256|i>>>0<(e|4)>>>0){break}if((i-e|0)>>>0>c[816]<<1>>>0|(f|0)==0){break}else{d=a}return d|0}else{do{if(i>>>0<e>>>0){if((l|0)==(c[828]|0)){q=(c[825]|0)+i|0;if(q>>>0<=e>>>0){break L3485}r=q-e|0;c[g>>2]=h&1|e|2;c[a+((e|4)-8)>>2]=r|1;c[828]=a+(e-8);c[825]=r;break}if((l|0)==(c[827]|0)){r=(c[824]|0)+i|0;if(r>>>0<e>>>0){break L3485}q=r-e|0;if(q>>>0>15){c[g>>2]=h&1|e|2;c[a+((e|4)-8)>>2]=q|1;c[a+(r-8)>>2]=q;s=a+(r-4)|0;c[s>>2]=c[s>>2]&-2;t=a+(e-8)|0;u=q}else{c[g>>2]=h&1|r|2;q=a+(r-4)|0;c[q>>2]=c[q>>2]|1;t=0;u=0}c[824]=u;c[827]=t;break}if((p&2|0)!=0){break L3485}q=(p&-8)+i|0;if(q>>>0<e>>>0){break L3485}r=q-e|0;s=p>>>3;L3509:do{if(p>>>0<256){v=c[a+i>>2]|0;w=c[a+j>>2]|0;x=3328+(s<<1<<2)|0;do{if((v|0)!=(x|0)){if(v>>>0<m>>>0){ax();return 0}if((c[v+12>>2]|0)==(l|0)){break}ax();return 0}}while(0);if((w|0)==(v|0)){c[822]=c[822]&~(1<<s);break}do{if((w|0)==(x|0)){y=w+8|0}else{if(w>>>0<m>>>0){ax();return 0}z=w+8|0;if((c[z>>2]|0)==(l|0)){y=z;break}ax();return 0}}while(0);c[v+12>>2]=w;c[y>>2]=v}else{x=k;z=c[a+(i+16)>>2]|0;A=c[a+j>>2]|0;do{if((A|0)==(x|0)){B=a+(i+12)|0;C=c[B>>2]|0;if((C|0)==0){D=a+(i+8)|0;E=c[D>>2]|0;if((E|0)==0){F=0;break}else{G=E;H=D}}else{G=C;H=B}while(1){B=G+20|0;C=c[B>>2]|0;if((C|0)!=0){G=C;H=B;continue}B=G+16|0;C=c[B>>2]|0;if((C|0)==0){break}else{G=C;H=B}}if(H>>>0<m>>>0){ax();return 0}else{c[H>>2]=0;F=G;break}}else{B=c[a+i>>2]|0;if(B>>>0<m>>>0){ax();return 0}C=B+12|0;if((c[C>>2]|0)!=(x|0)){ax();return 0}D=A+8|0;if((c[D>>2]|0)==(x|0)){c[C>>2]=A;c[D>>2]=B;F=A;break}else{ax();return 0}}}while(0);if((z|0)==0){break}A=a+(i+20)|0;v=3592+(c[A>>2]<<2)|0;do{if((x|0)==(c[v>>2]|0)){c[v>>2]=F;if((F|0)!=0){break}c[823]=c[823]&~(1<<c[A>>2]);break L3509}else{if(z>>>0<(c[826]|0)>>>0){ax();return 0}w=z+16|0;if((c[w>>2]|0)==(x|0)){c[w>>2]=F}else{c[z+20>>2]=F}if((F|0)==0){break L3509}}}while(0);if(F>>>0<(c[826]|0)>>>0){ax();return 0}c[F+24>>2]=z;x=c[a+(i+8)>>2]|0;do{if((x|0)!=0){if(x>>>0<(c[826]|0)>>>0){ax();return 0}else{c[F+16>>2]=x;c[x+24>>2]=F;break}}}while(0);x=c[a+(i+12)>>2]|0;if((x|0)==0){break}if(x>>>0<(c[826]|0)>>>0){ax();return 0}else{c[F+20>>2]=x;c[x+24>>2]=F;break}}}while(0);if(r>>>0>=16){c[g>>2]=c[g>>2]&1|e|2;c[a+((e|4)-8)>>2]=r|3;s=a+((q|4)-8)|0;c[s>>2]=c[s>>2]|1;cI(a+(e-8)|0,r);break}c[g>>2]=q|c[g>>2]&1|2;s=a+((q|4)-8)|0;c[s>>2]=c[s>>2]|1;d=a;return d|0}else{s=i-e|0;if(s>>>0<=15){break}c[g>>2]=h&1|e|2;c[a+((e|4)-8)>>2]=s|3;c[o>>2]=c[o>>2]|1;cI(a+(e-8)|0,s);d=a;return d|0}}while(0);if((f|0)==0){break}else{d=a}return d|0}}while(0);f=cF(b)|0;if((f|0)==0){d=0;return d|0}e=c[g>>2]|0;g=(e&-8)-((e&3|0)==0?8:4)|0;e=g>>>0<b>>>0?g:b;cN(f|0,a|0,e)|0;cG(a);d=f;return d|0}function cI(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0;d=a;e=d+b|0;f=e;g=c[a+4>>2]|0;L3591:do{if((g&1|0)==0){h=c[a>>2]|0;if((g&3|0)==0){return}i=d+(-h|0)|0;j=i;k=h+b|0;l=c[826]|0;if(i>>>0<l>>>0){ax()}if((j|0)==(c[827]|0)){m=d+(b+4)|0;if((c[m>>2]&3|0)!=3){n=j;o=k;break}c[824]=k;c[m>>2]=c[m>>2]&-2;c[d+(4-h)>>2]=k|1;c[e>>2]=k;return}m=h>>>3;if(h>>>0<256){p=c[d+(8-h)>>2]|0;q=c[d+(12-h)>>2]|0;r=3328+(m<<1<<2)|0;do{if((p|0)!=(r|0)){if(p>>>0<l>>>0){ax()}if((c[p+12>>2]|0)==(j|0)){break}ax()}}while(0);if((q|0)==(p|0)){c[822]=c[822]&~(1<<m);n=j;o=k;break}do{if((q|0)==(r|0)){s=q+8|0}else{if(q>>>0<l>>>0){ax()}t=q+8|0;if((c[t>>2]|0)==(j|0)){s=t;break}ax()}}while(0);c[p+12>>2]=q;c[s>>2]=p;n=j;o=k;break}r=i;m=c[d+(24-h)>>2]|0;t=c[d+(12-h)>>2]|0;do{if((t|0)==(r|0)){u=16-h|0;v=d+(u+4)|0;w=c[v>>2]|0;if((w|0)==0){x=d+u|0;u=c[x>>2]|0;if((u|0)==0){y=0;break}else{z=u;A=x}}else{z=w;A=v}while(1){v=z+20|0;w=c[v>>2]|0;if((w|0)!=0){z=w;A=v;continue}v=z+16|0;w=c[v>>2]|0;if((w|0)==0){break}else{z=w;A=v}}if(A>>>0<l>>>0){ax()}else{c[A>>2]=0;y=z;break}}else{v=c[d+(8-h)>>2]|0;if(v>>>0<l>>>0){ax()}w=v+12|0;if((c[w>>2]|0)!=(r|0)){ax()}x=t+8|0;if((c[x>>2]|0)==(r|0)){c[w>>2]=t;c[x>>2]=v;y=t;break}else{ax()}}}while(0);if((m|0)==0){n=j;o=k;break}t=d+(28-h)|0;l=3592+(c[t>>2]<<2)|0;do{if((r|0)==(c[l>>2]|0)){c[l>>2]=y;if((y|0)!=0){break}c[823]=c[823]&~(1<<c[t>>2]);n=j;o=k;break L3591}else{if(m>>>0<(c[826]|0)>>>0){ax()}i=m+16|0;if((c[i>>2]|0)==(r|0)){c[i>>2]=y}else{c[m+20>>2]=y}if((y|0)==0){n=j;o=k;break L3591}}}while(0);if(y>>>0<(c[826]|0)>>>0){ax()}c[y+24>>2]=m;r=16-h|0;t=c[d+r>>2]|0;do{if((t|0)!=0){if(t>>>0<(c[826]|0)>>>0){ax()}else{c[y+16>>2]=t;c[t+24>>2]=y;break}}}while(0);t=c[d+(r+4)>>2]|0;if((t|0)==0){n=j;o=k;break}if(t>>>0<(c[826]|0)>>>0){ax()}else{c[y+20>>2]=t;c[t+24>>2]=y;n=j;o=k;break}}else{n=a;o=b}}while(0);a=c[826]|0;if(e>>>0<a>>>0){ax()}y=d+(b+4)|0;z=c[y>>2]|0;do{if((z&2|0)==0){if((f|0)==(c[828]|0)){A=(c[825]|0)+o|0;c[825]=A;c[828]=n;c[n+4>>2]=A|1;if((n|0)!=(c[827]|0)){return}c[827]=0;c[824]=0;return}if((f|0)==(c[827]|0)){A=(c[824]|0)+o|0;c[824]=A;c[827]=n;c[n+4>>2]=A|1;c[n+A>>2]=A;return}A=(z&-8)+o|0;s=z>>>3;L3691:do{if(z>>>0<256){g=c[d+(b+8)>>2]|0;t=c[d+(b+12)>>2]|0;h=3328+(s<<1<<2)|0;do{if((g|0)!=(h|0)){if(g>>>0<a>>>0){ax()}if((c[g+12>>2]|0)==(f|0)){break}ax()}}while(0);if((t|0)==(g|0)){c[822]=c[822]&~(1<<s);break}do{if((t|0)==(h|0)){B=t+8|0}else{if(t>>>0<a>>>0){ax()}m=t+8|0;if((c[m>>2]|0)==(f|0)){B=m;break}ax()}}while(0);c[g+12>>2]=t;c[B>>2]=g}else{h=e;m=c[d+(b+24)>>2]|0;l=c[d+(b+12)>>2]|0;do{if((l|0)==(h|0)){i=d+(b+20)|0;p=c[i>>2]|0;if((p|0)==0){q=d+(b+16)|0;v=c[q>>2]|0;if((v|0)==0){C=0;break}else{D=v;E=q}}else{D=p;E=i}while(1){i=D+20|0;p=c[i>>2]|0;if((p|0)!=0){D=p;E=i;continue}i=D+16|0;p=c[i>>2]|0;if((p|0)==0){break}else{D=p;E=i}}if(E>>>0<a>>>0){ax()}else{c[E>>2]=0;C=D;break}}else{i=c[d+(b+8)>>2]|0;if(i>>>0<a>>>0){ax()}p=i+12|0;if((c[p>>2]|0)!=(h|0)){ax()}q=l+8|0;if((c[q>>2]|0)==(h|0)){c[p>>2]=l;c[q>>2]=i;C=l;break}else{ax()}}}while(0);if((m|0)==0){break}l=d+(b+28)|0;g=3592+(c[l>>2]<<2)|0;do{if((h|0)==(c[g>>2]|0)){c[g>>2]=C;if((C|0)!=0){break}c[823]=c[823]&~(1<<c[l>>2]);break L3691}else{if(m>>>0<(c[826]|0)>>>0){ax()}t=m+16|0;if((c[t>>2]|0)==(h|0)){c[t>>2]=C}else{c[m+20>>2]=C}if((C|0)==0){break L3691}}}while(0);if(C>>>0<(c[826]|0)>>>0){ax()}c[C+24>>2]=m;h=c[d+(b+16)>>2]|0;do{if((h|0)!=0){if(h>>>0<(c[826]|0)>>>0){ax()}else{c[C+16>>2]=h;c[h+24>>2]=C;break}}}while(0);h=c[d+(b+20)>>2]|0;if((h|0)==0){break}if(h>>>0<(c[826]|0)>>>0){ax()}else{c[C+20>>2]=h;c[h+24>>2]=C;break}}}while(0);c[n+4>>2]=A|1;c[n+A>>2]=A;if((n|0)!=(c[827]|0)){F=A;break}c[824]=A;return}else{c[y>>2]=z&-2;c[n+4>>2]=o|1;c[n+o>>2]=o;F=o}}while(0);o=F>>>3;if(F>>>0<256){z=o<<1;y=3328+(z<<2)|0;C=c[822]|0;b=1<<o;do{if((C&b|0)==0){c[822]=C|b;G=y;H=3328+(z+2<<2)|0}else{o=3328+(z+2<<2)|0;d=c[o>>2]|0;if(d>>>0>=(c[826]|0)>>>0){G=d;H=o;break}ax()}}while(0);c[H>>2]=n;c[G+12>>2]=n;c[n+8>>2]=G;c[n+12>>2]=y;return}y=n;G=F>>>8;do{if((G|0)==0){I=0}else{if(F>>>0>16777215){I=31;break}H=(G+1048320|0)>>>16&8;z=G<<H;b=(z+520192|0)>>>16&4;C=z<<b;z=(C+245760|0)>>>16&2;o=14-(b|H|z)+(C<<z>>>15)|0;I=F>>>((o+7|0)>>>0)&1|o<<1}}while(0);G=3592+(I<<2)|0;c[n+28>>2]=I;c[n+20>>2]=0;c[n+16>>2]=0;o=c[823]|0;z=1<<I;if((o&z|0)==0){c[823]=o|z;c[G>>2]=y;c[n+24>>2]=G;c[n+12>>2]=n;c[n+8>>2]=n;return}if((I|0)==31){J=0}else{J=25-(I>>>1)|0}I=F<<J;J=c[G>>2]|0;while(1){if((c[J+4>>2]&-8|0)==(F|0)){break}K=J+16+(I>>>31<<2)|0;G=c[K>>2]|0;if((G|0)==0){L=2900;break}else{I=I<<1;J=G}}if((L|0)==2900){if(K>>>0<(c[826]|0)>>>0){ax()}c[K>>2]=y;c[n+24>>2]=J;c[n+12>>2]=n;c[n+8>>2]=n;return}K=J+8|0;L=c[K>>2]|0;I=c[826]|0;if(J>>>0<I>>>0){ax()}if(L>>>0<I>>>0){ax()}c[L+12>>2]=y;c[K>>2]=y;c[n+8>>2]=L;c[n+12>>2]=J;c[n+24>>2]=0;return}function cJ(a){a=a|0;if((a|0)==0){return}cG(a);return}function cK(a){a=a|0;return}function cL(a){a=a|0;return 1056}function cM(b){b=b|0;var c=0;c=b;while(a[c]|0){c=c+1|0}return c-b|0}function cN(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;f=b|0;if((b&3)==(d&3)){while(b&3){if((e|0)==0)return f|0;a[b]=a[d]|0;b=b+1|0;d=d+1|0;e=e-1|0}while((e|0)>=4){c[b>>2]=c[d>>2];b=b+4|0;d=d+4|0;e=e-4|0}}while((e|0)>0){a[b]=a[d]|0;b=b+1|0;d=d+1|0;e=e-1|0}return f|0}function cO(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;f=b+e|0;if((e|0)>=20){d=d&255;e=b&3;g=d|d<<8|d<<16|d<<24;h=f&~3;if(e){e=b+4-e|0;while((b|0)<(e|0)){a[b]=d;b=b+1|0}}while((b|0)<(h|0)){c[b>>2]=g;b=b+4|0}}while((b|0)<(f|0)){a[b]=d;b=b+1|0}}function cP(){aR()}function cQ(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;a6[a&7](b|0,c|0,d|0,e|0,f|0)}function cR(a,b){a=a|0;b=b|0;a7[a&63](b|0)}function cS(a,b,c){a=a|0;b=b|0;c=c|0;a8[a&7](b|0,c|0)}function cT(a,b){a=a|0;b=b|0;return a9[a&3](b|0)|0}function cU(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return ba[a&3](b|0,c|0,d|0)|0}function cV(a){a=a|0;bb[a&3]()}function cW(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;bc[a&7](b|0,c|0,d|0,e|0,f|0,g|0)}function cX(a,b,c){a=a|0;b=b|0;c=c|0;return bd[a&7](b|0,c|0)|0}function cY(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;be[a&7](b|0,c|0,d|0,e|0)}function cZ(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;ac(0)}function c_(a){a=a|0;ac(1)}function c$(a,b){a=a|0;b=b|0;ac(2)}function c0(a){a=a|0;ac(3);return 0}function c1(a,b,c){a=a|0;b=b|0;c=c|0;ac(4);return 0}function c2(){ac(5)}function c3(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;ac(6)}function c4(a,b){a=a|0;b=b|0;ac(7);return 0}function c5(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;ac(8)}var a6=[cZ,cZ,cB,cZ,cC,cZ,cZ,cZ];var a7=[c_,c_,bH,c_,bE,c_,cJ,c_,bw,c_,cw,c_,b1,c_,bN,c_,cd,c_,ce,c_,bB,c_,ct,c_,bC,c_,cK,c_,bM,c_,cv,c_,cq,c_,cu,c_,bD,c_,bK,c_,b8,c_,bx,c_,cx,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_,c_];var a8=[c$,c$,bG,c$,bJ,c$,ca,c$];var a9=[c0,c0,cL,c0];var ba=[c1,c1,cy,c1];var bb=[c2,c2,cP,c2];var bc=[c3,c3,cD,c3,cE,c3,c3,c3];var bd=[c4,c4,bF,c4,bI,c4,b9,c4];var be=[c5,c5,cz,c5,cA,c5,c5,c5];return{_strlen:cM,_free:cG,_solve_string:by,_realloc:cH,__GLOBAL__I_a:cb,_memset:cO,__GLOBAL__I_a131:cs,_malloc:cF,_memcpy:cN,runPostSets:bv,stackAlloc:bf,stackSave:bg,stackRestore:bh,setThrew:bi,setTempRet0:bl,setTempRet1:bm,setTempRet2:bn,setTempRet3:bo,setTempRet4:bp,setTempRet5:bq,setTempRet6:br,setTempRet7:bs,setTempRet8:bt,setTempRet9:bu,dynCall_viiiii:cQ,dynCall_vi:cR,dynCall_vii:cS,dynCall_ii:cT,dynCall_iiii:cU,dynCall_v:cV,dynCall_viiiiii:cW,dynCall_iii:cX,dynCall_viiii:cY}}({Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},{abort:E,assert:y,asmPrintInt:function(a,b){t.print("int "+a+","+b)},asmPrintFloat:function(a,b){t.print("float "+a+","+b)},min:Da,invoke_viiiii:function(a,b,c,d,f,g){try{t.dynCall_viiiii(a,b,c,d,f,g)}catch(h){"number"!==typeof h&&"longjmp"!==h&&e(h),$.setThrew(1,0)}},invoke_vi:function(a,b){try{t.dynCall_vi(a,b)}catch(c){"number"!==typeof c&&"longjmp"!==c&&e(c),$.setThrew(1,0)}},invoke_vii:function(a,b,c){try{t.dynCall_vii(a,b,c)}catch(d){"number"!==typeof d&&"longjmp"!==d&&e(d),$.setThrew(1,0)}},invoke_ii:function(a,b){try{return t.dynCall_ii(a,b)}catch(c){"number"!==typeof c&&"longjmp"!==c&&e(c),$.setThrew(1,0)}},invoke_iiii:function(a,b,c,d){try{return t.dynCall_iiii(a,b,c,d)}catch(f){"number"!==typeof f&&"longjmp"!==f&&e(f),$.setThrew(1,0)}},invoke_v:function(a){try{t.dynCall_v(a)}catch(b){"number"!==typeof b&&"longjmp"!==b&&e(b),$.setThrew(1,0)}},invoke_viiiiii:function(a,b,c,d,f,g,h){try{t.dynCall_viiiiii(a,b,c,d,f,g,h)}catch(i){"number"!==typeof i&&"longjmp"!==i&&e(i),$.setThrew(1,0)}},invoke_iii:function(a,b,c){try{return t.dynCall_iii(a,b,c)}catch(d){"number"!==typeof d&&"longjmp"!==d&&e(d),$.setThrew(1,0)}},invoke_viiii:function(a,b,c,d,f){try{t.dynCall_viiii(a,b,c,d,f)}catch(g){"number"!==typeof g&&"longjmp"!==g&&e(g),$.setThrew(1,0)}},_strncmp:vc,_llvm_lifetime_end:r(),_llvm_uadd_with_overflow_i32:function(a,b){a>>>=0;b>>>=0;return($.setTempRet0(4294967295<a+b),a+b>>>0)|0},___cxa_call_unexpected:function(a){t.T("Unexpected exception thrown, this is not properly supported - aborting");ua=l;e(a)},_snprintf:function(a,b,c,d){c=oc(c,d);d=b===j?c.length:Math.min(c.length,Math.max(b-1,0));if(0>a)var a=-a,f=Ka(d+1),a=J[a>>2]=f;for(f=0;f<d;f++)I[a+f|0]=c[f];if(d<b||b===j)I[a+f|0]=0;return c.length},___cxa_throw:uc,_atexit:function(a,b){Ya.unshift({D:a,ha:b})},_abort:function(){t.abort()},_fprintf:pc,_llvm_eh_exception:Z,_printf:function(a,b){return pc(J[Eb>>2],a,b)},_fflush:r(),__reallyNegative:nc,_strtol:function(a,b,c){return xc(a,b,c,-2147483648,2147483647,32)},_fputc:zc,_sysconf:function(a){switch(a){case 30:return 4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return 1}R(Q.u);return-1},_puts:function(a){var b=J[Eb>>2],a=yc(a,b);return 0>a?a:0>zc(10,b)?-1:a+1},___setErrNo:R,_fwrite:lc,_send:function(a,b,c){return!Y.zb(a)?(R(Q.ea),-1):kc(a,b,c)},_write:kc,_fputs:yc,_exit:function(a){qc(a)},_time:function(a){var b=Math.floor(Date.now()/1e3);a&&(J[a>>2]=b);return b},___cxa_find_matching_catch:function(a,b){-1==a&&(a=J[Z.L>>2]);-1==b&&(b=J[Z.L+4>>2]);var c=Array.prototype.slice.call(arguments,2);0!=b&&!sc(b)&&0==J[J[b>>2]-8>>2]&&(a=J[a>>2]);for(var d=0;d<c.length;d++)if(tc(c[d],b,a))return($.setTempRet0(c[d]),a)|0;return($.setTempRet0(b),a)|0},___cxa_allocate_exception:function(a){return Ka(a)},_isspace:wc,___cxa_pure_virtual:function(){ua=l;e("Pure virtual function called!")},___cxa_is_number_type:sc,___cxa_guard_release:r(),__formatString:oc,___cxa_does_inherit:tc,___cxa_guard_acquire:function(a){return!I[a]?I[a]=1:0},__ZSt18uncaught_exceptionv:rc,_pwrite:function(a,b,c,d){a=V[a];if(!a)return R(Q.ea),-1;try{return dc(a,I,b,c,d)}catch(f){return Kb(f),-1}},_llvm_pow_f64:eb,_sbrk:Cc,___errno_location:function(){return rb},___gxx_personality_v0:r(),_llvm_lifetime_start:r(),__parseInt:xc,___resumeException:function(a){0==J[Z.L>>2]&&(J[Z.L>>2]=a);e(a+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.")},__exit:qc,_strcmp:function(a,b){return vc(a,b,ra)},STACKTOP:w,STACK_MAX:Ra,tempDoublePtr:pb,ABORT:ua,NaN:NaN,Infinity:Infinity,__ZTVN10__cxxabiv120__si_class_type_infoE:nb,___dso_handle:j,_stderr:jb,__ZTVN10__cxxabiv117__class_type_infoE:ob},N),mc=t._strlen=$._strlen;t._free=$._free;t._solve_string=$._solve_string;t._realloc=$._realloc;var lb=t.__GLOBAL__I_a=$.__GLOBAL__I_a,Bc=t._memset=$._memset,mb=t.__GLOBAL__I_a131=$.__GLOBAL__I_a131,Ka=t._malloc=$._malloc,Ac=t._memcpy=$._memcpy,kb=t.runPostSets=$.runPostSets;t.dynCall_viiiii=$.dynCall_viiiii;t.dynCall_vi=$.dynCall_vi;t.dynCall_vii=$.dynCall_vii;t.dynCall_ii=$.dynCall_ii;t.dynCall_iiii=$.dynCall_iiii;t.dynCall_v=$.dynCall_v;t.dynCall_viiiiii=$.dynCall_viiiiii;t.dynCall_iii=$.dynCall_iii;t.dynCall_viiii=$.dynCall_viiii;oa=function(a){return $.stackAlloc(a)};ha=function(){return $.stackSave()};ia=function(a){$.stackRestore(a)};function Tc(a){this.name="ExitStatus";this.message="Program terminated with exit("+a+")";this.status=a}Tc.prototype=Error();var Uc,Vc=m,gb=function Wc(){!t.calledRun&&Xc&&Yc();t.calledRun||(gb=Wc)};t.callMain=t.Td=function(a){function b(){for(var a=0;3>a;a++)d.push(0)}y(0==O,"cannot call main when async dependencies remain! (listen on __ATMAIN__)");y(0==Va.length,"cannot call main when preRun functions remain to be called");a=a||[];ba&&Vc!==m&&t.T("preload time: "+(Date.now()-Vc)+" ms");$a||($a=l,Ta(Wa));var c=a.length+1,d=[L(G("/bin/this.program"),"i8",0)];b();for(var f=0;f<c-1;f+=1)d.push(L(G(a[f]),"i8",0)),b();d.push(0);d=L(d,"i32",0);Uc=w;try{var g=t._main(c,d,0);t.noExitRuntime||Zc(g)}catch(h){h instanceof Tc||("SimulateInfiniteLoop"==h?t.noExitRuntime=l:(h&&("object"===typeof h&&h.stack)&&t.T("exception thrown: "+[h,h.stack]),e(h)))}finally{}};function Yc(a){function b(){$a||($a=l,Ta(Wa));Ta(Xa);t.calledRun=l;t._main&&Xc&&t.callMain(a);if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)bb(t.postRun.shift());Ta(Za)}a=a||t.arguments;Vc===m&&(Vc=Date.now());if(0<O)t.T("run() called, but dependencies remain, so not running");else{if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)ab(t.preRun.shift());Ta(Va);0<O||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1);ua||b()},1)):b())}}t.run=t.me=Yc;function Zc(a){ua=l;w=Uc;Ta(Ya);e(new Tc(a))}t.exit=t.Xd=Zc;function E(a){a&&(t.print(a),t.T(a));ua=l;e("abort() at "+Ma())}t.abort=t.abort=E;if(t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();var Xc=l;t.noInitialRun&&(Xc=n);Yc()}).call(this,require("_process"),"/vendor")},{_process:159,fs:83,path:156,ws:208}]},{},[1]);
